var uN=Object.defineProperty;var dN=(t,e,n)=>e in t?uN(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var Fe=(t,e,n)=>dN(t,typeof e!="symbol"?e+"":e,n);function hN(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in t)){const i=Object.getOwnPropertyDescriptor(r,s);i&&Object.defineProperty(t,s,i.get?i:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();function mw(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var gw={exports:{}},Au={},vw={exports:{}},ve={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var tl=Symbol.for("react.element"),fN=Symbol.for("react.portal"),pN=Symbol.for("react.fragment"),mN=Symbol.for("react.strict_mode"),gN=Symbol.for("react.profiler"),vN=Symbol.for("react.provider"),yN=Symbol.for("react.context"),xN=Symbol.for("react.forward_ref"),wN=Symbol.for("react.suspense"),_N=Symbol.for("react.memo"),EN=Symbol.for("react.lazy"),ry=Symbol.iterator;function TN(t){return t===null||typeof t!="object"?null:(t=ry&&t[ry]||t["@@iterator"],typeof t=="function"?t:null)}var yw={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},xw=Object.assign,ww={};function co(t,e,n){this.props=t,this.context=e,this.refs=ww,this.updater=n||yw}co.prototype.isReactComponent={};co.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};co.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function _w(){}_w.prototype=co.prototype;function $p(t,e,n){this.props=t,this.context=e,this.refs=ww,this.updater=n||yw}var Bp=$p.prototype=new _w;Bp.constructor=$p;xw(Bp,co.prototype);Bp.isPureReactComponent=!0;var sy=Array.isArray,Ew=Object.prototype.hasOwnProperty,Hp={current:null},Tw={key:!0,ref:!0,__self:!0,__source:!0};function Sw(t,e,n){var r,s={},i=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(i=""+e.key),e)Ew.call(e,r)&&!Tw.hasOwnProperty(r)&&(s[r]=e[r]);var a=arguments.length-2;if(a===1)s.children=n;else if(1<a){for(var u=Array(a),d=0;d<a;d++)u[d]=arguments[d+2];s.children=u}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)s[r]===void 0&&(s[r]=a[r]);return{$$typeof:tl,type:t,key:i,ref:o,props:s,_owner:Hp.current}}function SN(t,e){return{$$typeof:tl,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Wp(t){return typeof t=="object"&&t!==null&&t.$$typeof===tl}function bN(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var iy=/\/+/g;function sh(t,e){return typeof t=="object"&&t!==null&&t.key!=null?bN(""+t.key):e.toString(36)}function hc(t,e,n,r,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case tl:case fN:o=!0}}if(o)return o=t,s=s(o),t=r===""?"."+sh(o,0):r,sy(s)?(n="",t!=null&&(n=t.replace(iy,"$&/")+"/"),hc(s,e,n,"",function(d){return d})):s!=null&&(Wp(s)&&(s=SN(s,n+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(iy,"$&/")+"/")+t)),e.push(s)),1;if(o=0,r=r===""?".":r+":",sy(t))for(var a=0;a<t.length;a++){i=t[a];var u=r+sh(i,a);o+=hc(i,e,n,u,s)}else if(u=TN(t),typeof u=="function")for(t=u.call(t),a=0;!(i=t.next()).done;)i=i.value,u=r+sh(i,a++),o+=hc(i,e,n,u,s);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Vl(t,e,n){if(t==null)return t;var r=[],s=0;return hc(t,r,"","",function(i){return e.call(n,i,s++)}),r}function CN(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Pt={current:null},fc={transition:null},NN={ReactCurrentDispatcher:Pt,ReactCurrentBatchConfig:fc,ReactCurrentOwner:Hp};function bw(){throw Error("act(...) is not supported in production builds of React.")}ve.Children={map:Vl,forEach:function(t,e,n){Vl(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Vl(t,function(){e++}),e},toArray:function(t){return Vl(t,function(e){return e})||[]},only:function(t){if(!Wp(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};ve.Component=co;ve.Fragment=pN;ve.Profiler=gN;ve.PureComponent=$p;ve.StrictMode=mN;ve.Suspense=wN;ve.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=NN;ve.act=bw;ve.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=xw({},t.props),s=t.key,i=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,o=Hp.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(u in e)Ew.call(e,u)&&!Tw.hasOwnProperty(u)&&(r[u]=e[u]===void 0&&a!==void 0?a[u]:e[u])}var u=arguments.length-2;if(u===1)r.children=n;else if(1<u){a=Array(u);for(var d=0;d<u;d++)a[d]=arguments[d+2];r.children=a}return{$$typeof:tl,type:t.type,key:s,ref:i,props:r,_owner:o}};ve.createContext=function(t){return t={$$typeof:yN,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:vN,_context:t},t.Consumer=t};ve.createElement=Sw;ve.createFactory=function(t){var e=Sw.bind(null,t);return e.type=t,e};ve.createRef=function(){return{current:null}};ve.forwardRef=function(t){return{$$typeof:xN,render:t}};ve.isValidElement=Wp;ve.lazy=function(t){return{$$typeof:EN,_payload:{_status:-1,_result:t},_init:CN}};ve.memo=function(t,e){return{$$typeof:_N,type:t,compare:e===void 0?null:e}};ve.startTransition=function(t){var e=fc.transition;fc.transition={};try{t()}finally{fc.transition=e}};ve.unstable_act=bw;ve.useCallback=function(t,e){return Pt.current.useCallback(t,e)};ve.useContext=function(t){return Pt.current.useContext(t)};ve.useDebugValue=function(){};ve.useDeferredValue=function(t){return Pt.current.useDeferredValue(t)};ve.useEffect=function(t,e){return Pt.current.useEffect(t,e)};ve.useId=function(){return Pt.current.useId()};ve.useImperativeHandle=function(t,e,n){return Pt.current.useImperativeHandle(t,e,n)};ve.useInsertionEffect=function(t,e){return Pt.current.useInsertionEffect(t,e)};ve.useLayoutEffect=function(t,e){return Pt.current.useLayoutEffect(t,e)};ve.useMemo=function(t,e){return Pt.current.useMemo(t,e)};ve.useReducer=function(t,e,n){return Pt.current.useReducer(t,e,n)};ve.useRef=function(t){return Pt.current.useRef(t)};ve.useState=function(t){return Pt.current.useState(t)};ve.useSyncExternalStore=function(t,e,n){return Pt.current.useSyncExternalStore(t,e,n)};ve.useTransition=function(){return Pt.current.useTransition()};ve.version="18.3.1";vw.exports=ve;var m=vw.exports;const Sr=mw(m),qp=hN({__proto__:null,default:Sr},[m]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var IN=m,RN=Symbol.for("react.element"),AN=Symbol.for("react.fragment"),kN=Object.prototype.hasOwnProperty,PN=IN.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,jN={key:!0,ref:!0,__self:!0,__source:!0};function Cw(t,e,n){var r,s={},i=null,o=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)kN.call(e,r)&&!jN.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:RN,type:t,key:i,ref:o,props:s,_owner:PN.current}}Au.Fragment=AN;Au.jsx=Cw;Au.jsxs=Cw;gw.exports=Au;var l=gw.exports,Nw={exports:{}},sn={},Iw={exports:{}},Rw={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(O,$){var Z=O.length;O.push($);e:for(;0<Z;){var se=Z-1>>>1,U=O[se];if(0<s(U,$))O[se]=$,O[Z]=U,Z=se;else break e}}function n(O){return O.length===0?null:O[0]}function r(O){if(O.length===0)return null;var $=O[0],Z=O.pop();if(Z!==$){O[0]=Z;e:for(var se=0,U=O.length,J=U>>>1;se<J;){var W=2*(se+1)-1,B=O[W],ee=W+1,Y=O[ee];if(0>s(B,Z))ee<U&&0>s(Y,B)?(O[se]=Y,O[ee]=Z,se=ee):(O[se]=B,O[W]=Z,se=W);else if(ee<U&&0>s(Y,Z))O[se]=Y,O[ee]=Z,se=ee;else break e}}return $}function s(O,$){var Z=O.sortIndex-$.sortIndex;return Z!==0?Z:O.id-$.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var u=[],d=[],h=1,p=null,g=3,w=!1,C=!1,x=!1,T=typeof setTimeout=="function"?setTimeout:null,_=typeof clearTimeout=="function"?clearTimeout:null,y=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function E(O){for(var $=n(d);$!==null;){if($.callback===null)r(d);else if($.startTime<=O)r(d),$.sortIndex=$.expirationTime,e(u,$);else break;$=n(d)}}function k(O){if(x=!1,E(O),!C)if(n(u)!==null)C=!0,Q(M);else{var $=n(d);$!==null&&z(k,$.startTime-O)}}function M(O,$){C=!1,x&&(x=!1,_(S),S=-1),w=!0;var Z=g;try{for(E($),p=n(u);p!==null&&(!(p.expirationTime>$)||O&&!P());){var se=p.callback;if(typeof se=="function"){p.callback=null,g=p.priorityLevel;var U=se(p.expirationTime<=$);$=t.unstable_now(),typeof U=="function"?p.callback=U:p===n(u)&&r(u),E($)}else r(u);p=n(u)}if(p!==null)var J=!0;else{var W=n(d);W!==null&&z(k,W.startTime-$),J=!1}return J}finally{p=null,g=Z,w=!1}}var D=!1,b=null,S=-1,I=5,R=-1;function P(){return!(t.unstable_now()-R<I)}function j(){if(b!==null){var O=t.unstable_now();R=O;var $=!0;try{$=b(!0,O)}finally{$?A():(D=!1,b=null)}}else D=!1}var A;if(typeof y=="function")A=function(){y(j)};else if(typeof MessageChannel<"u"){var L=new MessageChannel,G=L.port2;L.port1.onmessage=j,A=function(){G.postMessage(null)}}else A=function(){T(j,0)};function Q(O){b=O,D||(D=!0,A())}function z(O,$){S=T(function(){O(t.unstable_now())},$)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(O){O.callback=null},t.unstable_continueExecution=function(){C||w||(C=!0,Q(M))},t.unstable_forceFrameRate=function(O){0>O||125<O?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):I=0<O?Math.floor(1e3/O):5},t.unstable_getCurrentPriorityLevel=function(){return g},t.unstable_getFirstCallbackNode=function(){return n(u)},t.unstable_next=function(O){switch(g){case 1:case 2:case 3:var $=3;break;default:$=g}var Z=g;g=$;try{return O()}finally{g=Z}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(O,$){switch(O){case 1:case 2:case 3:case 4:case 5:break;default:O=3}var Z=g;g=O;try{return $()}finally{g=Z}},t.unstable_scheduleCallback=function(O,$,Z){var se=t.unstable_now();switch(typeof Z=="object"&&Z!==null?(Z=Z.delay,Z=typeof Z=="number"&&0<Z?se+Z:se):Z=se,O){case 1:var U=-1;break;case 2:U=250;break;case 5:U=1073741823;break;case 4:U=1e4;break;default:U=5e3}return U=Z+U,O={id:h++,callback:$,priorityLevel:O,startTime:Z,expirationTime:U,sortIndex:-1},Z>se?(O.sortIndex=Z,e(d,O),n(u)===null&&O===n(d)&&(x?(_(S),S=-1):x=!0,z(k,Z-se))):(O.sortIndex=U,e(u,O),C||w||(C=!0,Q(M))),O},t.unstable_shouldYield=P,t.unstable_wrapCallback=function(O){var $=g;return function(){var Z=g;g=$;try{return O.apply(this,arguments)}finally{g=Z}}}})(Rw);Iw.exports=Rw;var DN=Iw.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var MN=m,rn=DN;function K(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Aw=new Set,Ea={};function Xs(t,e){$i(t,e),$i(t+"Capture",e)}function $i(t,e){for(Ea[t]=e,t=0;t<e.length;t++)Aw.add(e[t])}var sr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),of=Object.prototype.hasOwnProperty,ON=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,oy={},ay={};function VN(t){return of.call(ay,t)?!0:of.call(oy,t)?!1:ON.test(t)?ay[t]=!0:(oy[t]=!0,!1)}function LN(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function FN(t,e,n,r){if(e===null||typeof e>"u"||LN(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function jt(t,e,n,r,s,i,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=o}var pt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){pt[t]=new jt(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];pt[e]=new jt(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){pt[t]=new jt(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){pt[t]=new jt(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){pt[t]=new jt(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){pt[t]=new jt(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){pt[t]=new jt(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){pt[t]=new jt(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){pt[t]=new jt(t,5,!1,t.toLowerCase(),null,!1,!1)});var Kp=/[\-:]([a-z])/g;function Gp(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Kp,Gp);pt[e]=new jt(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Kp,Gp);pt[e]=new jt(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Kp,Gp);pt[e]=new jt(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){pt[t]=new jt(t,1,!1,t.toLowerCase(),null,!1,!1)});pt.xlinkHref=new jt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){pt[t]=new jt(t,1,!1,t.toLowerCase(),null,!0,!0)});function Qp(t,e,n,r){var s=pt.hasOwnProperty(e)?pt[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(FN(e,n,s,r)&&(n=null),r||s===null?VN(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var pr=MN.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Ll=Symbol.for("react.element"),vi=Symbol.for("react.portal"),yi=Symbol.for("react.fragment"),Yp=Symbol.for("react.strict_mode"),af=Symbol.for("react.profiler"),kw=Symbol.for("react.provider"),Pw=Symbol.for("react.context"),Xp=Symbol.for("react.forward_ref"),lf=Symbol.for("react.suspense"),cf=Symbol.for("react.suspense_list"),Jp=Symbol.for("react.memo"),Nr=Symbol.for("react.lazy"),jw=Symbol.for("react.offscreen"),ly=Symbol.iterator;function Fo(t){return t===null||typeof t!="object"?null:(t=ly&&t[ly]||t["@@iterator"],typeof t=="function"?t:null)}var He=Object.assign,ih;function Yo(t){if(ih===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);ih=e&&e[1]||""}return`
`+ih+t}var oh=!1;function ah(t,e){if(!t||oh)return"";oh=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(d){var r=d}Reflect.construct(t,[],e)}else{try{e.call()}catch(d){r=d}t.call(e.prototype)}else{try{throw Error()}catch(d){r=d}t()}}catch(d){if(d&&r&&typeof d.stack=="string"){for(var s=d.stack.split(`
`),i=r.stack.split(`
`),o=s.length-1,a=i.length-1;1<=o&&0<=a&&s[o]!==i[a];)a--;for(;1<=o&&0<=a;o--,a--)if(s[o]!==i[a]){if(o!==1||a!==1)do if(o--,a--,0>a||s[o]!==i[a]){var u=`
`+s[o].replace(" at new "," at ");return t.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",t.displayName)),u}while(1<=o&&0<=a);break}}}finally{oh=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Yo(t):""}function zN(t){switch(t.tag){case 5:return Yo(t.type);case 16:return Yo("Lazy");case 13:return Yo("Suspense");case 19:return Yo("SuspenseList");case 0:case 2:case 15:return t=ah(t.type,!1),t;case 11:return t=ah(t.type.render,!1),t;case 1:return t=ah(t.type,!0),t;default:return""}}function uf(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case yi:return"Fragment";case vi:return"Portal";case af:return"Profiler";case Yp:return"StrictMode";case lf:return"Suspense";case cf:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case Pw:return(t.displayName||"Context")+".Consumer";case kw:return(t._context.displayName||"Context")+".Provider";case Xp:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Jp:return e=t.displayName||null,e!==null?e:uf(t.type)||"Memo";case Nr:e=t._payload,t=t._init;try{return uf(t(e))}catch{}}return null}function UN(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return uf(e);case 8:return e===Yp?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function qr(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Dw(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function $N(t){var e=Dw(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(o){r=""+o,i.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Fl(t){t._valueTracker||(t._valueTracker=$N(t))}function Mw(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=Dw(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function Mc(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function df(t,e){var n=e.checked;return He({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function cy(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=qr(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function Ow(t,e){e=e.checked,e!=null&&Qp(t,"checked",e,!1)}function hf(t,e){Ow(t,e);var n=qr(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?ff(t,e.type,n):e.hasOwnProperty("defaultValue")&&ff(t,e.type,qr(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function uy(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function ff(t,e,n){(e!=="number"||Mc(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Xo=Array.isArray;function Ai(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+qr(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function pf(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(K(91));return He({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function dy(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(K(92));if(Xo(n)){if(1<n.length)throw Error(K(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:qr(n)}}function Vw(t,e){var n=qr(e.value),r=qr(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function hy(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function Lw(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function mf(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?Lw(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var zl,Fw=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(zl=zl||document.createElement("div"),zl.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=zl.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Ta(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var ia={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},BN=["Webkit","ms","Moz","O"];Object.keys(ia).forEach(function(t){BN.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),ia[e]=ia[t]})});function zw(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||ia.hasOwnProperty(t)&&ia[t]?(""+e).trim():e+"px"}function Uw(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=zw(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var HN=He({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function gf(t,e){if(e){if(HN[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(K(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(K(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(K(61))}if(e.style!=null&&typeof e.style!="object")throw Error(K(62))}}function vf(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var yf=null;function Zp(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var xf=null,ki=null,Pi=null;function fy(t){if(t=sl(t)){if(typeof xf!="function")throw Error(K(280));var e=t.stateNode;e&&(e=Mu(e),xf(t.stateNode,t.type,e))}}function $w(t){ki?Pi?Pi.push(t):Pi=[t]:ki=t}function Bw(){if(ki){var t=ki,e=Pi;if(Pi=ki=null,fy(t),e)for(t=0;t<e.length;t++)fy(e[t])}}function Hw(t,e){return t(e)}function Ww(){}var lh=!1;function qw(t,e,n){if(lh)return t(e,n);lh=!0;try{return Hw(t,e,n)}finally{lh=!1,(ki!==null||Pi!==null)&&(Ww(),Bw())}}function Sa(t,e){var n=t.stateNode;if(n===null)return null;var r=Mu(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(K(231,e,typeof n));return n}var wf=!1;if(sr)try{var zo={};Object.defineProperty(zo,"passive",{get:function(){wf=!0}}),window.addEventListener("test",zo,zo),window.removeEventListener("test",zo,zo)}catch{wf=!1}function WN(t,e,n,r,s,i,o,a,u){var d=Array.prototype.slice.call(arguments,3);try{e.apply(n,d)}catch(h){this.onError(h)}}var oa=!1,Oc=null,Vc=!1,_f=null,qN={onError:function(t){oa=!0,Oc=t}};function KN(t,e,n,r,s,i,o,a,u){oa=!1,Oc=null,WN.apply(qN,arguments)}function GN(t,e,n,r,s,i,o,a,u){if(KN.apply(this,arguments),oa){if(oa){var d=Oc;oa=!1,Oc=null}else throw Error(K(198));Vc||(Vc=!0,_f=d)}}function Js(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function Kw(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function py(t){if(Js(t)!==t)throw Error(K(188))}function QN(t){var e=t.alternate;if(!e){if(e=Js(t),e===null)throw Error(K(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return py(s),t;if(i===r)return py(s),e;i=i.sibling}throw Error(K(188))}if(n.return!==r.return)n=s,r=i;else{for(var o=!1,a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o){for(a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o)throw Error(K(189))}}if(n.alternate!==r)throw Error(K(190))}if(n.tag!==3)throw Error(K(188));return n.stateNode.current===n?t:e}function Gw(t){return t=QN(t),t!==null?Qw(t):null}function Qw(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=Qw(t);if(e!==null)return e;t=t.sibling}return null}var Yw=rn.unstable_scheduleCallback,my=rn.unstable_cancelCallback,YN=rn.unstable_shouldYield,XN=rn.unstable_requestPaint,Ye=rn.unstable_now,JN=rn.unstable_getCurrentPriorityLevel,em=rn.unstable_ImmediatePriority,Xw=rn.unstable_UserBlockingPriority,Lc=rn.unstable_NormalPriority,ZN=rn.unstable_LowPriority,Jw=rn.unstable_IdlePriority,ku=null,Vn=null;function eI(t){if(Vn&&typeof Vn.onCommitFiberRoot=="function")try{Vn.onCommitFiberRoot(ku,t,void 0,(t.current.flags&128)===128)}catch{}}var wn=Math.clz32?Math.clz32:rI,tI=Math.log,nI=Math.LN2;function rI(t){return t>>>=0,t===0?32:31-(tI(t)/nI|0)|0}var Ul=64,$l=4194304;function Jo(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Fc(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,i=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~s;a!==0?r=Jo(a):(i&=o,i!==0&&(r=Jo(i)))}else o=n&~s,o!==0?r=Jo(o):i!==0&&(r=Jo(i));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-wn(e),s=1<<n,r|=t[n],e&=~s;return r}function sI(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function iI(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var o=31-wn(i),a=1<<o,u=s[o];u===-1?(!(a&n)||a&r)&&(s[o]=sI(a,e)):u<=e&&(t.expiredLanes|=a),i&=~a}}function Ef(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function Zw(){var t=Ul;return Ul<<=1,!(Ul&4194240)&&(Ul=64),t}function ch(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function nl(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-wn(e),t[e]=n}function oI(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-wn(n),i=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~i}}function tm(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-wn(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var Re=0;function e_(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var t_,nm,n_,r_,s_,Tf=!1,Bl=[],Dr=null,Mr=null,Or=null,ba=new Map,Ca=new Map,Rr=[],aI="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function gy(t,e){switch(t){case"focusin":case"focusout":Dr=null;break;case"dragenter":case"dragleave":Mr=null;break;case"mouseover":case"mouseout":Or=null;break;case"pointerover":case"pointerout":ba.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ca.delete(e.pointerId)}}function Uo(t,e,n,r,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},e!==null&&(e=sl(e),e!==null&&nm(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function lI(t,e,n,r,s){switch(e){case"focusin":return Dr=Uo(Dr,t,e,n,r,s),!0;case"dragenter":return Mr=Uo(Mr,t,e,n,r,s),!0;case"mouseover":return Or=Uo(Or,t,e,n,r,s),!0;case"pointerover":var i=s.pointerId;return ba.set(i,Uo(ba.get(i)||null,t,e,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,Ca.set(i,Uo(Ca.get(i)||null,t,e,n,r,s)),!0}return!1}function i_(t){var e=bs(t.target);if(e!==null){var n=Js(e);if(n!==null){if(e=n.tag,e===13){if(e=Kw(n),e!==null){t.blockedOn=e,s_(t.priority,function(){n_(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function pc(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Sf(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);yf=r,n.target.dispatchEvent(r),yf=null}else return e=sl(n),e!==null&&nm(e),t.blockedOn=n,!1;e.shift()}return!0}function vy(t,e,n){pc(t)&&n.delete(e)}function cI(){Tf=!1,Dr!==null&&pc(Dr)&&(Dr=null),Mr!==null&&pc(Mr)&&(Mr=null),Or!==null&&pc(Or)&&(Or=null),ba.forEach(vy),Ca.forEach(vy)}function $o(t,e){t.blockedOn===e&&(t.blockedOn=null,Tf||(Tf=!0,rn.unstable_scheduleCallback(rn.unstable_NormalPriority,cI)))}function Na(t){function e(s){return $o(s,t)}if(0<Bl.length){$o(Bl[0],t);for(var n=1;n<Bl.length;n++){var r=Bl[n];r.blockedOn===t&&(r.blockedOn=null)}}for(Dr!==null&&$o(Dr,t),Mr!==null&&$o(Mr,t),Or!==null&&$o(Or,t),ba.forEach(e),Ca.forEach(e),n=0;n<Rr.length;n++)r=Rr[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Rr.length&&(n=Rr[0],n.blockedOn===null);)i_(n),n.blockedOn===null&&Rr.shift()}var ji=pr.ReactCurrentBatchConfig,zc=!0;function uI(t,e,n,r){var s=Re,i=ji.transition;ji.transition=null;try{Re=1,rm(t,e,n,r)}finally{Re=s,ji.transition=i}}function dI(t,e,n,r){var s=Re,i=ji.transition;ji.transition=null;try{Re=4,rm(t,e,n,r)}finally{Re=s,ji.transition=i}}function rm(t,e,n,r){if(zc){var s=Sf(t,e,n,r);if(s===null)xh(t,e,r,Uc,n),gy(t,r);else if(lI(s,t,e,n,r))r.stopPropagation();else if(gy(t,r),e&4&&-1<aI.indexOf(t)){for(;s!==null;){var i=sl(s);if(i!==null&&t_(i),i=Sf(t,e,n,r),i===null&&xh(t,e,r,Uc,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else xh(t,e,r,null,n)}}var Uc=null;function Sf(t,e,n,r){if(Uc=null,t=Zp(r),t=bs(t),t!==null)if(e=Js(t),e===null)t=null;else if(n=e.tag,n===13){if(t=Kw(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Uc=t,null}function o_(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(JN()){case em:return 1;case Xw:return 4;case Lc:case ZN:return 16;case Jw:return 536870912;default:return 16}default:return 16}}var kr=null,sm=null,mc=null;function a_(){if(mc)return mc;var t,e=sm,n=e.length,r,s="value"in kr?kr.value:kr.textContent,i=s.length;for(t=0;t<n&&e[t]===s[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===s[i-r];r++);return mc=s.slice(t,1<r?1-r:void 0)}function gc(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Hl(){return!0}function yy(){return!1}function on(t){function e(n,r,s,i,o){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(i):i[a]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?Hl:yy,this.isPropagationStopped=yy,this}return He(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Hl)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Hl)},persist:function(){},isPersistent:Hl}),e}var uo={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},im=on(uo),rl=He({},uo,{view:0,detail:0}),hI=on(rl),uh,dh,Bo,Pu=He({},rl,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:om,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Bo&&(Bo&&t.type==="mousemove"?(uh=t.screenX-Bo.screenX,dh=t.screenY-Bo.screenY):dh=uh=0,Bo=t),uh)},movementY:function(t){return"movementY"in t?t.movementY:dh}}),xy=on(Pu),fI=He({},Pu,{dataTransfer:0}),pI=on(fI),mI=He({},rl,{relatedTarget:0}),hh=on(mI),gI=He({},uo,{animationName:0,elapsedTime:0,pseudoElement:0}),vI=on(gI),yI=He({},uo,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),xI=on(yI),wI=He({},uo,{data:0}),wy=on(wI),_I={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},EI={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},TI={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function SI(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=TI[t])?!!e[t]:!1}function om(){return SI}var bI=He({},rl,{key:function(t){if(t.key){var e=_I[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=gc(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?EI[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:om,charCode:function(t){return t.type==="keypress"?gc(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?gc(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),CI=on(bI),NI=He({},Pu,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),_y=on(NI),II=He({},rl,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:om}),RI=on(II),AI=He({},uo,{propertyName:0,elapsedTime:0,pseudoElement:0}),kI=on(AI),PI=He({},Pu,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),jI=on(PI),DI=[9,13,27,32],am=sr&&"CompositionEvent"in window,aa=null;sr&&"documentMode"in document&&(aa=document.documentMode);var MI=sr&&"TextEvent"in window&&!aa,l_=sr&&(!am||aa&&8<aa&&11>=aa),Ey=" ",Ty=!1;function c_(t,e){switch(t){case"keyup":return DI.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function u_(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var xi=!1;function OI(t,e){switch(t){case"compositionend":return u_(e);case"keypress":return e.which!==32?null:(Ty=!0,Ey);case"textInput":return t=e.data,t===Ey&&Ty?null:t;default:return null}}function VI(t,e){if(xi)return t==="compositionend"||!am&&c_(t,e)?(t=a_(),mc=sm=kr=null,xi=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return l_&&e.locale!=="ko"?null:e.data;default:return null}}var LI={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Sy(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!LI[t.type]:e==="textarea"}function d_(t,e,n,r){$w(r),e=$c(e,"onChange"),0<e.length&&(n=new im("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var la=null,Ia=null;function FI(t){E_(t,0)}function ju(t){var e=Ei(t);if(Mw(e))return t}function zI(t,e){if(t==="change")return e}var h_=!1;if(sr){var fh;if(sr){var ph="oninput"in document;if(!ph){var by=document.createElement("div");by.setAttribute("oninput","return;"),ph=typeof by.oninput=="function"}fh=ph}else fh=!1;h_=fh&&(!document.documentMode||9<document.documentMode)}function Cy(){la&&(la.detachEvent("onpropertychange",f_),Ia=la=null)}function f_(t){if(t.propertyName==="value"&&ju(Ia)){var e=[];d_(e,Ia,t,Zp(t)),qw(FI,e)}}function UI(t,e,n){t==="focusin"?(Cy(),la=e,Ia=n,la.attachEvent("onpropertychange",f_)):t==="focusout"&&Cy()}function $I(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return ju(Ia)}function BI(t,e){if(t==="click")return ju(e)}function HI(t,e){if(t==="input"||t==="change")return ju(e)}function WI(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var En=typeof Object.is=="function"?Object.is:WI;function Ra(t,e){if(En(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!of.call(e,s)||!En(t[s],e[s]))return!1}return!0}function Ny(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Iy(t,e){var n=Ny(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Ny(n)}}function p_(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?p_(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function m_(){for(var t=window,e=Mc();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Mc(t.document)}return e}function lm(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function qI(t){var e=m_(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&p_(n.ownerDocument.documentElement,n)){if(r!==null&&lm(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!t.extend&&i>r&&(s=r,r=i,i=s),s=Iy(n,i);var o=Iy(n,r);s&&o&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),i>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var KI=sr&&"documentMode"in document&&11>=document.documentMode,wi=null,bf=null,ca=null,Cf=!1;function Ry(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Cf||wi==null||wi!==Mc(r)||(r=wi,"selectionStart"in r&&lm(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),ca&&Ra(ca,r)||(ca=r,r=$c(bf,"onSelect"),0<r.length&&(e=new im("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=wi)))}function Wl(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var _i={animationend:Wl("Animation","AnimationEnd"),animationiteration:Wl("Animation","AnimationIteration"),animationstart:Wl("Animation","AnimationStart"),transitionend:Wl("Transition","TransitionEnd")},mh={},g_={};sr&&(g_=document.createElement("div").style,"AnimationEvent"in window||(delete _i.animationend.animation,delete _i.animationiteration.animation,delete _i.animationstart.animation),"TransitionEvent"in window||delete _i.transitionend.transition);function Du(t){if(mh[t])return mh[t];if(!_i[t])return t;var e=_i[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in g_)return mh[t]=e[n];return t}var v_=Du("animationend"),y_=Du("animationiteration"),x_=Du("animationstart"),w_=Du("transitionend"),__=new Map,Ay="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function rs(t,e){__.set(t,e),Xs(e,[t])}for(var gh=0;gh<Ay.length;gh++){var vh=Ay[gh],GI=vh.toLowerCase(),QI=vh[0].toUpperCase()+vh.slice(1);rs(GI,"on"+QI)}rs(v_,"onAnimationEnd");rs(y_,"onAnimationIteration");rs(x_,"onAnimationStart");rs("dblclick","onDoubleClick");rs("focusin","onFocus");rs("focusout","onBlur");rs(w_,"onTransitionEnd");$i("onMouseEnter",["mouseout","mouseover"]);$i("onMouseLeave",["mouseout","mouseover"]);$i("onPointerEnter",["pointerout","pointerover"]);$i("onPointerLeave",["pointerout","pointerover"]);Xs("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Xs("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Xs("onBeforeInput",["compositionend","keypress","textInput","paste"]);Xs("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Xs("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Xs("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Zo="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),YI=new Set("cancel close invalid load scroll toggle".split(" ").concat(Zo));function ky(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,GN(r,e,void 0,t),t.currentTarget=null}function E_(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var i=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],u=a.instance,d=a.currentTarget;if(a=a.listener,u!==i&&s.isPropagationStopped())break e;ky(s,a,d),i=u}else for(o=0;o<r.length;o++){if(a=r[o],u=a.instance,d=a.currentTarget,a=a.listener,u!==i&&s.isPropagationStopped())break e;ky(s,a,d),i=u}}}if(Vc)throw t=_f,Vc=!1,_f=null,t}function Me(t,e){var n=e[kf];n===void 0&&(n=e[kf]=new Set);var r=t+"__bubble";n.has(r)||(T_(e,t,2,!1),n.add(r))}function yh(t,e,n){var r=0;e&&(r|=4),T_(n,t,r,e)}var ql="_reactListening"+Math.random().toString(36).slice(2);function Aa(t){if(!t[ql]){t[ql]=!0,Aw.forEach(function(n){n!=="selectionchange"&&(YI.has(n)||yh(n,!1,t),yh(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[ql]||(e[ql]=!0,yh("selectionchange",!1,e))}}function T_(t,e,n,r){switch(o_(e)){case 1:var s=uI;break;case 4:s=dI;break;default:s=rm}n=s.bind(null,e,n,t),s=void 0,!wf||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function xh(t,e,n,r,s){var i=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===s||a.nodeType===8&&a.parentNode===s)break;if(o===4)for(o=r.return;o!==null;){var u=o.tag;if((u===3||u===4)&&(u=o.stateNode.containerInfo,u===s||u.nodeType===8&&u.parentNode===s))return;o=o.return}for(;a!==null;){if(o=bs(a),o===null)return;if(u=o.tag,u===5||u===6){r=i=o;continue e}a=a.parentNode}}r=r.return}qw(function(){var d=i,h=Zp(n),p=[];e:{var g=__.get(t);if(g!==void 0){var w=im,C=t;switch(t){case"keypress":if(gc(n)===0)break e;case"keydown":case"keyup":w=CI;break;case"focusin":C="focus",w=hh;break;case"focusout":C="blur",w=hh;break;case"beforeblur":case"afterblur":w=hh;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":w=xy;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":w=pI;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":w=RI;break;case v_:case y_:case x_:w=vI;break;case w_:w=kI;break;case"scroll":w=hI;break;case"wheel":w=jI;break;case"copy":case"cut":case"paste":w=xI;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":w=_y}var x=(e&4)!==0,T=!x&&t==="scroll",_=x?g!==null?g+"Capture":null:g;x=[];for(var y=d,E;y!==null;){E=y;var k=E.stateNode;if(E.tag===5&&k!==null&&(E=k,_!==null&&(k=Sa(y,_),k!=null&&x.push(ka(y,k,E)))),T)break;y=y.return}0<x.length&&(g=new w(g,C,null,n,h),p.push({event:g,listeners:x}))}}if(!(e&7)){e:{if(g=t==="mouseover"||t==="pointerover",w=t==="mouseout"||t==="pointerout",g&&n!==yf&&(C=n.relatedTarget||n.fromElement)&&(bs(C)||C[ir]))break e;if((w||g)&&(g=h.window===h?h:(g=h.ownerDocument)?g.defaultView||g.parentWindow:window,w?(C=n.relatedTarget||n.toElement,w=d,C=C?bs(C):null,C!==null&&(T=Js(C),C!==T||C.tag!==5&&C.tag!==6)&&(C=null)):(w=null,C=d),w!==C)){if(x=xy,k="onMouseLeave",_="onMouseEnter",y="mouse",(t==="pointerout"||t==="pointerover")&&(x=_y,k="onPointerLeave",_="onPointerEnter",y="pointer"),T=w==null?g:Ei(w),E=C==null?g:Ei(C),g=new x(k,y+"leave",w,n,h),g.target=T,g.relatedTarget=E,k=null,bs(h)===d&&(x=new x(_,y+"enter",C,n,h),x.target=E,x.relatedTarget=T,k=x),T=k,w&&C)t:{for(x=w,_=C,y=0,E=x;E;E=ai(E))y++;for(E=0,k=_;k;k=ai(k))E++;for(;0<y-E;)x=ai(x),y--;for(;0<E-y;)_=ai(_),E--;for(;y--;){if(x===_||_!==null&&x===_.alternate)break t;x=ai(x),_=ai(_)}x=null}else x=null;w!==null&&Py(p,g,w,x,!1),C!==null&&T!==null&&Py(p,T,C,x,!0)}}e:{if(g=d?Ei(d):window,w=g.nodeName&&g.nodeName.toLowerCase(),w==="select"||w==="input"&&g.type==="file")var M=zI;else if(Sy(g))if(h_)M=HI;else{M=$I;var D=UI}else(w=g.nodeName)&&w.toLowerCase()==="input"&&(g.type==="checkbox"||g.type==="radio")&&(M=BI);if(M&&(M=M(t,d))){d_(p,M,n,h);break e}D&&D(t,g,d),t==="focusout"&&(D=g._wrapperState)&&D.controlled&&g.type==="number"&&ff(g,"number",g.value)}switch(D=d?Ei(d):window,t){case"focusin":(Sy(D)||D.contentEditable==="true")&&(wi=D,bf=d,ca=null);break;case"focusout":ca=bf=wi=null;break;case"mousedown":Cf=!0;break;case"contextmenu":case"mouseup":case"dragend":Cf=!1,Ry(p,n,h);break;case"selectionchange":if(KI)break;case"keydown":case"keyup":Ry(p,n,h)}var b;if(am)e:{switch(t){case"compositionstart":var S="onCompositionStart";break e;case"compositionend":S="onCompositionEnd";break e;case"compositionupdate":S="onCompositionUpdate";break e}S=void 0}else xi?c_(t,n)&&(S="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(S="onCompositionStart");S&&(l_&&n.locale!=="ko"&&(xi||S!=="onCompositionStart"?S==="onCompositionEnd"&&xi&&(b=a_()):(kr=h,sm="value"in kr?kr.value:kr.textContent,xi=!0)),D=$c(d,S),0<D.length&&(S=new wy(S,t,null,n,h),p.push({event:S,listeners:D}),b?S.data=b:(b=u_(n),b!==null&&(S.data=b)))),(b=MI?OI(t,n):VI(t,n))&&(d=$c(d,"onBeforeInput"),0<d.length&&(h=new wy("onBeforeInput","beforeinput",null,n,h),p.push({event:h,listeners:d}),h.data=b))}E_(p,e)})}function ka(t,e,n){return{instance:t,listener:e,currentTarget:n}}function $c(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=Sa(t,n),i!=null&&r.unshift(ka(t,i,s)),i=Sa(t,e),i!=null&&r.push(ka(t,i,s))),t=t.return}return r}function ai(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Py(t,e,n,r,s){for(var i=e._reactName,o=[];n!==null&&n!==r;){var a=n,u=a.alternate,d=a.stateNode;if(u!==null&&u===r)break;a.tag===5&&d!==null&&(a=d,s?(u=Sa(n,i),u!=null&&o.unshift(ka(n,u,a))):s||(u=Sa(n,i),u!=null&&o.push(ka(n,u,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var XI=/\r\n?/g,JI=/\u0000|\uFFFD/g;function jy(t){return(typeof t=="string"?t:""+t).replace(XI,`
`).replace(JI,"")}function Kl(t,e,n){if(e=jy(e),jy(t)!==e&&n)throw Error(K(425))}function Bc(){}var Nf=null,If=null;function Rf(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Af=typeof setTimeout=="function"?setTimeout:void 0,ZI=typeof clearTimeout=="function"?clearTimeout:void 0,Dy=typeof Promise=="function"?Promise:void 0,eR=typeof queueMicrotask=="function"?queueMicrotask:typeof Dy<"u"?function(t){return Dy.resolve(null).then(t).catch(tR)}:Af;function tR(t){setTimeout(function(){throw t})}function wh(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),Na(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);Na(e)}function Vr(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function My(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var ho=Math.random().toString(36).slice(2),Pn="__reactFiber$"+ho,Pa="__reactProps$"+ho,ir="__reactContainer$"+ho,kf="__reactEvents$"+ho,nR="__reactListeners$"+ho,rR="__reactHandles$"+ho;function bs(t){var e=t[Pn];if(e)return e;for(var n=t.parentNode;n;){if(e=n[ir]||n[Pn]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=My(t);t!==null;){if(n=t[Pn])return n;t=My(t)}return e}t=n,n=t.parentNode}return null}function sl(t){return t=t[Pn]||t[ir],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Ei(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(K(33))}function Mu(t){return t[Pa]||null}var Pf=[],Ti=-1;function ss(t){return{current:t}}function Ve(t){0>Ti||(t.current=Pf[Ti],Pf[Ti]=null,Ti--)}function Pe(t,e){Ti++,Pf[Ti]=t.current,t.current=e}var Kr={},Ct=ss(Kr),zt=ss(!1),Ds=Kr;function Bi(t,e){var n=t.type.contextTypes;if(!n)return Kr;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=e[i];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function Ut(t){return t=t.childContextTypes,t!=null}function Hc(){Ve(zt),Ve(Ct)}function Oy(t,e,n){if(Ct.current!==Kr)throw Error(K(168));Pe(Ct,e),Pe(zt,n)}function S_(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error(K(108,UN(t)||"Unknown",s));return He({},n,r)}function Wc(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Kr,Ds=Ct.current,Pe(Ct,t),Pe(zt,zt.current),!0}function Vy(t,e,n){var r=t.stateNode;if(!r)throw Error(K(169));n?(t=S_(t,e,Ds),r.__reactInternalMemoizedMergedChildContext=t,Ve(zt),Ve(Ct),Pe(Ct,t)):Ve(zt),Pe(zt,n)}var Jn=null,Ou=!1,_h=!1;function b_(t){Jn===null?Jn=[t]:Jn.push(t)}function sR(t){Ou=!0,b_(t)}function is(){if(!_h&&Jn!==null){_h=!0;var t=0,e=Re;try{var n=Jn;for(Re=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Jn=null,Ou=!1}catch(s){throw Jn!==null&&(Jn=Jn.slice(t+1)),Yw(em,is),s}finally{Re=e,_h=!1}}return null}var Si=[],bi=0,qc=null,Kc=0,an=[],ln=0,Ms=null,Zn=1,er="";function ws(t,e){Si[bi++]=Kc,Si[bi++]=qc,qc=t,Kc=e}function C_(t,e,n){an[ln++]=Zn,an[ln++]=er,an[ln++]=Ms,Ms=t;var r=Zn;t=er;var s=32-wn(r)-1;r&=~(1<<s),n+=1;var i=32-wn(e)+s;if(30<i){var o=s-s%5;i=(r&(1<<o)-1).toString(32),r>>=o,s-=o,Zn=1<<32-wn(e)+s|n<<s|r,er=i+t}else Zn=1<<i|n<<s|r,er=t}function cm(t){t.return!==null&&(ws(t,1),C_(t,1,0))}function um(t){for(;t===qc;)qc=Si[--bi],Si[bi]=null,Kc=Si[--bi],Si[bi]=null;for(;t===Ms;)Ms=an[--ln],an[ln]=null,er=an[--ln],an[ln]=null,Zn=an[--ln],an[ln]=null}var tn=null,Jt=null,Le=!1,xn=null;function N_(t,e){var n=cn(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function Ly(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,tn=t,Jt=Vr(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,tn=t,Jt=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Ms!==null?{id:Zn,overflow:er}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=cn(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,tn=t,Jt=null,!0):!1;default:return!1}}function jf(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Df(t){if(Le){var e=Jt;if(e){var n=e;if(!Ly(t,e)){if(jf(t))throw Error(K(418));e=Vr(n.nextSibling);var r=tn;e&&Ly(t,e)?N_(r,n):(t.flags=t.flags&-4097|2,Le=!1,tn=t)}}else{if(jf(t))throw Error(K(418));t.flags=t.flags&-4097|2,Le=!1,tn=t}}}function Fy(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;tn=t}function Gl(t){if(t!==tn)return!1;if(!Le)return Fy(t),Le=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Rf(t.type,t.memoizedProps)),e&&(e=Jt)){if(jf(t))throw I_(),Error(K(418));for(;e;)N_(t,e),e=Vr(e.nextSibling)}if(Fy(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(K(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Jt=Vr(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Jt=null}}else Jt=tn?Vr(t.stateNode.nextSibling):null;return!0}function I_(){for(var t=Jt;t;)t=Vr(t.nextSibling)}function Hi(){Jt=tn=null,Le=!1}function dm(t){xn===null?xn=[t]:xn.push(t)}var iR=pr.ReactCurrentBatchConfig;function Ho(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(K(309));var r=n.stateNode}if(!r)throw Error(K(147,t));var s=r,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(o){var a=s.refs;o===null?delete a[i]:a[i]=o},e._stringRef=i,e)}if(typeof t!="string")throw Error(K(284));if(!n._owner)throw Error(K(290,t))}return t}function Ql(t,e){throw t=Object.prototype.toString.call(e),Error(K(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function zy(t){var e=t._init;return e(t._payload)}function R_(t){function e(_,y){if(t){var E=_.deletions;E===null?(_.deletions=[y],_.flags|=16):E.push(y)}}function n(_,y){if(!t)return null;for(;y!==null;)e(_,y),y=y.sibling;return null}function r(_,y){for(_=new Map;y!==null;)y.key!==null?_.set(y.key,y):_.set(y.index,y),y=y.sibling;return _}function s(_,y){return _=Ur(_,y),_.index=0,_.sibling=null,_}function i(_,y,E){return _.index=E,t?(E=_.alternate,E!==null?(E=E.index,E<y?(_.flags|=2,y):E):(_.flags|=2,y)):(_.flags|=1048576,y)}function o(_){return t&&_.alternate===null&&(_.flags|=2),_}function a(_,y,E,k){return y===null||y.tag!==6?(y=Ih(E,_.mode,k),y.return=_,y):(y=s(y,E),y.return=_,y)}function u(_,y,E,k){var M=E.type;return M===yi?h(_,y,E.props.children,k,E.key):y!==null&&(y.elementType===M||typeof M=="object"&&M!==null&&M.$$typeof===Nr&&zy(M)===y.type)?(k=s(y,E.props),k.ref=Ho(_,y,E),k.return=_,k):(k=Tc(E.type,E.key,E.props,null,_.mode,k),k.ref=Ho(_,y,E),k.return=_,k)}function d(_,y,E,k){return y===null||y.tag!==4||y.stateNode.containerInfo!==E.containerInfo||y.stateNode.implementation!==E.implementation?(y=Rh(E,_.mode,k),y.return=_,y):(y=s(y,E.children||[]),y.return=_,y)}function h(_,y,E,k,M){return y===null||y.tag!==7?(y=As(E,_.mode,k,M),y.return=_,y):(y=s(y,E),y.return=_,y)}function p(_,y,E){if(typeof y=="string"&&y!==""||typeof y=="number")return y=Ih(""+y,_.mode,E),y.return=_,y;if(typeof y=="object"&&y!==null){switch(y.$$typeof){case Ll:return E=Tc(y.type,y.key,y.props,null,_.mode,E),E.ref=Ho(_,null,y),E.return=_,E;case vi:return y=Rh(y,_.mode,E),y.return=_,y;case Nr:var k=y._init;return p(_,k(y._payload),E)}if(Xo(y)||Fo(y))return y=As(y,_.mode,E,null),y.return=_,y;Ql(_,y)}return null}function g(_,y,E,k){var M=y!==null?y.key:null;if(typeof E=="string"&&E!==""||typeof E=="number")return M!==null?null:a(_,y,""+E,k);if(typeof E=="object"&&E!==null){switch(E.$$typeof){case Ll:return E.key===M?u(_,y,E,k):null;case vi:return E.key===M?d(_,y,E,k):null;case Nr:return M=E._init,g(_,y,M(E._payload),k)}if(Xo(E)||Fo(E))return M!==null?null:h(_,y,E,k,null);Ql(_,E)}return null}function w(_,y,E,k,M){if(typeof k=="string"&&k!==""||typeof k=="number")return _=_.get(E)||null,a(y,_,""+k,M);if(typeof k=="object"&&k!==null){switch(k.$$typeof){case Ll:return _=_.get(k.key===null?E:k.key)||null,u(y,_,k,M);case vi:return _=_.get(k.key===null?E:k.key)||null,d(y,_,k,M);case Nr:var D=k._init;return w(_,y,E,D(k._payload),M)}if(Xo(k)||Fo(k))return _=_.get(E)||null,h(y,_,k,M,null);Ql(y,k)}return null}function C(_,y,E,k){for(var M=null,D=null,b=y,S=y=0,I=null;b!==null&&S<E.length;S++){b.index>S?(I=b,b=null):I=b.sibling;var R=g(_,b,E[S],k);if(R===null){b===null&&(b=I);break}t&&b&&R.alternate===null&&e(_,b),y=i(R,y,S),D===null?M=R:D.sibling=R,D=R,b=I}if(S===E.length)return n(_,b),Le&&ws(_,S),M;if(b===null){for(;S<E.length;S++)b=p(_,E[S],k),b!==null&&(y=i(b,y,S),D===null?M=b:D.sibling=b,D=b);return Le&&ws(_,S),M}for(b=r(_,b);S<E.length;S++)I=w(b,_,S,E[S],k),I!==null&&(t&&I.alternate!==null&&b.delete(I.key===null?S:I.key),y=i(I,y,S),D===null?M=I:D.sibling=I,D=I);return t&&b.forEach(function(P){return e(_,P)}),Le&&ws(_,S),M}function x(_,y,E,k){var M=Fo(E);if(typeof M!="function")throw Error(K(150));if(E=M.call(E),E==null)throw Error(K(151));for(var D=M=null,b=y,S=y=0,I=null,R=E.next();b!==null&&!R.done;S++,R=E.next()){b.index>S?(I=b,b=null):I=b.sibling;var P=g(_,b,R.value,k);if(P===null){b===null&&(b=I);break}t&&b&&P.alternate===null&&e(_,b),y=i(P,y,S),D===null?M=P:D.sibling=P,D=P,b=I}if(R.done)return n(_,b),Le&&ws(_,S),M;if(b===null){for(;!R.done;S++,R=E.next())R=p(_,R.value,k),R!==null&&(y=i(R,y,S),D===null?M=R:D.sibling=R,D=R);return Le&&ws(_,S),M}for(b=r(_,b);!R.done;S++,R=E.next())R=w(b,_,S,R.value,k),R!==null&&(t&&R.alternate!==null&&b.delete(R.key===null?S:R.key),y=i(R,y,S),D===null?M=R:D.sibling=R,D=R);return t&&b.forEach(function(j){return e(_,j)}),Le&&ws(_,S),M}function T(_,y,E,k){if(typeof E=="object"&&E!==null&&E.type===yi&&E.key===null&&(E=E.props.children),typeof E=="object"&&E!==null){switch(E.$$typeof){case Ll:e:{for(var M=E.key,D=y;D!==null;){if(D.key===M){if(M=E.type,M===yi){if(D.tag===7){n(_,D.sibling),y=s(D,E.props.children),y.return=_,_=y;break e}}else if(D.elementType===M||typeof M=="object"&&M!==null&&M.$$typeof===Nr&&zy(M)===D.type){n(_,D.sibling),y=s(D,E.props),y.ref=Ho(_,D,E),y.return=_,_=y;break e}n(_,D);break}else e(_,D);D=D.sibling}E.type===yi?(y=As(E.props.children,_.mode,k,E.key),y.return=_,_=y):(k=Tc(E.type,E.key,E.props,null,_.mode,k),k.ref=Ho(_,y,E),k.return=_,_=k)}return o(_);case vi:e:{for(D=E.key;y!==null;){if(y.key===D)if(y.tag===4&&y.stateNode.containerInfo===E.containerInfo&&y.stateNode.implementation===E.implementation){n(_,y.sibling),y=s(y,E.children||[]),y.return=_,_=y;break e}else{n(_,y);break}else e(_,y);y=y.sibling}y=Rh(E,_.mode,k),y.return=_,_=y}return o(_);case Nr:return D=E._init,T(_,y,D(E._payload),k)}if(Xo(E))return C(_,y,E,k);if(Fo(E))return x(_,y,E,k);Ql(_,E)}return typeof E=="string"&&E!==""||typeof E=="number"?(E=""+E,y!==null&&y.tag===6?(n(_,y.sibling),y=s(y,E),y.return=_,_=y):(n(_,y),y=Ih(E,_.mode,k),y.return=_,_=y),o(_)):n(_,y)}return T}var Wi=R_(!0),A_=R_(!1),Gc=ss(null),Qc=null,Ci=null,hm=null;function fm(){hm=Ci=Qc=null}function pm(t){var e=Gc.current;Ve(Gc),t._currentValue=e}function Mf(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Di(t,e){Qc=t,hm=Ci=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Ft=!0),t.firstContext=null)}function hn(t){var e=t._currentValue;if(hm!==t)if(t={context:t,memoizedValue:e,next:null},Ci===null){if(Qc===null)throw Error(K(308));Ci=t,Qc.dependencies={lanes:0,firstContext:t}}else Ci=Ci.next=t;return e}var Cs=null;function mm(t){Cs===null?Cs=[t]:Cs.push(t)}function k_(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,mm(e)):(n.next=s.next,s.next=n),e.interleaved=n,or(t,r)}function or(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Ir=!1;function gm(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function P_(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function nr(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Lr(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,Se&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,or(t,n)}return s=r.interleaved,s===null?(e.next=e,mm(r)):(e.next=s.next,s.next=e),r.interleaved=e,or(t,n)}function vc(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,tm(t,n)}}function Uy(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=o:i=i.next=o,n=n.next}while(n!==null);i===null?s=i=e:i=i.next=e}else s=i=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Yc(t,e,n,r){var s=t.updateQueue;Ir=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,a=s.shared.pending;if(a!==null){s.shared.pending=null;var u=a,d=u.next;u.next=null,o===null?i=d:o.next=d,o=u;var h=t.alternate;h!==null&&(h=h.updateQueue,a=h.lastBaseUpdate,a!==o&&(a===null?h.firstBaseUpdate=d:a.next=d,h.lastBaseUpdate=u))}if(i!==null){var p=s.baseState;o=0,h=d=u=null,a=i;do{var g=a.lane,w=a.eventTime;if((r&g)===g){h!==null&&(h=h.next={eventTime:w,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var C=t,x=a;switch(g=e,w=n,x.tag){case 1:if(C=x.payload,typeof C=="function"){p=C.call(w,p,g);break e}p=C;break e;case 3:C.flags=C.flags&-65537|128;case 0:if(C=x.payload,g=typeof C=="function"?C.call(w,p,g):C,g==null)break e;p=He({},p,g);break e;case 2:Ir=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,g=s.effects,g===null?s.effects=[a]:g.push(a))}else w={eventTime:w,lane:g,tag:a.tag,payload:a.payload,callback:a.callback,next:null},h===null?(d=h=w,u=p):h=h.next=w,o|=g;if(a=a.next,a===null){if(a=s.shared.pending,a===null)break;g=a,a=g.next,g.next=null,s.lastBaseUpdate=g,s.shared.pending=null}}while(!0);if(h===null&&(u=p),s.baseState=u,s.firstBaseUpdate=d,s.lastBaseUpdate=h,e=s.shared.interleaved,e!==null){s=e;do o|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);Vs|=o,t.lanes=o,t.memoizedState=p}}function $y(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(K(191,s));s.call(r)}}}var il={},Ln=ss(il),ja=ss(il),Da=ss(il);function Ns(t){if(t===il)throw Error(K(174));return t}function vm(t,e){switch(Pe(Da,e),Pe(ja,t),Pe(Ln,il),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:mf(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=mf(e,t)}Ve(Ln),Pe(Ln,e)}function qi(){Ve(Ln),Ve(ja),Ve(Da)}function j_(t){Ns(Da.current);var e=Ns(Ln.current),n=mf(e,t.type);e!==n&&(Pe(ja,t),Pe(Ln,n))}function ym(t){ja.current===t&&(Ve(Ln),Ve(ja))}var ze=ss(0);function Xc(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Eh=[];function xm(){for(var t=0;t<Eh.length;t++)Eh[t]._workInProgressVersionPrimary=null;Eh.length=0}var yc=pr.ReactCurrentDispatcher,Th=pr.ReactCurrentBatchConfig,Os=0,Be=null,tt=null,it=null,Jc=!1,ua=!1,Ma=0,oR=0;function xt(){throw Error(K(321))}function wm(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!En(t[n],e[n]))return!1;return!0}function _m(t,e,n,r,s,i){if(Os=i,Be=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,yc.current=t===null||t.memoizedState===null?uR:dR,t=n(r,s),ua){i=0;do{if(ua=!1,Ma=0,25<=i)throw Error(K(301));i+=1,it=tt=null,e.updateQueue=null,yc.current=hR,t=n(r,s)}while(ua)}if(yc.current=Zc,e=tt!==null&&tt.next!==null,Os=0,it=tt=Be=null,Jc=!1,e)throw Error(K(300));return t}function Em(){var t=Ma!==0;return Ma=0,t}function Rn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return it===null?Be.memoizedState=it=t:it=it.next=t,it}function fn(){if(tt===null){var t=Be.alternate;t=t!==null?t.memoizedState:null}else t=tt.next;var e=it===null?Be.memoizedState:it.next;if(e!==null)it=e,tt=t;else{if(t===null)throw Error(K(310));tt=t,t={memoizedState:tt.memoizedState,baseState:tt.baseState,baseQueue:tt.baseQueue,queue:tt.queue,next:null},it===null?Be.memoizedState=it=t:it=it.next=t}return it}function Oa(t,e){return typeof e=="function"?e(t):e}function Sh(t){var e=fn(),n=e.queue;if(n===null)throw Error(K(311));n.lastRenderedReducer=t;var r=tt,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var a=o=null,u=null,d=i;do{var h=d.lane;if((Os&h)===h)u!==null&&(u=u.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),r=d.hasEagerState?d.eagerState:t(r,d.action);else{var p={lane:h,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};u===null?(a=u=p,o=r):u=u.next=p,Be.lanes|=h,Vs|=h}d=d.next}while(d!==null&&d!==i);u===null?o=r:u.next=a,En(r,e.memoizedState)||(Ft=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=u,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do i=s.lane,Be.lanes|=i,Vs|=i,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function bh(t){var e=fn(),n=e.queue;if(n===null)throw Error(K(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,i=e.memoizedState;if(s!==null){n.pending=null;var o=s=s.next;do i=t(i,o.action),o=o.next;while(o!==s);En(i,e.memoizedState)||(Ft=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,r]}function D_(){}function M_(t,e){var n=Be,r=fn(),s=e(),i=!En(r.memoizedState,s);if(i&&(r.memoizedState=s,Ft=!0),r=r.queue,Tm(L_.bind(null,n,r,t),[t]),r.getSnapshot!==e||i||it!==null&&it.memoizedState.tag&1){if(n.flags|=2048,Va(9,V_.bind(null,n,r,s,e),void 0,null),ot===null)throw Error(K(349));Os&30||O_(n,e,s)}return s}function O_(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Be.updateQueue,e===null?(e={lastEffect:null,stores:null},Be.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function V_(t,e,n,r){e.value=n,e.getSnapshot=r,F_(e)&&z_(t)}function L_(t,e,n){return n(function(){F_(e)&&z_(t)})}function F_(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!En(t,n)}catch{return!0}}function z_(t){var e=or(t,1);e!==null&&_n(e,t,1,-1)}function By(t){var e=Rn();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Oa,lastRenderedState:t},e.queue=t,t=t.dispatch=cR.bind(null,Be,t),[e.memoizedState,t]}function Va(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Be.updateQueue,e===null?(e={lastEffect:null,stores:null},Be.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function U_(){return fn().memoizedState}function xc(t,e,n,r){var s=Rn();Be.flags|=t,s.memoizedState=Va(1|e,n,void 0,r===void 0?null:r)}function Vu(t,e,n,r){var s=fn();r=r===void 0?null:r;var i=void 0;if(tt!==null){var o=tt.memoizedState;if(i=o.destroy,r!==null&&wm(r,o.deps)){s.memoizedState=Va(e,n,i,r);return}}Be.flags|=t,s.memoizedState=Va(1|e,n,i,r)}function Hy(t,e){return xc(8390656,8,t,e)}function Tm(t,e){return Vu(2048,8,t,e)}function $_(t,e){return Vu(4,2,t,e)}function B_(t,e){return Vu(4,4,t,e)}function H_(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function W_(t,e,n){return n=n!=null?n.concat([t]):null,Vu(4,4,H_.bind(null,e,t),n)}function Sm(){}function q_(t,e){var n=fn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&wm(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function K_(t,e){var n=fn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&wm(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function G_(t,e,n){return Os&21?(En(n,e)||(n=Zw(),Be.lanes|=n,Vs|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Ft=!0),t.memoizedState=n)}function aR(t,e){var n=Re;Re=n!==0&&4>n?n:4,t(!0);var r=Th.transition;Th.transition={};try{t(!1),e()}finally{Re=n,Th.transition=r}}function Q_(){return fn().memoizedState}function lR(t,e,n){var r=zr(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Y_(t))X_(e,n);else if(n=k_(t,e,n,r),n!==null){var s=kt();_n(n,t,r,s),J_(n,e,r)}}function cR(t,e,n){var r=zr(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Y_(t))X_(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var o=e.lastRenderedState,a=i(o,n);if(s.hasEagerState=!0,s.eagerState=a,En(a,o)){var u=e.interleaved;u===null?(s.next=s,mm(e)):(s.next=u.next,u.next=s),e.interleaved=s;return}}catch{}finally{}n=k_(t,e,s,r),n!==null&&(s=kt(),_n(n,t,r,s),J_(n,e,r))}}function Y_(t){var e=t.alternate;return t===Be||e!==null&&e===Be}function X_(t,e){ua=Jc=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function J_(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,tm(t,n)}}var Zc={readContext:hn,useCallback:xt,useContext:xt,useEffect:xt,useImperativeHandle:xt,useInsertionEffect:xt,useLayoutEffect:xt,useMemo:xt,useReducer:xt,useRef:xt,useState:xt,useDebugValue:xt,useDeferredValue:xt,useTransition:xt,useMutableSource:xt,useSyncExternalStore:xt,useId:xt,unstable_isNewReconciler:!1},uR={readContext:hn,useCallback:function(t,e){return Rn().memoizedState=[t,e===void 0?null:e],t},useContext:hn,useEffect:Hy,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,xc(4194308,4,H_.bind(null,e,t),n)},useLayoutEffect:function(t,e){return xc(4194308,4,t,e)},useInsertionEffect:function(t,e){return xc(4,2,t,e)},useMemo:function(t,e){var n=Rn();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=Rn();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=lR.bind(null,Be,t),[r.memoizedState,t]},useRef:function(t){var e=Rn();return t={current:t},e.memoizedState=t},useState:By,useDebugValue:Sm,useDeferredValue:function(t){return Rn().memoizedState=t},useTransition:function(){var t=By(!1),e=t[0];return t=aR.bind(null,t[1]),Rn().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Be,s=Rn();if(Le){if(n===void 0)throw Error(K(407));n=n()}else{if(n=e(),ot===null)throw Error(K(349));Os&30||O_(r,e,n)}s.memoizedState=n;var i={value:n,getSnapshot:e};return s.queue=i,Hy(L_.bind(null,r,i,t),[t]),r.flags|=2048,Va(9,V_.bind(null,r,i,n,e),void 0,null),n},useId:function(){var t=Rn(),e=ot.identifierPrefix;if(Le){var n=er,r=Zn;n=(r&~(1<<32-wn(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Ma++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=oR++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},dR={readContext:hn,useCallback:q_,useContext:hn,useEffect:Tm,useImperativeHandle:W_,useInsertionEffect:$_,useLayoutEffect:B_,useMemo:K_,useReducer:Sh,useRef:U_,useState:function(){return Sh(Oa)},useDebugValue:Sm,useDeferredValue:function(t){var e=fn();return G_(e,tt.memoizedState,t)},useTransition:function(){var t=Sh(Oa)[0],e=fn().memoizedState;return[t,e]},useMutableSource:D_,useSyncExternalStore:M_,useId:Q_,unstable_isNewReconciler:!1},hR={readContext:hn,useCallback:q_,useContext:hn,useEffect:Tm,useImperativeHandle:W_,useInsertionEffect:$_,useLayoutEffect:B_,useMemo:K_,useReducer:bh,useRef:U_,useState:function(){return bh(Oa)},useDebugValue:Sm,useDeferredValue:function(t){var e=fn();return tt===null?e.memoizedState=t:G_(e,tt.memoizedState,t)},useTransition:function(){var t=bh(Oa)[0],e=fn().memoizedState;return[t,e]},useMutableSource:D_,useSyncExternalStore:M_,useId:Q_,unstable_isNewReconciler:!1};function vn(t,e){if(t&&t.defaultProps){e=He({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function Of(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:He({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Lu={isMounted:function(t){return(t=t._reactInternals)?Js(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=kt(),s=zr(t),i=nr(r,s);i.payload=e,n!=null&&(i.callback=n),e=Lr(t,i,s),e!==null&&(_n(e,t,s,r),vc(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=kt(),s=zr(t),i=nr(r,s);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=Lr(t,i,s),e!==null&&(_n(e,t,s,r),vc(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=kt(),r=zr(t),s=nr(n,r);s.tag=2,e!=null&&(s.callback=e),e=Lr(t,s,r),e!==null&&(_n(e,t,r,n),vc(e,t,r))}};function Wy(t,e,n,r,s,i,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,i,o):e.prototype&&e.prototype.isPureReactComponent?!Ra(n,r)||!Ra(s,i):!0}function Z_(t,e,n){var r=!1,s=Kr,i=e.contextType;return typeof i=="object"&&i!==null?i=hn(i):(s=Ut(e)?Ds:Ct.current,r=e.contextTypes,i=(r=r!=null)?Bi(t,s):Kr),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Lu,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function qy(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&Lu.enqueueReplaceState(e,e.state,null)}function Vf(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},gm(t);var i=e.contextType;typeof i=="object"&&i!==null?s.context=hn(i):(i=Ut(e)?Ds:Ct.current,s.context=Bi(t,i)),s.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(Of(t,e,i,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&Lu.enqueueReplaceState(s,s.state,null),Yc(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function Ki(t,e){try{var n="",r=e;do n+=zN(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:s,digest:null}}function Ch(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Lf(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var fR=typeof WeakMap=="function"?WeakMap:Map;function e1(t,e,n){n=nr(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){tu||(tu=!0,Gf=r),Lf(t,e)},n}function t1(t,e,n){n=nr(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){Lf(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){Lf(t,e),typeof r!="function"&&(Fr===null?Fr=new Set([this]):Fr.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function Ky(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new fR;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=NR.bind(null,t,e,n),e.then(t,t))}function Gy(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function Qy(t,e,n,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=nr(-1,1),e.tag=2,Lr(n,e,1))),n.lanes|=1),t)}var pR=pr.ReactCurrentOwner,Ft=!1;function Rt(t,e,n,r){e.child=t===null?A_(e,null,n,r):Wi(e,t.child,n,r)}function Yy(t,e,n,r,s){n=n.render;var i=e.ref;return Di(e,s),r=_m(t,e,n,r,i,s),n=Em(),t!==null&&!Ft?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,ar(t,e,s)):(Le&&n&&cm(e),e.flags|=1,Rt(t,e,r,s),e.child)}function Xy(t,e,n,r,s){if(t===null){var i=n.type;return typeof i=="function"&&!Pm(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,n1(t,e,i,r,s)):(t=Tc(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&s)){var o=i.memoizedProps;if(n=n.compare,n=n!==null?n:Ra,n(o,r)&&t.ref===e.ref)return ar(t,e,s)}return e.flags|=1,t=Ur(i,r),t.ref=e.ref,t.return=e,e.child=t}function n1(t,e,n,r,s){if(t!==null){var i=t.memoizedProps;if(Ra(i,r)&&t.ref===e.ref)if(Ft=!1,e.pendingProps=r=i,(t.lanes&s)!==0)t.flags&131072&&(Ft=!0);else return e.lanes=t.lanes,ar(t,e,s)}return Ff(t,e,n,r,s)}function r1(t,e,n){var r=e.pendingProps,s=r.children,i=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Pe(Ii,Qt),Qt|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Pe(Ii,Qt),Qt|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,Pe(Ii,Qt),Qt|=r}else i!==null?(r=i.baseLanes|n,e.memoizedState=null):r=n,Pe(Ii,Qt),Qt|=r;return Rt(t,e,s,n),e.child}function s1(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Ff(t,e,n,r,s){var i=Ut(n)?Ds:Ct.current;return i=Bi(e,i),Di(e,s),n=_m(t,e,n,r,i,s),r=Em(),t!==null&&!Ft?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,ar(t,e,s)):(Le&&r&&cm(e),e.flags|=1,Rt(t,e,n,s),e.child)}function Jy(t,e,n,r,s){if(Ut(n)){var i=!0;Wc(e)}else i=!1;if(Di(e,s),e.stateNode===null)wc(t,e),Z_(e,n,r),Vf(e,n,r,s),r=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var u=o.context,d=n.contextType;typeof d=="object"&&d!==null?d=hn(d):(d=Ut(n)?Ds:Ct.current,d=Bi(e,d));var h=n.getDerivedStateFromProps,p=typeof h=="function"||typeof o.getSnapshotBeforeUpdate=="function";p||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||u!==d)&&qy(e,o,r,d),Ir=!1;var g=e.memoizedState;o.state=g,Yc(e,r,o,s),u=e.memoizedState,a!==r||g!==u||zt.current||Ir?(typeof h=="function"&&(Of(e,n,h,r),u=e.memoizedState),(a=Ir||Wy(e,n,a,r,g,u,d))?(p||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=u),o.props=r,o.state=u,o.context=d,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,P_(t,e),a=e.memoizedProps,d=e.type===e.elementType?a:vn(e.type,a),o.props=d,p=e.pendingProps,g=o.context,u=n.contextType,typeof u=="object"&&u!==null?u=hn(u):(u=Ut(n)?Ds:Ct.current,u=Bi(e,u));var w=n.getDerivedStateFromProps;(h=typeof w=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==p||g!==u)&&qy(e,o,r,u),Ir=!1,g=e.memoizedState,o.state=g,Yc(e,r,o,s);var C=e.memoizedState;a!==p||g!==C||zt.current||Ir?(typeof w=="function"&&(Of(e,n,w,r),C=e.memoizedState),(d=Ir||Wy(e,n,d,r,g,C,u)||!1)?(h||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,C,u),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,C,u)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&g===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&g===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=C),o.props=r,o.state=C,o.context=u,r=d):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&g===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&g===t.memoizedState||(e.flags|=1024),r=!1)}return zf(t,e,n,r,i,s)}function zf(t,e,n,r,s,i){s1(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return s&&Vy(e,n,!1),ar(t,e,i);r=e.stateNode,pR.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=Wi(e,t.child,null,i),e.child=Wi(e,null,a,i)):Rt(t,e,a,i),e.memoizedState=r.state,s&&Vy(e,n,!0),e.child}function i1(t){var e=t.stateNode;e.pendingContext?Oy(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Oy(t,e.context,!1),vm(t,e.containerInfo)}function Zy(t,e,n,r,s){return Hi(),dm(s),e.flags|=256,Rt(t,e,n,r),e.child}var Uf={dehydrated:null,treeContext:null,retryLane:0};function $f(t){return{baseLanes:t,cachePool:null,transitions:null}}function o1(t,e,n){var r=e.pendingProps,s=ze.current,i=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(s&2)!==0),a?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),Pe(ze,s&1),t===null)return Df(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,i?(r=e.mode,i=e.child,o={mode:"hidden",children:o},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=Uu(o,r,0,null),t=As(t,r,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=$f(n),e.memoizedState=Uf,t):bm(e,o));if(s=t.memoizedState,s!==null&&(a=s.dehydrated,a!==null))return mR(t,e,o,r,a,s,n);if(i){i=r.fallback,o=e.mode,s=t.child,a=s.sibling;var u={mode:"hidden",children:r.children};return!(o&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=u,e.deletions=null):(r=Ur(s,u),r.subtreeFlags=s.subtreeFlags&14680064),a!==null?i=Ur(a,i):(i=As(i,o,n,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,o=t.child.memoizedState,o=o===null?$f(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=t.childLanes&~n,e.memoizedState=Uf,r}return i=t.child,t=i.sibling,r=Ur(i,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function bm(t,e){return e=Uu({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Yl(t,e,n,r){return r!==null&&dm(r),Wi(e,t.child,null,n),t=bm(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function mR(t,e,n,r,s,i,o){if(n)return e.flags&256?(e.flags&=-257,r=Ch(Error(K(422))),Yl(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=r.fallback,s=e.mode,r=Uu({mode:"visible",children:r.children},s,0,null),i=As(i,s,o,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,e.mode&1&&Wi(e,t.child,null,o),e.child.memoizedState=$f(o),e.memoizedState=Uf,i);if(!(e.mode&1))return Yl(t,e,o,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var a=r.dgst;return r=a,i=Error(K(419)),r=Ch(i,r,void 0),Yl(t,e,o,r)}if(a=(o&t.childLanes)!==0,Ft||a){if(r=ot,r!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,or(t,s),_n(r,t,s,-1))}return km(),r=Ch(Error(K(421))),Yl(t,e,o,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=IR.bind(null,t),s._reactRetry=e,null):(t=i.treeContext,Jt=Vr(s.nextSibling),tn=e,Le=!0,xn=null,t!==null&&(an[ln++]=Zn,an[ln++]=er,an[ln++]=Ms,Zn=t.id,er=t.overflow,Ms=e),e=bm(e,r.children),e.flags|=4096,e)}function ex(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),Mf(t.return,e,n)}function Nh(t,e,n,r,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function a1(t,e,n){var r=e.pendingProps,s=r.revealOrder,i=r.tail;if(Rt(t,e,r.children,n),r=ze.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&ex(t,n,e);else if(t.tag===19)ex(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(Pe(ze,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&Xc(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),Nh(e,!1,s,n,i);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&Xc(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}Nh(e,!0,n,null,i);break;case"together":Nh(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function wc(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function ar(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Vs|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(K(153));if(e.child!==null){for(t=e.child,n=Ur(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Ur(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function gR(t,e,n){switch(e.tag){case 3:i1(e),Hi();break;case 5:j_(e);break;case 1:Ut(e.type)&&Wc(e);break;case 4:vm(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;Pe(Gc,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Pe(ze,ze.current&1),e.flags|=128,null):n&e.child.childLanes?o1(t,e,n):(Pe(ze,ze.current&1),t=ar(t,e,n),t!==null?t.sibling:null);Pe(ze,ze.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return a1(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),Pe(ze,ze.current),r)break;return null;case 22:case 23:return e.lanes=0,r1(t,e,n)}return ar(t,e,n)}var l1,Bf,c1,u1;l1=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Bf=function(){};c1=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,Ns(Ln.current);var i=null;switch(n){case"input":s=df(t,s),r=df(t,r),i=[];break;case"select":s=He({},s,{value:void 0}),r=He({},r,{value:void 0}),i=[];break;case"textarea":s=pf(t,s),r=pf(t,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Bc)}gf(n,r);var o;n=null;for(d in s)if(!r.hasOwnProperty(d)&&s.hasOwnProperty(d)&&s[d]!=null)if(d==="style"){var a=s[d];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(Ea.hasOwnProperty(d)?i||(i=[]):(i=i||[]).push(d,null));for(d in r){var u=r[d];if(a=s!=null?s[d]:void 0,r.hasOwnProperty(d)&&u!==a&&(u!=null||a!=null))if(d==="style")if(a){for(o in a)!a.hasOwnProperty(o)||u&&u.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in u)u.hasOwnProperty(o)&&a[o]!==u[o]&&(n||(n={}),n[o]=u[o])}else n||(i||(i=[]),i.push(d,n)),n=u;else d==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,a=a?a.__html:void 0,u!=null&&a!==u&&(i=i||[]).push(d,u)):d==="children"?typeof u!="string"&&typeof u!="number"||(i=i||[]).push(d,""+u):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(Ea.hasOwnProperty(d)?(u!=null&&d==="onScroll"&&Me("scroll",t),i||a===u||(i=[])):(i=i||[]).push(d,u))}n&&(i=i||[]).push("style",n);var d=i;(e.updateQueue=d)&&(e.flags|=4)}};u1=function(t,e,n,r){n!==r&&(e.flags|=4)};function Wo(t,e){if(!Le)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function wt(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function vR(t,e,n){var r=e.pendingProps;switch(um(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return wt(e),null;case 1:return Ut(e.type)&&Hc(),wt(e),null;case 3:return r=e.stateNode,qi(),Ve(zt),Ve(Ct),xm(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Gl(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,xn!==null&&(Xf(xn),xn=null))),Bf(t,e),wt(e),null;case 5:ym(e);var s=Ns(Da.current);if(n=e.type,t!==null&&e.stateNode!=null)c1(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(K(166));return wt(e),null}if(t=Ns(Ln.current),Gl(e)){r=e.stateNode,n=e.type;var i=e.memoizedProps;switch(r[Pn]=e,r[Pa]=i,t=(e.mode&1)!==0,n){case"dialog":Me("cancel",r),Me("close",r);break;case"iframe":case"object":case"embed":Me("load",r);break;case"video":case"audio":for(s=0;s<Zo.length;s++)Me(Zo[s],r);break;case"source":Me("error",r);break;case"img":case"image":case"link":Me("error",r),Me("load",r);break;case"details":Me("toggle",r);break;case"input":cy(r,i),Me("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},Me("invalid",r);break;case"textarea":dy(r,i),Me("invalid",r)}gf(n,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var a=i[o];o==="children"?typeof a=="string"?r.textContent!==a&&(i.suppressHydrationWarning!==!0&&Kl(r.textContent,a,t),s=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(i.suppressHydrationWarning!==!0&&Kl(r.textContent,a,t),s=["children",""+a]):Ea.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&Me("scroll",r)}switch(n){case"input":Fl(r),uy(r,i,!0);break;case"textarea":Fl(r),hy(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=Bc)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=Lw(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[Pn]=e,t[Pa]=r,l1(t,e,!1,!1),e.stateNode=t;e:{switch(o=vf(n,r),n){case"dialog":Me("cancel",t),Me("close",t),s=r;break;case"iframe":case"object":case"embed":Me("load",t),s=r;break;case"video":case"audio":for(s=0;s<Zo.length;s++)Me(Zo[s],t);s=r;break;case"source":Me("error",t),s=r;break;case"img":case"image":case"link":Me("error",t),Me("load",t),s=r;break;case"details":Me("toggle",t),s=r;break;case"input":cy(t,r),s=df(t,r),Me("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=He({},r,{value:void 0}),Me("invalid",t);break;case"textarea":dy(t,r),s=pf(t,r),Me("invalid",t);break;default:s=r}gf(n,s),a=s;for(i in a)if(a.hasOwnProperty(i)){var u=a[i];i==="style"?Uw(t,u):i==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&Fw(t,u)):i==="children"?typeof u=="string"?(n!=="textarea"||u!=="")&&Ta(t,u):typeof u=="number"&&Ta(t,""+u):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(Ea.hasOwnProperty(i)?u!=null&&i==="onScroll"&&Me("scroll",t):u!=null&&Qp(t,i,u,o))}switch(n){case"input":Fl(t),uy(t,r,!1);break;case"textarea":Fl(t),hy(t);break;case"option":r.value!=null&&t.setAttribute("value",""+qr(r.value));break;case"select":t.multiple=!!r.multiple,i=r.value,i!=null?Ai(t,!!r.multiple,i,!1):r.defaultValue!=null&&Ai(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=Bc)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return wt(e),null;case 6:if(t&&e.stateNode!=null)u1(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(K(166));if(n=Ns(Da.current),Ns(Ln.current),Gl(e)){if(r=e.stateNode,n=e.memoizedProps,r[Pn]=e,(i=r.nodeValue!==n)&&(t=tn,t!==null))switch(t.tag){case 3:Kl(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Kl(r.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Pn]=e,e.stateNode=r}return wt(e),null;case 13:if(Ve(ze),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Le&&Jt!==null&&e.mode&1&&!(e.flags&128))I_(),Hi(),e.flags|=98560,i=!1;else if(i=Gl(e),r!==null&&r.dehydrated!==null){if(t===null){if(!i)throw Error(K(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(K(317));i[Pn]=e}else Hi(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;wt(e),i=!1}else xn!==null&&(Xf(xn),xn=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||ze.current&1?nt===0&&(nt=3):km())),e.updateQueue!==null&&(e.flags|=4),wt(e),null);case 4:return qi(),Bf(t,e),t===null&&Aa(e.stateNode.containerInfo),wt(e),null;case 10:return pm(e.type._context),wt(e),null;case 17:return Ut(e.type)&&Hc(),wt(e),null;case 19:if(Ve(ze),i=e.memoizedState,i===null)return wt(e),null;if(r=(e.flags&128)!==0,o=i.rendering,o===null)if(r)Wo(i,!1);else{if(nt!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=Xc(t),o!==null){for(e.flags|=128,Wo(i,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)i=n,t=r,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,t=o.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Pe(ze,ze.current&1|2),e.child}t=t.sibling}i.tail!==null&&Ye()>Gi&&(e.flags|=128,r=!0,Wo(i,!1),e.lanes=4194304)}else{if(!r)if(t=Xc(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Wo(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!Le)return wt(e),null}else 2*Ye()-i.renderingStartTime>Gi&&n!==1073741824&&(e.flags|=128,r=!0,Wo(i,!1),e.lanes=4194304);i.isBackwards?(o.sibling=e.child,e.child=o):(n=i.last,n!==null?n.sibling=o:e.child=o,i.last=o)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=Ye(),e.sibling=null,n=ze.current,Pe(ze,r?n&1|2:n&1),e):(wt(e),null);case 22:case 23:return Am(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Qt&1073741824&&(wt(e),e.subtreeFlags&6&&(e.flags|=8192)):wt(e),null;case 24:return null;case 25:return null}throw Error(K(156,e.tag))}function yR(t,e){switch(um(e),e.tag){case 1:return Ut(e.type)&&Hc(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return qi(),Ve(zt),Ve(Ct),xm(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return ym(e),null;case 13:if(Ve(ze),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(K(340));Hi()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Ve(ze),null;case 4:return qi(),null;case 10:return pm(e.type._context),null;case 22:case 23:return Am(),null;case 24:return null;default:return null}}var Xl=!1,Tt=!1,xR=typeof WeakSet=="function"?WeakSet:Set,re=null;function Ni(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Ke(t,e,r)}else n.current=null}function Hf(t,e,n){try{n()}catch(r){Ke(t,e,r)}}var tx=!1;function wR(t,e){if(Nf=zc,t=m_(),lm(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var o=0,a=-1,u=-1,d=0,h=0,p=t,g=null;t:for(;;){for(var w;p!==n||s!==0&&p.nodeType!==3||(a=o+s),p!==i||r!==0&&p.nodeType!==3||(u=o+r),p.nodeType===3&&(o+=p.nodeValue.length),(w=p.firstChild)!==null;)g=p,p=w;for(;;){if(p===t)break t;if(g===n&&++d===s&&(a=o),g===i&&++h===r&&(u=o),(w=p.nextSibling)!==null)break;p=g,g=p.parentNode}p=w}n=a===-1||u===-1?null:{start:a,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(If={focusedElem:t,selectionRange:n},zc=!1,re=e;re!==null;)if(e=re,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,re=t;else for(;re!==null;){e=re;try{var C=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(C!==null){var x=C.memoizedProps,T=C.memoizedState,_=e.stateNode,y=_.getSnapshotBeforeUpdate(e.elementType===e.type?x:vn(e.type,x),T);_.__reactInternalSnapshotBeforeUpdate=y}break;case 3:var E=e.stateNode.containerInfo;E.nodeType===1?E.textContent="":E.nodeType===9&&E.documentElement&&E.removeChild(E.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(K(163))}}catch(k){Ke(e,e.return,k)}if(t=e.sibling,t!==null){t.return=e.return,re=t;break}re=e.return}return C=tx,tx=!1,C}function da(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,i!==void 0&&Hf(e,n,i)}s=s.next}while(s!==r)}}function Fu(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function Wf(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function d1(t){var e=t.alternate;e!==null&&(t.alternate=null,d1(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Pn],delete e[Pa],delete e[kf],delete e[nR],delete e[rR])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function h1(t){return t.tag===5||t.tag===3||t.tag===4}function nx(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||h1(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function qf(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Bc));else if(r!==4&&(t=t.child,t!==null))for(qf(t,e,n),t=t.sibling;t!==null;)qf(t,e,n),t=t.sibling}function Kf(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(Kf(t,e,n),t=t.sibling;t!==null;)Kf(t,e,n),t=t.sibling}var ut=null,yn=!1;function _r(t,e,n){for(n=n.child;n!==null;)f1(t,e,n),n=n.sibling}function f1(t,e,n){if(Vn&&typeof Vn.onCommitFiberUnmount=="function")try{Vn.onCommitFiberUnmount(ku,n)}catch{}switch(n.tag){case 5:Tt||Ni(n,e);case 6:var r=ut,s=yn;ut=null,_r(t,e,n),ut=r,yn=s,ut!==null&&(yn?(t=ut,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):ut.removeChild(n.stateNode));break;case 18:ut!==null&&(yn?(t=ut,n=n.stateNode,t.nodeType===8?wh(t.parentNode,n):t.nodeType===1&&wh(t,n),Na(t)):wh(ut,n.stateNode));break;case 4:r=ut,s=yn,ut=n.stateNode.containerInfo,yn=!0,_r(t,e,n),ut=r,yn=s;break;case 0:case 11:case 14:case 15:if(!Tt&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&Hf(n,e,o),s=s.next}while(s!==r)}_r(t,e,n);break;case 1:if(!Tt&&(Ni(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){Ke(n,e,a)}_r(t,e,n);break;case 21:_r(t,e,n);break;case 22:n.mode&1?(Tt=(r=Tt)||n.memoizedState!==null,_r(t,e,n),Tt=r):_r(t,e,n);break;default:_r(t,e,n)}}function rx(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new xR),e.forEach(function(r){var s=RR.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function mn(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:ut=a.stateNode,yn=!1;break e;case 3:ut=a.stateNode.containerInfo,yn=!0;break e;case 4:ut=a.stateNode.containerInfo,yn=!0;break e}a=a.return}if(ut===null)throw Error(K(160));f1(i,o,s),ut=null,yn=!1;var u=s.alternate;u!==null&&(u.return=null),s.return=null}catch(d){Ke(s,e,d)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)p1(e,t),e=e.sibling}function p1(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(mn(e,t),In(t),r&4){try{da(3,t,t.return),Fu(3,t)}catch(x){Ke(t,t.return,x)}try{da(5,t,t.return)}catch(x){Ke(t,t.return,x)}}break;case 1:mn(e,t),In(t),r&512&&n!==null&&Ni(n,n.return);break;case 5:if(mn(e,t),In(t),r&512&&n!==null&&Ni(n,n.return),t.flags&32){var s=t.stateNode;try{Ta(s,"")}catch(x){Ke(t,t.return,x)}}if(r&4&&(s=t.stateNode,s!=null)){var i=t.memoizedProps,o=n!==null?n.memoizedProps:i,a=t.type,u=t.updateQueue;if(t.updateQueue=null,u!==null)try{a==="input"&&i.type==="radio"&&i.name!=null&&Ow(s,i),vf(a,o);var d=vf(a,i);for(o=0;o<u.length;o+=2){var h=u[o],p=u[o+1];h==="style"?Uw(s,p):h==="dangerouslySetInnerHTML"?Fw(s,p):h==="children"?Ta(s,p):Qp(s,h,p,d)}switch(a){case"input":hf(s,i);break;case"textarea":Vw(s,i);break;case"select":var g=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var w=i.value;w!=null?Ai(s,!!i.multiple,w,!1):g!==!!i.multiple&&(i.defaultValue!=null?Ai(s,!!i.multiple,i.defaultValue,!0):Ai(s,!!i.multiple,i.multiple?[]:"",!1))}s[Pa]=i}catch(x){Ke(t,t.return,x)}}break;case 6:if(mn(e,t),In(t),r&4){if(t.stateNode===null)throw Error(K(162));s=t.stateNode,i=t.memoizedProps;try{s.nodeValue=i}catch(x){Ke(t,t.return,x)}}break;case 3:if(mn(e,t),In(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Na(e.containerInfo)}catch(x){Ke(t,t.return,x)}break;case 4:mn(e,t),In(t);break;case 13:mn(e,t),In(t),s=t.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(Im=Ye())),r&4&&rx(t);break;case 22:if(h=n!==null&&n.memoizedState!==null,t.mode&1?(Tt=(d=Tt)||h,mn(e,t),Tt=d):mn(e,t),In(t),r&8192){if(d=t.memoizedState!==null,(t.stateNode.isHidden=d)&&!h&&t.mode&1)for(re=t,h=t.child;h!==null;){for(p=re=h;re!==null;){switch(g=re,w=g.child,g.tag){case 0:case 11:case 14:case 15:da(4,g,g.return);break;case 1:Ni(g,g.return);var C=g.stateNode;if(typeof C.componentWillUnmount=="function"){r=g,n=g.return;try{e=r,C.props=e.memoizedProps,C.state=e.memoizedState,C.componentWillUnmount()}catch(x){Ke(r,n,x)}}break;case 5:Ni(g,g.return);break;case 22:if(g.memoizedState!==null){ix(p);continue}}w!==null?(w.return=g,re=w):ix(p)}h=h.sibling}e:for(h=null,p=t;;){if(p.tag===5){if(h===null){h=p;try{s=p.stateNode,d?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(a=p.stateNode,u=p.memoizedProps.style,o=u!=null&&u.hasOwnProperty("display")?u.display:null,a.style.display=zw("display",o))}catch(x){Ke(t,t.return,x)}}}else if(p.tag===6){if(h===null)try{p.stateNode.nodeValue=d?"":p.memoizedProps}catch(x){Ke(t,t.return,x)}}else if((p.tag!==22&&p.tag!==23||p.memoizedState===null||p===t)&&p.child!==null){p.child.return=p,p=p.child;continue}if(p===t)break e;for(;p.sibling===null;){if(p.return===null||p.return===t)break e;h===p&&(h=null),p=p.return}h===p&&(h=null),p.sibling.return=p.return,p=p.sibling}}break;case 19:mn(e,t),In(t),r&4&&rx(t);break;case 21:break;default:mn(e,t),In(t)}}function In(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(h1(n)){var r=n;break e}n=n.return}throw Error(K(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(Ta(s,""),r.flags&=-33);var i=nx(t);Kf(t,i,s);break;case 3:case 4:var o=r.stateNode.containerInfo,a=nx(t);qf(t,a,o);break;default:throw Error(K(161))}}catch(u){Ke(t,t.return,u)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function _R(t,e,n){re=t,m1(t)}function m1(t,e,n){for(var r=(t.mode&1)!==0;re!==null;){var s=re,i=s.child;if(s.tag===22&&r){var o=s.memoizedState!==null||Xl;if(!o){var a=s.alternate,u=a!==null&&a.memoizedState!==null||Tt;a=Xl;var d=Tt;if(Xl=o,(Tt=u)&&!d)for(re=s;re!==null;)o=re,u=o.child,o.tag===22&&o.memoizedState!==null?ox(s):u!==null?(u.return=o,re=u):ox(s);for(;i!==null;)re=i,m1(i),i=i.sibling;re=s,Xl=a,Tt=d}sx(t)}else s.subtreeFlags&8772&&i!==null?(i.return=s,re=i):sx(t)}}function sx(t){for(;re!==null;){var e=re;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Tt||Fu(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Tt)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:vn(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&$y(e,i,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}$y(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var u=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var d=e.alternate;if(d!==null){var h=d.memoizedState;if(h!==null){var p=h.dehydrated;p!==null&&Na(p)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(K(163))}Tt||e.flags&512&&Wf(e)}catch(g){Ke(e,e.return,g)}}if(e===t){re=null;break}if(n=e.sibling,n!==null){n.return=e.return,re=n;break}re=e.return}}function ix(t){for(;re!==null;){var e=re;if(e===t){re=null;break}var n=e.sibling;if(n!==null){n.return=e.return,re=n;break}re=e.return}}function ox(t){for(;re!==null;){var e=re;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Fu(4,e)}catch(u){Ke(e,n,u)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(u){Ke(e,s,u)}}var i=e.return;try{Wf(e)}catch(u){Ke(e,i,u)}break;case 5:var o=e.return;try{Wf(e)}catch(u){Ke(e,o,u)}}}catch(u){Ke(e,e.return,u)}if(e===t){re=null;break}var a=e.sibling;if(a!==null){a.return=e.return,re=a;break}re=e.return}}var ER=Math.ceil,eu=pr.ReactCurrentDispatcher,Cm=pr.ReactCurrentOwner,un=pr.ReactCurrentBatchConfig,Se=0,ot=null,Ze=null,ft=0,Qt=0,Ii=ss(0),nt=0,La=null,Vs=0,zu=0,Nm=0,ha=null,Ot=null,Im=0,Gi=1/0,Xn=null,tu=!1,Gf=null,Fr=null,Jl=!1,Pr=null,nu=0,fa=0,Qf=null,_c=-1,Ec=0;function kt(){return Se&6?Ye():_c!==-1?_c:_c=Ye()}function zr(t){return t.mode&1?Se&2&&ft!==0?ft&-ft:iR.transition!==null?(Ec===0&&(Ec=Zw()),Ec):(t=Re,t!==0||(t=window.event,t=t===void 0?16:o_(t.type)),t):1}function _n(t,e,n,r){if(50<fa)throw fa=0,Qf=null,Error(K(185));nl(t,n,r),(!(Se&2)||t!==ot)&&(t===ot&&(!(Se&2)&&(zu|=n),nt===4&&Ar(t,ft)),$t(t,r),n===1&&Se===0&&!(e.mode&1)&&(Gi=Ye()+500,Ou&&is()))}function $t(t,e){var n=t.callbackNode;iI(t,e);var r=Fc(t,t===ot?ft:0);if(r===0)n!==null&&my(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&my(n),e===1)t.tag===0?sR(ax.bind(null,t)):b_(ax.bind(null,t)),eR(function(){!(Se&6)&&is()}),n=null;else{switch(e_(r)){case 1:n=em;break;case 4:n=Xw;break;case 16:n=Lc;break;case 536870912:n=Jw;break;default:n=Lc}n=T1(n,g1.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function g1(t,e){if(_c=-1,Ec=0,Se&6)throw Error(K(327));var n=t.callbackNode;if(Mi()&&t.callbackNode!==n)return null;var r=Fc(t,t===ot?ft:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=ru(t,r);else{e=r;var s=Se;Se|=2;var i=y1();(ot!==t||ft!==e)&&(Xn=null,Gi=Ye()+500,Rs(t,e));do try{bR();break}catch(a){v1(t,a)}while(!0);fm(),eu.current=i,Se=s,Ze!==null?e=0:(ot=null,ft=0,e=nt)}if(e!==0){if(e===2&&(s=Ef(t),s!==0&&(r=s,e=Yf(t,s))),e===1)throw n=La,Rs(t,0),Ar(t,r),$t(t,Ye()),n;if(e===6)Ar(t,r);else{if(s=t.current.alternate,!(r&30)&&!TR(s)&&(e=ru(t,r),e===2&&(i=Ef(t),i!==0&&(r=i,e=Yf(t,i))),e===1))throw n=La,Rs(t,0),Ar(t,r),$t(t,Ye()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error(K(345));case 2:_s(t,Ot,Xn);break;case 3:if(Ar(t,r),(r&130023424)===r&&(e=Im+500-Ye(),10<e)){if(Fc(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){kt(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=Af(_s.bind(null,t,Ot,Xn),e);break}_s(t,Ot,Xn);break;case 4:if(Ar(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var o=31-wn(r);i=1<<o,o=e[o],o>s&&(s=o),r&=~i}if(r=s,r=Ye()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*ER(r/1960))-r,10<r){t.timeoutHandle=Af(_s.bind(null,t,Ot,Xn),r);break}_s(t,Ot,Xn);break;case 5:_s(t,Ot,Xn);break;default:throw Error(K(329))}}}return $t(t,Ye()),t.callbackNode===n?g1.bind(null,t):null}function Yf(t,e){var n=ha;return t.current.memoizedState.isDehydrated&&(Rs(t,e).flags|=256),t=ru(t,e),t!==2&&(e=Ot,Ot=n,e!==null&&Xf(e)),t}function Xf(t){Ot===null?Ot=t:Ot.push.apply(Ot,t)}function TR(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!En(i(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Ar(t,e){for(e&=~Nm,e&=~zu,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-wn(e),r=1<<n;t[n]=-1,e&=~r}}function ax(t){if(Se&6)throw Error(K(327));Mi();var e=Fc(t,0);if(!(e&1))return $t(t,Ye()),null;var n=ru(t,e);if(t.tag!==0&&n===2){var r=Ef(t);r!==0&&(e=r,n=Yf(t,r))}if(n===1)throw n=La,Rs(t,0),Ar(t,e),$t(t,Ye()),n;if(n===6)throw Error(K(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,_s(t,Ot,Xn),$t(t,Ye()),null}function Rm(t,e){var n=Se;Se|=1;try{return t(e)}finally{Se=n,Se===0&&(Gi=Ye()+500,Ou&&is())}}function Ls(t){Pr!==null&&Pr.tag===0&&!(Se&6)&&Mi();var e=Se;Se|=1;var n=un.transition,r=Re;try{if(un.transition=null,Re=1,t)return t()}finally{Re=r,un.transition=n,Se=e,!(Se&6)&&is()}}function Am(){Qt=Ii.current,Ve(Ii)}function Rs(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,ZI(n)),Ze!==null)for(n=Ze.return;n!==null;){var r=n;switch(um(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Hc();break;case 3:qi(),Ve(zt),Ve(Ct),xm();break;case 5:ym(r);break;case 4:qi();break;case 13:Ve(ze);break;case 19:Ve(ze);break;case 10:pm(r.type._context);break;case 22:case 23:Am()}n=n.return}if(ot=t,Ze=t=Ur(t.current,null),ft=Qt=e,nt=0,La=null,Nm=zu=Vs=0,Ot=ha=null,Cs!==null){for(e=0;e<Cs.length;e++)if(n=Cs[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var o=i.next;i.next=s,r.next=o}n.pending=r}Cs=null}return t}function v1(t,e){do{var n=Ze;try{if(fm(),yc.current=Zc,Jc){for(var r=Be.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}Jc=!1}if(Os=0,it=tt=Be=null,ua=!1,Ma=0,Cm.current=null,n===null||n.return===null){nt=1,La=e,Ze=null;break}e:{var i=t,o=n.return,a=n,u=e;if(e=ft,a.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var d=u,h=a,p=h.tag;if(!(h.mode&1)&&(p===0||p===11||p===15)){var g=h.alternate;g?(h.updateQueue=g.updateQueue,h.memoizedState=g.memoizedState,h.lanes=g.lanes):(h.updateQueue=null,h.memoizedState=null)}var w=Gy(o);if(w!==null){w.flags&=-257,Qy(w,o,a,i,e),w.mode&1&&Ky(i,d,e),e=w,u=d;var C=e.updateQueue;if(C===null){var x=new Set;x.add(u),e.updateQueue=x}else C.add(u);break e}else{if(!(e&1)){Ky(i,d,e),km();break e}u=Error(K(426))}}else if(Le&&a.mode&1){var T=Gy(o);if(T!==null){!(T.flags&65536)&&(T.flags|=256),Qy(T,o,a,i,e),dm(Ki(u,a));break e}}i=u=Ki(u,a),nt!==4&&(nt=2),ha===null?ha=[i]:ha.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var _=e1(i,u,e);Uy(i,_);break e;case 1:a=u;var y=i.type,E=i.stateNode;if(!(i.flags&128)&&(typeof y.getDerivedStateFromError=="function"||E!==null&&typeof E.componentDidCatch=="function"&&(Fr===null||!Fr.has(E)))){i.flags|=65536,e&=-e,i.lanes|=e;var k=t1(i,a,e);Uy(i,k);break e}}i=i.return}while(i!==null)}w1(n)}catch(M){e=M,Ze===n&&n!==null&&(Ze=n=n.return);continue}break}while(!0)}function y1(){var t=eu.current;return eu.current=Zc,t===null?Zc:t}function km(){(nt===0||nt===3||nt===2)&&(nt=4),ot===null||!(Vs&268435455)&&!(zu&268435455)||Ar(ot,ft)}function ru(t,e){var n=Se;Se|=2;var r=y1();(ot!==t||ft!==e)&&(Xn=null,Rs(t,e));do try{SR();break}catch(s){v1(t,s)}while(!0);if(fm(),Se=n,eu.current=r,Ze!==null)throw Error(K(261));return ot=null,ft=0,nt}function SR(){for(;Ze!==null;)x1(Ze)}function bR(){for(;Ze!==null&&!YN();)x1(Ze)}function x1(t){var e=E1(t.alternate,t,Qt);t.memoizedProps=t.pendingProps,e===null?w1(t):Ze=e,Cm.current=null}function w1(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=yR(n,e),n!==null){n.flags&=32767,Ze=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{nt=6,Ze=null;return}}else if(n=vR(n,e,Qt),n!==null){Ze=n;return}if(e=e.sibling,e!==null){Ze=e;return}Ze=e=t}while(e!==null);nt===0&&(nt=5)}function _s(t,e,n){var r=Re,s=un.transition;try{un.transition=null,Re=1,CR(t,e,n,r)}finally{un.transition=s,Re=r}return null}function CR(t,e,n,r){do Mi();while(Pr!==null);if(Se&6)throw Error(K(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(K(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if(oI(t,i),t===ot&&(Ze=ot=null,ft=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Jl||(Jl=!0,T1(Lc,function(){return Mi(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=un.transition,un.transition=null;var o=Re;Re=1;var a=Se;Se|=4,Cm.current=null,wR(t,n),p1(n,t),qI(If),zc=!!Nf,If=Nf=null,t.current=n,_R(n),XN(),Se=a,Re=o,un.transition=i}else t.current=n;if(Jl&&(Jl=!1,Pr=t,nu=s),i=t.pendingLanes,i===0&&(Fr=null),eI(n.stateNode),$t(t,Ye()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(tu)throw tu=!1,t=Gf,Gf=null,t;return nu&1&&t.tag!==0&&Mi(),i=t.pendingLanes,i&1?t===Qf?fa++:(fa=0,Qf=t):fa=0,is(),null}function Mi(){if(Pr!==null){var t=e_(nu),e=un.transition,n=Re;try{if(un.transition=null,Re=16>t?16:t,Pr===null)var r=!1;else{if(t=Pr,Pr=null,nu=0,Se&6)throw Error(K(331));var s=Se;for(Se|=4,re=t.current;re!==null;){var i=re,o=i.child;if(re.flags&16){var a=i.deletions;if(a!==null){for(var u=0;u<a.length;u++){var d=a[u];for(re=d;re!==null;){var h=re;switch(h.tag){case 0:case 11:case 15:da(8,h,i)}var p=h.child;if(p!==null)p.return=h,re=p;else for(;re!==null;){h=re;var g=h.sibling,w=h.return;if(d1(h),h===d){re=null;break}if(g!==null){g.return=w,re=g;break}re=w}}}var C=i.alternate;if(C!==null){var x=C.child;if(x!==null){C.child=null;do{var T=x.sibling;x.sibling=null,x=T}while(x!==null)}}re=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,re=o;else e:for(;re!==null;){if(i=re,i.flags&2048)switch(i.tag){case 0:case 11:case 15:da(9,i,i.return)}var _=i.sibling;if(_!==null){_.return=i.return,re=_;break e}re=i.return}}var y=t.current;for(re=y;re!==null;){o=re;var E=o.child;if(o.subtreeFlags&2064&&E!==null)E.return=o,re=E;else e:for(o=y;re!==null;){if(a=re,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:Fu(9,a)}}catch(M){Ke(a,a.return,M)}if(a===o){re=null;break e}var k=a.sibling;if(k!==null){k.return=a.return,re=k;break e}re=a.return}}if(Se=s,is(),Vn&&typeof Vn.onPostCommitFiberRoot=="function")try{Vn.onPostCommitFiberRoot(ku,t)}catch{}r=!0}return r}finally{Re=n,un.transition=e}}return!1}function lx(t,e,n){e=Ki(n,e),e=e1(t,e,1),t=Lr(t,e,1),e=kt(),t!==null&&(nl(t,1,e),$t(t,e))}function Ke(t,e,n){if(t.tag===3)lx(t,t,n);else for(;e!==null;){if(e.tag===3){lx(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Fr===null||!Fr.has(r))){t=Ki(n,t),t=t1(e,t,1),e=Lr(e,t,1),t=kt(),e!==null&&(nl(e,1,t),$t(e,t));break}}e=e.return}}function NR(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=kt(),t.pingedLanes|=t.suspendedLanes&n,ot===t&&(ft&n)===n&&(nt===4||nt===3&&(ft&130023424)===ft&&500>Ye()-Im?Rs(t,0):Nm|=n),$t(t,e)}function _1(t,e){e===0&&(t.mode&1?(e=$l,$l<<=1,!($l&130023424)&&($l=4194304)):e=1);var n=kt();t=or(t,e),t!==null&&(nl(t,e,n),$t(t,n))}function IR(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),_1(t,n)}function RR(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(K(314))}r!==null&&r.delete(e),_1(t,n)}var E1;E1=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||zt.current)Ft=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Ft=!1,gR(t,e,n);Ft=!!(t.flags&131072)}else Ft=!1,Le&&e.flags&1048576&&C_(e,Kc,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;wc(t,e),t=e.pendingProps;var s=Bi(e,Ct.current);Di(e,n),s=_m(null,e,r,t,s,n);var i=Em();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Ut(r)?(i=!0,Wc(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,gm(e),s.updater=Lu,e.stateNode=s,s._reactInternals=e,Vf(e,r,t,n),e=zf(null,e,r,!0,i,n)):(e.tag=0,Le&&i&&cm(e),Rt(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch(wc(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=kR(r),t=vn(r,t),s){case 0:e=Ff(null,e,r,t,n);break e;case 1:e=Jy(null,e,r,t,n);break e;case 11:e=Yy(null,e,r,t,n);break e;case 14:e=Xy(null,e,r,vn(r.type,t),n);break e}throw Error(K(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:vn(r,s),Ff(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:vn(r,s),Jy(t,e,r,s,n);case 3:e:{if(i1(e),t===null)throw Error(K(387));r=e.pendingProps,i=e.memoizedState,s=i.element,P_(t,e),Yc(e,r,null,n);var o=e.memoizedState;if(r=o.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=Ki(Error(K(423)),e),e=Zy(t,e,r,n,s);break e}else if(r!==s){s=Ki(Error(K(424)),e),e=Zy(t,e,r,n,s);break e}else for(Jt=Vr(e.stateNode.containerInfo.firstChild),tn=e,Le=!0,xn=null,n=A_(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Hi(),r===s){e=ar(t,e,n);break e}Rt(t,e,r,n)}e=e.child}return e;case 5:return j_(e),t===null&&Df(e),r=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,o=s.children,Rf(r,s)?o=null:i!==null&&Rf(r,i)&&(e.flags|=32),s1(t,e),Rt(t,e,o,n),e.child;case 6:return t===null&&Df(e),null;case 13:return o1(t,e,n);case 4:return vm(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Wi(e,null,r,n):Rt(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:vn(r,s),Yy(t,e,r,s,n);case 7:return Rt(t,e,e.pendingProps,n),e.child;case 8:return Rt(t,e,e.pendingProps.children,n),e.child;case 12:return Rt(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,i=e.memoizedProps,o=s.value,Pe(Gc,r._currentValue),r._currentValue=o,i!==null)if(En(i.value,o)){if(i.children===s.children&&!zt.current){e=ar(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var a=i.dependencies;if(a!==null){o=i.child;for(var u=a.firstContext;u!==null;){if(u.context===r){if(i.tag===1){u=nr(-1,n&-n),u.tag=2;var d=i.updateQueue;if(d!==null){d=d.shared;var h=d.pending;h===null?u.next=u:(u.next=h.next,h.next=u),d.pending=u}}i.lanes|=n,u=i.alternate,u!==null&&(u.lanes|=n),Mf(i.return,n,e),a.lanes|=n;break}u=u.next}}else if(i.tag===10)o=i.type===e.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(K(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),Mf(o,n,e),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===e){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}Rt(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,Di(e,n),s=hn(s),r=r(s),e.flags|=1,Rt(t,e,r,n),e.child;case 14:return r=e.type,s=vn(r,e.pendingProps),s=vn(r.type,s),Xy(t,e,r,s,n);case 15:return n1(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:vn(r,s),wc(t,e),e.tag=1,Ut(r)?(t=!0,Wc(e)):t=!1,Di(e,n),Z_(e,r,s),Vf(e,r,s,n),zf(null,e,r,!0,t,n);case 19:return a1(t,e,n);case 22:return r1(t,e,n)}throw Error(K(156,e.tag))};function T1(t,e){return Yw(t,e)}function AR(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function cn(t,e,n,r){return new AR(t,e,n,r)}function Pm(t){return t=t.prototype,!(!t||!t.isReactComponent)}function kR(t){if(typeof t=="function")return Pm(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Xp)return 11;if(t===Jp)return 14}return 2}function Ur(t,e){var n=t.alternate;return n===null?(n=cn(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Tc(t,e,n,r,s,i){var o=2;if(r=t,typeof t=="function")Pm(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case yi:return As(n.children,s,i,e);case Yp:o=8,s|=8;break;case af:return t=cn(12,n,e,s|2),t.elementType=af,t.lanes=i,t;case lf:return t=cn(13,n,e,s),t.elementType=lf,t.lanes=i,t;case cf:return t=cn(19,n,e,s),t.elementType=cf,t.lanes=i,t;case jw:return Uu(n,s,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case kw:o=10;break e;case Pw:o=9;break e;case Xp:o=11;break e;case Jp:o=14;break e;case Nr:o=16,r=null;break e}throw Error(K(130,t==null?t:typeof t,""))}return e=cn(o,n,e,s),e.elementType=t,e.type=r,e.lanes=i,e}function As(t,e,n,r){return t=cn(7,t,r,e),t.lanes=n,t}function Uu(t,e,n,r){return t=cn(22,t,r,e),t.elementType=jw,t.lanes=n,t.stateNode={isHidden:!1},t}function Ih(t,e,n){return t=cn(6,t,null,e),t.lanes=n,t}function Rh(t,e,n){return e=cn(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function PR(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=ch(0),this.expirationTimes=ch(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ch(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function jm(t,e,n,r,s,i,o,a,u){return t=new PR(t,e,n,a,u),e===1?(e=1,i===!0&&(e|=8)):e=0,i=cn(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},gm(i),t}function jR(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:vi,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function S1(t){if(!t)return Kr;t=t._reactInternals;e:{if(Js(t)!==t||t.tag!==1)throw Error(K(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Ut(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(K(171))}if(t.tag===1){var n=t.type;if(Ut(n))return S_(t,n,e)}return e}function b1(t,e,n,r,s,i,o,a,u){return t=jm(n,r,!0,t,s,i,o,a,u),t.context=S1(null),n=t.current,r=kt(),s=zr(n),i=nr(r,s),i.callback=e??null,Lr(n,i,s),t.current.lanes=s,nl(t,s,r),$t(t,r),t}function $u(t,e,n,r){var s=e.current,i=kt(),o=zr(s);return n=S1(n),e.context===null?e.context=n:e.pendingContext=n,e=nr(i,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Lr(s,e,o),t!==null&&(_n(t,s,o,i),vc(t,s,o)),o}function su(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function cx(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Dm(t,e){cx(t,e),(t=t.alternate)&&cx(t,e)}function DR(){return null}var C1=typeof reportError=="function"?reportError:function(t){console.error(t)};function Mm(t){this._internalRoot=t}Bu.prototype.render=Mm.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(K(409));$u(t,e,null,null)};Bu.prototype.unmount=Mm.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Ls(function(){$u(null,t,null,null)}),e[ir]=null}};function Bu(t){this._internalRoot=t}Bu.prototype.unstable_scheduleHydration=function(t){if(t){var e=r_();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Rr.length&&e!==0&&e<Rr[n].priority;n++);Rr.splice(n,0,t),n===0&&i_(t)}};function Om(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Hu(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function ux(){}function MR(t,e,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var d=su(o);i.call(d)}}var o=b1(e,r,t,0,null,!1,!1,"",ux);return t._reactRootContainer=o,t[ir]=o.current,Aa(t.nodeType===8?t.parentNode:t),Ls(),o}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var a=r;r=function(){var d=su(u);a.call(d)}}var u=jm(t,0,!1,null,null,!1,!1,"",ux);return t._reactRootContainer=u,t[ir]=u.current,Aa(t.nodeType===8?t.parentNode:t),Ls(function(){$u(e,u,n,r)}),u}function Wu(t,e,n,r,s){var i=n._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var a=s;s=function(){var u=su(o);a.call(u)}}$u(e,o,t,s)}else o=MR(n,e,t,s,r);return su(o)}t_=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Jo(e.pendingLanes);n!==0&&(tm(e,n|1),$t(e,Ye()),!(Se&6)&&(Gi=Ye()+500,is()))}break;case 13:Ls(function(){var r=or(t,1);if(r!==null){var s=kt();_n(r,t,1,s)}}),Dm(t,1)}};nm=function(t){if(t.tag===13){var e=or(t,134217728);if(e!==null){var n=kt();_n(e,t,134217728,n)}Dm(t,134217728)}};n_=function(t){if(t.tag===13){var e=zr(t),n=or(t,e);if(n!==null){var r=kt();_n(n,t,e,r)}Dm(t,e)}};r_=function(){return Re};s_=function(t,e){var n=Re;try{return Re=t,e()}finally{Re=n}};xf=function(t,e,n){switch(e){case"input":if(hf(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=Mu(r);if(!s)throw Error(K(90));Mw(r),hf(r,s)}}}break;case"textarea":Vw(t,n);break;case"select":e=n.value,e!=null&&Ai(t,!!n.multiple,e,!1)}};Hw=Rm;Ww=Ls;var OR={usingClientEntryPoint:!1,Events:[sl,Ei,Mu,$w,Bw,Rm]},qo={findFiberByHostInstance:bs,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},VR={bundleType:qo.bundleType,version:qo.version,rendererPackageName:qo.rendererPackageName,rendererConfig:qo.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:pr.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=Gw(t),t===null?null:t.stateNode},findFiberByHostInstance:qo.findFiberByHostInstance||DR,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Zl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Zl.isDisabled&&Zl.supportsFiber)try{ku=Zl.inject(VR),Vn=Zl}catch{}}sn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=OR;sn.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Om(e))throw Error(K(200));return jR(t,e,null,n)};sn.createRoot=function(t,e){if(!Om(t))throw Error(K(299));var n=!1,r="",s=C1;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=jm(t,1,!1,null,null,n,!1,r,s),t[ir]=e.current,Aa(t.nodeType===8?t.parentNode:t),new Mm(e)};sn.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(K(188)):(t=Object.keys(t).join(","),Error(K(268,t)));return t=Gw(e),t=t===null?null:t.stateNode,t};sn.flushSync=function(t){return Ls(t)};sn.hydrate=function(t,e,n){if(!Hu(e))throw Error(K(200));return Wu(null,t,e,!0,n)};sn.hydrateRoot=function(t,e,n){if(!Om(t))throw Error(K(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",o=C1;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=b1(e,null,t,1,n??null,s,!1,i,o),t[ir]=e.current,Aa(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new Bu(e)};sn.render=function(t,e,n){if(!Hu(e))throw Error(K(200));return Wu(null,t,e,!1,n)};sn.unmountComponentAtNode=function(t){if(!Hu(t))throw Error(K(40));return t._reactRootContainer?(Ls(function(){Wu(null,null,t,!1,function(){t._reactRootContainer=null,t[ir]=null})}),!0):!1};sn.unstable_batchedUpdates=Rm;sn.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Hu(n))throw Error(K(200));if(t==null||t._reactInternals===void 0)throw Error(K(38));return Wu(t,e,n,!1,r)};sn.version="18.3.1-next-f1338f8080-20240426";function N1(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(N1)}catch(t){console.error(t)}}N1(),Nw.exports=sn;var Zs=Nw.exports;const LR=mw(Zs);var I1,dx=Zs;I1=dx.createRoot,dx.hydrateRoot;function FR(t,e){if(t instanceof RegExp)return{keys:!1,pattern:t};var n,r,s,i,o=[],a="",u=t.split("/");for(u[0]||u.shift();s=u.shift();)n=s[0],n==="*"?(o.push(n),a+=s[1]==="?"?"(?:/(.*))?":"/(.*)"):n===":"?(r=s.indexOf("?",1),i=s.indexOf(".",1),o.push(s.substring(1,~r?r:~i?i:s.length)),a+=~r&&!~i?"(?:/([^/]+?))?":"/([^/]+?)",~i&&(a+=(~r?"?":"")+"\\"+s.substring(i))):a+="/"+s;return{keys:o,pattern:new RegExp("^"+a+(e?"(?=$|/)":"/?$"),"i")}}var R1={exports:{}},A1={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Qi=m;function zR(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var UR=typeof Object.is=="function"?Object.is:zR,$R=Qi.useState,BR=Qi.useEffect,HR=Qi.useLayoutEffect,WR=Qi.useDebugValue;function qR(t,e){var n=e(),r=$R({inst:{value:n,getSnapshot:e}}),s=r[0].inst,i=r[1];return HR(function(){s.value=n,s.getSnapshot=e,Ah(s)&&i({inst:s})},[t,n,e]),BR(function(){return Ah(s)&&i({inst:s}),t(function(){Ah(s)&&i({inst:s})})},[t]),WR(n),n}function Ah(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!UR(t,n)}catch{return!0}}function KR(t,e){return e()}var GR=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?KR:qR;A1.useSyncExternalStore=Qi.useSyncExternalStore!==void 0?Qi.useSyncExternalStore:GR;R1.exports=A1;var QR=R1.exports;const YR=qp.useInsertionEffect,XR=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",JR=XR?m.useLayoutEffect:m.useEffect,ZR=YR||JR,k1=t=>{const e=m.useRef([t,(...n)=>e[0](...n)]).current;return ZR(()=>{e[0]=t}),e[1]},eA="popstate",Vm="pushState",Lm="replaceState",tA="hashchange",hx=[eA,Vm,Lm,tA],nA=t=>{for(const e of hx)addEventListener(e,t);return()=>{for(const e of hx)removeEventListener(e,t)}},P1=(t,e)=>QR.useSyncExternalStore(nA,t,e),rA=()=>location.search,sA=({ssrSearch:t=""}={})=>P1(rA,()=>t),fx=()=>location.pathname,iA=({ssrPath:t}={})=>P1(fx,t?()=>t:fx),oA=(t,{replace:e=!1,state:n=null}={})=>history[e?Lm:Vm](n,"",t),aA=(t={})=>[iA(t),oA],px=Symbol.for("wouter_v3");if(typeof history<"u"&&typeof window[px]>"u"){for(const t of[Vm,Lm]){const e=history[t];history[t]=function(){const n=e.apply(this,arguments),r=new Event(t);return r.arguments=arguments,dispatchEvent(r),n}}Object.defineProperty(window,px,{value:!0})}const lA=(t,e)=>e.toLowerCase().indexOf(t.toLowerCase())?"~"+e:e.slice(t.length)||"/",j1=(t="")=>t==="/"?"":t,cA=(t,e)=>t[0]==="~"?t.slice(1):j1(e)+t,uA=(t="",e)=>lA(mx(j1(t)),mx(e)),mx=t=>{try{return decodeURI(t)}catch{return t}},D1={hook:aA,searchHook:sA,parser:FR,base:"",ssrPath:void 0,ssrSearch:void 0,ssrContext:void 0,hrefs:t=>t},M1=m.createContext(D1),ol=()=>m.useContext(M1),O1={},V1=m.createContext(O1),dA=()=>m.useContext(V1),qu=t=>{const[e,n]=t.hook(t);return[uA(t.base,e),k1((r,s)=>n(cA(r,t.base),s))]},hA=()=>qu(ol()),L1=(t,e,n,r)=>{const{pattern:s,keys:i}=e instanceof RegExp?{keys:!1,pattern:e}:t(e||"*",r),o=s.exec(n)||[],[a,...u]=o;return a!==void 0?[!0,(()=>{const d=i!==!1?Object.fromEntries(i.map((p,g)=>[p,u[g]])):o.groups;let h={...u};return d&&Object.assign(h,d),h})(),...r?[a]:[]]:[!1,null]},F1=({children:t,...e})=>{var h,p;const n=ol(),r=e.hook?D1:n;let s=r;const[i,o]=((h=e.ssrPath)==null?void 0:h.split("?"))??[];o&&(e.ssrSearch=o,e.ssrPath=i),e.hrefs=e.hrefs??((p=e.hook)==null?void 0:p.hrefs);let a=m.useRef({}),u=a.current,d=u;for(let g in r){const w=g==="base"?r[g]+(e[g]||""):e[g]||r[g];u===d&&w!==d[g]&&(a.current=d={...d}),d[g]=w,(w!==r[g]||w!==s[g])&&(s=d)}return m.createElement(M1.Provider,{value:s,children:t})},gx=({children:t,component:e},n)=>e?m.createElement(e,{params:n}):typeof t=="function"?t(n):t,fA=t=>{let e=m.useRef(O1);const n=e.current;return e.current=Object.keys(t).length!==Object.keys(n).length||Object.entries(t).some(([r,s])=>s!==n[r])?t:n},ys=({path:t,nest:e,match:n,...r})=>{const s=ol(),[i]=qu(s),[o,a,u]=n??L1(s.parser,t,i,e),d=fA({...dA(),...a});if(!o)return null;const h=u?m.createElement(F1,{base:u},gx(r,d)):gx(r,d);return m.createElement(V1.Provider,{value:d,children:h})},pa=m.forwardRef((t,e)=>{const n=ol(),[r,s]=qu(n),{to:i="",href:o=i,onClick:a,asChild:u,children:d,className:h,replace:p,state:g,...w}=t,C=k1(T=>{T.ctrlKey||T.metaKey||T.altKey||T.shiftKey||T.button!==0||(a==null||a(T),T.defaultPrevented||(T.preventDefault(),s(o,t)))}),x=n.hrefs(o[0]==="~"?o.slice(1):n.base+o,n);return u&&m.isValidElement(d)?m.cloneElement(d,{onClick:C,href:x}):m.createElement("a",{...w,onClick:C,href:x,className:h!=null&&h.call?h(r===o):h,children:d,ref:e})}),z1=t=>Array.isArray(t)?t.flatMap(e=>z1(e&&e.type===m.Fragment?e.props.children:e)):[t],pA=({children:t,location:e})=>{const n=ol(),[r]=qu(n);for(const s of z1(t)){let i=0;if(m.isValidElement(s)&&(i=L1(n.parser,s.props.path,e||r,s.props.nest))[0])return m.cloneElement(s,{match:i})}return null},mA=1,gA=1e6;let kh=0;function vA(){return kh=(kh+1)%Number.MAX_SAFE_INTEGER,kh.toString()}const Ph=new Map,vx=t=>{if(Ph.has(t))return;const e=setTimeout(()=>{Ph.delete(t),ma({type:"REMOVE_TOAST",toastId:t})},gA);Ph.set(t,e)},yA=(t,e)=>{switch(e.type){case"ADD_TOAST":return{...t,toasts:[e.toast,...t.toasts].slice(0,mA)};case"UPDATE_TOAST":return{...t,toasts:t.toasts.map(n=>n.id===e.toast.id?{...n,...e.toast}:n)};case"DISMISS_TOAST":{const{toastId:n}=e;return n?vx(n):t.toasts.forEach(r=>{vx(r.id)}),{...t,toasts:t.toasts.map(r=>r.id===n||n===void 0?{...r,open:!1}:r)}}case"REMOVE_TOAST":return e.toastId===void 0?{...t,toasts:[]}:{...t,toasts:t.toasts.filter(n=>n.id!==e.toastId)}}},Sc=[];let bc={toasts:[]};function ma(t){bc=yA(bc,t),Sc.forEach(e=>{e(bc)})}function xA({...t}){const e=vA(),n=s=>ma({type:"UPDATE_TOAST",toast:{...s,id:e}}),r=()=>ma({type:"DISMISS_TOAST",toastId:e});return ma({type:"ADD_TOAST",toast:{...t,id:e,open:!0,onOpenChange:s=>{s||r()}}}),{id:e,dismiss:r,update:n}}function Ku(){const[t,e]=m.useState(bc);return m.useEffect(()=>(Sc.push(e),()=>{const n=Sc.indexOf(e);n>-1&&Sc.splice(n,1)}),[t]),{...t,toast:xA,dismiss:n=>ma({type:"DISMISS_TOAST",toastId:n})}}function ue(t,e,{checkForDefaultPrevented:n=!0}={}){return function(s){if(t==null||t(s),n===!1||!s.defaultPrevented)return e==null?void 0:e(s)}}function yx(t,e){if(typeof t=="function")return t(e);t!=null&&(t.current=e)}function Fs(...t){return e=>{let n=!1;const r=t.map(s=>{const i=yx(s,e);return!n&&typeof i=="function"&&(n=!0),i});if(n)return()=>{for(let s=0;s<r.length;s++){const i=r[s];typeof i=="function"?i():yx(t[s],null)}}}}function Ae(...t){return m.useCallback(Fs(...t),t)}function wA(t,e){const n=m.createContext(e),r=i=>{const{children:o,...a}=i,u=m.useMemo(()=>a,Object.values(a));return l.jsx(n.Provider,{value:u,children:o})};r.displayName=t+"Provider";function s(i){const o=m.useContext(n);if(o)return o;if(e!==void 0)return e;throw new Error(`\`${i}\` must be used within \`${t}\``)}return[r,s]}function os(t,e=[]){let n=[];function r(i,o){const a=m.createContext(o),u=n.length;n=[...n,o];const d=p=>{var _;const{scope:g,children:w,...C}=p,x=((_=g==null?void 0:g[t])==null?void 0:_[u])||a,T=m.useMemo(()=>C,Object.values(C));return l.jsx(x.Provider,{value:T,children:w})};d.displayName=i+"Provider";function h(p,g){var x;const w=((x=g==null?void 0:g[t])==null?void 0:x[u])||a,C=m.useContext(w);if(C)return C;if(o!==void 0)return o;throw new Error(`\`${p}\` must be used within \`${i}\``)}return[d,h]}const s=()=>{const i=n.map(o=>m.createContext(o));return function(a){const u=(a==null?void 0:a[t])||i;return m.useMemo(()=>({[`__scope${t}`]:{...a,[t]:u}}),[a,u])}};return s.scopeName=t,[r,_A(s,...e)]}function _A(...t){const e=t[0];if(t.length===1)return e;const n=()=>{const r=t.map(s=>({useScope:s(),scopeName:s.scopeName}));return function(i){const o=r.reduce((a,{useScope:u,scopeName:d})=>{const p=u(i)[`__scope${d}`];return{...a,...p}},{});return m.useMemo(()=>({[`__scope${e.scopeName}`]:o}),[o])}};return n.scopeName=e.scopeName,n}function zs(t){const e=TA(t),n=m.forwardRef((r,s)=>{const{children:i,...o}=r,a=m.Children.toArray(i),u=a.find(bA);if(u){const d=u.props.children,h=a.map(p=>p===u?m.Children.count(d)>1?m.Children.only(null):m.isValidElement(d)?d.props.children:null:p);return l.jsx(e,{...o,ref:s,children:m.isValidElement(d)?m.cloneElement(d,void 0,h):null})}return l.jsx(e,{...o,ref:s,children:i})});return n.displayName=`${t}.Slot`,n}var EA=zs("Slot");function TA(t){const e=m.forwardRef((n,r)=>{const{children:s,...i}=n;if(m.isValidElement(s)){const o=NA(s),a=CA(i,s.props);return s.type!==m.Fragment&&(a.ref=r?Fs(r,o):o),m.cloneElement(s,a)}return m.Children.count(s)>1?m.Children.only(null):null});return e.displayName=`${t}.SlotClone`,e}var U1=Symbol("radix.slottable");function SA(t){const e=({children:n})=>l.jsx(l.Fragment,{children:n});return e.displayName=`${t}.Slottable`,e.__radixId=U1,e}function bA(t){return m.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===U1}function CA(t,e){const n={...e};for(const r in e){const s=t[r],i=e[r];/^on[A-Z]/.test(r)?s&&i?n[r]=(...a)=>{const u=i(...a);return s(...a),u}:s&&(n[r]=s):r==="style"?n[r]={...s,...i}:r==="className"&&(n[r]=[s,i].filter(Boolean).join(" "))}return{...t,...n}}function NA(t){var r,s;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(s=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:s.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}function $1(t){const e=t+"CollectionProvider",[n,r]=os(e),[s,i]=n(e,{collectionRef:{current:null},itemMap:new Map}),o=x=>{const{scope:T,children:_}=x,y=Sr.useRef(null),E=Sr.useRef(new Map).current;return l.jsx(s,{scope:T,itemMap:E,collectionRef:y,children:_})};o.displayName=e;const a=t+"CollectionSlot",u=zs(a),d=Sr.forwardRef((x,T)=>{const{scope:_,children:y}=x,E=i(a,_),k=Ae(T,E.collectionRef);return l.jsx(u,{ref:k,children:y})});d.displayName=a;const h=t+"CollectionItemSlot",p="data-radix-collection-item",g=zs(h),w=Sr.forwardRef((x,T)=>{const{scope:_,children:y,...E}=x,k=Sr.useRef(null),M=Ae(T,k),D=i(h,_);return Sr.useEffect(()=>(D.itemMap.set(k,{ref:k,...E}),()=>void D.itemMap.delete(k))),l.jsx(g,{[p]:"",ref:M,children:y})});w.displayName=h;function C(x){const T=i(t+"CollectionConsumer",x);return Sr.useCallback(()=>{const y=T.collectionRef.current;if(!y)return[];const E=Array.from(y.querySelectorAll(`[${p}]`));return Array.from(T.itemMap.values()).sort((D,b)=>E.indexOf(D.ref.current)-E.indexOf(b.ref.current))},[T.collectionRef,T.itemMap])}return[{Provider:o,Slot:d,ItemSlot:w},C,r]}var IA=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],de=IA.reduce((t,e)=>{const n=zs(`Primitive.${e}`),r=m.forwardRef((s,i)=>{const{asChild:o,...a}=s,u=o?n:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),l.jsx(u,{...a,ref:i})});return r.displayName=`Primitive.${e}`,{...t,[e]:r}},{});function B1(t,e){t&&Zs.flushSync(()=>t.dispatchEvent(e))}function Tn(t){const e=m.useRef(t);return m.useEffect(()=>{e.current=t}),m.useMemo(()=>(...n)=>{var r;return(r=e.current)==null?void 0:r.call(e,...n)},[])}function RA(t,e=globalThis==null?void 0:globalThis.document){const n=Tn(t);m.useEffect(()=>{const r=s=>{s.key==="Escape"&&n(s)};return e.addEventListener("keydown",r,{capture:!0}),()=>e.removeEventListener("keydown",r,{capture:!0})},[n,e])}var AA="DismissableLayer",Jf="dismissableLayer.update",kA="dismissableLayer.pointerDownOutside",PA="dismissableLayer.focusOutside",xx,H1=m.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),fo=m.forwardRef((t,e)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:r,onPointerDownOutside:s,onFocusOutside:i,onInteractOutside:o,onDismiss:a,...u}=t,d=m.useContext(H1),[h,p]=m.useState(null),g=(h==null?void 0:h.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,w]=m.useState({}),C=Ae(e,b=>p(b)),x=Array.from(d.layers),[T]=[...d.layersWithOutsidePointerEventsDisabled].slice(-1),_=x.indexOf(T),y=h?x.indexOf(h):-1,E=d.layersWithOutsidePointerEventsDisabled.size>0,k=y>=_,M=DA(b=>{const S=b.target,I=[...d.branches].some(R=>R.contains(S));!k||I||(s==null||s(b),o==null||o(b),b.defaultPrevented||a==null||a())},g),D=MA(b=>{const S=b.target;[...d.branches].some(R=>R.contains(S))||(i==null||i(b),o==null||o(b),b.defaultPrevented||a==null||a())},g);return RA(b=>{y===d.layers.size-1&&(r==null||r(b),!b.defaultPrevented&&a&&(b.preventDefault(),a()))},g),m.useEffect(()=>{if(h)return n&&(d.layersWithOutsidePointerEventsDisabled.size===0&&(xx=g.body.style.pointerEvents,g.body.style.pointerEvents="none"),d.layersWithOutsidePointerEventsDisabled.add(h)),d.layers.add(h),wx(),()=>{n&&d.layersWithOutsidePointerEventsDisabled.size===1&&(g.body.style.pointerEvents=xx)}},[h,g,n,d]),m.useEffect(()=>()=>{h&&(d.layers.delete(h),d.layersWithOutsidePointerEventsDisabled.delete(h),wx())},[h,d]),m.useEffect(()=>{const b=()=>w({});return document.addEventListener(Jf,b),()=>document.removeEventListener(Jf,b)},[]),l.jsx(de.div,{...u,ref:C,style:{pointerEvents:E?k?"auto":"none":void 0,...t.style},onFocusCapture:ue(t.onFocusCapture,D.onFocusCapture),onBlurCapture:ue(t.onBlurCapture,D.onBlurCapture),onPointerDownCapture:ue(t.onPointerDownCapture,M.onPointerDownCapture)})});fo.displayName=AA;var jA="DismissableLayerBranch",W1=m.forwardRef((t,e)=>{const n=m.useContext(H1),r=m.useRef(null),s=Ae(e,r);return m.useEffect(()=>{const i=r.current;if(i)return n.branches.add(i),()=>{n.branches.delete(i)}},[n.branches]),l.jsx(de.div,{...t,ref:s})});W1.displayName=jA;function DA(t,e=globalThis==null?void 0:globalThis.document){const n=Tn(t),r=m.useRef(!1),s=m.useRef(()=>{});return m.useEffect(()=>{const i=a=>{if(a.target&&!r.current){let u=function(){q1(kA,n,d,{discrete:!0})};const d={originalEvent:a};a.pointerType==="touch"?(e.removeEventListener("click",s.current),s.current=u,e.addEventListener("click",s.current,{once:!0})):u()}else e.removeEventListener("click",s.current);r.current=!1},o=window.setTimeout(()=>{e.addEventListener("pointerdown",i)},0);return()=>{window.clearTimeout(o),e.removeEventListener("pointerdown",i),e.removeEventListener("click",s.current)}},[e,n]),{onPointerDownCapture:()=>r.current=!0}}function MA(t,e=globalThis==null?void 0:globalThis.document){const n=Tn(t),r=m.useRef(!1);return m.useEffect(()=>{const s=i=>{i.target&&!r.current&&q1(PA,n,{originalEvent:i},{discrete:!1})};return e.addEventListener("focusin",s),()=>e.removeEventListener("focusin",s)},[e,n]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function wx(){const t=new CustomEvent(Jf);document.dispatchEvent(t)}function q1(t,e,n,{discrete:r}){const s=n.originalEvent.target,i=new CustomEvent(t,{bubbles:!1,cancelable:!0,detail:n});e&&s.addEventListener(t,e,{once:!0}),r?B1(s,i):s.dispatchEvent(i)}var OA=fo,VA=W1,at=globalThis!=null&&globalThis.document?m.useLayoutEffect:()=>{},LA="Portal",al=m.forwardRef((t,e)=>{var a;const{container:n,...r}=t,[s,i]=m.useState(!1);at(()=>i(!0),[]);const o=n||s&&((a=globalThis==null?void 0:globalThis.document)==null?void 0:a.body);return o?LR.createPortal(l.jsx(de.div,{...r,ref:e}),o):null});al.displayName=LA;function FA(t,e){return m.useReducer((n,r)=>e[n][r]??n,t)}var mr=t=>{const{present:e,children:n}=t,r=zA(e),s=typeof n=="function"?n({present:r.isPresent}):m.Children.only(n),i=Ae(r.ref,UA(s));return typeof n=="function"||r.isPresent?m.cloneElement(s,{ref:i}):null};mr.displayName="Presence";function zA(t){const[e,n]=m.useState(),r=m.useRef(null),s=m.useRef(t),i=m.useRef("none"),o=t?"mounted":"unmounted",[a,u]=FA(o,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return m.useEffect(()=>{const d=ec(r.current);i.current=a==="mounted"?d:"none"},[a]),at(()=>{const d=r.current,h=s.current;if(h!==t){const g=i.current,w=ec(d);t?u("MOUNT"):w==="none"||(d==null?void 0:d.display)==="none"?u("UNMOUNT"):u(h&&g!==w?"ANIMATION_OUT":"UNMOUNT"),s.current=t}},[t,u]),at(()=>{if(e){let d;const h=e.ownerDocument.defaultView??window,p=w=>{const x=ec(r.current).includes(w.animationName);if(w.target===e&&x&&(u("ANIMATION_END"),!s.current)){const T=e.style.animationFillMode;e.style.animationFillMode="forwards",d=h.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=T)})}},g=w=>{w.target===e&&(i.current=ec(r.current))};return e.addEventListener("animationstart",g),e.addEventListener("animationcancel",p),e.addEventListener("animationend",p),()=>{h.clearTimeout(d),e.removeEventListener("animationstart",g),e.removeEventListener("animationcancel",p),e.removeEventListener("animationend",p)}}else u("ANIMATION_END")},[e,u]),{isPresent:["mounted","unmountSuspended"].includes(a),ref:m.useCallback(d=>{r.current=d?getComputedStyle(d):null,n(d)},[])}}function ec(t){return(t==null?void 0:t.animationName)||"none"}function UA(t){var r,s;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(s=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:s.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}var $A=qp[" useInsertionEffect ".trim().toString()]||at;function Yi({prop:t,defaultProp:e,onChange:n=()=>{},caller:r}){const[s,i,o]=BA({defaultProp:e,onChange:n}),a=t!==void 0,u=a?t:s;{const h=m.useRef(t!==void 0);m.useEffect(()=>{const p=h.current;p!==a&&console.warn(`${r} is changing from ${p?"controlled":"uncontrolled"} to ${a?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),h.current=a},[a,r])}const d=m.useCallback(h=>{var p;if(a){const g=HA(h)?h(t):h;g!==t&&((p=o.current)==null||p.call(o,g))}else i(h)},[a,t,i,o]);return[u,d]}function BA({defaultProp:t,onChange:e}){const[n,r]=m.useState(t),s=m.useRef(n),i=m.useRef(e);return $A(()=>{i.current=e},[e]),m.useEffect(()=>{var o;s.current!==n&&((o=i.current)==null||o.call(i,n),s.current=n)},[n,s]),[n,r,i]}function HA(t){return typeof t=="function"}var K1=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),WA="VisuallyHidden",Gu=m.forwardRef((t,e)=>l.jsx(de.span,{...t,ref:e,style:{...K1,...t.style}}));Gu.displayName=WA;var qA=Gu,Fm="ToastProvider",[zm,KA,GA]=$1("Toast"),[G1,u6]=os("Toast",[GA]),[QA,Qu]=G1(Fm),Q1=t=>{const{__scopeToast:e,label:n="Notification",duration:r=5e3,swipeDirection:s="right",swipeThreshold:i=50,children:o}=t,[a,u]=m.useState(null),[d,h]=m.useState(0),p=m.useRef(!1),g=m.useRef(!1);return n.trim()||console.error(`Invalid prop \`label\` supplied to \`${Fm}\`. Expected non-empty \`string\`.`),l.jsx(zm.Provider,{scope:e,children:l.jsx(QA,{scope:e,label:n,duration:r,swipeDirection:s,swipeThreshold:i,toastCount:d,viewport:a,onViewportChange:u,onToastAdd:m.useCallback(()=>h(w=>w+1),[]),onToastRemove:m.useCallback(()=>h(w=>w-1),[]),isFocusedToastEscapeKeyDownRef:p,isClosePausedRef:g,children:o})})};Q1.displayName=Fm;var Y1="ToastViewport",YA=["F8"],Zf="toast.viewportPause",ep="toast.viewportResume",X1=m.forwardRef((t,e)=>{const{__scopeToast:n,hotkey:r=YA,label:s="Notifications ({hotkey})",...i}=t,o=Qu(Y1,n),a=KA(n),u=m.useRef(null),d=m.useRef(null),h=m.useRef(null),p=m.useRef(null),g=Ae(e,p,o.onViewportChange),w=r.join("+").replace(/Key/g,"").replace(/Digit/g,""),C=o.toastCount>0;m.useEffect(()=>{const T=_=>{var E;r.length!==0&&r.every(k=>_[k]||_.code===k)&&((E=p.current)==null||E.focus())};return document.addEventListener("keydown",T),()=>document.removeEventListener("keydown",T)},[r]),m.useEffect(()=>{const T=u.current,_=p.current;if(C&&T&&_){const y=()=>{if(!o.isClosePausedRef.current){const D=new CustomEvent(Zf);_.dispatchEvent(D),o.isClosePausedRef.current=!0}},E=()=>{if(o.isClosePausedRef.current){const D=new CustomEvent(ep);_.dispatchEvent(D),o.isClosePausedRef.current=!1}},k=D=>{!T.contains(D.relatedTarget)&&E()},M=()=>{T.contains(document.activeElement)||E()};return T.addEventListener("focusin",y),T.addEventListener("focusout",k),T.addEventListener("pointermove",y),T.addEventListener("pointerleave",M),window.addEventListener("blur",y),window.addEventListener("focus",E),()=>{T.removeEventListener("focusin",y),T.removeEventListener("focusout",k),T.removeEventListener("pointermove",y),T.removeEventListener("pointerleave",M),window.removeEventListener("blur",y),window.removeEventListener("focus",E)}}},[C,o.isClosePausedRef]);const x=m.useCallback(({tabbingDirection:T})=>{const y=a().map(E=>{const k=E.ref.current,M=[k,...ck(k)];return T==="forwards"?M:M.reverse()});return(T==="forwards"?y.reverse():y).flat()},[a]);return m.useEffect(()=>{const T=p.current;if(T){const _=y=>{var M,D,b;const E=y.altKey||y.ctrlKey||y.metaKey;if(y.key==="Tab"&&!E){const S=document.activeElement,I=y.shiftKey;if(y.target===T&&I){(M=d.current)==null||M.focus();return}const j=x({tabbingDirection:I?"backwards":"forwards"}),A=j.findIndex(L=>L===S);jh(j.slice(A+1))?y.preventDefault():I?(D=d.current)==null||D.focus():(b=h.current)==null||b.focus()}};return T.addEventListener("keydown",_),()=>T.removeEventListener("keydown",_)}},[a,x]),l.jsxs(VA,{ref:u,role:"region","aria-label":s.replace("{hotkey}",w),tabIndex:-1,style:{pointerEvents:C?void 0:"none"},children:[C&&l.jsx(tp,{ref:d,onFocusFromOutsideViewport:()=>{const T=x({tabbingDirection:"forwards"});jh(T)}}),l.jsx(zm.Slot,{scope:n,children:l.jsx(de.ol,{tabIndex:-1,...i,ref:g})}),C&&l.jsx(tp,{ref:h,onFocusFromOutsideViewport:()=>{const T=x({tabbingDirection:"backwards"});jh(T)}})]})});X1.displayName=Y1;var J1="ToastFocusProxy",tp=m.forwardRef((t,e)=>{const{__scopeToast:n,onFocusFromOutsideViewport:r,...s}=t,i=Qu(J1,n);return l.jsx(Gu,{"aria-hidden":!0,tabIndex:0,...s,ref:e,style:{position:"fixed"},onFocus:o=>{var d;const a=o.relatedTarget;!((d=i.viewport)!=null&&d.contains(a))&&r()}})});tp.displayName=J1;var ll="Toast",XA="toast.swipeStart",JA="toast.swipeMove",ZA="toast.swipeCancel",ek="toast.swipeEnd",Z1=m.forwardRef((t,e)=>{const{forceMount:n,open:r,defaultOpen:s,onOpenChange:i,...o}=t,[a,u]=Yi({prop:r,defaultProp:s??!0,onChange:i,caller:ll});return l.jsx(mr,{present:n||a,children:l.jsx(rk,{open:a,...o,ref:e,onClose:()=>u(!1),onPause:Tn(t.onPause),onResume:Tn(t.onResume),onSwipeStart:ue(t.onSwipeStart,d=>{d.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:ue(t.onSwipeMove,d=>{const{x:h,y:p}=d.detail.delta;d.currentTarget.setAttribute("data-swipe","move"),d.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${h}px`),d.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${p}px`)}),onSwipeCancel:ue(t.onSwipeCancel,d=>{d.currentTarget.setAttribute("data-swipe","cancel"),d.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),d.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),d.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),d.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:ue(t.onSwipeEnd,d=>{const{x:h,y:p}=d.detail.delta;d.currentTarget.setAttribute("data-swipe","end"),d.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),d.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),d.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${h}px`),d.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${p}px`),u(!1)})})})});Z1.displayName=ll;var[tk,nk]=G1(ll,{onClose(){}}),rk=m.forwardRef((t,e)=>{const{__scopeToast:n,type:r="foreground",duration:s,open:i,onClose:o,onEscapeKeyDown:a,onPause:u,onResume:d,onSwipeStart:h,onSwipeMove:p,onSwipeCancel:g,onSwipeEnd:w,...C}=t,x=Qu(ll,n),[T,_]=m.useState(null),y=Ae(e,L=>_(L)),E=m.useRef(null),k=m.useRef(null),M=s||x.duration,D=m.useRef(0),b=m.useRef(M),S=m.useRef(0),{onToastAdd:I,onToastRemove:R}=x,P=Tn(()=>{var G;(T==null?void 0:T.contains(document.activeElement))&&((G=x.viewport)==null||G.focus()),o()}),j=m.useCallback(L=>{!L||L===1/0||(window.clearTimeout(S.current),D.current=new Date().getTime(),S.current=window.setTimeout(P,L))},[P]);m.useEffect(()=>{const L=x.viewport;if(L){const G=()=>{j(b.current),d==null||d()},Q=()=>{const z=new Date().getTime()-D.current;b.current=b.current-z,window.clearTimeout(S.current),u==null||u()};return L.addEventListener(Zf,Q),L.addEventListener(ep,G),()=>{L.removeEventListener(Zf,Q),L.removeEventListener(ep,G)}}},[x.viewport,M,u,d,j]),m.useEffect(()=>{i&&!x.isClosePausedRef.current&&j(M)},[i,M,x.isClosePausedRef,j]),m.useEffect(()=>(I(),()=>R()),[I,R]);const A=m.useMemo(()=>T?oE(T):null,[T]);return x.viewport?l.jsxs(l.Fragment,{children:[A&&l.jsx(sk,{__scopeToast:n,role:"status","aria-live":r==="foreground"?"assertive":"polite","aria-atomic":!0,children:A}),l.jsx(tk,{scope:n,onClose:P,children:Zs.createPortal(l.jsx(zm.ItemSlot,{scope:n,children:l.jsx(OA,{asChild:!0,onEscapeKeyDown:ue(a,()=>{x.isFocusedToastEscapeKeyDownRef.current||P(),x.isFocusedToastEscapeKeyDownRef.current=!1}),children:l.jsx(de.li,{role:"status","aria-live":"off","aria-atomic":!0,tabIndex:0,"data-state":i?"open":"closed","data-swipe-direction":x.swipeDirection,...C,ref:y,style:{userSelect:"none",touchAction:"none",...t.style},onKeyDown:ue(t.onKeyDown,L=>{L.key==="Escape"&&(a==null||a(L.nativeEvent),L.nativeEvent.defaultPrevented||(x.isFocusedToastEscapeKeyDownRef.current=!0,P()))}),onPointerDown:ue(t.onPointerDown,L=>{L.button===0&&(E.current={x:L.clientX,y:L.clientY})}),onPointerMove:ue(t.onPointerMove,L=>{if(!E.current)return;const G=L.clientX-E.current.x,Q=L.clientY-E.current.y,z=!!k.current,O=["left","right"].includes(x.swipeDirection),$=["left","up"].includes(x.swipeDirection)?Math.min:Math.max,Z=O?$(0,G):0,se=O?0:$(0,Q),U=L.pointerType==="touch"?10:2,J={x:Z,y:se},W={originalEvent:L,delta:J};z?(k.current=J,tc(JA,p,W,{discrete:!1})):_x(J,x.swipeDirection,U)?(k.current=J,tc(XA,h,W,{discrete:!1}),L.target.setPointerCapture(L.pointerId)):(Math.abs(G)>U||Math.abs(Q)>U)&&(E.current=null)}),onPointerUp:ue(t.onPointerUp,L=>{const G=k.current,Q=L.target;if(Q.hasPointerCapture(L.pointerId)&&Q.releasePointerCapture(L.pointerId),k.current=null,E.current=null,G){const z=L.currentTarget,O={originalEvent:L,delta:G};_x(G,x.swipeDirection,x.swipeThreshold)?tc(ek,w,O,{discrete:!0}):tc(ZA,g,O,{discrete:!0}),z.addEventListener("click",$=>$.preventDefault(),{once:!0})}})})})}),x.viewport)})]}):null}),sk=t=>{const{__scopeToast:e,children:n,...r}=t,s=Qu(ll,e),[i,o]=m.useState(!1),[a,u]=m.useState(!1);return ak(()=>o(!0)),m.useEffect(()=>{const d=window.setTimeout(()=>u(!0),1e3);return()=>window.clearTimeout(d)},[]),a?null:l.jsx(al,{asChild:!0,children:l.jsx(Gu,{...r,children:i&&l.jsxs(l.Fragment,{children:[s.label," ",n]})})})},ik="ToastTitle",eE=m.forwardRef((t,e)=>{const{__scopeToast:n,...r}=t;return l.jsx(de.div,{...r,ref:e})});eE.displayName=ik;var ok="ToastDescription",tE=m.forwardRef((t,e)=>{const{__scopeToast:n,...r}=t;return l.jsx(de.div,{...r,ref:e})});tE.displayName=ok;var nE="ToastAction",rE=m.forwardRef((t,e)=>{const{altText:n,...r}=t;return n.trim()?l.jsx(iE,{altText:n,asChild:!0,children:l.jsx(Um,{...r,ref:e})}):(console.error(`Invalid prop \`altText\` supplied to \`${nE}\`. Expected non-empty \`string\`.`),null)});rE.displayName=nE;var sE="ToastClose",Um=m.forwardRef((t,e)=>{const{__scopeToast:n,...r}=t,s=nk(sE,n);return l.jsx(iE,{asChild:!0,children:l.jsx(de.button,{type:"button",...r,ref:e,onClick:ue(t.onClick,s.onClose)})})});Um.displayName=sE;var iE=m.forwardRef((t,e)=>{const{__scopeToast:n,altText:r,...s}=t;return l.jsx(de.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":r||void 0,...s,ref:e})});function oE(t){const e=[];return Array.from(t.childNodes).forEach(r=>{if(r.nodeType===r.TEXT_NODE&&r.textContent&&e.push(r.textContent),lk(r)){const s=r.ariaHidden||r.hidden||r.style.display==="none",i=r.dataset.radixToastAnnounceExclude==="";if(!s)if(i){const o=r.dataset.radixToastAnnounceAlt;o&&e.push(o)}else e.push(...oE(r))}}),e}function tc(t,e,n,{discrete:r}){const s=n.originalEvent.currentTarget,i=new CustomEvent(t,{bubbles:!0,cancelable:!0,detail:n});e&&s.addEventListener(t,e,{once:!0}),r?B1(s,i):s.dispatchEvent(i)}var _x=(t,e,n=0)=>{const r=Math.abs(t.x),s=Math.abs(t.y),i=r>s;return e==="left"||e==="right"?i&&r>n:!i&&s>n};function ak(t=()=>{}){const e=Tn(t);at(()=>{let n=0,r=0;return n=window.requestAnimationFrame(()=>r=window.requestAnimationFrame(e)),()=>{window.cancelAnimationFrame(n),window.cancelAnimationFrame(r)}},[e])}function lk(t){return t.nodeType===t.ELEMENT_NODE}function ck(t){const e=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const s=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||s?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)e.push(n.currentNode);return e}function jh(t){const e=document.activeElement;return t.some(n=>n===e?!0:(n.focus(),document.activeElement!==e))}var uk=Q1,aE=X1,lE=Z1,cE=eE,uE=tE,dE=rE,hE=Um;function fE(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var s=t.length;for(e=0;e<s;e++)t[e]&&(n=fE(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function pE(){for(var t,e,n=0,r="",s=arguments.length;n<s;n++)(t=arguments[n])&&(e=fE(t))&&(r&&(r+=" "),r+=e);return r}const Ex=t=>typeof t=="boolean"?`${t}`:t===0?"0":t,Tx=pE,po=(t,e)=>n=>{var r;if((e==null?void 0:e.variants)==null)return Tx(t,n==null?void 0:n.class,n==null?void 0:n.className);const{variants:s,defaultVariants:i}=e,o=Object.keys(s).map(d=>{const h=n==null?void 0:n[d],p=i==null?void 0:i[d];if(h===null)return null;const g=Ex(h)||Ex(p);return s[d][g]}),a=n&&Object.entries(n).reduce((d,h)=>{let[p,g]=h;return g===void 0||(d[p]=g),d},{}),u=e==null||(r=e.compoundVariants)===null||r===void 0?void 0:r.reduce((d,h)=>{let{class:p,className:g,...w}=h;return Object.entries(w).every(C=>{let[x,T]=C;return Array.isArray(T)?T.includes({...i,...a}[x]):{...i,...a}[x]===T})?[...d,p,g]:d},[]);return Tx(t,o,u,n==null?void 0:n.class,n==null?void 0:n.className)};/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dk=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),mE=(...t)=>t.filter((e,n,r)=>!!e&&r.indexOf(e)===n).join(" ");/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var hk={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fk=m.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:s="",children:i,iconNode:o,...a},u)=>m.createElement("svg",{ref:u,...hk,width:e,height:e,stroke:t,strokeWidth:r?Number(n)*24/Number(e):n,className:mE("lucide",s),...a},[...o.map(([d,h])=>m.createElement(d,h)),...Array.isArray(i)?i:[i]]));/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const le=(t,e)=>{const n=m.forwardRef(({className:r,...s},i)=>m.createElement(fk,{ref:i,iconNode:e,className:mE(`lucide-${dk(t)}`,r),...s}));return n.displayName=`${t}`,n};/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sx=le("Award",[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pk=le("BellOff",[["path",{d:"M8.7 3A6 6 0 0 1 18 8a21.3 21.3 0 0 0 .6 5",key:"o7mx20"}],["path",{d:"M17 17H3s3-2 3-9a4.67 4.67 0 0 1 .3-1.7",key:"16f1lm"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bx=le("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const An=le("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mk=le("ChartColumn",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fa=le("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $m=le("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gk=le("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vk=le("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yk=le("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xk=le("Chrome",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["line",{x1:"21.17",x2:"12",y1:"8",y2:"8",key:"a0cw5f"}],["line",{x1:"3.95",x2:"8.54",y1:"6.06",y2:"14",key:"1kftof"}],["line",{x1:"10.88",x2:"15.46",y1:"21.94",y2:"14",key:"1ymyh8"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wk=le("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _k=le("CirclePlus",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cl=le("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ek=le("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tk=le("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sk=le("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const np=le("Euro",[["path",{d:"M4 10h12",key:"1y6xl8"}],["path",{d:"M4 14h9",key:"1loblj"}],["path",{d:"M19 6a7.7 7.7 0 0 0-5.2-2A7.9 7.9 0 0 0 6 12c0 4.4 3.5 8 7.8 8 2 0 3.8-.8 5.2-2",key:"1j6lzo"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rp=le("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bk=le("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ck=le("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gE=le("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nk=le("Grid3x3",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ks=le("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ik=le("House",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rk=le("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Us=le("MapPin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ak=le("Map",[["path",{d:"M14.106 5.553a2 2 0 0 0 1.788 0l3.659-1.83A1 1 0 0 1 21 4.619v12.764a1 1 0 0 1-.553.894l-4.553 2.277a2 2 0 0 1-1.788 0l-4.212-2.106a2 2 0 0 0-1.788 0l-3.659 1.83A1 1 0 0 1 3 19.381V6.618a1 1 0 0 1 .553-.894l4.553-2.277a2 2 0 0 1 1.788 0z",key:"169xi5"}],["path",{d:"M15 5.764v15",key:"1pn4in"}],["path",{d:"M9 3.236v15",key:"1uimfh"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kk=le("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pk=le("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ps=le("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jk=le("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ga=le("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dk=le("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mk=le("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cx=le("Smartphone",[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ok=le("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xt=le("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vk=le("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yu=le("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iu=le("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dh=le("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lk=le("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nx=le("Utensils",[["path",{d:"M3 2v7c0 1.1.9 2 2 2h4a2 2 0 0 0 2-2V2",key:"cjf0a3"}],["path",{d:"M7 2v20",key:"1473qp"}],["path",{d:"M21 15V2a5 5 0 0 0-5 5v6c0 1.1.9 2 2 2h3Zm0 0v7",key:"j28e5"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ix=le("Volume2",[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["path",{d:"M16 9a5 5 0 0 1 0 6",key:"1q6k2b"}],["path",{d:"M19.364 18.364a9 9 0 0 0 0-12.728",key:"ijwkga"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fk=le("VolumeX",[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["line",{x1:"22",x2:"16",y1:"9",y2:"15",key:"1ewh16"}],["line",{x1:"16",x2:"22",y1:"9",y2:"15",key:"5ykzw1"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zk=le("Wifi",[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M2 8.82a15 15 0 0 1 20 0",key:"dnpr2z"}],["path",{d:"M5 12.859a10 10 0 0 1 14 0",key:"1x1e6c"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ul=le("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uk=le("Zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]),Bm="-",$k=t=>{const e=Hk(t),{conflictingClassGroups:n,conflictingClassGroupModifiers:r}=t;return{getClassGroupId:o=>{const a=o.split(Bm);return a[0]===""&&a.length!==1&&a.shift(),vE(a,e)||Bk(o)},getConflictingClassGroupIds:(o,a)=>{const u=n[o]||[];return a&&r[o]?[...u,...r[o]]:u}}},vE=(t,e)=>{var o;if(t.length===0)return e.classGroupId;const n=t[0],r=e.nextPart.get(n),s=r?vE(t.slice(1),r):void 0;if(s)return s;if(e.validators.length===0)return;const i=t.join(Bm);return(o=e.validators.find(({validator:a})=>a(i)))==null?void 0:o.classGroupId},Rx=/^\[(.+)\]$/,Bk=t=>{if(Rx.test(t)){const e=Rx.exec(t)[1],n=e==null?void 0:e.substring(0,e.indexOf(":"));if(n)return"arbitrary.."+n}},Hk=t=>{const{theme:e,prefix:n}=t,r={nextPart:new Map,validators:[]};return qk(Object.entries(t.classGroups),n).forEach(([i,o])=>{sp(o,r,i,e)}),r},sp=(t,e,n,r)=>{t.forEach(s=>{if(typeof s=="string"){const i=s===""?e:Ax(e,s);i.classGroupId=n;return}if(typeof s=="function"){if(Wk(s)){sp(s(r),e,n,r);return}e.validators.push({validator:s,classGroupId:n});return}Object.entries(s).forEach(([i,o])=>{sp(o,Ax(e,i),n,r)})})},Ax=(t,e)=>{let n=t;return e.split(Bm).forEach(r=>{n.nextPart.has(r)||n.nextPart.set(r,{nextPart:new Map,validators:[]}),n=n.nextPart.get(r)}),n},Wk=t=>t.isThemeGetter,qk=(t,e)=>e?t.map(([n,r])=>{const s=r.map(i=>typeof i=="string"?e+i:typeof i=="object"?Object.fromEntries(Object.entries(i).map(([o,a])=>[e+o,a])):i);return[n,s]}):t,Kk=t=>{if(t<1)return{get:()=>{},set:()=>{}};let e=0,n=new Map,r=new Map;const s=(i,o)=>{n.set(i,o),e++,e>t&&(e=0,r=n,n=new Map)};return{get(i){let o=n.get(i);if(o!==void 0)return o;if((o=r.get(i))!==void 0)return s(i,o),o},set(i,o){n.has(i)?n.set(i,o):s(i,o)}}},yE="!",Gk=t=>{const{separator:e,experimentalParseClassName:n}=t,r=e.length===1,s=e[0],i=e.length,o=a=>{const u=[];let d=0,h=0,p;for(let T=0;T<a.length;T++){let _=a[T];if(d===0){if(_===s&&(r||a.slice(T,T+i)===e)){u.push(a.slice(h,T)),h=T+i;continue}if(_==="/"){p=T;continue}}_==="["?d++:_==="]"&&d--}const g=u.length===0?a:a.substring(h),w=g.startsWith(yE),C=w?g.substring(1):g,x=p&&p>h?p-h:void 0;return{modifiers:u,hasImportantModifier:w,baseClassName:C,maybePostfixModifierPosition:x}};return n?a=>n({className:a,parseClassName:o}):o},Qk=t=>{if(t.length<=1)return t;const e=[];let n=[];return t.forEach(r=>{r[0]==="["?(e.push(...n.sort(),r),n=[]):n.push(r)}),e.push(...n.sort()),e},Yk=t=>({cache:Kk(t.cacheSize),parseClassName:Gk(t),...$k(t)}),Xk=/\s+/,Jk=(t,e)=>{const{parseClassName:n,getClassGroupId:r,getConflictingClassGroupIds:s}=e,i=[],o=t.trim().split(Xk);let a="";for(let u=o.length-1;u>=0;u-=1){const d=o[u],{modifiers:h,hasImportantModifier:p,baseClassName:g,maybePostfixModifierPosition:w}=n(d);let C=!!w,x=r(C?g.substring(0,w):g);if(!x){if(!C){a=d+(a.length>0?" "+a:a);continue}if(x=r(g),!x){a=d+(a.length>0?" "+a:a);continue}C=!1}const T=Qk(h).join(":"),_=p?T+yE:T,y=_+x;if(i.includes(y))continue;i.push(y);const E=s(x,C);for(let k=0;k<E.length;++k){const M=E[k];i.push(_+M)}a=d+(a.length>0?" "+a:a)}return a};function Zk(){let t=0,e,n,r="";for(;t<arguments.length;)(e=arguments[t++])&&(n=xE(e))&&(r&&(r+=" "),r+=n);return r}const xE=t=>{if(typeof t=="string")return t;let e,n="";for(let r=0;r<t.length;r++)t[r]&&(e=xE(t[r]))&&(n&&(n+=" "),n+=e);return n};function eP(t,...e){let n,r,s,i=o;function o(u){const d=e.reduce((h,p)=>p(h),t());return n=Yk(d),r=n.cache.get,s=n.cache.set,i=a,a(u)}function a(u){const d=r(u);if(d)return d;const h=Jk(u,n);return s(u,h),h}return function(){return i(Zk.apply(null,arguments))}}const De=t=>{const e=n=>n[t]||[];return e.isThemeGetter=!0,e},wE=/^\[(?:([a-z-]+):)?(.+)\]$/i,tP=/^\d+\/\d+$/,nP=new Set(["px","full","screen"]),rP=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,sP=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,iP=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,oP=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,aP=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Qn=t=>Oi(t)||nP.has(t)||tP.test(t),Er=t=>mo(t,"length",mP),Oi=t=>!!t&&!Number.isNaN(Number(t)),Mh=t=>mo(t,"number",Oi),Ko=t=>!!t&&Number.isInteger(Number(t)),lP=t=>t.endsWith("%")&&Oi(t.slice(0,-1)),me=t=>wE.test(t),Tr=t=>rP.test(t),cP=new Set(["length","size","percentage"]),uP=t=>mo(t,cP,_E),dP=t=>mo(t,"position",_E),hP=new Set(["image","url"]),fP=t=>mo(t,hP,vP),pP=t=>mo(t,"",gP),Go=()=>!0,mo=(t,e,n)=>{const r=wE.exec(t);return r?r[1]?typeof e=="string"?r[1]===e:e.has(r[1]):n(r[2]):!1},mP=t=>sP.test(t)&&!iP.test(t),_E=()=>!1,gP=t=>oP.test(t),vP=t=>aP.test(t),yP=()=>{const t=De("colors"),e=De("spacing"),n=De("blur"),r=De("brightness"),s=De("borderColor"),i=De("borderRadius"),o=De("borderSpacing"),a=De("borderWidth"),u=De("contrast"),d=De("grayscale"),h=De("hueRotate"),p=De("invert"),g=De("gap"),w=De("gradientColorStops"),C=De("gradientColorStopPositions"),x=De("inset"),T=De("margin"),_=De("opacity"),y=De("padding"),E=De("saturate"),k=De("scale"),M=De("sepia"),D=De("skew"),b=De("space"),S=De("translate"),I=()=>["auto","contain","none"],R=()=>["auto","hidden","clip","visible","scroll"],P=()=>["auto",me,e],j=()=>[me,e],A=()=>["",Qn,Er],L=()=>["auto",Oi,me],G=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],Q=()=>["solid","dashed","dotted","double","none"],z=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],O=()=>["start","end","center","between","around","evenly","stretch"],$=()=>["","0",me],Z=()=>["auto","avoid","all","avoid-page","page","left","right","column"],se=()=>[Oi,me];return{cacheSize:500,separator:":",theme:{colors:[Go],spacing:[Qn,Er],blur:["none","",Tr,me],brightness:se(),borderColor:[t],borderRadius:["none","","full",Tr,me],borderSpacing:j(),borderWidth:A(),contrast:se(),grayscale:$(),hueRotate:se(),invert:$(),gap:j(),gradientColorStops:[t],gradientColorStopPositions:[lP,Er],inset:P(),margin:P(),opacity:se(),padding:j(),saturate:se(),scale:se(),sepia:$(),skew:se(),space:j(),translate:j()},classGroups:{aspect:[{aspect:["auto","square","video",me]}],container:["container"],columns:[{columns:[Tr]}],"break-after":[{"break-after":Z()}],"break-before":[{"break-before":Z()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...G(),me]}],overflow:[{overflow:R()}],"overflow-x":[{"overflow-x":R()}],"overflow-y":[{"overflow-y":R()}],overscroll:[{overscroll:I()}],"overscroll-x":[{"overscroll-x":I()}],"overscroll-y":[{"overscroll-y":I()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[x]}],"inset-x":[{"inset-x":[x]}],"inset-y":[{"inset-y":[x]}],start:[{start:[x]}],end:[{end:[x]}],top:[{top:[x]}],right:[{right:[x]}],bottom:[{bottom:[x]}],left:[{left:[x]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",Ko,me]}],basis:[{basis:P()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",me]}],grow:[{grow:$()}],shrink:[{shrink:$()}],order:[{order:["first","last","none",Ko,me]}],"grid-cols":[{"grid-cols":[Go]}],"col-start-end":[{col:["auto",{span:["full",Ko,me]},me]}],"col-start":[{"col-start":L()}],"col-end":[{"col-end":L()}],"grid-rows":[{"grid-rows":[Go]}],"row-start-end":[{row:["auto",{span:[Ko,me]},me]}],"row-start":[{"row-start":L()}],"row-end":[{"row-end":L()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",me]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",me]}],gap:[{gap:[g]}],"gap-x":[{"gap-x":[g]}],"gap-y":[{"gap-y":[g]}],"justify-content":[{justify:["normal",...O()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...O(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...O(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[y]}],px:[{px:[y]}],py:[{py:[y]}],ps:[{ps:[y]}],pe:[{pe:[y]}],pt:[{pt:[y]}],pr:[{pr:[y]}],pb:[{pb:[y]}],pl:[{pl:[y]}],m:[{m:[T]}],mx:[{mx:[T]}],my:[{my:[T]}],ms:[{ms:[T]}],me:[{me:[T]}],mt:[{mt:[T]}],mr:[{mr:[T]}],mb:[{mb:[T]}],ml:[{ml:[T]}],"space-x":[{"space-x":[b]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[b]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",me,e]}],"min-w":[{"min-w":[me,e,"min","max","fit"]}],"max-w":[{"max-w":[me,e,"none","full","min","max","fit","prose",{screen:[Tr]},Tr]}],h:[{h:[me,e,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[me,e,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[me,e,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[me,e,"auto","min","max","fit"]}],"font-size":[{text:["base",Tr,Er]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",Mh]}],"font-family":[{font:[Go]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",me]}],"line-clamp":[{"line-clamp":["none",Oi,Mh]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",Qn,me]}],"list-image":[{"list-image":["none",me]}],"list-style-type":[{list:["none","disc","decimal",me]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[t]}],"placeholder-opacity":[{"placeholder-opacity":[_]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[t]}],"text-opacity":[{"text-opacity":[_]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...Q(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",Qn,Er]}],"underline-offset":[{"underline-offset":["auto",Qn,me]}],"text-decoration-color":[{decoration:[t]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:j()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",me]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",me]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[_]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...G(),dP]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",uP]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},fP]}],"bg-color":[{bg:[t]}],"gradient-from-pos":[{from:[C]}],"gradient-via-pos":[{via:[C]}],"gradient-to-pos":[{to:[C]}],"gradient-from":[{from:[w]}],"gradient-via":[{via:[w]}],"gradient-to":[{to:[w]}],rounded:[{rounded:[i]}],"rounded-s":[{"rounded-s":[i]}],"rounded-e":[{"rounded-e":[i]}],"rounded-t":[{"rounded-t":[i]}],"rounded-r":[{"rounded-r":[i]}],"rounded-b":[{"rounded-b":[i]}],"rounded-l":[{"rounded-l":[i]}],"rounded-ss":[{"rounded-ss":[i]}],"rounded-se":[{"rounded-se":[i]}],"rounded-ee":[{"rounded-ee":[i]}],"rounded-es":[{"rounded-es":[i]}],"rounded-tl":[{"rounded-tl":[i]}],"rounded-tr":[{"rounded-tr":[i]}],"rounded-br":[{"rounded-br":[i]}],"rounded-bl":[{"rounded-bl":[i]}],"border-w":[{border:[a]}],"border-w-x":[{"border-x":[a]}],"border-w-y":[{"border-y":[a]}],"border-w-s":[{"border-s":[a]}],"border-w-e":[{"border-e":[a]}],"border-w-t":[{"border-t":[a]}],"border-w-r":[{"border-r":[a]}],"border-w-b":[{"border-b":[a]}],"border-w-l":[{"border-l":[a]}],"border-opacity":[{"border-opacity":[_]}],"border-style":[{border:[...Q(),"hidden"]}],"divide-x":[{"divide-x":[a]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[a]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[_]}],"divide-style":[{divide:Q()}],"border-color":[{border:[s]}],"border-color-x":[{"border-x":[s]}],"border-color-y":[{"border-y":[s]}],"border-color-s":[{"border-s":[s]}],"border-color-e":[{"border-e":[s]}],"border-color-t":[{"border-t":[s]}],"border-color-r":[{"border-r":[s]}],"border-color-b":[{"border-b":[s]}],"border-color-l":[{"border-l":[s]}],"divide-color":[{divide:[s]}],"outline-style":[{outline:["",...Q()]}],"outline-offset":[{"outline-offset":[Qn,me]}],"outline-w":[{outline:[Qn,Er]}],"outline-color":[{outline:[t]}],"ring-w":[{ring:A()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[t]}],"ring-opacity":[{"ring-opacity":[_]}],"ring-offset-w":[{"ring-offset":[Qn,Er]}],"ring-offset-color":[{"ring-offset":[t]}],shadow:[{shadow:["","inner","none",Tr,pP]}],"shadow-color":[{shadow:[Go]}],opacity:[{opacity:[_]}],"mix-blend":[{"mix-blend":[...z(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":z()}],filter:[{filter:["","none"]}],blur:[{blur:[n]}],brightness:[{brightness:[r]}],contrast:[{contrast:[u]}],"drop-shadow":[{"drop-shadow":["","none",Tr,me]}],grayscale:[{grayscale:[d]}],"hue-rotate":[{"hue-rotate":[h]}],invert:[{invert:[p]}],saturate:[{saturate:[E]}],sepia:[{sepia:[M]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[n]}],"backdrop-brightness":[{"backdrop-brightness":[r]}],"backdrop-contrast":[{"backdrop-contrast":[u]}],"backdrop-grayscale":[{"backdrop-grayscale":[d]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[h]}],"backdrop-invert":[{"backdrop-invert":[p]}],"backdrop-opacity":[{"backdrop-opacity":[_]}],"backdrop-saturate":[{"backdrop-saturate":[E]}],"backdrop-sepia":[{"backdrop-sepia":[M]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[o]}],"border-spacing-x":[{"border-spacing-x":[o]}],"border-spacing-y":[{"border-spacing-y":[o]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",me]}],duration:[{duration:se()}],ease:[{ease:["linear","in","out","in-out",me]}],delay:[{delay:se()}],animate:[{animate:["none","spin","ping","pulse","bounce",me]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[k]}],"scale-x":[{"scale-x":[k]}],"scale-y":[{"scale-y":[k]}],rotate:[{rotate:[Ko,me]}],"translate-x":[{"translate-x":[S]}],"translate-y":[{"translate-y":[S]}],"skew-x":[{"skew-x":[D]}],"skew-y":[{"skew-y":[D]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",me]}],accent:[{accent:["auto",t]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",me]}],"caret-color":[{caret:[t]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":j()}],"scroll-mx":[{"scroll-mx":j()}],"scroll-my":[{"scroll-my":j()}],"scroll-ms":[{"scroll-ms":j()}],"scroll-me":[{"scroll-me":j()}],"scroll-mt":[{"scroll-mt":j()}],"scroll-mr":[{"scroll-mr":j()}],"scroll-mb":[{"scroll-mb":j()}],"scroll-ml":[{"scroll-ml":j()}],"scroll-p":[{"scroll-p":j()}],"scroll-px":[{"scroll-px":j()}],"scroll-py":[{"scroll-py":j()}],"scroll-ps":[{"scroll-ps":j()}],"scroll-pe":[{"scroll-pe":j()}],"scroll-pt":[{"scroll-pt":j()}],"scroll-pr":[{"scroll-pr":j()}],"scroll-pb":[{"scroll-pb":j()}],"scroll-pl":[{"scroll-pl":j()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",me]}],fill:[{fill:[t,"none"]}],"stroke-w":[{stroke:[Qn,Er,Mh]}],stroke:[{stroke:[t,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},xP=eP(yP);function ce(...t){return xP(pE(t))}const wP=uk,EE=m.forwardRef(({className:t,...e},n)=>l.jsx(aE,{ref:n,className:ce("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",t),...e}));EE.displayName=aE.displayName;const _P=po("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),TE=m.forwardRef(({className:t,variant:e,...n},r)=>l.jsx(lE,{ref:r,className:ce(_P({variant:e}),t),...n}));TE.displayName=lE.displayName;const EP=m.forwardRef(({className:t,...e},n)=>l.jsx(dE,{ref:n,className:ce("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",t),...e}));EP.displayName=dE.displayName;const SE=m.forwardRef(({className:t,...e},n)=>l.jsx(hE,{ref:n,className:ce("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",t),"toast-close":"",...e,children:l.jsx(ul,{className:"h-4 w-4"})}));SE.displayName=hE.displayName;const bE=m.forwardRef(({className:t,...e},n)=>l.jsx(cE,{ref:n,className:ce("text-sm font-semibold",t),...e}));bE.displayName=cE.displayName;const CE=m.forwardRef(({className:t,...e},n)=>l.jsx(uE,{ref:n,className:ce("text-sm opacity-90",t),...e}));CE.displayName=uE.displayName;function TP(){const{toasts:t}=Ku();return l.jsxs(wP,{children:[t.map(function({id:e,title:n,description:r,action:s,...i}){return l.jsxs(TE,{...i,children:[l.jsxs("div",{className:"grid gap-1",children:[n&&l.jsx(bE,{children:n}),r&&l.jsx(CE,{children:r})]}),s,l.jsx(SE,{})]},e)}),l.jsx(EE,{})]})}var SP=qp[" useId ".trim().toString()]||(()=>{}),bP=0;function Bt(t){const[e,n]=m.useState(SP());return at(()=>{n(r=>r??String(bP++))},[t]),e?`radix-${e}`:""}const CP=["top","right","bottom","left"],Gr=Math.min,Yt=Math.max,ou=Math.round,nc=Math.floor,Fn=t=>({x:t,y:t}),NP={left:"right",right:"left",bottom:"top",top:"bottom"},IP={start:"end",end:"start"};function ip(t,e,n){return Yt(t,Gr(e,n))}function lr(t,e){return typeof t=="function"?t(e):t}function cr(t){return t.split("-")[0]}function go(t){return t.split("-")[1]}function Hm(t){return t==="x"?"y":"x"}function Wm(t){return t==="y"?"height":"width"}function On(t){return["top","bottom"].includes(cr(t))?"y":"x"}function qm(t){return Hm(On(t))}function RP(t,e,n){n===void 0&&(n=!1);const r=go(t),s=qm(t),i=Wm(s);let o=s==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return e.reference[i]>e.floating[i]&&(o=au(o)),[o,au(o)]}function AP(t){const e=au(t);return[op(t),e,op(e)]}function op(t){return t.replace(/start|end/g,e=>IP[e])}function kP(t,e,n){const r=["left","right"],s=["right","left"],i=["top","bottom"],o=["bottom","top"];switch(t){case"top":case"bottom":return n?e?s:r:e?r:s;case"left":case"right":return e?i:o;default:return[]}}function PP(t,e,n,r){const s=go(t);let i=kP(cr(t),n==="start",r);return s&&(i=i.map(o=>o+"-"+s),e&&(i=i.concat(i.map(op)))),i}function au(t){return t.replace(/left|right|bottom|top/g,e=>NP[e])}function jP(t){return{top:0,right:0,bottom:0,left:0,...t}}function NE(t){return typeof t!="number"?jP(t):{top:t,right:t,bottom:t,left:t}}function lu(t){const{x:e,y:n,width:r,height:s}=t;return{width:r,height:s,top:n,left:e,right:e+r,bottom:n+s,x:e,y:n}}function kx(t,e,n){let{reference:r,floating:s}=t;const i=On(e),o=qm(e),a=Wm(o),u=cr(e),d=i==="y",h=r.x+r.width/2-s.width/2,p=r.y+r.height/2-s.height/2,g=r[a]/2-s[a]/2;let w;switch(u){case"top":w={x:h,y:r.y-s.height};break;case"bottom":w={x:h,y:r.y+r.height};break;case"right":w={x:r.x+r.width,y:p};break;case"left":w={x:r.x-s.width,y:p};break;default:w={x:r.x,y:r.y}}switch(go(e)){case"start":w[o]-=g*(n&&d?-1:1);break;case"end":w[o]+=g*(n&&d?-1:1);break}return w}const DP=async(t,e,n)=>{const{placement:r="bottom",strategy:s="absolute",middleware:i=[],platform:o}=n,a=i.filter(Boolean),u=await(o.isRTL==null?void 0:o.isRTL(e));let d=await o.getElementRects({reference:t,floating:e,strategy:s}),{x:h,y:p}=kx(d,r,u),g=r,w={},C=0;for(let x=0;x<a.length;x++){const{name:T,fn:_}=a[x],{x:y,y:E,data:k,reset:M}=await _({x:h,y:p,initialPlacement:r,placement:g,strategy:s,middlewareData:w,rects:d,platform:o,elements:{reference:t,floating:e}});h=y??h,p=E??p,w={...w,[T]:{...w[T],...k}},M&&C<=50&&(C++,typeof M=="object"&&(M.placement&&(g=M.placement),M.rects&&(d=M.rects===!0?await o.getElementRects({reference:t,floating:e,strategy:s}):M.rects),{x:h,y:p}=kx(d,g,u)),x=-1)}return{x:h,y:p,placement:g,strategy:s,middlewareData:w}};async function za(t,e){var n;e===void 0&&(e={});const{x:r,y:s,platform:i,rects:o,elements:a,strategy:u}=t,{boundary:d="clippingAncestors",rootBoundary:h="viewport",elementContext:p="floating",altBoundary:g=!1,padding:w=0}=lr(e,t),C=NE(w),T=a[g?p==="floating"?"reference":"floating":p],_=lu(await i.getClippingRect({element:(n=await(i.isElement==null?void 0:i.isElement(T)))==null||n?T:T.contextElement||await(i.getDocumentElement==null?void 0:i.getDocumentElement(a.floating)),boundary:d,rootBoundary:h,strategy:u})),y=p==="floating"?{x:r,y:s,width:o.floating.width,height:o.floating.height}:o.reference,E=await(i.getOffsetParent==null?void 0:i.getOffsetParent(a.floating)),k=await(i.isElement==null?void 0:i.isElement(E))?await(i.getScale==null?void 0:i.getScale(E))||{x:1,y:1}:{x:1,y:1},M=lu(i.convertOffsetParentRelativeRectToViewportRelativeRect?await i.convertOffsetParentRelativeRectToViewportRelativeRect({elements:a,rect:y,offsetParent:E,strategy:u}):y);return{top:(_.top-M.top+C.top)/k.y,bottom:(M.bottom-_.bottom+C.bottom)/k.y,left:(_.left-M.left+C.left)/k.x,right:(M.right-_.right+C.right)/k.x}}const MP=t=>({name:"arrow",options:t,async fn(e){const{x:n,y:r,placement:s,rects:i,platform:o,elements:a,middlewareData:u}=e,{element:d,padding:h=0}=lr(t,e)||{};if(d==null)return{};const p=NE(h),g={x:n,y:r},w=qm(s),C=Wm(w),x=await o.getDimensions(d),T=w==="y",_=T?"top":"left",y=T?"bottom":"right",E=T?"clientHeight":"clientWidth",k=i.reference[C]+i.reference[w]-g[w]-i.floating[C],M=g[w]-i.reference[w],D=await(o.getOffsetParent==null?void 0:o.getOffsetParent(d));let b=D?D[E]:0;(!b||!await(o.isElement==null?void 0:o.isElement(D)))&&(b=a.floating[E]||i.floating[C]);const S=k/2-M/2,I=b/2-x[C]/2-1,R=Gr(p[_],I),P=Gr(p[y],I),j=R,A=b-x[C]-P,L=b/2-x[C]/2+S,G=ip(j,L,A),Q=!u.arrow&&go(s)!=null&&L!==G&&i.reference[C]/2-(L<j?R:P)-x[C]/2<0,z=Q?L<j?L-j:L-A:0;return{[w]:g[w]+z,data:{[w]:G,centerOffset:L-G-z,...Q&&{alignmentOffset:z}},reset:Q}}}),OP=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(e){var n,r;const{placement:s,middlewareData:i,rects:o,initialPlacement:a,platform:u,elements:d}=e,{mainAxis:h=!0,crossAxis:p=!0,fallbackPlacements:g,fallbackStrategy:w="bestFit",fallbackAxisSideDirection:C="none",flipAlignment:x=!0,...T}=lr(t,e);if((n=i.arrow)!=null&&n.alignmentOffset)return{};const _=cr(s),y=On(a),E=cr(a)===a,k=await(u.isRTL==null?void 0:u.isRTL(d.floating)),M=g||(E||!x?[au(a)]:AP(a)),D=C!=="none";!g&&D&&M.push(...PP(a,x,C,k));const b=[a,...M],S=await za(e,T),I=[];let R=((r=i.flip)==null?void 0:r.overflows)||[];if(h&&I.push(S[_]),p){const L=RP(s,o,k);I.push(S[L[0]],S[L[1]])}if(R=[...R,{placement:s,overflows:I}],!I.every(L=>L<=0)){var P,j;const L=(((P=i.flip)==null?void 0:P.index)||0)+1,G=b[L];if(G&&(!(p==="alignment"?y!==On(G):!1)||R.every(O=>O.overflows[0]>0&&On(O.placement)===y)))return{data:{index:L,overflows:R},reset:{placement:G}};let Q=(j=R.filter(z=>z.overflows[0]<=0).sort((z,O)=>z.overflows[1]-O.overflows[1])[0])==null?void 0:j.placement;if(!Q)switch(w){case"bestFit":{var A;const z=(A=R.filter(O=>{if(D){const $=On(O.placement);return $===y||$==="y"}return!0}).map(O=>[O.placement,O.overflows.filter($=>$>0).reduce(($,Z)=>$+Z,0)]).sort((O,$)=>O[1]-$[1])[0])==null?void 0:A[0];z&&(Q=z);break}case"initialPlacement":Q=a;break}if(s!==Q)return{reset:{placement:Q}}}return{}}}};function Px(t,e){return{top:t.top-e.height,right:t.right-e.width,bottom:t.bottom-e.height,left:t.left-e.width}}function jx(t){return CP.some(e=>t[e]>=0)}const VP=function(t){return t===void 0&&(t={}),{name:"hide",options:t,async fn(e){const{rects:n}=e,{strategy:r="referenceHidden",...s}=lr(t,e);switch(r){case"referenceHidden":{const i=await za(e,{...s,elementContext:"reference"}),o=Px(i,n.reference);return{data:{referenceHiddenOffsets:o,referenceHidden:jx(o)}}}case"escaped":{const i=await za(e,{...s,altBoundary:!0}),o=Px(i,n.floating);return{data:{escapedOffsets:o,escaped:jx(o)}}}default:return{}}}}};async function LP(t,e){const{placement:n,platform:r,elements:s}=t,i=await(r.isRTL==null?void 0:r.isRTL(s.floating)),o=cr(n),a=go(n),u=On(n)==="y",d=["left","top"].includes(o)?-1:1,h=i&&u?-1:1,p=lr(e,t);let{mainAxis:g,crossAxis:w,alignmentAxis:C}=typeof p=="number"?{mainAxis:p,crossAxis:0,alignmentAxis:null}:{mainAxis:p.mainAxis||0,crossAxis:p.crossAxis||0,alignmentAxis:p.alignmentAxis};return a&&typeof C=="number"&&(w=a==="end"?C*-1:C),u?{x:w*h,y:g*d}:{x:g*d,y:w*h}}const FP=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(e){var n,r;const{x:s,y:i,placement:o,middlewareData:a}=e,u=await LP(e,t);return o===((n=a.offset)==null?void 0:n.placement)&&(r=a.arrow)!=null&&r.alignmentOffset?{}:{x:s+u.x,y:i+u.y,data:{...u,placement:o}}}}},zP=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(e){const{x:n,y:r,placement:s}=e,{mainAxis:i=!0,crossAxis:o=!1,limiter:a={fn:T=>{let{x:_,y}=T;return{x:_,y}}},...u}=lr(t,e),d={x:n,y:r},h=await za(e,u),p=On(cr(s)),g=Hm(p);let w=d[g],C=d[p];if(i){const T=g==="y"?"top":"left",_=g==="y"?"bottom":"right",y=w+h[T],E=w-h[_];w=ip(y,w,E)}if(o){const T=p==="y"?"top":"left",_=p==="y"?"bottom":"right",y=C+h[T],E=C-h[_];C=ip(y,C,E)}const x=a.fn({...e,[g]:w,[p]:C});return{...x,data:{x:x.x-n,y:x.y-r,enabled:{[g]:i,[p]:o}}}}}},UP=function(t){return t===void 0&&(t={}),{options:t,fn(e){const{x:n,y:r,placement:s,rects:i,middlewareData:o}=e,{offset:a=0,mainAxis:u=!0,crossAxis:d=!0}=lr(t,e),h={x:n,y:r},p=On(s),g=Hm(p);let w=h[g],C=h[p];const x=lr(a,e),T=typeof x=="number"?{mainAxis:x,crossAxis:0}:{mainAxis:0,crossAxis:0,...x};if(u){const E=g==="y"?"height":"width",k=i.reference[g]-i.floating[E]+T.mainAxis,M=i.reference[g]+i.reference[E]-T.mainAxis;w<k?w=k:w>M&&(w=M)}if(d){var _,y;const E=g==="y"?"width":"height",k=["top","left"].includes(cr(s)),M=i.reference[p]-i.floating[E]+(k&&((_=o.offset)==null?void 0:_[p])||0)+(k?0:T.crossAxis),D=i.reference[p]+i.reference[E]+(k?0:((y=o.offset)==null?void 0:y[p])||0)-(k?T.crossAxis:0);C<M?C=M:C>D&&(C=D)}return{[g]:w,[p]:C}}}},$P=function(t){return t===void 0&&(t={}),{name:"size",options:t,async fn(e){var n,r;const{placement:s,rects:i,platform:o,elements:a}=e,{apply:u=()=>{},...d}=lr(t,e),h=await za(e,d),p=cr(s),g=go(s),w=On(s)==="y",{width:C,height:x}=i.floating;let T,_;p==="top"||p==="bottom"?(T=p,_=g===(await(o.isRTL==null?void 0:o.isRTL(a.floating))?"start":"end")?"left":"right"):(_=p,T=g==="end"?"top":"bottom");const y=x-h.top-h.bottom,E=C-h.left-h.right,k=Gr(x-h[T],y),M=Gr(C-h[_],E),D=!e.middlewareData.shift;let b=k,S=M;if((n=e.middlewareData.shift)!=null&&n.enabled.x&&(S=E),(r=e.middlewareData.shift)!=null&&r.enabled.y&&(b=y),D&&!g){const R=Yt(h.left,0),P=Yt(h.right,0),j=Yt(h.top,0),A=Yt(h.bottom,0);w?S=C-2*(R!==0||P!==0?R+P:Yt(h.left,h.right)):b=x-2*(j!==0||A!==0?j+A:Yt(h.top,h.bottom))}await u({...e,availableWidth:S,availableHeight:b});const I=await o.getDimensions(a.floating);return C!==I.width||x!==I.height?{reset:{rects:!0}}:{}}}};function Xu(){return typeof window<"u"}function vo(t){return IE(t)?(t.nodeName||"").toLowerCase():"#document"}function nn(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function Wn(t){var e;return(e=(IE(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function IE(t){return Xu()?t instanceof Node||t instanceof nn(t).Node:!1}function Sn(t){return Xu()?t instanceof Element||t instanceof nn(t).Element:!1}function $n(t){return Xu()?t instanceof HTMLElement||t instanceof nn(t).HTMLElement:!1}function Dx(t){return!Xu()||typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof nn(t).ShadowRoot}function dl(t){const{overflow:e,overflowX:n,overflowY:r,display:s}=bn(t);return/auto|scroll|overlay|hidden|clip/.test(e+r+n)&&!["inline","contents"].includes(s)}function BP(t){return["table","td","th"].includes(vo(t))}function Ju(t){return[":popover-open",":modal"].some(e=>{try{return t.matches(e)}catch{return!1}})}function Km(t){const e=Gm(),n=Sn(t)?bn(t):t;return["transform","translate","scale","rotate","perspective"].some(r=>n[r]?n[r]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!e&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!e&&(n.filter?n.filter!=="none":!1)||["transform","translate","scale","rotate","perspective","filter"].some(r=>(n.willChange||"").includes(r))||["paint","layout","strict","content"].some(r=>(n.contain||"").includes(r))}function HP(t){let e=Qr(t);for(;$n(e)&&!Xi(e);){if(Km(e))return e;if(Ju(e))return null;e=Qr(e)}return null}function Gm(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function Xi(t){return["html","body","#document"].includes(vo(t))}function bn(t){return nn(t).getComputedStyle(t)}function Zu(t){return Sn(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.scrollX,scrollTop:t.scrollY}}function Qr(t){if(vo(t)==="html")return t;const e=t.assignedSlot||t.parentNode||Dx(t)&&t.host||Wn(t);return Dx(e)?e.host:e}function RE(t){const e=Qr(t);return Xi(e)?t.ownerDocument?t.ownerDocument.body:t.body:$n(e)&&dl(e)?e:RE(e)}function Ua(t,e,n){var r;e===void 0&&(e=[]),n===void 0&&(n=!0);const s=RE(t),i=s===((r=t.ownerDocument)==null?void 0:r.body),o=nn(s);if(i){const a=ap(o);return e.concat(o,o.visualViewport||[],dl(s)?s:[],a&&n?Ua(a):[])}return e.concat(s,Ua(s,[],n))}function ap(t){return t.parent&&Object.getPrototypeOf(t.parent)?t.frameElement:null}function AE(t){const e=bn(t);let n=parseFloat(e.width)||0,r=parseFloat(e.height)||0;const s=$n(t),i=s?t.offsetWidth:n,o=s?t.offsetHeight:r,a=ou(n)!==i||ou(r)!==o;return a&&(n=i,r=o),{width:n,height:r,$:a}}function Qm(t){return Sn(t)?t:t.contextElement}function Vi(t){const e=Qm(t);if(!$n(e))return Fn(1);const n=e.getBoundingClientRect(),{width:r,height:s,$:i}=AE(e);let o=(i?ou(n.width):n.width)/r,a=(i?ou(n.height):n.height)/s;return(!o||!Number.isFinite(o))&&(o=1),(!a||!Number.isFinite(a))&&(a=1),{x:o,y:a}}const WP=Fn(0);function kE(t){const e=nn(t);return!Gm()||!e.visualViewport?WP:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function qP(t,e,n){return e===void 0&&(e=!1),!n||e&&n!==nn(t)?!1:e}function $s(t,e,n,r){e===void 0&&(e=!1),n===void 0&&(n=!1);const s=t.getBoundingClientRect(),i=Qm(t);let o=Fn(1);e&&(r?Sn(r)&&(o=Vi(r)):o=Vi(t));const a=qP(i,n,r)?kE(i):Fn(0);let u=(s.left+a.x)/o.x,d=(s.top+a.y)/o.y,h=s.width/o.x,p=s.height/o.y;if(i){const g=nn(i),w=r&&Sn(r)?nn(r):r;let C=g,x=ap(C);for(;x&&r&&w!==C;){const T=Vi(x),_=x.getBoundingClientRect(),y=bn(x),E=_.left+(x.clientLeft+parseFloat(y.paddingLeft))*T.x,k=_.top+(x.clientTop+parseFloat(y.paddingTop))*T.y;u*=T.x,d*=T.y,h*=T.x,p*=T.y,u+=E,d+=k,C=nn(x),x=ap(C)}}return lu({width:h,height:p,x:u,y:d})}function Ym(t,e){const n=Zu(t).scrollLeft;return e?e.left+n:$s(Wn(t)).left+n}function PE(t,e,n){n===void 0&&(n=!1);const r=t.getBoundingClientRect(),s=r.left+e.scrollLeft-(n?0:Ym(t,r)),i=r.top+e.scrollTop;return{x:s,y:i}}function KP(t){let{elements:e,rect:n,offsetParent:r,strategy:s}=t;const i=s==="fixed",o=Wn(r),a=e?Ju(e.floating):!1;if(r===o||a&&i)return n;let u={scrollLeft:0,scrollTop:0},d=Fn(1);const h=Fn(0),p=$n(r);if((p||!p&&!i)&&((vo(r)!=="body"||dl(o))&&(u=Zu(r)),$n(r))){const w=$s(r);d=Vi(r),h.x=w.x+r.clientLeft,h.y=w.y+r.clientTop}const g=o&&!p&&!i?PE(o,u,!0):Fn(0);return{width:n.width*d.x,height:n.height*d.y,x:n.x*d.x-u.scrollLeft*d.x+h.x+g.x,y:n.y*d.y-u.scrollTop*d.y+h.y+g.y}}function GP(t){return Array.from(t.getClientRects())}function QP(t){const e=Wn(t),n=Zu(t),r=t.ownerDocument.body,s=Yt(e.scrollWidth,e.clientWidth,r.scrollWidth,r.clientWidth),i=Yt(e.scrollHeight,e.clientHeight,r.scrollHeight,r.clientHeight);let o=-n.scrollLeft+Ym(t);const a=-n.scrollTop;return bn(r).direction==="rtl"&&(o+=Yt(e.clientWidth,r.clientWidth)-s),{width:s,height:i,x:o,y:a}}function YP(t,e){const n=nn(t),r=Wn(t),s=n.visualViewport;let i=r.clientWidth,o=r.clientHeight,a=0,u=0;if(s){i=s.width,o=s.height;const d=Gm();(!d||d&&e==="fixed")&&(a=s.offsetLeft,u=s.offsetTop)}return{width:i,height:o,x:a,y:u}}function XP(t,e){const n=$s(t,!0,e==="fixed"),r=n.top+t.clientTop,s=n.left+t.clientLeft,i=$n(t)?Vi(t):Fn(1),o=t.clientWidth*i.x,a=t.clientHeight*i.y,u=s*i.x,d=r*i.y;return{width:o,height:a,x:u,y:d}}function Mx(t,e,n){let r;if(e==="viewport")r=YP(t,n);else if(e==="document")r=QP(Wn(t));else if(Sn(e))r=XP(e,n);else{const s=kE(t);r={x:e.x-s.x,y:e.y-s.y,width:e.width,height:e.height}}return lu(r)}function jE(t,e){const n=Qr(t);return n===e||!Sn(n)||Xi(n)?!1:bn(n).position==="fixed"||jE(n,e)}function JP(t,e){const n=e.get(t);if(n)return n;let r=Ua(t,[],!1).filter(a=>Sn(a)&&vo(a)!=="body"),s=null;const i=bn(t).position==="fixed";let o=i?Qr(t):t;for(;Sn(o)&&!Xi(o);){const a=bn(o),u=Km(o);!u&&a.position==="fixed"&&(s=null),(i?!u&&!s:!u&&a.position==="static"&&!!s&&["absolute","fixed"].includes(s.position)||dl(o)&&!u&&jE(t,o))?r=r.filter(h=>h!==o):s=a,o=Qr(o)}return e.set(t,r),r}function ZP(t){let{element:e,boundary:n,rootBoundary:r,strategy:s}=t;const o=[...n==="clippingAncestors"?Ju(e)?[]:JP(e,this._c):[].concat(n),r],a=o[0],u=o.reduce((d,h)=>{const p=Mx(e,h,s);return d.top=Yt(p.top,d.top),d.right=Gr(p.right,d.right),d.bottom=Gr(p.bottom,d.bottom),d.left=Yt(p.left,d.left),d},Mx(e,a,s));return{width:u.right-u.left,height:u.bottom-u.top,x:u.left,y:u.top}}function e2(t){const{width:e,height:n}=AE(t);return{width:e,height:n}}function t2(t,e,n){const r=$n(e),s=Wn(e),i=n==="fixed",o=$s(t,!0,i,e);let a={scrollLeft:0,scrollTop:0};const u=Fn(0);function d(){u.x=Ym(s)}if(r||!r&&!i)if((vo(e)!=="body"||dl(s))&&(a=Zu(e)),r){const w=$s(e,!0,i,e);u.x=w.x+e.clientLeft,u.y=w.y+e.clientTop}else s&&d();i&&!r&&s&&d();const h=s&&!r&&!i?PE(s,a):Fn(0),p=o.left+a.scrollLeft-u.x-h.x,g=o.top+a.scrollTop-u.y-h.y;return{x:p,y:g,width:o.width,height:o.height}}function Oh(t){return bn(t).position==="static"}function Ox(t,e){if(!$n(t)||bn(t).position==="fixed")return null;if(e)return e(t);let n=t.offsetParent;return Wn(t)===n&&(n=n.ownerDocument.body),n}function DE(t,e){const n=nn(t);if(Ju(t))return n;if(!$n(t)){let s=Qr(t);for(;s&&!Xi(s);){if(Sn(s)&&!Oh(s))return s;s=Qr(s)}return n}let r=Ox(t,e);for(;r&&BP(r)&&Oh(r);)r=Ox(r,e);return r&&Xi(r)&&Oh(r)&&!Km(r)?n:r||HP(t)||n}const n2=async function(t){const e=this.getOffsetParent||DE,n=this.getDimensions,r=await n(t.floating);return{reference:t2(t.reference,await e(t.floating),t.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function r2(t){return bn(t).direction==="rtl"}const s2={convertOffsetParentRelativeRectToViewportRelativeRect:KP,getDocumentElement:Wn,getClippingRect:ZP,getOffsetParent:DE,getElementRects:n2,getClientRects:GP,getDimensions:e2,getScale:Vi,isElement:Sn,isRTL:r2};function ME(t,e){return t.x===e.x&&t.y===e.y&&t.width===e.width&&t.height===e.height}function i2(t,e){let n=null,r;const s=Wn(t);function i(){var a;clearTimeout(r),(a=n)==null||a.disconnect(),n=null}function o(a,u){a===void 0&&(a=!1),u===void 0&&(u=1),i();const d=t.getBoundingClientRect(),{left:h,top:p,width:g,height:w}=d;if(a||e(),!g||!w)return;const C=nc(p),x=nc(s.clientWidth-(h+g)),T=nc(s.clientHeight-(p+w)),_=nc(h),E={rootMargin:-C+"px "+-x+"px "+-T+"px "+-_+"px",threshold:Yt(0,Gr(1,u))||1};let k=!0;function M(D){const b=D[0].intersectionRatio;if(b!==u){if(!k)return o();b?o(!1,b):r=setTimeout(()=>{o(!1,1e-7)},1e3)}b===1&&!ME(d,t.getBoundingClientRect())&&o(),k=!1}try{n=new IntersectionObserver(M,{...E,root:s.ownerDocument})}catch{n=new IntersectionObserver(M,E)}n.observe(t)}return o(!0),i}function o2(t,e,n,r){r===void 0&&(r={});const{ancestorScroll:s=!0,ancestorResize:i=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:a=typeof IntersectionObserver=="function",animationFrame:u=!1}=r,d=Qm(t),h=s||i?[...d?Ua(d):[],...Ua(e)]:[];h.forEach(_=>{s&&_.addEventListener("scroll",n,{passive:!0}),i&&_.addEventListener("resize",n)});const p=d&&a?i2(d,n):null;let g=-1,w=null;o&&(w=new ResizeObserver(_=>{let[y]=_;y&&y.target===d&&w&&(w.unobserve(e),cancelAnimationFrame(g),g=requestAnimationFrame(()=>{var E;(E=w)==null||E.observe(e)})),n()}),d&&!u&&w.observe(d),w.observe(e));let C,x=u?$s(t):null;u&&T();function T(){const _=$s(t);x&&!ME(x,_)&&n(),x=_,C=requestAnimationFrame(T)}return n(),()=>{var _;h.forEach(y=>{s&&y.removeEventListener("scroll",n),i&&y.removeEventListener("resize",n)}),p==null||p(),(_=w)==null||_.disconnect(),w=null,u&&cancelAnimationFrame(C)}}const a2=FP,l2=zP,c2=OP,u2=$P,d2=VP,Vx=MP,h2=UP,f2=(t,e,n)=>{const r=new Map,s={platform:s2,...n},i={...s.platform,_c:r};return DP(t,e,{...s,platform:i})};var p2=typeof document<"u",m2=function(){},Cc=p2?m.useLayoutEffect:m2;function cu(t,e){if(t===e)return!0;if(typeof t!=typeof e)return!1;if(typeof t=="function"&&t.toString()===e.toString())return!0;let n,r,s;if(t&&e&&typeof t=="object"){if(Array.isArray(t)){if(n=t.length,n!==e.length)return!1;for(r=n;r--!==0;)if(!cu(t[r],e[r]))return!1;return!0}if(s=Object.keys(t),n=s.length,n!==Object.keys(e).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(e,s[r]))return!1;for(r=n;r--!==0;){const i=s[r];if(!(i==="_owner"&&t.$$typeof)&&!cu(t[i],e[i]))return!1}return!0}return t!==t&&e!==e}function OE(t){return typeof window>"u"?1:(t.ownerDocument.defaultView||window).devicePixelRatio||1}function Lx(t,e){const n=OE(t);return Math.round(e*n)/n}function Vh(t){const e=m.useRef(t);return Cc(()=>{e.current=t}),e}function g2(t){t===void 0&&(t={});const{placement:e="bottom",strategy:n="absolute",middleware:r=[],platform:s,elements:{reference:i,floating:o}={},transform:a=!0,whileElementsMounted:u,open:d}=t,[h,p]=m.useState({x:0,y:0,strategy:n,placement:e,middlewareData:{},isPositioned:!1}),[g,w]=m.useState(r);cu(g,r)||w(r);const[C,x]=m.useState(null),[T,_]=m.useState(null),y=m.useCallback(O=>{O!==D.current&&(D.current=O,x(O))},[]),E=m.useCallback(O=>{O!==b.current&&(b.current=O,_(O))},[]),k=i||C,M=o||T,D=m.useRef(null),b=m.useRef(null),S=m.useRef(h),I=u!=null,R=Vh(u),P=Vh(s),j=Vh(d),A=m.useCallback(()=>{if(!D.current||!b.current)return;const O={placement:e,strategy:n,middleware:g};P.current&&(O.platform=P.current),f2(D.current,b.current,O).then($=>{const Z={...$,isPositioned:j.current!==!1};L.current&&!cu(S.current,Z)&&(S.current=Z,Zs.flushSync(()=>{p(Z)}))})},[g,e,n,P,j]);Cc(()=>{d===!1&&S.current.isPositioned&&(S.current.isPositioned=!1,p(O=>({...O,isPositioned:!1})))},[d]);const L=m.useRef(!1);Cc(()=>(L.current=!0,()=>{L.current=!1}),[]),Cc(()=>{if(k&&(D.current=k),M&&(b.current=M),k&&M){if(R.current)return R.current(k,M,A);A()}},[k,M,A,R,I]);const G=m.useMemo(()=>({reference:D,floating:b,setReference:y,setFloating:E}),[y,E]),Q=m.useMemo(()=>({reference:k,floating:M}),[k,M]),z=m.useMemo(()=>{const O={position:n,left:0,top:0};if(!Q.floating)return O;const $=Lx(Q.floating,h.x),Z=Lx(Q.floating,h.y);return a?{...O,transform:"translate("+$+"px, "+Z+"px)",...OE(Q.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:$,top:Z}},[n,a,Q.floating,h.x,h.y]);return m.useMemo(()=>({...h,update:A,refs:G,elements:Q,floatingStyles:z}),[h,A,G,Q,z])}const v2=t=>{function e(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:t,fn(n){const{element:r,padding:s}=typeof t=="function"?t(n):t;return r&&e(r)?r.current!=null?Vx({element:r.current,padding:s}).fn(n):{}:r?Vx({element:r,padding:s}).fn(n):{}}}},y2=(t,e)=>({...a2(t),options:[t,e]}),x2=(t,e)=>({...l2(t),options:[t,e]}),w2=(t,e)=>({...h2(t),options:[t,e]}),_2=(t,e)=>({...c2(t),options:[t,e]}),E2=(t,e)=>({...u2(t),options:[t,e]}),T2=(t,e)=>({...d2(t),options:[t,e]}),S2=(t,e)=>({...v2(t),options:[t,e]});var b2="Arrow",VE=m.forwardRef((t,e)=>{const{children:n,width:r=10,height:s=5,...i}=t;return l.jsx(de.svg,{...i,ref:e,width:r,height:s,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:t.asChild?n:l.jsx("polygon",{points:"0,0 30,0 15,10"})})});VE.displayName=b2;var C2=VE;function N2(t){const[e,n]=m.useState(void 0);return at(()=>{if(t){n({width:t.offsetWidth,height:t.offsetHeight});const r=new ResizeObserver(s=>{if(!Array.isArray(s)||!s.length)return;const i=s[0];let o,a;if("borderBoxSize"in i){const u=i.borderBoxSize,d=Array.isArray(u)?u[0]:u;o=d.inlineSize,a=d.blockSize}else o=t.offsetWidth,a=t.offsetHeight;n({width:o,height:a})});return r.observe(t,{box:"border-box"}),()=>r.unobserve(t)}else n(void 0)},[t]),e}var Xm="Popper",[LE,yo]=os(Xm),[I2,FE]=LE(Xm),zE=t=>{const{__scopePopper:e,children:n}=t,[r,s]=m.useState(null);return l.jsx(I2,{scope:e,anchor:r,onAnchorChange:s,children:n})};zE.displayName=Xm;var UE="PopperAnchor",$E=m.forwardRef((t,e)=>{const{__scopePopper:n,virtualRef:r,...s}=t,i=FE(UE,n),o=m.useRef(null),a=Ae(e,o);return m.useEffect(()=>{i.onAnchorChange((r==null?void 0:r.current)||o.current)}),r?null:l.jsx(de.div,{...s,ref:a})});$E.displayName=UE;var Jm="PopperContent",[R2,A2]=LE(Jm),BE=m.forwardRef((t,e)=>{var Y,pe,we,ye,Te,be;const{__scopePopper:n,side:r="bottom",sideOffset:s=0,align:i="center",alignOffset:o=0,arrowPadding:a=0,avoidCollisions:u=!0,collisionBoundary:d=[],collisionPadding:h=0,sticky:p="partial",hideWhenDetached:g=!1,updatePositionStrategy:w="optimized",onPlaced:C,...x}=t,T=FE(Jm,n),[_,y]=m.useState(null),E=Ae(e,lt=>y(lt)),[k,M]=m.useState(null),D=N2(k),b=(D==null?void 0:D.width)??0,S=(D==null?void 0:D.height)??0,I=r+(i!=="center"?"-"+i:""),R=typeof h=="number"?h:{top:0,right:0,bottom:0,left:0,...h},P=Array.isArray(d)?d:[d],j=P.length>0,A={padding:R,boundary:P.filter(P2),altBoundary:j},{refs:L,floatingStyles:G,placement:Q,isPositioned:z,middlewareData:O}=g2({strategy:"fixed",placement:I,whileElementsMounted:(...lt)=>o2(...lt,{animationFrame:w==="always"}),elements:{reference:T.anchor},middleware:[y2({mainAxis:s+S,alignmentAxis:o}),u&&x2({mainAxis:!0,crossAxis:!1,limiter:p==="partial"?w2():void 0,...A}),u&&_2({...A}),E2({...A,apply:({elements:lt,rects:Dt,availableWidth:qn,availableHeight:vr})=>{const{width:hs,height:Ld}=Dt.reference,fs=lt.floating.style;fs.setProperty("--radix-popper-available-width",`${qn}px`),fs.setProperty("--radix-popper-available-height",`${vr}px`),fs.setProperty("--radix-popper-anchor-width",`${hs}px`),fs.setProperty("--radix-popper-anchor-height",`${Ld}px`)}}),k&&S2({element:k,padding:a}),j2({arrowWidth:b,arrowHeight:S}),g&&T2({strategy:"referenceHidden",...A})]}),[$,Z]=qE(Q),se=Tn(C);at(()=>{z&&(se==null||se())},[z,se]);const U=(Y=O.arrow)==null?void 0:Y.x,J=(pe=O.arrow)==null?void 0:pe.y,W=((we=O.arrow)==null?void 0:we.centerOffset)!==0,[B,ee]=m.useState();return at(()=>{_&&ee(window.getComputedStyle(_).zIndex)},[_]),l.jsx("div",{ref:L.setFloating,"data-radix-popper-content-wrapper":"",style:{...G,transform:z?G.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:B,"--radix-popper-transform-origin":[(ye=O.transformOrigin)==null?void 0:ye.x,(Te=O.transformOrigin)==null?void 0:Te.y].join(" "),...((be=O.hide)==null?void 0:be.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:t.dir,children:l.jsx(R2,{scope:n,placedSide:$,onArrowChange:M,arrowX:U,arrowY:J,shouldHideArrow:W,children:l.jsx(de.div,{"data-side":$,"data-align":Z,...x,ref:E,style:{...x.style,animation:z?void 0:"none"}})})})});BE.displayName=Jm;var HE="PopperArrow",k2={top:"bottom",right:"left",bottom:"top",left:"right"},WE=m.forwardRef(function(e,n){const{__scopePopper:r,...s}=e,i=A2(HE,r),o=k2[i.placedSide];return l.jsx("span",{ref:i.onArrowChange,style:{position:"absolute",left:i.arrowX,top:i.arrowY,[o]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[i.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[i.placedSide],visibility:i.shouldHideArrow?"hidden":void 0},children:l.jsx(C2,{...s,ref:n,style:{...s.style,display:"block"}})})});WE.displayName=HE;function P2(t){return t!==null}var j2=t=>({name:"transformOrigin",options:t,fn(e){var T,_,y;const{placement:n,rects:r,middlewareData:s}=e,o=((T=s.arrow)==null?void 0:T.centerOffset)!==0,a=o?0:t.arrowWidth,u=o?0:t.arrowHeight,[d,h]=qE(n),p={start:"0%",center:"50%",end:"100%"}[h],g=(((_=s.arrow)==null?void 0:_.x)??0)+a/2,w=(((y=s.arrow)==null?void 0:y.y)??0)+u/2;let C="",x="";return d==="bottom"?(C=o?p:`${g}px`,x=`${-u}px`):d==="top"?(C=o?p:`${g}px`,x=`${r.floating.height+u}px`):d==="right"?(C=`${-u}px`,x=o?p:`${w}px`):d==="left"&&(C=`${r.floating.width+u}px`,x=o?p:`${w}px`),{data:{x:C,y:x}}}});function qE(t){const[e,n="center"]=t.split("-");return[e,n]}var KE=zE,ed=$E,Zm=BE,eg=WE,[td,d6]=os("Tooltip",[yo]),tg=yo(),GE="TooltipProvider",D2=700,Fx="tooltip.open",[M2,QE]=td(GE),YE=t=>{const{__scopeTooltip:e,delayDuration:n=D2,skipDelayDuration:r=300,disableHoverableContent:s=!1,children:i}=t,o=m.useRef(!0),a=m.useRef(!1),u=m.useRef(0);return m.useEffect(()=>{const d=u.current;return()=>window.clearTimeout(d)},[]),l.jsx(M2,{scope:e,isOpenDelayedRef:o,delayDuration:n,onOpen:m.useCallback(()=>{window.clearTimeout(u.current),o.current=!1},[]),onClose:m.useCallback(()=>{window.clearTimeout(u.current),u.current=window.setTimeout(()=>o.current=!0,r)},[r]),isPointerInTransitRef:a,onPointerInTransitChange:m.useCallback(d=>{a.current=d},[]),disableHoverableContent:s,children:i})};YE.displayName=GE;var XE="Tooltip",[h6,nd]=td(XE),lp="TooltipTrigger",O2=m.forwardRef((t,e)=>{const{__scopeTooltip:n,...r}=t,s=nd(lp,n),i=QE(lp,n),o=tg(n),a=m.useRef(null),u=Ae(e,a,s.onTriggerChange),d=m.useRef(!1),h=m.useRef(!1),p=m.useCallback(()=>d.current=!1,[]);return m.useEffect(()=>()=>document.removeEventListener("pointerup",p),[p]),l.jsx(ed,{asChild:!0,...o,children:l.jsx(de.button,{"aria-describedby":s.open?s.contentId:void 0,"data-state":s.stateAttribute,...r,ref:u,onPointerMove:ue(t.onPointerMove,g=>{g.pointerType!=="touch"&&!h.current&&!i.isPointerInTransitRef.current&&(s.onTriggerEnter(),h.current=!0)}),onPointerLeave:ue(t.onPointerLeave,()=>{s.onTriggerLeave(),h.current=!1}),onPointerDown:ue(t.onPointerDown,()=>{s.open&&s.onClose(),d.current=!0,document.addEventListener("pointerup",p,{once:!0})}),onFocus:ue(t.onFocus,()=>{d.current||s.onOpen()}),onBlur:ue(t.onBlur,s.onClose),onClick:ue(t.onClick,s.onClose)})})});O2.displayName=lp;var V2="TooltipPortal",[f6,L2]=td(V2,{forceMount:void 0}),Ji="TooltipContent",JE=m.forwardRef((t,e)=>{const n=L2(Ji,t.__scopeTooltip),{forceMount:r=n.forceMount,side:s="top",...i}=t,o=nd(Ji,t.__scopeTooltip);return l.jsx(mr,{present:r||o.open,children:o.disableHoverableContent?l.jsx(ZE,{side:s,...i,ref:e}):l.jsx(F2,{side:s,...i,ref:e})})}),F2=m.forwardRef((t,e)=>{const n=nd(Ji,t.__scopeTooltip),r=QE(Ji,t.__scopeTooltip),s=m.useRef(null),i=Ae(e,s),[o,a]=m.useState(null),{trigger:u,onClose:d}=n,h=s.current,{onPointerInTransitChange:p}=r,g=m.useCallback(()=>{a(null),p(!1)},[p]),w=m.useCallback((C,x)=>{const T=C.currentTarget,_={x:C.clientX,y:C.clientY},y=H2(_,T.getBoundingClientRect()),E=W2(_,y),k=q2(x.getBoundingClientRect()),M=G2([...E,...k]);a(M),p(!0)},[p]);return m.useEffect(()=>()=>g(),[g]),m.useEffect(()=>{if(u&&h){const C=T=>w(T,h),x=T=>w(T,u);return u.addEventListener("pointerleave",C),h.addEventListener("pointerleave",x),()=>{u.removeEventListener("pointerleave",C),h.removeEventListener("pointerleave",x)}}},[u,h,w,g]),m.useEffect(()=>{if(o){const C=x=>{const T=x.target,_={x:x.clientX,y:x.clientY},y=(u==null?void 0:u.contains(T))||(h==null?void 0:h.contains(T)),E=!K2(_,o);y?g():E&&(g(),d())};return document.addEventListener("pointermove",C),()=>document.removeEventListener("pointermove",C)}},[u,h,o,d,g]),l.jsx(ZE,{...t,ref:i})}),[z2,U2]=td(XE,{isInside:!1}),$2=SA("TooltipContent"),ZE=m.forwardRef((t,e)=>{const{__scopeTooltip:n,children:r,"aria-label":s,onEscapeKeyDown:i,onPointerDownOutside:o,...a}=t,u=nd(Ji,n),d=tg(n),{onClose:h}=u;return m.useEffect(()=>(document.addEventListener(Fx,h),()=>document.removeEventListener(Fx,h)),[h]),m.useEffect(()=>{if(u.trigger){const p=g=>{const w=g.target;w!=null&&w.contains(u.trigger)&&h()};return window.addEventListener("scroll",p,{capture:!0}),()=>window.removeEventListener("scroll",p,{capture:!0})}},[u.trigger,h]),l.jsx(fo,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:i,onPointerDownOutside:o,onFocusOutside:p=>p.preventDefault(),onDismiss:h,children:l.jsxs(Zm,{"data-state":u.stateAttribute,...d,...a,ref:e,style:{...a.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[l.jsx($2,{children:r}),l.jsx(z2,{scope:n,isInside:!0,children:l.jsx(qA,{id:u.contentId,role:"tooltip",children:s||r})})]})})});JE.displayName=Ji;var eT="TooltipArrow",B2=m.forwardRef((t,e)=>{const{__scopeTooltip:n,...r}=t,s=tg(n);return U2(eT,n).isInside?null:l.jsx(eg,{...s,...r,ref:e})});B2.displayName=eT;function H2(t,e){const n=Math.abs(e.top-t.y),r=Math.abs(e.bottom-t.y),s=Math.abs(e.right-t.x),i=Math.abs(e.left-t.x);switch(Math.min(n,r,s,i)){case i:return"left";case s:return"right";case n:return"top";case r:return"bottom";default:throw new Error("unreachable")}}function W2(t,e,n=5){const r=[];switch(e){case"top":r.push({x:t.x-n,y:t.y+n},{x:t.x+n,y:t.y+n});break;case"bottom":r.push({x:t.x-n,y:t.y-n},{x:t.x+n,y:t.y-n});break;case"left":r.push({x:t.x+n,y:t.y-n},{x:t.x+n,y:t.y+n});break;case"right":r.push({x:t.x-n,y:t.y-n},{x:t.x-n,y:t.y+n});break}return r}function q2(t){const{top:e,right:n,bottom:r,left:s}=t;return[{x:s,y:e},{x:n,y:e},{x:n,y:r},{x:s,y:r}]}function K2(t,e){const{x:n,y:r}=t;let s=!1;for(let i=0,o=e.length-1;i<e.length;o=i++){const a=e[i],u=e[o],d=a.x,h=a.y,p=u.x,g=u.y;h>r!=g>r&&n<(p-d)*(r-h)/(g-h)+d&&(s=!s)}return s}function G2(t){const e=t.slice();return e.sort((n,r)=>n.x<r.x?-1:n.x>r.x?1:n.y<r.y?-1:n.y>r.y?1:0),Q2(e)}function Q2(t){if(t.length<=1)return t.slice();const e=[];for(let r=0;r<t.length;r++){const s=t[r];for(;e.length>=2;){const i=e[e.length-1],o=e[e.length-2];if((i.x-o.x)*(s.y-o.y)>=(i.y-o.y)*(s.x-o.x))e.pop();else break}e.push(s)}e.pop();const n=[];for(let r=t.length-1;r>=0;r--){const s=t[r];for(;n.length>=2;){const i=n[n.length-1],o=n[n.length-2];if((i.x-o.x)*(s.y-o.y)>=(i.y-o.y)*(s.x-o.x))n.pop();else break}n.push(s)}return n.pop(),e.length===1&&n.length===1&&e[0].x===n[0].x&&e[0].y===n[0].y?e:e.concat(n)}var Y2=YE,tT=JE;const X2=Y2,J2=m.forwardRef(({className:t,sideOffset:e=4,...n},r)=>l.jsx(tT,{ref:r,sideOffset:e,className:ce("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-tooltip-content-transform-origin]",t),...n}));J2.displayName=tT.displayName;const Z2=po("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),oe=m.forwardRef(({className:t,variant:e,size:n,asChild:r=!1,...s},i)=>{const o=r?EA:"button";return l.jsx(o,{className:ce(Z2({variant:e,size:n,className:t})),ref:i,...s})});oe.displayName="Button";var Lh="focusScope.autoFocusOnMount",Fh="focusScope.autoFocusOnUnmount",zx={bubbles:!1,cancelable:!0},ej="FocusScope",rd=m.forwardRef((t,e)=>{const{loop:n=!1,trapped:r=!1,onMountAutoFocus:s,onUnmountAutoFocus:i,...o}=t,[a,u]=m.useState(null),d=Tn(s),h=Tn(i),p=m.useRef(null),g=Ae(e,x=>u(x)),w=m.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;m.useEffect(()=>{if(r){let x=function(E){if(w.paused||!a)return;const k=E.target;a.contains(k)?p.current=k:br(p.current,{select:!0})},T=function(E){if(w.paused||!a)return;const k=E.relatedTarget;k!==null&&(a.contains(k)||br(p.current,{select:!0}))},_=function(E){if(document.activeElement===document.body)for(const M of E)M.removedNodes.length>0&&br(a)};document.addEventListener("focusin",x),document.addEventListener("focusout",T);const y=new MutationObserver(_);return a&&y.observe(a,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",x),document.removeEventListener("focusout",T),y.disconnect()}}},[r,a,w.paused]),m.useEffect(()=>{if(a){$x.add(w);const x=document.activeElement;if(!a.contains(x)){const _=new CustomEvent(Lh,zx);a.addEventListener(Lh,d),a.dispatchEvent(_),_.defaultPrevented||(tj(oj(nT(a)),{select:!0}),document.activeElement===x&&br(a))}return()=>{a.removeEventListener(Lh,d),setTimeout(()=>{const _=new CustomEvent(Fh,zx);a.addEventListener(Fh,h),a.dispatchEvent(_),_.defaultPrevented||br(x??document.body,{select:!0}),a.removeEventListener(Fh,h),$x.remove(w)},0)}}},[a,d,h,w]);const C=m.useCallback(x=>{if(!n&&!r||w.paused)return;const T=x.key==="Tab"&&!x.altKey&&!x.ctrlKey&&!x.metaKey,_=document.activeElement;if(T&&_){const y=x.currentTarget,[E,k]=nj(y);E&&k?!x.shiftKey&&_===k?(x.preventDefault(),n&&br(E,{select:!0})):x.shiftKey&&_===E&&(x.preventDefault(),n&&br(k,{select:!0})):_===y&&x.preventDefault()}},[n,r,w.paused]);return l.jsx(de.div,{tabIndex:-1,...o,ref:g,onKeyDown:C})});rd.displayName=ej;function tj(t,{select:e=!1}={}){const n=document.activeElement;for(const r of t)if(br(r,{select:e}),document.activeElement!==n)return}function nj(t){const e=nT(t),n=Ux(e,t),r=Ux(e.reverse(),t);return[n,r]}function nT(t){const e=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const s=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||s?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)e.push(n.currentNode);return e}function Ux(t,e){for(const n of t)if(!rj(n,{upTo:e}))return n}function rj(t,{upTo:e}){if(getComputedStyle(t).visibility==="hidden")return!0;for(;t;){if(e!==void 0&&t===e)return!1;if(getComputedStyle(t).display==="none")return!0;t=t.parentElement}return!1}function sj(t){return t instanceof HTMLInputElement&&"select"in t}function br(t,{select:e=!1}={}){if(t&&t.focus){const n=document.activeElement;t.focus({preventScroll:!0}),t!==n&&sj(t)&&e&&t.select()}}var $x=ij();function ij(){let t=[];return{add(e){const n=t[0];e!==n&&(n==null||n.pause()),t=Bx(t,e),t.unshift(e)},remove(e){var n;t=Bx(t,e),(n=t[0])==null||n.resume()}}}function Bx(t,e){const n=[...t],r=n.indexOf(e);return r!==-1&&n.splice(r,1),n}function oj(t){return t.filter(e=>e.tagName!=="A")}var zh=0;function ng(){m.useEffect(()=>{const t=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",t[0]??Hx()),document.body.insertAdjacentElement("beforeend",t[1]??Hx()),zh++,()=>{zh===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(e=>e.remove()),zh--}},[])}function Hx(){const t=document.createElement("span");return t.setAttribute("data-radix-focus-guard",""),t.tabIndex=0,t.style.outline="none",t.style.opacity="0",t.style.position="fixed",t.style.pointerEvents="none",t}var jn=function(){return jn=Object.assign||function(e){for(var n,r=1,s=arguments.length;r<s;r++){n=arguments[r];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},jn.apply(this,arguments)};function rT(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n}function aj(t,e,n){if(n||arguments.length===2)for(var r=0,s=e.length,i;r<s;r++)(i||!(r in e))&&(i||(i=Array.prototype.slice.call(e,0,r)),i[r]=e[r]);return t.concat(i||Array.prototype.slice.call(e))}var Nc="right-scroll-bar-position",Ic="width-before-scroll-bar",lj="with-scroll-bars-hidden",cj="--removed-body-scroll-bar-size";function Uh(t,e){return typeof t=="function"?t(e):t&&(t.current=e),t}function uj(t,e){var n=m.useState(function(){return{value:t,callback:e,facade:{get current(){return n.value},set current(r){var s=n.value;s!==r&&(n.value=r,n.callback(r,s))}}}})[0];return n.callback=e,n.facade}var dj=typeof window<"u"?m.useLayoutEffect:m.useEffect,Wx=new WeakMap;function hj(t,e){var n=uj(null,function(r){return t.forEach(function(s){return Uh(s,r)})});return dj(function(){var r=Wx.get(n);if(r){var s=new Set(r),i=new Set(t),o=n.current;s.forEach(function(a){i.has(a)||Uh(a,null)}),i.forEach(function(a){s.has(a)||Uh(a,o)})}Wx.set(n,t)},[t]),n}function fj(t){return t}function pj(t,e){e===void 0&&(e=fj);var n=[],r=!1,s={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:t},useMedium:function(i){var o=e(i,r);return n.push(o),function(){n=n.filter(function(a){return a!==o})}},assignSyncMedium:function(i){for(r=!0;n.length;){var o=n;n=[],o.forEach(i)}n={push:function(a){return i(a)},filter:function(){return n}}},assignMedium:function(i){r=!0;var o=[];if(n.length){var a=n;n=[],a.forEach(i),o=n}var u=function(){var h=o;o=[],h.forEach(i)},d=function(){return Promise.resolve().then(u)};d(),n={push:function(h){o.push(h),d()},filter:function(h){return o=o.filter(h),n}}}};return s}function mj(t){t===void 0&&(t={});var e=pj(null);return e.options=jn({async:!0,ssr:!1},t),e}var sT=function(t){var e=t.sideCar,n=rT(t,["sideCar"]);if(!e)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=e.read();if(!r)throw new Error("Sidecar medium not found");return m.createElement(r,jn({},n))};sT.isSideCarExport=!0;function gj(t,e){return t.useMedium(e),sT}var iT=mj(),$h=function(){},sd=m.forwardRef(function(t,e){var n=m.useRef(null),r=m.useState({onScrollCapture:$h,onWheelCapture:$h,onTouchMoveCapture:$h}),s=r[0],i=r[1],o=t.forwardProps,a=t.children,u=t.className,d=t.removeScrollBar,h=t.enabled,p=t.shards,g=t.sideCar,w=t.noRelative,C=t.noIsolation,x=t.inert,T=t.allowPinchZoom,_=t.as,y=_===void 0?"div":_,E=t.gapMode,k=rT(t,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),M=g,D=hj([n,e]),b=jn(jn({},k),s);return m.createElement(m.Fragment,null,h&&m.createElement(M,{sideCar:iT,removeScrollBar:d,shards:p,noRelative:w,noIsolation:C,inert:x,setCallbacks:i,allowPinchZoom:!!T,lockRef:n,gapMode:E}),o?m.cloneElement(m.Children.only(a),jn(jn({},b),{ref:D})):m.createElement(y,jn({},b,{className:u,ref:D}),a))});sd.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};sd.classNames={fullWidth:Ic,zeroRight:Nc};var vj=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function yj(){if(!document)return null;var t=document.createElement("style");t.type="text/css";var e=vj();return e&&t.setAttribute("nonce",e),t}function xj(t,e){t.styleSheet?t.styleSheet.cssText=e:t.appendChild(document.createTextNode(e))}function wj(t){var e=document.head||document.getElementsByTagName("head")[0];e.appendChild(t)}var _j=function(){var t=0,e=null;return{add:function(n){t==0&&(e=yj())&&(xj(e,n),wj(e)),t++},remove:function(){t--,!t&&e&&(e.parentNode&&e.parentNode.removeChild(e),e=null)}}},Ej=function(){var t=_j();return function(e,n){m.useEffect(function(){return t.add(e),function(){t.remove()}},[e&&n])}},oT=function(){var t=Ej(),e=function(n){var r=n.styles,s=n.dynamic;return t(r,s),null};return e},Tj={left:0,top:0,right:0,gap:0},Bh=function(t){return parseInt(t||"",10)||0},Sj=function(t){var e=window.getComputedStyle(document.body),n=e[t==="padding"?"paddingLeft":"marginLeft"],r=e[t==="padding"?"paddingTop":"marginTop"],s=e[t==="padding"?"paddingRight":"marginRight"];return[Bh(n),Bh(r),Bh(s)]},bj=function(t){if(t===void 0&&(t="margin"),typeof window>"u")return Tj;var e=Sj(t),n=document.documentElement.clientWidth,r=window.innerWidth;return{left:e[0],top:e[1],right:e[2],gap:Math.max(0,r-n+e[2]-e[0])}},Cj=oT(),Li="data-scroll-locked",Nj=function(t,e,n,r){var s=t.left,i=t.top,o=t.right,a=t.gap;return n===void 0&&(n="margin"),`
  .`.concat(lj,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(a,"px ").concat(r,`;
  }
  body[`).concat(Li,`] {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([e&&"position: relative ".concat(r,";"),n==="margin"&&`
    padding-left: `.concat(s,`px;
    padding-top: `).concat(i,`px;
    padding-right: `).concat(o,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(a,"px ").concat(r,`;
    `),n==="padding"&&"padding-right: ".concat(a,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(Nc,` {
    right: `).concat(a,"px ").concat(r,`;
  }
  
  .`).concat(Ic,` {
    margin-right: `).concat(a,"px ").concat(r,`;
  }
  
  .`).concat(Nc," .").concat(Nc,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(Ic," .").concat(Ic,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body[`).concat(Li,`] {
    `).concat(cj,": ").concat(a,`px;
  }
`)},qx=function(){var t=parseInt(document.body.getAttribute(Li)||"0",10);return isFinite(t)?t:0},Ij=function(){m.useEffect(function(){return document.body.setAttribute(Li,(qx()+1).toString()),function(){var t=qx()-1;t<=0?document.body.removeAttribute(Li):document.body.setAttribute(Li,t.toString())}},[])},Rj=function(t){var e=t.noRelative,n=t.noImportant,r=t.gapMode,s=r===void 0?"margin":r;Ij();var i=m.useMemo(function(){return bj(s)},[s]);return m.createElement(Cj,{styles:Nj(i,!e,s,n?"":"!important")})},cp=!1;if(typeof window<"u")try{var rc=Object.defineProperty({},"passive",{get:function(){return cp=!0,!0}});window.addEventListener("test",rc,rc),window.removeEventListener("test",rc,rc)}catch{cp=!1}var li=cp?{passive:!1}:!1,Aj=function(t){return t.tagName==="TEXTAREA"},aT=function(t,e){if(!(t instanceof Element))return!1;var n=window.getComputedStyle(t);return n[e]!=="hidden"&&!(n.overflowY===n.overflowX&&!Aj(t)&&n[e]==="visible")},kj=function(t){return aT(t,"overflowY")},Pj=function(t){return aT(t,"overflowX")},Kx=function(t,e){var n=e.ownerDocument,r=e;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var s=lT(t,r);if(s){var i=cT(t,r),o=i[1],a=i[2];if(o>a)return!0}r=r.parentNode}while(r&&r!==n.body);return!1},jj=function(t){var e=t.scrollTop,n=t.scrollHeight,r=t.clientHeight;return[e,n,r]},Dj=function(t){var e=t.scrollLeft,n=t.scrollWidth,r=t.clientWidth;return[e,n,r]},lT=function(t,e){return t==="v"?kj(e):Pj(e)},cT=function(t,e){return t==="v"?jj(e):Dj(e)},Mj=function(t,e){return t==="h"&&e==="rtl"?-1:1},Oj=function(t,e,n,r,s){var i=Mj(t,window.getComputedStyle(e).direction),o=i*r,a=n.target,u=e.contains(a),d=!1,h=o>0,p=0,g=0;do{if(!a)break;var w=cT(t,a),C=w[0],x=w[1],T=w[2],_=x-T-i*C;(C||_)&&lT(t,a)&&(p+=_,g+=C);var y=a.parentNode;a=y&&y.nodeType===Node.DOCUMENT_FRAGMENT_NODE?y.host:y}while(!u&&a!==document.body||u&&(e.contains(a)||e===a));return(h&&Math.abs(p)<1||!h&&Math.abs(g)<1)&&(d=!0),d},sc=function(t){return"changedTouches"in t?[t.changedTouches[0].clientX,t.changedTouches[0].clientY]:[0,0]},Gx=function(t){return[t.deltaX,t.deltaY]},Qx=function(t){return t&&"current"in t?t.current:t},Vj=function(t,e){return t[0]===e[0]&&t[1]===e[1]},Lj=function(t){return`
  .block-interactivity-`.concat(t,` {pointer-events: none;}
  .allow-interactivity-`).concat(t,` {pointer-events: all;}
`)},Fj=0,ci=[];function zj(t){var e=m.useRef([]),n=m.useRef([0,0]),r=m.useRef(),s=m.useState(Fj++)[0],i=m.useState(oT)[0],o=m.useRef(t);m.useEffect(function(){o.current=t},[t]),m.useEffect(function(){if(t.inert){document.body.classList.add("block-interactivity-".concat(s));var x=aj([t.lockRef.current],(t.shards||[]).map(Qx),!0).filter(Boolean);return x.forEach(function(T){return T.classList.add("allow-interactivity-".concat(s))}),function(){document.body.classList.remove("block-interactivity-".concat(s)),x.forEach(function(T){return T.classList.remove("allow-interactivity-".concat(s))})}}},[t.inert,t.lockRef.current,t.shards]);var a=m.useCallback(function(x,T){if("touches"in x&&x.touches.length===2||x.type==="wheel"&&x.ctrlKey)return!o.current.allowPinchZoom;var _=sc(x),y=n.current,E="deltaX"in x?x.deltaX:y[0]-_[0],k="deltaY"in x?x.deltaY:y[1]-_[1],M,D=x.target,b=Math.abs(E)>Math.abs(k)?"h":"v";if("touches"in x&&b==="h"&&D.type==="range")return!1;var S=Kx(b,D);if(!S)return!0;if(S?M=b:(M=b==="v"?"h":"v",S=Kx(b,D)),!S)return!1;if(!r.current&&"changedTouches"in x&&(E||k)&&(r.current=M),!M)return!0;var I=r.current||M;return Oj(I,T,x,I==="h"?E:k)},[]),u=m.useCallback(function(x){var T=x;if(!(!ci.length||ci[ci.length-1]!==i)){var _="deltaY"in T?Gx(T):sc(T),y=e.current.filter(function(M){return M.name===T.type&&(M.target===T.target||T.target===M.shadowParent)&&Vj(M.delta,_)})[0];if(y&&y.should){T.cancelable&&T.preventDefault();return}if(!y){var E=(o.current.shards||[]).map(Qx).filter(Boolean).filter(function(M){return M.contains(T.target)}),k=E.length>0?a(T,E[0]):!o.current.noIsolation;k&&T.cancelable&&T.preventDefault()}}},[]),d=m.useCallback(function(x,T,_,y){var E={name:x,delta:T,target:_,should:y,shadowParent:Uj(_)};e.current.push(E),setTimeout(function(){e.current=e.current.filter(function(k){return k!==E})},1)},[]),h=m.useCallback(function(x){n.current=sc(x),r.current=void 0},[]),p=m.useCallback(function(x){d(x.type,Gx(x),x.target,a(x,t.lockRef.current))},[]),g=m.useCallback(function(x){d(x.type,sc(x),x.target,a(x,t.lockRef.current))},[]);m.useEffect(function(){return ci.push(i),t.setCallbacks({onScrollCapture:p,onWheelCapture:p,onTouchMoveCapture:g}),document.addEventListener("wheel",u,li),document.addEventListener("touchmove",u,li),document.addEventListener("touchstart",h,li),function(){ci=ci.filter(function(x){return x!==i}),document.removeEventListener("wheel",u,li),document.removeEventListener("touchmove",u,li),document.removeEventListener("touchstart",h,li)}},[]);var w=t.removeScrollBar,C=t.inert;return m.createElement(m.Fragment,null,C?m.createElement(i,{styles:Lj(s)}):null,w?m.createElement(Rj,{noRelative:t.noRelative,gapMode:t.gapMode}):null)}function Uj(t){for(var e=null;t!==null;)t instanceof ShadowRoot&&(e=t.host,t=t.host),t=t.parentNode;return e}const $j=gj(iT,zj);var id=m.forwardRef(function(t,e){return m.createElement(sd,jn({},t,{ref:e,sideCar:$j}))});id.classNames=sd.classNames;var Bj=function(t){if(typeof document>"u")return null;var e=Array.isArray(t)?t[0]:t;return e.ownerDocument.body},ui=new WeakMap,ic=new WeakMap,oc={},Hh=0,uT=function(t){return t&&(t.host||uT(t.parentNode))},Hj=function(t,e){return e.map(function(n){if(t.contains(n))return n;var r=uT(n);return r&&t.contains(r)?r:(console.error("aria-hidden",n,"in not contained inside",t,". Doing nothing"),null)}).filter(function(n){return!!n})},Wj=function(t,e,n,r){var s=Hj(e,Array.isArray(t)?t:[t]);oc[n]||(oc[n]=new WeakMap);var i=oc[n],o=[],a=new Set,u=new Set(s),d=function(p){!p||a.has(p)||(a.add(p),d(p.parentNode))};s.forEach(d);var h=function(p){!p||u.has(p)||Array.prototype.forEach.call(p.children,function(g){if(a.has(g))h(g);else try{var w=g.getAttribute(r),C=w!==null&&w!=="false",x=(ui.get(g)||0)+1,T=(i.get(g)||0)+1;ui.set(g,x),i.set(g,T),o.push(g),x===1&&C&&ic.set(g,!0),T===1&&g.setAttribute(n,"true"),C||g.setAttribute(r,"true")}catch(_){console.error("aria-hidden: cannot operate on ",g,_)}})};return h(e),a.clear(),Hh++,function(){o.forEach(function(p){var g=ui.get(p)-1,w=i.get(p)-1;ui.set(p,g),i.set(p,w),g||(ic.has(p)||p.removeAttribute(r),ic.delete(p)),w||p.removeAttribute(n)}),Hh--,Hh||(ui=new WeakMap,ui=new WeakMap,ic=new WeakMap,oc={})}},rg=function(t,e,n){n===void 0&&(n="data-aria-hidden");var r=Array.from(Array.isArray(t)?t:[t]),s=Bj(t);return s?(r.push.apply(r,Array.from(s.querySelectorAll("[aria-live], script"))),Wj(r,s,n,"aria-hidden")):function(){return null}},od="Dialog",[dT,p6]=os(od),[qj,Nn]=dT(od),hT=t=>{const{__scopeDialog:e,children:n,open:r,defaultOpen:s,onOpenChange:i,modal:o=!0}=t,a=m.useRef(null),u=m.useRef(null),[d,h]=Yi({prop:r,defaultProp:s??!1,onChange:i,caller:od});return l.jsx(qj,{scope:e,triggerRef:a,contentRef:u,contentId:Bt(),titleId:Bt(),descriptionId:Bt(),open:d,onOpenChange:h,onOpenToggle:m.useCallback(()=>h(p=>!p),[h]),modal:o,children:n})};hT.displayName=od;var fT="DialogTrigger",pT=m.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,s=Nn(fT,n),i=Ae(e,s.triggerRef);return l.jsx(de.button,{type:"button","aria-haspopup":"dialog","aria-expanded":s.open,"aria-controls":s.contentId,"data-state":og(s.open),...r,ref:i,onClick:ue(t.onClick,s.onOpenToggle)})});pT.displayName=fT;var sg="DialogPortal",[Kj,mT]=dT(sg,{forceMount:void 0}),gT=t=>{const{__scopeDialog:e,forceMount:n,children:r,container:s}=t,i=Nn(sg,e);return l.jsx(Kj,{scope:e,forceMount:n,children:m.Children.map(r,o=>l.jsx(mr,{present:n||i.open,children:l.jsx(al,{asChild:!0,container:s,children:o})}))})};gT.displayName=sg;var uu="DialogOverlay",vT=m.forwardRef((t,e)=>{const n=mT(uu,t.__scopeDialog),{forceMount:r=n.forceMount,...s}=t,i=Nn(uu,t.__scopeDialog);return i.modal?l.jsx(mr,{present:r||i.open,children:l.jsx(Qj,{...s,ref:e})}):null});vT.displayName=uu;var Gj=zs("DialogOverlay.RemoveScroll"),Qj=m.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,s=Nn(uu,n);return l.jsx(id,{as:Gj,allowPinchZoom:!0,shards:[s.contentRef],children:l.jsx(de.div,{"data-state":og(s.open),...r,ref:e,style:{pointerEvents:"auto",...r.style}})})}),Bs="DialogContent",yT=m.forwardRef((t,e)=>{const n=mT(Bs,t.__scopeDialog),{forceMount:r=n.forceMount,...s}=t,i=Nn(Bs,t.__scopeDialog);return l.jsx(mr,{present:r||i.open,children:i.modal?l.jsx(Yj,{...s,ref:e}):l.jsx(Xj,{...s,ref:e})})});yT.displayName=Bs;var Yj=m.forwardRef((t,e)=>{const n=Nn(Bs,t.__scopeDialog),r=m.useRef(null),s=Ae(e,n.contentRef,r);return m.useEffect(()=>{const i=r.current;if(i)return rg(i)},[]),l.jsx(xT,{...t,ref:s,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:ue(t.onCloseAutoFocus,i=>{var o;i.preventDefault(),(o=n.triggerRef.current)==null||o.focus()}),onPointerDownOutside:ue(t.onPointerDownOutside,i=>{const o=i.detail.originalEvent,a=o.button===0&&o.ctrlKey===!0;(o.button===2||a)&&i.preventDefault()}),onFocusOutside:ue(t.onFocusOutside,i=>i.preventDefault())})}),Xj=m.forwardRef((t,e)=>{const n=Nn(Bs,t.__scopeDialog),r=m.useRef(!1),s=m.useRef(!1);return l.jsx(xT,{...t,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:i=>{var o,a;(o=t.onCloseAutoFocus)==null||o.call(t,i),i.defaultPrevented||(r.current||(a=n.triggerRef.current)==null||a.focus(),i.preventDefault()),r.current=!1,s.current=!1},onInteractOutside:i=>{var u,d;(u=t.onInteractOutside)==null||u.call(t,i),i.defaultPrevented||(r.current=!0,i.detail.originalEvent.type==="pointerdown"&&(s.current=!0));const o=i.target;((d=n.triggerRef.current)==null?void 0:d.contains(o))&&i.preventDefault(),i.detail.originalEvent.type==="focusin"&&s.current&&i.preventDefault()}})}),xT=m.forwardRef((t,e)=>{const{__scopeDialog:n,trapFocus:r,onOpenAutoFocus:s,onCloseAutoFocus:i,...o}=t,a=Nn(Bs,n),u=m.useRef(null),d=Ae(e,u);return ng(),l.jsxs(l.Fragment,{children:[l.jsx(rd,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:s,onUnmountAutoFocus:i,children:l.jsx(fo,{role:"dialog",id:a.contentId,"aria-describedby":a.descriptionId,"aria-labelledby":a.titleId,"data-state":og(a.open),...o,ref:d,onDismiss:()=>a.onOpenChange(!1)})}),l.jsxs(l.Fragment,{children:[l.jsx(Jj,{titleId:a.titleId}),l.jsx(e4,{contentRef:u,descriptionId:a.descriptionId})]})]})}),ig="DialogTitle",wT=m.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,s=Nn(ig,n);return l.jsx(de.h2,{id:s.titleId,...r,ref:e})});wT.displayName=ig;var _T="DialogDescription",ET=m.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,s=Nn(_T,n);return l.jsx(de.p,{id:s.descriptionId,...r,ref:e})});ET.displayName=_T;var TT="DialogClose",ST=m.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,s=Nn(TT,n);return l.jsx(de.button,{type:"button",...r,ref:e,onClick:ue(t.onClick,()=>s.onOpenChange(!1))})});ST.displayName=TT;function og(t){return t?"open":"closed"}var bT="DialogTitleWarning",[m6,CT]=wA(bT,{contentName:Bs,titleName:ig,docsSlug:"dialog"}),Jj=({titleId:t})=>{const e=CT(bT),n=`\`${e.contentName}\` requires a \`${e.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${e.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${e.docsSlug}`;return m.useEffect(()=>{t&&(document.getElementById(t)||console.error(n))},[n,t]),null},Zj="DialogDescriptionWarning",e4=({contentRef:t,descriptionId:e})=>{const r=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${CT(Zj).contentName}}.`;return m.useEffect(()=>{var i;const s=(i=t.current)==null?void 0:i.getAttribute("aria-describedby");e&&s&&(document.getElementById(e)||console.warn(r))},[r,t,e]),null},ag=hT,NT=pT,lg=gT,hl=vT,fl=yT,ad=wT,ld=ET,IT=ST;const t4=ag,n4=NT,r4=lg,RT=m.forwardRef(({className:t,...e},n)=>l.jsx(hl,{className:ce("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...e,ref:n}));RT.displayName=hl.displayName;const s4=po("fixed z-50 gap-4 bg-background p-6 shadow-lg transition ease-in-out data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:duration-300 data-[state=open]:duration-500",{variants:{side:{top:"inset-x-0 top-0 border-b data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top",bottom:"inset-x-0 bottom-0 border-t data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom",left:"inset-y-0 left-0 h-full w-3/4 border-r data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left sm:max-w-sm",right:"inset-y-0 right-0 h-full w-3/4  border-l data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right sm:max-w-sm"}},defaultVariants:{side:"right"}}),AT=m.forwardRef(({side:t="right",className:e,children:n,...r},s)=>l.jsxs(r4,{children:[l.jsx(RT,{}),l.jsxs(fl,{ref:s,className:ce(s4({side:t}),e),...r,children:[n,l.jsxs(IT,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-secondary",children:[l.jsx(ul,{className:"h-4 w-4"}),l.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));AT.displayName=fl.displayName;const i4=m.forwardRef(({className:t,...e},n)=>l.jsx(ad,{ref:n,className:ce("text-lg font-semibold text-foreground",t),...e}));i4.displayName=ad.displayName;const o4=m.forwardRef(({className:t,...e},n)=>l.jsx(ld,{ref:n,className:ce("text-sm text-muted-foreground",t),...e}));o4.displayName=ld.displayName;const a4=()=>{const[t,e]=m.useState(!1),[n]=hA(),r=o=>n===o,s=[{path:"/",label:"Home",icon:Ik},{path:"/recommended",label:"Consigliati",icon:iu},{path:"/calendar",label:"Calendario",icon:An},{path:"/favorites",label:"Preferiti",icon:ks},{path:"/add-restaurant",label:"Aggiungi",icon:_k},{path:"/info",label:"Info",icon:Rk}],i=({path:o,label:a,icon:u,mobile:d=!1})=>{const h=r(o);return l.jsx(pa,{href:o,children:l.jsxs(oe,{variant:h?"default":"ghost",className:`${d?"w-full justify-start":""} ${h?"bg-[hsl(var(--terracotta))] text-white hover:bg-[hsl(var(--saddle))]":"text-[hsl(var(--dark-slate))] hover:text-[hsl(var(--terracotta))] hover:bg-[hsl(var(--terracotta))]/10"}`,onClick:()=>d&&e(!1),children:[l.jsx(u,{className:"w-4 h-4 mr-2"}),a]})})};return l.jsx("nav",{className:"bg-white shadow-lg sticky top-0 z-50",children:l.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:l.jsxs("div",{className:"flex justify-between items-center h-16",children:[l.jsx(pa,{href:"/",children:l.jsxs("div",{className:"flex items-center cursor-pointer",children:[l.jsx(Nx,{className:"w-6 h-6 text-[hsl(var(--terracotta))] mr-2"}),l.jsx("h1",{className:"text-2xl font-display font-bold text-[hsl(var(--terracotta))]",children:"TripTaste"})]})}),l.jsx("div",{className:"hidden md:flex items-center space-x-4",children:s.map(o=>l.jsx(i,{path:o.path,label:o.label,icon:o.icon},o.path))}),l.jsx("div",{className:"md:hidden",children:l.jsxs(t4,{open:t,onOpenChange:e,children:[l.jsx(n4,{asChild:!0,children:l.jsx(oe,{variant:"ghost",size:"icon",children:l.jsx(kk,{className:"w-6 h-6 text-[hsl(var(--dark-slate))]"})})}),l.jsx(AT,{side:"right",className:"w-[300px] sm:w-[400px]",children:l.jsxs("div",{className:"flex flex-col space-y-4 mt-6",children:[l.jsxs("div",{className:"flex items-center mb-6",children:[l.jsx(Nx,{className:"w-6 h-6 text-[hsl(var(--terracotta))] mr-2"}),l.jsx("h2",{className:"text-xl font-display font-bold text-[hsl(var(--terracotta))]",children:"TripTaste"})]}),s.map(o=>l.jsx(i,{path:o.path,label:o.label,icon:o.icon,mobile:!0},o.path))]})})]})})]})})})},At=m.forwardRef(({className:t,type:e,...n},r)=>l.jsx("input",{type:e,className:ce("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t),ref:r,...n}));At.displayName="Input";function Yx(t,[e,n]){return Math.min(n,Math.max(e,t))}var l4=m.createContext(void 0);function c4(t){const e=m.useContext(l4);return t||e||"ltr"}function u4(t){const e=m.useRef({value:t,previous:t});return m.useMemo(()=>(e.current.value!==t&&(e.current.previous=e.current.value,e.current.value=t),e.current.previous),[t])}var d4=[" ","Enter","ArrowUp","ArrowDown"],h4=[" ","Enter"],Hs="Select",[cd,ud,f4]=$1(Hs),[xo,g6]=os(Hs,[f4,yo]),dd=yo(),[p4,as]=xo(Hs),[m4,g4]=xo(Hs),kT=t=>{const{__scopeSelect:e,children:n,open:r,defaultOpen:s,onOpenChange:i,value:o,defaultValue:a,onValueChange:u,dir:d,name:h,autoComplete:p,disabled:g,required:w,form:C}=t,x=dd(e),[T,_]=m.useState(null),[y,E]=m.useState(null),[k,M]=m.useState(!1),D=c4(d),[b,S]=Yi({prop:r,defaultProp:s??!1,onChange:i,caller:Hs}),[I,R]=Yi({prop:o,defaultProp:a,onChange:u,caller:Hs}),P=m.useRef(null),j=T?C||!!T.closest("form"):!0,[A,L]=m.useState(new Set),G=Array.from(A).map(Q=>Q.props.value).join(";");return l.jsx(KE,{...x,children:l.jsxs(p4,{required:w,scope:e,trigger:T,onTriggerChange:_,valueNode:y,onValueNodeChange:E,valueNodeHasChildren:k,onValueNodeHasChildrenChange:M,contentId:Bt(),value:I,onValueChange:R,open:b,onOpenChange:S,dir:D,triggerPointerDownPosRef:P,disabled:g,children:[l.jsx(cd.Provider,{scope:e,children:l.jsx(m4,{scope:t.__scopeSelect,onNativeOptionAdd:m.useCallback(Q=>{L(z=>new Set(z).add(Q))},[]),onNativeOptionRemove:m.useCallback(Q=>{L(z=>{const O=new Set(z);return O.delete(Q),O})},[]),children:n})}),j?l.jsxs(tS,{"aria-hidden":!0,required:w,tabIndex:-1,name:h,autoComplete:p,value:I,onChange:Q=>R(Q.target.value),disabled:g,form:C,children:[I===void 0?l.jsx("option",{value:""}):null,Array.from(A)]},G):null]})})};kT.displayName=Hs;var PT="SelectTrigger",jT=m.forwardRef((t,e)=>{const{__scopeSelect:n,disabled:r=!1,...s}=t,i=dd(n),o=as(PT,n),a=o.disabled||r,u=Ae(e,o.onTriggerChange),d=ud(n),h=m.useRef("touch"),[p,g,w]=rS(x=>{const T=d().filter(E=>!E.disabled),_=T.find(E=>E.value===o.value),y=sS(T,x,_);y!==void 0&&o.onValueChange(y.value)}),C=x=>{a||(o.onOpenChange(!0),w()),x&&(o.triggerPointerDownPosRef.current={x:Math.round(x.pageX),y:Math.round(x.pageY)})};return l.jsx(ed,{asChild:!0,...i,children:l.jsx(de.button,{type:"button",role:"combobox","aria-controls":o.contentId,"aria-expanded":o.open,"aria-required":o.required,"aria-autocomplete":"none",dir:o.dir,"data-state":o.open?"open":"closed",disabled:a,"data-disabled":a?"":void 0,"data-placeholder":nS(o.value)?"":void 0,...s,ref:u,onClick:ue(s.onClick,x=>{x.currentTarget.focus(),h.current!=="mouse"&&C(x)}),onPointerDown:ue(s.onPointerDown,x=>{h.current=x.pointerType;const T=x.target;T.hasPointerCapture(x.pointerId)&&T.releasePointerCapture(x.pointerId),x.button===0&&x.ctrlKey===!1&&x.pointerType==="mouse"&&(C(x),x.preventDefault())}),onKeyDown:ue(s.onKeyDown,x=>{const T=p.current!=="";!(x.ctrlKey||x.altKey||x.metaKey)&&x.key.length===1&&g(x.key),!(T&&x.key===" ")&&d4.includes(x.key)&&(C(),x.preventDefault())})})})});jT.displayName=PT;var DT="SelectValue",MT=m.forwardRef((t,e)=>{const{__scopeSelect:n,className:r,style:s,children:i,placeholder:o="",...a}=t,u=as(DT,n),{onValueNodeHasChildrenChange:d}=u,h=i!==void 0,p=Ae(e,u.onValueNodeChange);return at(()=>{d(h)},[d,h]),l.jsx(de.span,{...a,ref:p,style:{pointerEvents:"none"},children:nS(u.value)?l.jsx(l.Fragment,{children:o}):i})});MT.displayName=DT;var v4="SelectIcon",OT=m.forwardRef((t,e)=>{const{__scopeSelect:n,children:r,...s}=t;return l.jsx(de.span,{"aria-hidden":!0,...s,ref:e,children:r||"▼"})});OT.displayName=v4;var y4="SelectPortal",VT=t=>l.jsx(al,{asChild:!0,...t});VT.displayName=y4;var Ws="SelectContent",LT=m.forwardRef((t,e)=>{const n=as(Ws,t.__scopeSelect),[r,s]=m.useState();if(at(()=>{s(new DocumentFragment)},[]),!n.open){const i=r;return i?Zs.createPortal(l.jsx(FT,{scope:t.__scopeSelect,children:l.jsx(cd.Slot,{scope:t.__scopeSelect,children:l.jsx("div",{children:t.children})})}),i):null}return l.jsx(zT,{...t,ref:e})});LT.displayName=Ws;var gn=10,[FT,ls]=xo(Ws),x4="SelectContentImpl",w4=zs("SelectContent.RemoveScroll"),zT=m.forwardRef((t,e)=>{const{__scopeSelect:n,position:r="item-aligned",onCloseAutoFocus:s,onEscapeKeyDown:i,onPointerDownOutside:o,side:a,sideOffset:u,align:d,alignOffset:h,arrowPadding:p,collisionBoundary:g,collisionPadding:w,sticky:C,hideWhenDetached:x,avoidCollisions:T,..._}=t,y=as(Ws,n),[E,k]=m.useState(null),[M,D]=m.useState(null),b=Ae(e,Y=>k(Y)),[S,I]=m.useState(null),[R,P]=m.useState(null),j=ud(n),[A,L]=m.useState(!1),G=m.useRef(!1);m.useEffect(()=>{if(E)return rg(E)},[E]),ng();const Q=m.useCallback(Y=>{const[pe,...we]=j().map(be=>be.ref.current),[ye]=we.slice(-1),Te=document.activeElement;for(const be of Y)if(be===Te||(be==null||be.scrollIntoView({block:"nearest"}),be===pe&&M&&(M.scrollTop=0),be===ye&&M&&(M.scrollTop=M.scrollHeight),be==null||be.focus(),document.activeElement!==Te))return},[j,M]),z=m.useCallback(()=>Q([S,E]),[Q,S,E]);m.useEffect(()=>{A&&z()},[A,z]);const{onOpenChange:O,triggerPointerDownPosRef:$}=y;m.useEffect(()=>{if(E){let Y={x:0,y:0};const pe=ye=>{var Te,be;Y={x:Math.abs(Math.round(ye.pageX)-(((Te=$.current)==null?void 0:Te.x)??0)),y:Math.abs(Math.round(ye.pageY)-(((be=$.current)==null?void 0:be.y)??0))}},we=ye=>{Y.x<=10&&Y.y<=10?ye.preventDefault():E.contains(ye.target)||O(!1),document.removeEventListener("pointermove",pe),$.current=null};return $.current!==null&&(document.addEventListener("pointermove",pe),document.addEventListener("pointerup",we,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",pe),document.removeEventListener("pointerup",we,{capture:!0})}}},[E,O,$]),m.useEffect(()=>{const Y=()=>O(!1);return window.addEventListener("blur",Y),window.addEventListener("resize",Y),()=>{window.removeEventListener("blur",Y),window.removeEventListener("resize",Y)}},[O]);const[Z,se]=rS(Y=>{const pe=j().filter(Te=>!Te.disabled),we=pe.find(Te=>Te.ref.current===document.activeElement),ye=sS(pe,Y,we);ye&&setTimeout(()=>ye.ref.current.focus())}),U=m.useCallback((Y,pe,we)=>{const ye=!G.current&&!we;(y.value!==void 0&&y.value===pe||ye)&&(I(Y),ye&&(G.current=!0))},[y.value]),J=m.useCallback(()=>E==null?void 0:E.focus(),[E]),W=m.useCallback((Y,pe,we)=>{const ye=!G.current&&!we;(y.value!==void 0&&y.value===pe||ye)&&P(Y)},[y.value]),B=r==="popper"?up:UT,ee=B===up?{side:a,sideOffset:u,align:d,alignOffset:h,arrowPadding:p,collisionBoundary:g,collisionPadding:w,sticky:C,hideWhenDetached:x,avoidCollisions:T}:{};return l.jsx(FT,{scope:n,content:E,viewport:M,onViewportChange:D,itemRefCallback:U,selectedItem:S,onItemLeave:J,itemTextRefCallback:W,focusSelectedItem:z,selectedItemText:R,position:r,isPositioned:A,searchRef:Z,children:l.jsx(id,{as:w4,allowPinchZoom:!0,children:l.jsx(rd,{asChild:!0,trapped:y.open,onMountAutoFocus:Y=>{Y.preventDefault()},onUnmountAutoFocus:ue(s,Y=>{var pe;(pe=y.trigger)==null||pe.focus({preventScroll:!0}),Y.preventDefault()}),children:l.jsx(fo,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:i,onPointerDownOutside:o,onFocusOutside:Y=>Y.preventDefault(),onDismiss:()=>y.onOpenChange(!1),children:l.jsx(B,{role:"listbox",id:y.contentId,"data-state":y.open?"open":"closed",dir:y.dir,onContextMenu:Y=>Y.preventDefault(),..._,...ee,onPlaced:()=>L(!0),ref:b,style:{display:"flex",flexDirection:"column",outline:"none",..._.style},onKeyDown:ue(_.onKeyDown,Y=>{const pe=Y.ctrlKey||Y.altKey||Y.metaKey;if(Y.key==="Tab"&&Y.preventDefault(),!pe&&Y.key.length===1&&se(Y.key),["ArrowUp","ArrowDown","Home","End"].includes(Y.key)){let ye=j().filter(Te=>!Te.disabled).map(Te=>Te.ref.current);if(["ArrowUp","End"].includes(Y.key)&&(ye=ye.slice().reverse()),["ArrowUp","ArrowDown"].includes(Y.key)){const Te=Y.target,be=ye.indexOf(Te);ye=ye.slice(be+1)}setTimeout(()=>Q(ye)),Y.preventDefault()}})})})})})})});zT.displayName=x4;var _4="SelectItemAlignedPosition",UT=m.forwardRef((t,e)=>{const{__scopeSelect:n,onPlaced:r,...s}=t,i=as(Ws,n),o=ls(Ws,n),[a,u]=m.useState(null),[d,h]=m.useState(null),p=Ae(e,b=>h(b)),g=ud(n),w=m.useRef(!1),C=m.useRef(!0),{viewport:x,selectedItem:T,selectedItemText:_,focusSelectedItem:y}=o,E=m.useCallback(()=>{if(i.trigger&&i.valueNode&&a&&d&&x&&T&&_){const b=i.trigger.getBoundingClientRect(),S=d.getBoundingClientRect(),I=i.valueNode.getBoundingClientRect(),R=_.getBoundingClientRect();if(i.dir!=="rtl"){const Te=R.left-S.left,be=I.left-Te,lt=b.left-be,Dt=b.width+lt,qn=Math.max(Dt,S.width),vr=window.innerWidth-gn,hs=Yx(be,[gn,Math.max(gn,vr-qn)]);a.style.minWidth=Dt+"px",a.style.left=hs+"px"}else{const Te=S.right-R.right,be=window.innerWidth-I.right-Te,lt=window.innerWidth-b.right-be,Dt=b.width+lt,qn=Math.max(Dt,S.width),vr=window.innerWidth-gn,hs=Yx(be,[gn,Math.max(gn,vr-qn)]);a.style.minWidth=Dt+"px",a.style.right=hs+"px"}const P=g(),j=window.innerHeight-gn*2,A=x.scrollHeight,L=window.getComputedStyle(d),G=parseInt(L.borderTopWidth,10),Q=parseInt(L.paddingTop,10),z=parseInt(L.borderBottomWidth,10),O=parseInt(L.paddingBottom,10),$=G+Q+A+O+z,Z=Math.min(T.offsetHeight*5,$),se=window.getComputedStyle(x),U=parseInt(se.paddingTop,10),J=parseInt(se.paddingBottom,10),W=b.top+b.height/2-gn,B=j-W,ee=T.offsetHeight/2,Y=T.offsetTop+ee,pe=G+Q+Y,we=$-pe;if(pe<=W){const Te=P.length>0&&T===P[P.length-1].ref.current;a.style.bottom="0px";const be=d.clientHeight-x.offsetTop-x.offsetHeight,lt=Math.max(B,ee+(Te?J:0)+be+z),Dt=pe+lt;a.style.height=Dt+"px"}else{const Te=P.length>0&&T===P[0].ref.current;a.style.top="0px";const lt=Math.max(W,G+x.offsetTop+(Te?U:0)+ee)+we;a.style.height=lt+"px",x.scrollTop=pe-W+x.offsetTop}a.style.margin=`${gn}px 0`,a.style.minHeight=Z+"px",a.style.maxHeight=j+"px",r==null||r(),requestAnimationFrame(()=>w.current=!0)}},[g,i.trigger,i.valueNode,a,d,x,T,_,i.dir,r]);at(()=>E(),[E]);const[k,M]=m.useState();at(()=>{d&&M(window.getComputedStyle(d).zIndex)},[d]);const D=m.useCallback(b=>{b&&C.current===!0&&(E(),y==null||y(),C.current=!1)},[E,y]);return l.jsx(T4,{scope:n,contentWrapper:a,shouldExpandOnScrollRef:w,onScrollButtonChange:D,children:l.jsx("div",{ref:u,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:k},children:l.jsx(de.div,{...s,ref:p,style:{boxSizing:"border-box",maxHeight:"100%",...s.style}})})})});UT.displayName=_4;var E4="SelectPopperPosition",up=m.forwardRef((t,e)=>{const{__scopeSelect:n,align:r="start",collisionPadding:s=gn,...i}=t,o=dd(n);return l.jsx(Zm,{...o,...i,ref:e,align:r,collisionPadding:s,style:{boxSizing:"border-box",...i.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});up.displayName=E4;var[T4,cg]=xo(Ws,{}),dp="SelectViewport",$T=m.forwardRef((t,e)=>{const{__scopeSelect:n,nonce:r,...s}=t,i=ls(dp,n),o=cg(dp,n),a=Ae(e,i.onViewportChange),u=m.useRef(0);return l.jsxs(l.Fragment,{children:[l.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:r}),l.jsx(cd.Slot,{scope:n,children:l.jsx(de.div,{"data-radix-select-viewport":"",role:"presentation",...s,ref:a,style:{position:"relative",flex:1,overflow:"hidden auto",...s.style},onScroll:ue(s.onScroll,d=>{const h=d.currentTarget,{contentWrapper:p,shouldExpandOnScrollRef:g}=o;if(g!=null&&g.current&&p){const w=Math.abs(u.current-h.scrollTop);if(w>0){const C=window.innerHeight-gn*2,x=parseFloat(p.style.minHeight),T=parseFloat(p.style.height),_=Math.max(x,T);if(_<C){const y=_+w,E=Math.min(C,y),k=y-E;p.style.height=E+"px",p.style.bottom==="0px"&&(h.scrollTop=k>0?k:0,p.style.justifyContent="flex-end")}}}u.current=h.scrollTop})})})]})});$T.displayName=dp;var BT="SelectGroup",[S4,b4]=xo(BT),C4=m.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t,s=Bt();return l.jsx(S4,{scope:n,id:s,children:l.jsx(de.div,{role:"group","aria-labelledby":s,...r,ref:e})})});C4.displayName=BT;var HT="SelectLabel",WT=m.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t,s=b4(HT,n);return l.jsx(de.div,{id:s.id,...r,ref:e})});WT.displayName=HT;var du="SelectItem",[N4,qT]=xo(du),KT=m.forwardRef((t,e)=>{const{__scopeSelect:n,value:r,disabled:s=!1,textValue:i,...o}=t,a=as(du,n),u=ls(du,n),d=a.value===r,[h,p]=m.useState(i??""),[g,w]=m.useState(!1),C=Ae(e,y=>{var E;return(E=u.itemRefCallback)==null?void 0:E.call(u,y,r,s)}),x=Bt(),T=m.useRef("touch"),_=()=>{s||(a.onValueChange(r),a.onOpenChange(!1))};if(r==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return l.jsx(N4,{scope:n,value:r,disabled:s,textId:x,isSelected:d,onItemTextChange:m.useCallback(y=>{p(E=>E||((y==null?void 0:y.textContent)??"").trim())},[]),children:l.jsx(cd.ItemSlot,{scope:n,value:r,disabled:s,textValue:h,children:l.jsx(de.div,{role:"option","aria-labelledby":x,"data-highlighted":g?"":void 0,"aria-selected":d&&g,"data-state":d?"checked":"unchecked","aria-disabled":s||void 0,"data-disabled":s?"":void 0,tabIndex:s?void 0:-1,...o,ref:C,onFocus:ue(o.onFocus,()=>w(!0)),onBlur:ue(o.onBlur,()=>w(!1)),onClick:ue(o.onClick,()=>{T.current!=="mouse"&&_()}),onPointerUp:ue(o.onPointerUp,()=>{T.current==="mouse"&&_()}),onPointerDown:ue(o.onPointerDown,y=>{T.current=y.pointerType}),onPointerMove:ue(o.onPointerMove,y=>{var E;T.current=y.pointerType,s?(E=u.onItemLeave)==null||E.call(u):T.current==="mouse"&&y.currentTarget.focus({preventScroll:!0})}),onPointerLeave:ue(o.onPointerLeave,y=>{var E;y.currentTarget===document.activeElement&&((E=u.onItemLeave)==null||E.call(u))}),onKeyDown:ue(o.onKeyDown,y=>{var k;((k=u.searchRef)==null?void 0:k.current)!==""&&y.key===" "||(h4.includes(y.key)&&_(),y.key===" "&&y.preventDefault())})})})})});KT.displayName=du;var ea="SelectItemText",GT=m.forwardRef((t,e)=>{const{__scopeSelect:n,className:r,style:s,...i}=t,o=as(ea,n),a=ls(ea,n),u=qT(ea,n),d=g4(ea,n),[h,p]=m.useState(null),g=Ae(e,_=>p(_),u.onItemTextChange,_=>{var y;return(y=a.itemTextRefCallback)==null?void 0:y.call(a,_,u.value,u.disabled)}),w=h==null?void 0:h.textContent,C=m.useMemo(()=>l.jsx("option",{value:u.value,disabled:u.disabled,children:w},u.value),[u.disabled,u.value,w]),{onNativeOptionAdd:x,onNativeOptionRemove:T}=d;return at(()=>(x(C),()=>T(C)),[x,T,C]),l.jsxs(l.Fragment,{children:[l.jsx(de.span,{id:u.textId,...i,ref:g}),u.isSelected&&o.valueNode&&!o.valueNodeHasChildren?Zs.createPortal(i.children,o.valueNode):null]})});GT.displayName=ea;var QT="SelectItemIndicator",YT=m.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t;return qT(QT,n).isSelected?l.jsx(de.span,{"aria-hidden":!0,...r,ref:e}):null});YT.displayName=QT;var hp="SelectScrollUpButton",XT=m.forwardRef((t,e)=>{const n=ls(hp,t.__scopeSelect),r=cg(hp,t.__scopeSelect),[s,i]=m.useState(!1),o=Ae(e,r.onScrollButtonChange);return at(()=>{if(n.viewport&&n.isPositioned){let a=function(){const d=u.scrollTop>0;i(d)};const u=n.viewport;return a(),u.addEventListener("scroll",a),()=>u.removeEventListener("scroll",a)}},[n.viewport,n.isPositioned]),s?l.jsx(ZT,{...t,ref:o,onAutoScroll:()=>{const{viewport:a,selectedItem:u}=n;a&&u&&(a.scrollTop=a.scrollTop-u.offsetHeight)}}):null});XT.displayName=hp;var fp="SelectScrollDownButton",JT=m.forwardRef((t,e)=>{const n=ls(fp,t.__scopeSelect),r=cg(fp,t.__scopeSelect),[s,i]=m.useState(!1),o=Ae(e,r.onScrollButtonChange);return at(()=>{if(n.viewport&&n.isPositioned){let a=function(){const d=u.scrollHeight-u.clientHeight,h=Math.ceil(u.scrollTop)<d;i(h)};const u=n.viewport;return a(),u.addEventListener("scroll",a),()=>u.removeEventListener("scroll",a)}},[n.viewport,n.isPositioned]),s?l.jsx(ZT,{...t,ref:o,onAutoScroll:()=>{const{viewport:a,selectedItem:u}=n;a&&u&&(a.scrollTop=a.scrollTop+u.offsetHeight)}}):null});JT.displayName=fp;var ZT=m.forwardRef((t,e)=>{const{__scopeSelect:n,onAutoScroll:r,...s}=t,i=ls("SelectScrollButton",n),o=m.useRef(null),a=ud(n),u=m.useCallback(()=>{o.current!==null&&(window.clearInterval(o.current),o.current=null)},[]);return m.useEffect(()=>()=>u(),[u]),at(()=>{var h;const d=a().find(p=>p.ref.current===document.activeElement);(h=d==null?void 0:d.ref.current)==null||h.scrollIntoView({block:"nearest"})},[a]),l.jsx(de.div,{"aria-hidden":!0,...s,ref:e,style:{flexShrink:0,...s.style},onPointerDown:ue(s.onPointerDown,()=>{o.current===null&&(o.current=window.setInterval(r,50))}),onPointerMove:ue(s.onPointerMove,()=>{var d;(d=i.onItemLeave)==null||d.call(i),o.current===null&&(o.current=window.setInterval(r,50))}),onPointerLeave:ue(s.onPointerLeave,()=>{u()})})}),I4="SelectSeparator",eS=m.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t;return l.jsx(de.div,{"aria-hidden":!0,...r,ref:e})});eS.displayName=I4;var pp="SelectArrow",R4=m.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t,s=dd(n),i=as(pp,n),o=ls(pp,n);return i.open&&o.position==="popper"?l.jsx(eg,{...s,...r,ref:e}):null});R4.displayName=pp;var A4="SelectBubbleInput",tS=m.forwardRef(({__scopeSelect:t,value:e,...n},r)=>{const s=m.useRef(null),i=Ae(r,s),o=u4(e);return m.useEffect(()=>{const a=s.current;if(!a)return;const u=window.HTMLSelectElement.prototype,h=Object.getOwnPropertyDescriptor(u,"value").set;if(o!==e&&h){const p=new Event("change",{bubbles:!0});h.call(a,e),a.dispatchEvent(p)}},[o,e]),l.jsx(de.select,{...n,style:{...K1,...n.style},ref:i,defaultValue:e})});tS.displayName=A4;function nS(t){return t===""||t===void 0}function rS(t){const e=Tn(t),n=m.useRef(""),r=m.useRef(0),s=m.useCallback(o=>{const a=n.current+o;e(a),function u(d){n.current=d,window.clearTimeout(r.current),d!==""&&(r.current=window.setTimeout(()=>u(""),1e3))}(a)},[e]),i=m.useCallback(()=>{n.current="",window.clearTimeout(r.current)},[]);return m.useEffect(()=>()=>window.clearTimeout(r.current),[]),[n,s,i]}function sS(t,e,n){const s=e.length>1&&Array.from(e).every(d=>d===e[0])?e[0]:e,i=n?t.indexOf(n):-1;let o=k4(t,Math.max(i,0));s.length===1&&(o=o.filter(d=>d!==n));const u=o.find(d=>d.textValue.toLowerCase().startsWith(s.toLowerCase()));return u!==n?u:void 0}function k4(t,e){return t.map((n,r)=>t[(e+r)%t.length])}var P4=kT,iS=jT,j4=MT,D4=OT,M4=VT,oS=LT,O4=$T,aS=WT,lS=KT,V4=GT,L4=YT,cS=XT,uS=JT,dS=eS;const Zi=P4,eo=j4,qs=m.forwardRef(({className:t,children:e,...n},r)=>l.jsxs(iS,{ref:r,className:ce("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background data-[placeholder]:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",t),...n,children:[e,l.jsx(D4,{asChild:!0,children:l.jsx($m,{className:"h-4 w-4 opacity-50"})})]}));qs.displayName=iS.displayName;const hS=m.forwardRef(({className:t,...e},n)=>l.jsx(cS,{ref:n,className:ce("flex cursor-default items-center justify-center py-1",t),...e,children:l.jsx(yk,{className:"h-4 w-4"})}));hS.displayName=cS.displayName;const fS=m.forwardRef(({className:t,...e},n)=>l.jsx(uS,{ref:n,className:ce("flex cursor-default items-center justify-center py-1",t),...e,children:l.jsx($m,{className:"h-4 w-4"})}));fS.displayName=uS.displayName;const Ks=m.forwardRef(({className:t,children:e,position:n="popper",...r},s)=>l.jsx(M4,{children:l.jsxs(oS,{ref:s,className:ce("relative z-50 max-h-[--radix-select-content-available-height] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-select-content-transform-origin]",n==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",t),position:n,...r,children:[l.jsx(hS,{}),l.jsx(O4,{className:ce("p-1",n==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:e}),l.jsx(fS,{})]})}));Ks.displayName=oS.displayName;const F4=m.forwardRef(({className:t,...e},n)=>l.jsx(aS,{ref:n,className:ce("py-1.5 pl-8 pr-2 text-sm font-semibold",t),...e}));F4.displayName=aS.displayName;const tr=m.forwardRef(({className:t,children:e,...n},r)=>l.jsxs(lS,{ref:r,className:ce("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...n,children:[l.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:l.jsx(L4,{children:l.jsx(Fa,{className:"h-4 w-4"})})}),l.jsx(V4,{children:e})]}));tr.displayName=lS.displayName;const z4=m.forwardRef(({className:t,...e},n)=>l.jsx(dS,{ref:n,className:ce("-mx-1 my-1 h-px bg-muted",t),...e}));z4.displayName=dS.displayName;const Ue=m.forwardRef(({className:t,...e},n)=>l.jsx("div",{ref:n,className:ce("rounded-lg border bg-card text-card-foreground shadow-sm",t),...e}));Ue.displayName="Card";const Dn=m.forwardRef(({className:t,...e},n)=>l.jsx("div",{ref:n,className:ce("flex flex-col space-y-1.5 p-6",t),...e}));Dn.displayName="CardHeader";const Mn=m.forwardRef(({className:t,...e},n)=>l.jsx("div",{ref:n,className:ce("text-2xl font-semibold leading-none tracking-tight",t),...e}));Mn.displayName="CardTitle";const U4=m.forwardRef(({className:t,...e},n)=>l.jsx("div",{ref:n,className:ce("text-sm text-muted-foreground",t),...e}));U4.displayName="CardDescription";const $e=m.forwardRef(({className:t,...e},n)=>l.jsx("div",{ref:n,className:ce("p-6 pt-0",t),...e}));$e.displayName="CardContent";const $4=m.forwardRef(({className:t,...e},n)=>l.jsx("div",{ref:n,className:ce("flex items-center p-6 pt-0",t),...e}));$4.displayName="CardFooter";const B4=po("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function js({className:t,variant:e,...n}){return l.jsx("div",{className:ce(B4({variant:e}),t),...n})}const H4=()=>{};var Xx={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pS=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},W4=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=t[n++];e[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=t[n++],o=t[n++],a=t[n++],u=((s&7)<<18|(i&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(u&1023))}else{const i=t[n++],o=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|o&63)}}return e.join("")},mS={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const i=t[s],o=s+1<t.length,a=o?t[s+1]:0,u=s+2<t.length,d=u?t[s+2]:0,h=i>>2,p=(i&3)<<4|a>>4;let g=(a&15)<<2|d>>6,w=d&63;u||(w=64,o||(g=64)),r.push(n[h],n[p],n[g],n[w])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(pS(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):W4(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const i=n[t.charAt(s++)],a=s<t.length?n[t.charAt(s)]:0;++s;const d=s<t.length?n[t.charAt(s)]:64;++s;const p=s<t.length?n[t.charAt(s)]:64;if(++s,i==null||a==null||d==null||p==null)throw new q4;const g=i<<2|a>>4;if(r.push(g),d!==64){const w=a<<4&240|d>>2;if(r.push(w),p!==64){const C=d<<6&192|p;r.push(C)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class q4 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const K4=function(t){const e=pS(t);return mS.encodeByteArray(e,!0)},hu=function(t){return K4(t).replace(/\./g,"")},G4=function(t){try{return mS.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Q4(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof globalThis<"u")return globalThis;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y4=()=>Q4().__FIREBASE_DEFAULTS__,X4=()=>{if(typeof process>"u"||typeof Xx>"u")return;const t=Xx.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},J4=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&G4(t[1]);return e&&JSON.parse(e)},ug=()=>{try{return H4()||Y4()||X4()||J4()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},Z4=t=>{var e,n;return(n=(e=ug())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},eD=t=>{const e=Z4(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},gS=()=>{var t;return(t=ug())===null||t===void 0?void 0:t.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tD{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dg(t){return t.endsWith(".cloudworkstations.dev")}async function nD(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rD(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},t);return[hu(JSON.stringify(n)),hu(JSON.stringify(o)),""].join(".")}const va={};function sD(){const t={prod:[],emulator:[]};for(const e of Object.keys(va))va[e]?t.emulator.push(e):t.prod.push(e);return t}function iD(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let Jx=!1;function oD(t,e){if(typeof window>"u"||typeof document>"u"||!dg(window.location.host)||va[t]===e||va[t]||Jx)return;va[t]=e;function n(g){return`__firebase__banner__${g}`}const r="__firebase__banner",i=sD().prod.length>0;function o(){const g=document.getElementById(r);g&&g.remove()}function a(g){g.style.display="flex",g.style.background="#7faaf0",g.style.position="fixed",g.style.bottom="5px",g.style.left="5px",g.style.padding=".5em",g.style.borderRadius="5px",g.style.alignItems="center"}function u(g,w){g.setAttribute("width","24"),g.setAttribute("id",w),g.setAttribute("height","24"),g.setAttribute("viewBox","0 0 24 24"),g.setAttribute("fill","none"),g.style.marginLeft="-6px"}function d(){const g=document.createElement("span");return g.style.cursor="pointer",g.style.marginLeft="16px",g.style.fontSize="24px",g.innerHTML=" &times;",g.onclick=()=>{Jx=!0,o()},g}function h(g,w){g.setAttribute("id",w),g.innerText="Learn more",g.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",g.setAttribute("target","__blank"),g.style.paddingLeft="5px",g.style.textDecoration="underline"}function p(){const g=iD(r),w=n("text"),C=document.getElementById(w)||document.createElement("span"),x=n("learnmore"),T=document.getElementById(x)||document.createElement("a"),_=n("preprendIcon"),y=document.getElementById(_)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(g.created){const E=g.element;a(E),h(T,x);const k=d();u(y,_),E.append(y,C,T,k),document.body.appendChild(E)}i?(C.innerText="Preview backend disconnected.",y.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(y.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,C.innerText="Preview backend running in this workspace."),C.setAttribute("id",w)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",p):p()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aD(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function lD(){var t;const e=(t=ug())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(globalThis.process)==="[object process]"}catch{return!1}}function cD(){return!lD()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function uD(){try{return typeof indexedDB=="object"}catch{return!1}}function dD(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var i;e(((i=s.error)===null||i===void 0?void 0:i.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hD="FirebaseError";class wo extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=hD,Object.setPrototypeOf(this,wo.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,vS.prototype.create)}}class vS{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,i=this.errors[e],o=i?fD(i,r):"Error",a=`${this.serviceName}: ${o} (${s}).`;return new wo(s,a,r)}}function fD(t,e){return t.replace(pD,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const pD=/\{\$([^}]+)}/g;function fu(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const i=t[s],o=e[s];if(Zx(i)&&Zx(o)){if(!fu(i,o))return!1}else if(i!==o)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function Zx(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bn(t){return t&&t._delegate?t._delegate:t}class $a{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Es="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mD{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new tD;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(i){if(s)return null;throw i}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(vD(e))try{this.getOrInitializeService({instanceIdentifier:Es})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(e=Es){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Es){return this.instances.has(e)}getOptions(e=Es){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[i,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(i);r===a&&o.resolve(s)}return s}onInit(e,n){var r;const s=this.normalizeInstanceIdentifier(n),i=(r=this.onInitCallbacks.get(s))!==null&&r!==void 0?r:new Set;i.add(e),this.onInitCallbacks.set(s,i);const o=this.instances.get(s);return o&&e(o,s),()=>{i.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:gD(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Es){return this.component?this.component.multipleInstances?e:Es:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function gD(t){return t===Es?void 0:t}function vD(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yD{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new mD(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ee;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Ee||(Ee={}));const xD={debug:Ee.DEBUG,verbose:Ee.VERBOSE,info:Ee.INFO,warn:Ee.WARN,error:Ee.ERROR,silent:Ee.SILENT},wD=Ee.INFO,_D={[Ee.DEBUG]:"log",[Ee.VERBOSE]:"log",[Ee.INFO]:"info",[Ee.WARN]:"warn",[Ee.ERROR]:"error"},ED=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=_D[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class yS{constructor(e){this.name=e,this._logLevel=wD,this._logHandler=ED,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ee))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?xD[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ee.DEBUG,...e),this._logHandler(this,Ee.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ee.VERBOSE,...e),this._logHandler(this,Ee.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ee.INFO,...e),this._logHandler(this,Ee.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ee.WARN,...e),this._logHandler(this,Ee.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ee.ERROR,...e),this._logHandler(this,Ee.ERROR,...e)}}const TD=(t,e)=>e.some(n=>t instanceof n);let e0,t0;function SD(){return e0||(e0=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function bD(){return t0||(t0=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const xS=new WeakMap,mp=new WeakMap,wS=new WeakMap,Wh=new WeakMap,hg=new WeakMap;function CD(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",o)},i=()=>{n($r(t.result)),s()},o=()=>{r(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&xS.set(n,t)}).catch(()=>{}),hg.set(e,t),e}function ND(t){if(mp.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",o),t.removeEventListener("abort",o)},i=()=>{n(),s()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",o),t.addEventListener("abort",o)});mp.set(t,e)}let gp={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return mp.get(t);if(e==="objectStoreNames")return t.objectStoreNames||wS.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return $r(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function ID(t){gp=t(gp)}function RD(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(qh(this),e,...n);return wS.set(r,e.sort?e.sort():[e]),$r(r)}:bD().includes(t)?function(...e){return t.apply(qh(this),e),$r(xS.get(this))}:function(...e){return $r(t.apply(qh(this),e))}}function AD(t){return typeof t=="function"?RD(t):(t instanceof IDBTransaction&&ND(t),TD(t,SD())?new Proxy(t,gp):t)}function $r(t){if(t instanceof IDBRequest)return CD(t);if(Wh.has(t))return Wh.get(t);const e=AD(t);return e!==t&&(Wh.set(t,e),hg.set(e,t)),e}const qh=t=>hg.get(t);function kD(t,e,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const o=indexedDB.open(t,e),a=$r(o);return r&&o.addEventListener("upgradeneeded",u=>{r($r(o.result),u.oldVersion,u.newVersion,$r(o.transaction),u)}),n&&o.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),a.then(u=>{i&&u.addEventListener("close",()=>i()),s&&u.addEventListener("versionchange",d=>s(d.oldVersion,d.newVersion,d))}).catch(()=>{}),a}const PD=["get","getKey","getAll","getAllKeys","count"],jD=["put","add","delete","clear"],Kh=new Map;function n0(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Kh.get(e))return Kh.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=jD.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||PD.includes(n)))return;const i=async function(o,...a){const u=this.transaction(o,s?"readwrite":"readonly");let d=u.store;return r&&(d=d.index(a.shift())),(await Promise.all([d[n](...a),s&&u.done]))[0]};return Kh.set(e,i),i}ID(t=>({...t,get:(e,n,r)=>n0(e,n)||t.get(e,n,r),has:(e,n)=>!!n0(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DD{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(MD(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function MD(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const vp="@firebase/app",r0="0.13.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ur=new yS("@firebase/app"),OD="@firebase/app-compat",VD="@firebase/analytics-compat",LD="@firebase/analytics",FD="@firebase/app-check-compat",zD="@firebase/app-check",UD="@firebase/auth",$D="@firebase/auth-compat",BD="@firebase/database",HD="@firebase/data-connect",WD="@firebase/database-compat",qD="@firebase/functions",KD="@firebase/functions-compat",GD="@firebase/installations",QD="@firebase/installations-compat",YD="@firebase/messaging",XD="@firebase/messaging-compat",JD="@firebase/performance",ZD="@firebase/performance-compat",eM="@firebase/remote-config",tM="@firebase/remote-config-compat",nM="@firebase/storage",rM="@firebase/storage-compat",sM="@firebase/firestore",iM="@firebase/ai",oM="@firebase/firestore-compat",aM="firebase",lM="11.9.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yp="[DEFAULT]",cM={[vp]:"fire-core",[OD]:"fire-core-compat",[LD]:"fire-analytics",[VD]:"fire-analytics-compat",[zD]:"fire-app-check",[FD]:"fire-app-check-compat",[UD]:"fire-auth",[$D]:"fire-auth-compat",[BD]:"fire-rtdb",[HD]:"fire-data-connect",[WD]:"fire-rtdb-compat",[qD]:"fire-fn",[KD]:"fire-fn-compat",[GD]:"fire-iid",[QD]:"fire-iid-compat",[YD]:"fire-fcm",[XD]:"fire-fcm-compat",[JD]:"fire-perf",[ZD]:"fire-perf-compat",[eM]:"fire-rc",[tM]:"fire-rc-compat",[nM]:"fire-gcs",[rM]:"fire-gcs-compat",[sM]:"fire-fst",[oM]:"fire-fst-compat",[iM]:"fire-vertex","fire-js":"fire-js",[aM]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ba=new Map,uM=new Map,xp=new Map;function s0(t,e){try{t.container.addComponent(e)}catch(n){ur.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function pu(t){const e=t.name;if(xp.has(e))return ur.debug(`There were multiple attempts to register component ${e}.`),!1;xp.set(e,t);for(const n of Ba.values())s0(n,t);for(const n of uM.values())s0(n,t);return!0}function dM(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function hM(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fM={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Br=new vS("app","Firebase",fM);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pM{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new $a("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Br.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mM=lM;function fg(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:yp,automaticDataCollectionEnabled:!0},e),s=r.name;if(typeof s!="string"||!s)throw Br.create("bad-app-name",{appName:String(s)});if(n||(n=gS()),!n)throw Br.create("no-options");const i=Ba.get(s);if(i){if(fu(n,i.options)&&fu(r,i.config))return i;throw Br.create("duplicate-app",{appName:s})}const o=new yD(s);for(const u of xp.values())o.addComponent(u);const a=new pM(n,r,o);return Ba.set(s,a),a}function gM(t=yp){const e=Ba.get(t);if(!e&&t===yp&&gS())return fg();if(!e)throw Br.create("no-app",{appName:t});return e}function vM(){return Array.from(Ba.values())}function Fi(t,e,n){var r;let s=(r=cM[t])!==null&&r!==void 0?r:t;n&&(s+=`-${n}`);const i=s.match(/\s|\//),o=e.match(/\s|\//);if(i||o){const a=[`Unable to register library "${s}" with version "${e}":`];i&&a.push(`library name "${s}" contains illegal characters (whitespace or "/")`),i&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),ur.warn(a.join(" "));return}pu(new $a(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yM="firebase-heartbeat-database",xM=1,Ha="firebase-heartbeat-store";let Gh=null;function _S(){return Gh||(Gh=kD(yM,xM,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Ha)}catch(n){console.warn(n)}}}}).catch(t=>{throw Br.create("idb-open",{originalErrorMessage:t.message})})),Gh}async function wM(t){try{const n=(await _S()).transaction(Ha),r=await n.objectStore(Ha).get(ES(t));return await n.done,r}catch(e){if(e instanceof wo)ur.warn(e.message);else{const n=Br.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});ur.warn(n.message)}}}async function i0(t,e){try{const r=(await _S()).transaction(Ha,"readwrite");await r.objectStore(Ha).put(e,ES(t)),await r.done}catch(n){if(n instanceof wo)ur.warn(n.message);else{const r=Br.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});ur.warn(r.message)}}}function ES(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _M=1024,EM=30;class TM{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new bM(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=o0();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(o=>o.date===i))return;if(this._heartbeatsCache.heartbeats.push({date:i,agent:s}),this._heartbeatsCache.heartbeats.length>EM){const o=CM(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){ur.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=o0(),{heartbeatsToSend:r,unsentEntries:s}=SM(this._heartbeatsCache.heartbeats),i=hu(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(n){return ur.warn(n),""}}}function o0(){return new Date().toISOString().substring(0,10)}function SM(t,e=_M){const n=[];let r=t.slice();for(const s of t){const i=n.find(o=>o.agent===s.agent);if(i){if(i.dates.push(s.date),a0(n)>e){i.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),a0(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class bM{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return uD()?dD().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await wM(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return i0(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return i0(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function a0(t){return hu(JSON.stringify({version:2,heartbeats:t})).length}function CM(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NM(t){pu(new $a("platform-logger",e=>new DD(e),"PRIVATE")),pu(new $a("heartbeat",e=>new TM(e),"PRIVATE")),Fi(vp,r0,t),Fi(vp,r0,"esm2017"),Fi("fire-js","")}NM("");var IM="firebase",RM="11.9.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Fi(IM,RM,"app");var l0=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Hr,TS;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(b,S){function I(){}I.prototype=S.prototype,b.D=S.prototype,b.prototype=new I,b.prototype.constructor=b,b.C=function(R,P,j){for(var A=Array(arguments.length-2),L=2;L<arguments.length;L++)A[L-2]=arguments[L];return S.prototype[P].apply(R,A)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(b,S,I){I||(I=0);var R=Array(16);if(typeof S=="string")for(var P=0;16>P;++P)R[P]=S.charCodeAt(I++)|S.charCodeAt(I++)<<8|S.charCodeAt(I++)<<16|S.charCodeAt(I++)<<24;else for(P=0;16>P;++P)R[P]=S[I++]|S[I++]<<8|S[I++]<<16|S[I++]<<24;S=b.g[0],I=b.g[1],P=b.g[2];var j=b.g[3],A=S+(j^I&(P^j))+R[0]+3614090360&4294967295;S=I+(A<<7&4294967295|A>>>25),A=j+(P^S&(I^P))+R[1]+3905402710&4294967295,j=S+(A<<12&4294967295|A>>>20),A=P+(I^j&(S^I))+R[2]+606105819&4294967295,P=j+(A<<17&4294967295|A>>>15),A=I+(S^P&(j^S))+R[3]+3250441966&4294967295,I=P+(A<<22&4294967295|A>>>10),A=S+(j^I&(P^j))+R[4]+4118548399&4294967295,S=I+(A<<7&4294967295|A>>>25),A=j+(P^S&(I^P))+R[5]+1200080426&4294967295,j=S+(A<<12&4294967295|A>>>20),A=P+(I^j&(S^I))+R[6]+2821735955&4294967295,P=j+(A<<17&4294967295|A>>>15),A=I+(S^P&(j^S))+R[7]+4249261313&4294967295,I=P+(A<<22&4294967295|A>>>10),A=S+(j^I&(P^j))+R[8]+1770035416&4294967295,S=I+(A<<7&4294967295|A>>>25),A=j+(P^S&(I^P))+R[9]+2336552879&4294967295,j=S+(A<<12&4294967295|A>>>20),A=P+(I^j&(S^I))+R[10]+4294925233&4294967295,P=j+(A<<17&4294967295|A>>>15),A=I+(S^P&(j^S))+R[11]+2304563134&4294967295,I=P+(A<<22&4294967295|A>>>10),A=S+(j^I&(P^j))+R[12]+1804603682&4294967295,S=I+(A<<7&4294967295|A>>>25),A=j+(P^S&(I^P))+R[13]+4254626195&4294967295,j=S+(A<<12&4294967295|A>>>20),A=P+(I^j&(S^I))+R[14]+2792965006&4294967295,P=j+(A<<17&4294967295|A>>>15),A=I+(S^P&(j^S))+R[15]+1236535329&4294967295,I=P+(A<<22&4294967295|A>>>10),A=S+(P^j&(I^P))+R[1]+4129170786&4294967295,S=I+(A<<5&4294967295|A>>>27),A=j+(I^P&(S^I))+R[6]+3225465664&4294967295,j=S+(A<<9&4294967295|A>>>23),A=P+(S^I&(j^S))+R[11]+643717713&4294967295,P=j+(A<<14&4294967295|A>>>18),A=I+(j^S&(P^j))+R[0]+3921069994&4294967295,I=P+(A<<20&4294967295|A>>>12),A=S+(P^j&(I^P))+R[5]+3593408605&4294967295,S=I+(A<<5&4294967295|A>>>27),A=j+(I^P&(S^I))+R[10]+38016083&4294967295,j=S+(A<<9&4294967295|A>>>23),A=P+(S^I&(j^S))+R[15]+3634488961&4294967295,P=j+(A<<14&4294967295|A>>>18),A=I+(j^S&(P^j))+R[4]+3889429448&4294967295,I=P+(A<<20&4294967295|A>>>12),A=S+(P^j&(I^P))+R[9]+568446438&4294967295,S=I+(A<<5&4294967295|A>>>27),A=j+(I^P&(S^I))+R[14]+3275163606&4294967295,j=S+(A<<9&4294967295|A>>>23),A=P+(S^I&(j^S))+R[3]+4107603335&4294967295,P=j+(A<<14&4294967295|A>>>18),A=I+(j^S&(P^j))+R[8]+1163531501&4294967295,I=P+(A<<20&4294967295|A>>>12),A=S+(P^j&(I^P))+R[13]+2850285829&4294967295,S=I+(A<<5&4294967295|A>>>27),A=j+(I^P&(S^I))+R[2]+4243563512&4294967295,j=S+(A<<9&4294967295|A>>>23),A=P+(S^I&(j^S))+R[7]+1735328473&4294967295,P=j+(A<<14&4294967295|A>>>18),A=I+(j^S&(P^j))+R[12]+2368359562&4294967295,I=P+(A<<20&4294967295|A>>>12),A=S+(I^P^j)+R[5]+4294588738&4294967295,S=I+(A<<4&4294967295|A>>>28),A=j+(S^I^P)+R[8]+2272392833&4294967295,j=S+(A<<11&4294967295|A>>>21),A=P+(j^S^I)+R[11]+1839030562&4294967295,P=j+(A<<16&4294967295|A>>>16),A=I+(P^j^S)+R[14]+4259657740&4294967295,I=P+(A<<23&4294967295|A>>>9),A=S+(I^P^j)+R[1]+2763975236&4294967295,S=I+(A<<4&4294967295|A>>>28),A=j+(S^I^P)+R[4]+1272893353&4294967295,j=S+(A<<11&4294967295|A>>>21),A=P+(j^S^I)+R[7]+4139469664&4294967295,P=j+(A<<16&4294967295|A>>>16),A=I+(P^j^S)+R[10]+3200236656&4294967295,I=P+(A<<23&4294967295|A>>>9),A=S+(I^P^j)+R[13]+681279174&4294967295,S=I+(A<<4&4294967295|A>>>28),A=j+(S^I^P)+R[0]+3936430074&4294967295,j=S+(A<<11&4294967295|A>>>21),A=P+(j^S^I)+R[3]+3572445317&4294967295,P=j+(A<<16&4294967295|A>>>16),A=I+(P^j^S)+R[6]+76029189&4294967295,I=P+(A<<23&4294967295|A>>>9),A=S+(I^P^j)+R[9]+3654602809&4294967295,S=I+(A<<4&4294967295|A>>>28),A=j+(S^I^P)+R[12]+3873151461&4294967295,j=S+(A<<11&4294967295|A>>>21),A=P+(j^S^I)+R[15]+530742520&4294967295,P=j+(A<<16&4294967295|A>>>16),A=I+(P^j^S)+R[2]+3299628645&4294967295,I=P+(A<<23&4294967295|A>>>9),A=S+(P^(I|~j))+R[0]+4096336452&4294967295,S=I+(A<<6&4294967295|A>>>26),A=j+(I^(S|~P))+R[7]+1126891415&4294967295,j=S+(A<<10&4294967295|A>>>22),A=P+(S^(j|~I))+R[14]+2878612391&4294967295,P=j+(A<<15&4294967295|A>>>17),A=I+(j^(P|~S))+R[5]+4237533241&4294967295,I=P+(A<<21&4294967295|A>>>11),A=S+(P^(I|~j))+R[12]+1700485571&4294967295,S=I+(A<<6&4294967295|A>>>26),A=j+(I^(S|~P))+R[3]+2399980690&4294967295,j=S+(A<<10&4294967295|A>>>22),A=P+(S^(j|~I))+R[10]+4293915773&4294967295,P=j+(A<<15&4294967295|A>>>17),A=I+(j^(P|~S))+R[1]+2240044497&4294967295,I=P+(A<<21&4294967295|A>>>11),A=S+(P^(I|~j))+R[8]+1873313359&4294967295,S=I+(A<<6&4294967295|A>>>26),A=j+(I^(S|~P))+R[15]+4264355552&4294967295,j=S+(A<<10&4294967295|A>>>22),A=P+(S^(j|~I))+R[6]+2734768916&4294967295,P=j+(A<<15&4294967295|A>>>17),A=I+(j^(P|~S))+R[13]+1309151649&4294967295,I=P+(A<<21&4294967295|A>>>11),A=S+(P^(I|~j))+R[4]+4149444226&4294967295,S=I+(A<<6&4294967295|A>>>26),A=j+(I^(S|~P))+R[11]+3174756917&4294967295,j=S+(A<<10&4294967295|A>>>22),A=P+(S^(j|~I))+R[2]+718787259&4294967295,P=j+(A<<15&4294967295|A>>>17),A=I+(j^(P|~S))+R[9]+3951481745&4294967295,b.g[0]=b.g[0]+S&4294967295,b.g[1]=b.g[1]+(P+(A<<21&4294967295|A>>>11))&4294967295,b.g[2]=b.g[2]+P&4294967295,b.g[3]=b.g[3]+j&4294967295}r.prototype.u=function(b,S){S===void 0&&(S=b.length);for(var I=S-this.blockSize,R=this.B,P=this.h,j=0;j<S;){if(P==0)for(;j<=I;)s(this,b,j),j+=this.blockSize;if(typeof b=="string"){for(;j<S;)if(R[P++]=b.charCodeAt(j++),P==this.blockSize){s(this,R),P=0;break}}else for(;j<S;)if(R[P++]=b[j++],P==this.blockSize){s(this,R),P=0;break}}this.h=P,this.o+=S},r.prototype.v=function(){var b=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);b[0]=128;for(var S=1;S<b.length-8;++S)b[S]=0;var I=8*this.o;for(S=b.length-8;S<b.length;++S)b[S]=I&255,I/=256;for(this.u(b),b=Array(16),S=I=0;4>S;++S)for(var R=0;32>R;R+=8)b[I++]=this.g[S]>>>R&255;return b};function i(b,S){var I=a;return Object.prototype.hasOwnProperty.call(I,b)?I[b]:I[b]=S(b)}function o(b,S){this.h=S;for(var I=[],R=!0,P=b.length-1;0<=P;P--){var j=b[P]|0;R&&j==S||(I[P]=j,R=!1)}this.g=I}var a={};function u(b){return-128<=b&&128>b?i(b,function(S){return new o([S|0],0>S?-1:0)}):new o([b|0],0>b?-1:0)}function d(b){if(isNaN(b)||!isFinite(b))return p;if(0>b)return T(d(-b));for(var S=[],I=1,R=0;b>=I;R++)S[R]=b/I|0,I*=4294967296;return new o(S,0)}function h(b,S){if(b.length==0)throw Error("number format error: empty string");if(S=S||10,2>S||36<S)throw Error("radix out of range: "+S);if(b.charAt(0)=="-")return T(h(b.substring(1),S));if(0<=b.indexOf("-"))throw Error('number format error: interior "-" character');for(var I=d(Math.pow(S,8)),R=p,P=0;P<b.length;P+=8){var j=Math.min(8,b.length-P),A=parseInt(b.substring(P,P+j),S);8>j?(j=d(Math.pow(S,j)),R=R.j(j).add(d(A))):(R=R.j(I),R=R.add(d(A)))}return R}var p=u(0),g=u(1),w=u(16777216);t=o.prototype,t.m=function(){if(x(this))return-T(this).m();for(var b=0,S=1,I=0;I<this.g.length;I++){var R=this.i(I);b+=(0<=R?R:4294967296+R)*S,S*=4294967296}return b},t.toString=function(b){if(b=b||10,2>b||36<b)throw Error("radix out of range: "+b);if(C(this))return"0";if(x(this))return"-"+T(this).toString(b);for(var S=d(Math.pow(b,6)),I=this,R="";;){var P=k(I,S).g;I=_(I,P.j(S));var j=((0<I.g.length?I.g[0]:I.h)>>>0).toString(b);if(I=P,C(I))return j+R;for(;6>j.length;)j="0"+j;R=j+R}},t.i=function(b){return 0>b?0:b<this.g.length?this.g[b]:this.h};function C(b){if(b.h!=0)return!1;for(var S=0;S<b.g.length;S++)if(b.g[S]!=0)return!1;return!0}function x(b){return b.h==-1}t.l=function(b){return b=_(this,b),x(b)?-1:C(b)?0:1};function T(b){for(var S=b.g.length,I=[],R=0;R<S;R++)I[R]=~b.g[R];return new o(I,~b.h).add(g)}t.abs=function(){return x(this)?T(this):this},t.add=function(b){for(var S=Math.max(this.g.length,b.g.length),I=[],R=0,P=0;P<=S;P++){var j=R+(this.i(P)&65535)+(b.i(P)&65535),A=(j>>>16)+(this.i(P)>>>16)+(b.i(P)>>>16);R=A>>>16,j&=65535,A&=65535,I[P]=A<<16|j}return new o(I,I[I.length-1]&-2147483648?-1:0)};function _(b,S){return b.add(T(S))}t.j=function(b){if(C(this)||C(b))return p;if(x(this))return x(b)?T(this).j(T(b)):T(T(this).j(b));if(x(b))return T(this.j(T(b)));if(0>this.l(w)&&0>b.l(w))return d(this.m()*b.m());for(var S=this.g.length+b.g.length,I=[],R=0;R<2*S;R++)I[R]=0;for(R=0;R<this.g.length;R++)for(var P=0;P<b.g.length;P++){var j=this.i(R)>>>16,A=this.i(R)&65535,L=b.i(P)>>>16,G=b.i(P)&65535;I[2*R+2*P]+=A*G,y(I,2*R+2*P),I[2*R+2*P+1]+=j*G,y(I,2*R+2*P+1),I[2*R+2*P+1]+=A*L,y(I,2*R+2*P+1),I[2*R+2*P+2]+=j*L,y(I,2*R+2*P+2)}for(R=0;R<S;R++)I[R]=I[2*R+1]<<16|I[2*R];for(R=S;R<2*S;R++)I[R]=0;return new o(I,0)};function y(b,S){for(;(b[S]&65535)!=b[S];)b[S+1]+=b[S]>>>16,b[S]&=65535,S++}function E(b,S){this.g=b,this.h=S}function k(b,S){if(C(S))throw Error("division by zero");if(C(b))return new E(p,p);if(x(b))return S=k(T(b),S),new E(T(S.g),T(S.h));if(x(S))return S=k(b,T(S)),new E(T(S.g),S.h);if(30<b.g.length){if(x(b)||x(S))throw Error("slowDivide_ only works with positive integers.");for(var I=g,R=S;0>=R.l(b);)I=M(I),R=M(R);var P=D(I,1),j=D(R,1);for(R=D(R,2),I=D(I,2);!C(R);){var A=j.add(R);0>=A.l(b)&&(P=P.add(I),j=A),R=D(R,1),I=D(I,1)}return S=_(b,P.j(S)),new E(P,S)}for(P=p;0<=b.l(S);){for(I=Math.max(1,Math.floor(b.m()/S.m())),R=Math.ceil(Math.log(I)/Math.LN2),R=48>=R?1:Math.pow(2,R-48),j=d(I),A=j.j(S);x(A)||0<A.l(b);)I-=R,j=d(I),A=j.j(S);C(j)&&(j=g),P=P.add(j),b=_(b,A)}return new E(P,b)}t.A=function(b){return k(this,b).h},t.and=function(b){for(var S=Math.max(this.g.length,b.g.length),I=[],R=0;R<S;R++)I[R]=this.i(R)&b.i(R);return new o(I,this.h&b.h)},t.or=function(b){for(var S=Math.max(this.g.length,b.g.length),I=[],R=0;R<S;R++)I[R]=this.i(R)|b.i(R);return new o(I,this.h|b.h)},t.xor=function(b){for(var S=Math.max(this.g.length,b.g.length),I=[],R=0;R<S;R++)I[R]=this.i(R)^b.i(R);return new o(I,this.h^b.h)};function M(b){for(var S=b.g.length+1,I=[],R=0;R<S;R++)I[R]=b.i(R)<<1|b.i(R-1)>>>31;return new o(I,b.h)}function D(b,S){var I=S>>5;S%=32;for(var R=b.g.length-I,P=[],j=0;j<R;j++)P[j]=0<S?b.i(j+I)>>>S|b.i(j+I+1)<<32-S:b.i(j+I);return new o(P,b.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,TS=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=d,o.fromString=h,Hr=o}).apply(typeof l0<"u"?l0:typeof self<"u"?self:typeof window<"u"?window:{});var ac=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var SS,ta,bS,Rc,wp,CS,NS,IS;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(c,f,v){return c==Array.prototype||c==Object.prototype||(c[f]=v.value),c};function n(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof ac=="object"&&ac];for(var f=0;f<c.length;++f){var v=c[f];if(v&&v.Math==Math)return v}throw Error("Cannot find global object")}var r=n(this);function s(c,f){if(f)e:{var v=r;c=c.split(".");for(var N=0;N<c.length-1;N++){var V=c[N];if(!(V in v))break e;v=v[V]}c=c[c.length-1],N=v[c],f=f(N),f!=N&&f!=null&&e(v,c,{configurable:!0,writable:!0,value:f})}}function i(c,f){c instanceof String&&(c+="");var v=0,N=!1,V={next:function(){if(!N&&v<c.length){var F=v++;return{value:f(F,c[F]),done:!1}}return N=!0,{done:!0,value:void 0}}};return V[Symbol.iterator]=function(){return V},V}s("Array.prototype.values",function(c){return c||function(){return i(this,function(f,v){return v})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},a=this||self;function u(c){var f=typeof c;return f=f!="object"?f:c?Array.isArray(c)?"array":f:"null",f=="array"||f=="object"&&typeof c.length=="number"}function d(c){var f=typeof c;return f=="object"&&c!=null||f=="function"}function h(c,f,v){return c.call.apply(c.bind,arguments)}function p(c,f,v){if(!c)throw Error();if(2<arguments.length){var N=Array.prototype.slice.call(arguments,2);return function(){var V=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(V,N),c.apply(f,V)}}return function(){return c.apply(f,arguments)}}function g(c,f,v){return g=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?h:p,g.apply(null,arguments)}function w(c,f){var v=Array.prototype.slice.call(arguments,1);return function(){var N=v.slice();return N.push.apply(N,arguments),c.apply(this,N)}}function C(c,f){function v(){}v.prototype=f.prototype,c.aa=f.prototype,c.prototype=new v,c.prototype.constructor=c,c.Qb=function(N,V,F){for(var X=Array(arguments.length-2),ke=2;ke<arguments.length;ke++)X[ke-2]=arguments[ke];return f.prototype[V].apply(N,X)}}function x(c){const f=c.length;if(0<f){const v=Array(f);for(let N=0;N<f;N++)v[N]=c[N];return v}return[]}function T(c,f){for(let v=1;v<arguments.length;v++){const N=arguments[v];if(u(N)){const V=c.length||0,F=N.length||0;c.length=V+F;for(let X=0;X<F;X++)c[V+X]=N[X]}else c.push(N)}}class _{constructor(f,v){this.i=f,this.j=v,this.h=0,this.g=null}get(){let f;return 0<this.h?(this.h--,f=this.g,this.g=f.next,f.next=null):f=this.i(),f}}function y(c){return/^[\s\xa0]*$/.test(c)}function E(){var c=a.navigator;return c&&(c=c.userAgent)?c:""}function k(c){return k[" "](c),c}k[" "]=function(){};var M=E().indexOf("Gecko")!=-1&&!(E().toLowerCase().indexOf("webkit")!=-1&&E().indexOf("Edge")==-1)&&!(E().indexOf("Trident")!=-1||E().indexOf("MSIE")!=-1)&&E().indexOf("Edge")==-1;function D(c,f,v){for(const N in c)f.call(v,c[N],N,c)}function b(c,f){for(const v in c)f.call(void 0,c[v],v,c)}function S(c){const f={};for(const v in c)f[v]=c[v];return f}const I="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function R(c,f){let v,N;for(let V=1;V<arguments.length;V++){N=arguments[V];for(v in N)c[v]=N[v];for(let F=0;F<I.length;F++)v=I[F],Object.prototype.hasOwnProperty.call(N,v)&&(c[v]=N[v])}}function P(c){var f=1;c=c.split(":");const v=[];for(;0<f&&c.length;)v.push(c.shift()),f--;return c.length&&v.push(c.join(":")),v}function j(c){a.setTimeout(()=>{throw c},0)}function A(){var c=$;let f=null;return c.g&&(f=c.g,c.g=c.g.next,c.g||(c.h=null),f.next=null),f}class L{constructor(){this.h=this.g=null}add(f,v){const N=G.get();N.set(f,v),this.h?this.h.next=N:this.g=N,this.h=N}}var G=new _(()=>new Q,c=>c.reset());class Q{constructor(){this.next=this.g=this.h=null}set(f,v){this.h=f,this.g=v,this.next=null}reset(){this.next=this.g=this.h=null}}let z,O=!1,$=new L,Z=()=>{const c=a.Promise.resolve(void 0);z=()=>{c.then(se)}};var se=()=>{for(var c;c=A();){try{c.h.call(c.g)}catch(v){j(v)}var f=G;f.j(c),100>f.h&&(f.h++,c.next=f.g,f.g=c)}O=!1};function U(){this.s=this.s,this.C=this.C}U.prototype.s=!1,U.prototype.ma=function(){this.s||(this.s=!0,this.N())},U.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function J(c,f){this.type=c,this.g=this.target=f,this.defaultPrevented=!1}J.prototype.h=function(){this.defaultPrevented=!0};var W=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var c=!1,f=Object.defineProperty({},"passive",{get:function(){c=!0}});try{const v=()=>{};a.addEventListener("test",v,f),a.removeEventListener("test",v,f)}catch{}return c}();function B(c,f){if(J.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c){var v=this.type=c.type,N=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;if(this.target=c.target||c.srcElement,this.g=f,f=c.relatedTarget){if(M){e:{try{k(f.nodeName);var V=!0;break e}catch{}V=!1}V||(f=null)}}else v=="mouseover"?f=c.fromElement:v=="mouseout"&&(f=c.toElement);this.relatedTarget=f,N?(this.clientX=N.clientX!==void 0?N.clientX:N.pageX,this.clientY=N.clientY!==void 0?N.clientY:N.pageY,this.screenX=N.screenX||0,this.screenY=N.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=typeof c.pointerType=="string"?c.pointerType:ee[c.pointerType]||"",this.state=c.state,this.i=c,c.defaultPrevented&&B.aa.h.call(this)}}C(B,J);var ee={2:"touch",3:"pen",4:"mouse"};B.prototype.h=function(){B.aa.h.call(this);var c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var Y="closure_listenable_"+(1e6*Math.random()|0),pe=0;function we(c,f,v,N,V){this.listener=c,this.proxy=null,this.src=f,this.type=v,this.capture=!!N,this.ha=V,this.key=++pe,this.da=this.fa=!1}function ye(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function Te(c){this.src=c,this.g={},this.h=0}Te.prototype.add=function(c,f,v,N,V){var F=c.toString();c=this.g[F],c||(c=this.g[F]=[],this.h++);var X=lt(c,f,N,V);return-1<X?(f=c[X],v||(f.fa=!1)):(f=new we(f,this.src,F,!!N,V),f.fa=v,c.push(f)),f};function be(c,f){var v=f.type;if(v in c.g){var N=c.g[v],V=Array.prototype.indexOf.call(N,f,void 0),F;(F=0<=V)&&Array.prototype.splice.call(N,V,1),F&&(ye(f),c.g[v].length==0&&(delete c.g[v],c.h--))}}function lt(c,f,v,N){for(var V=0;V<c.length;++V){var F=c[V];if(!F.da&&F.listener==f&&F.capture==!!v&&F.ha==N)return V}return-1}var Dt="closure_lm_"+(1e6*Math.random()|0),qn={};function vr(c,f,v,N,V){if(Array.isArray(f)){for(var F=0;F<f.length;F++)vr(c,f[F],v,N,V);return null}return v=av(v),c&&c[Y]?c.K(f,v,d(N)?!!N.capture:!1,V):hs(c,f,v,!1,N,V)}function hs(c,f,v,N,V,F){if(!f)throw Error("Invalid event type");var X=d(V)?!!V.capture:!!V,ke=zd(c);if(ke||(c[Dt]=ke=new Te(c)),v=ke.add(f,v,N,X,F),v.proxy)return v;if(N=Ld(),v.proxy=N,N.src=c,N.listener=v,c.addEventListener)W||(V=X),V===void 0&&(V=!1),c.addEventListener(f.toString(),N,V);else if(c.attachEvent)c.attachEvent(ov(f.toString()),N);else if(c.addListener&&c.removeListener)c.addListener(N);else throw Error("addEventListener and attachEvent are unavailable.");return v}function Ld(){function c(v){return f.call(c.src,c.listener,v)}const f=VC;return c}function fs(c,f,v,N,V){if(Array.isArray(f))for(var F=0;F<f.length;F++)fs(c,f[F],v,N,V);else N=d(N)?!!N.capture:!!N,v=av(v),c&&c[Y]?(c=c.i,f=String(f).toString(),f in c.g&&(F=c.g[f],v=lt(F,v,N,V),-1<v&&(ye(F[v]),Array.prototype.splice.call(F,v,1),F.length==0&&(delete c.g[f],c.h--)))):c&&(c=zd(c))&&(f=c.g[f.toString()],c=-1,f&&(c=lt(f,v,N,V)),(v=-1<c?f[c]:null)&&Fd(v))}function Fd(c){if(typeof c!="number"&&c&&!c.da){var f=c.src;if(f&&f[Y])be(f.i,c);else{var v=c.type,N=c.proxy;f.removeEventListener?f.removeEventListener(v,N,c.capture):f.detachEvent?f.detachEvent(ov(v),N):f.addListener&&f.removeListener&&f.removeListener(N),(v=zd(f))?(be(v,c),v.h==0&&(v.src=null,f[Dt]=null)):ye(c)}}}function ov(c){return c in qn?qn[c]:qn[c]="on"+c}function VC(c,f){if(c.da)c=!0;else{f=new B(f,this);var v=c.listener,N=c.ha||c.src;c.fa&&Fd(c),c=v.call(N,f)}return c}function zd(c){return c=c[Dt],c instanceof Te?c:null}var Ud="__closure_events_fn_"+(1e9*Math.random()>>>0);function av(c){return typeof c=="function"?c:(c[Ud]||(c[Ud]=function(f){return c.handleEvent(f)}),c[Ud])}function gt(){U.call(this),this.i=new Te(this),this.M=this,this.F=null}C(gt,U),gt.prototype[Y]=!0,gt.prototype.removeEventListener=function(c,f,v,N){fs(this,c,f,v,N)};function Nt(c,f){var v,N=c.F;if(N)for(v=[];N;N=N.F)v.push(N);if(c=c.M,N=f.type||f,typeof f=="string")f=new J(f,c);else if(f instanceof J)f.target=f.target||c;else{var V=f;f=new J(N,c),R(f,V)}if(V=!0,v)for(var F=v.length-1;0<=F;F--){var X=f.g=v[F];V=_l(X,N,!0,f)&&V}if(X=f.g=c,V=_l(X,N,!0,f)&&V,V=_l(X,N,!1,f)&&V,v)for(F=0;F<v.length;F++)X=f.g=v[F],V=_l(X,N,!1,f)&&V}gt.prototype.N=function(){if(gt.aa.N.call(this),this.i){var c=this.i,f;for(f in c.g){for(var v=c.g[f],N=0;N<v.length;N++)ye(v[N]);delete c.g[f],c.h--}}this.F=null},gt.prototype.K=function(c,f,v,N){return this.i.add(String(c),f,!1,v,N)},gt.prototype.L=function(c,f,v,N){return this.i.add(String(c),f,!0,v,N)};function _l(c,f,v,N){if(f=c.i.g[String(f)],!f)return!0;f=f.concat();for(var V=!0,F=0;F<f.length;++F){var X=f[F];if(X&&!X.da&&X.capture==v){var ke=X.listener,ct=X.ha||X.src;X.fa&&be(c.i,X),V=ke.call(ct,N)!==!1&&V}}return V&&!N.defaultPrevented}function lv(c,f,v){if(typeof c=="function")v&&(c=g(c,v));else if(c&&typeof c.handleEvent=="function")c=g(c.handleEvent,c);else throw Error("Invalid listener argument");return 2147483647<Number(f)?-1:a.setTimeout(c,f||0)}function cv(c){c.g=lv(()=>{c.g=null,c.i&&(c.i=!1,cv(c))},c.l);const f=c.h;c.h=null,c.m.apply(null,f)}class LC extends U{constructor(f,v){super(),this.m=f,this.l=v,this.h=null,this.i=!1,this.g=null}j(f){this.h=arguments,this.g?this.i=!0:cv(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Co(c){U.call(this),this.h=c,this.g={}}C(Co,U);var uv=[];function dv(c){D(c.g,function(f,v){this.g.hasOwnProperty(v)&&Fd(f)},c),c.g={}}Co.prototype.N=function(){Co.aa.N.call(this),dv(this)},Co.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var $d=a.JSON.stringify,FC=a.JSON.parse,zC=class{stringify(c){return a.JSON.stringify(c,void 0)}parse(c){return a.JSON.parse(c,void 0)}};function Bd(){}Bd.prototype.h=null;function hv(c){return c.h||(c.h=c.i())}function fv(){}var No={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Hd(){J.call(this,"d")}C(Hd,J);function Wd(){J.call(this,"c")}C(Wd,J);var ps={},pv=null;function El(){return pv=pv||new gt}ps.La="serverreachability";function mv(c){J.call(this,ps.La,c)}C(mv,J);function Io(c){const f=El();Nt(f,new mv(f))}ps.STAT_EVENT="statevent";function gv(c,f){J.call(this,ps.STAT_EVENT,c),this.stat=f}C(gv,J);function It(c){const f=El();Nt(f,new gv(f,c))}ps.Ma="timingevent";function vv(c,f){J.call(this,ps.Ma,c),this.size=f}C(vv,J);function Ro(c,f){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){c()},f)}function Ao(){this.g=!0}Ao.prototype.xa=function(){this.g=!1};function UC(c,f,v,N,V,F){c.info(function(){if(c.g)if(F)for(var X="",ke=F.split("&"),ct=0;ct<ke.length;ct++){var Ce=ke[ct].split("=");if(1<Ce.length){var vt=Ce[0];Ce=Ce[1];var yt=vt.split("_");X=2<=yt.length&&yt[1]=="type"?X+(vt+"="+Ce+"&"):X+(vt+"=redacted&")}}else X=null;else X=F;return"XMLHTTP REQ ("+N+") [attempt "+V+"]: "+f+`
`+v+`
`+X})}function $C(c,f,v,N,V,F,X){c.info(function(){return"XMLHTTP RESP ("+N+") [ attempt "+V+"]: "+f+`
`+v+`
`+F+" "+X})}function ri(c,f,v,N){c.info(function(){return"XMLHTTP TEXT ("+f+"): "+HC(c,v)+(N?" "+N:"")})}function BC(c,f){c.info(function(){return"TIMEOUT: "+f})}Ao.prototype.info=function(){};function HC(c,f){if(!c.g)return f;if(!f)return null;try{var v=JSON.parse(f);if(v){for(c=0;c<v.length;c++)if(Array.isArray(v[c])){var N=v[c];if(!(2>N.length)){var V=N[1];if(Array.isArray(V)&&!(1>V.length)){var F=V[0];if(F!="noop"&&F!="stop"&&F!="close")for(var X=1;X<V.length;X++)V[X]=""}}}}return $d(v)}catch{return f}}var Tl={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},yv={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},qd;function Sl(){}C(Sl,Bd),Sl.prototype.g=function(){return new XMLHttpRequest},Sl.prototype.i=function(){return{}},qd=new Sl;function yr(c,f,v,N){this.j=c,this.i=f,this.l=v,this.R=N||1,this.U=new Co(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new xv}function xv(){this.i=null,this.g="",this.h=!1}var wv={},Kd={};function Gd(c,f,v){c.L=1,c.v=Il(Kn(f)),c.m=v,c.P=!0,_v(c,null)}function _v(c,f){c.F=Date.now(),bl(c),c.A=Kn(c.v);var v=c.A,N=c.R;Array.isArray(N)||(N=[String(N)]),Mv(v.i,"t",N),c.C=0,v=c.j.J,c.h=new xv,c.g=Zv(c.j,v?f:null,!c.m),0<c.O&&(c.M=new LC(g(c.Y,c,c.g),c.O)),f=c.U,v=c.g,N=c.ca;var V="readystatechange";Array.isArray(V)||(V&&(uv[0]=V.toString()),V=uv);for(var F=0;F<V.length;F++){var X=vr(v,V[F],N||f.handleEvent,!1,f.h||f);if(!X)break;f.g[X.key]=X}f=c.H?S(c.H):{},c.m?(c.u||(c.u="POST"),f["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.A,c.u,c.m,f)):(c.u="GET",c.g.ea(c.A,c.u,null,f)),Io(),UC(c.i,c.u,c.A,c.l,c.R,c.m)}yr.prototype.ca=function(c){c=c.target;const f=this.M;f&&Gn(c)==3?f.j():this.Y(c)},yr.prototype.Y=function(c){try{if(c==this.g)e:{const yt=Gn(this.g);var f=this.g.Ba();const oi=this.g.Z();if(!(3>yt)&&(yt!=3||this.g&&(this.h.h||this.g.oa()||$v(this.g)))){this.J||yt!=4||f==7||(f==8||0>=oi?Io(3):Io(2)),Qd(this);var v=this.g.Z();this.X=v;t:if(Ev(this)){var N=$v(this.g);c="";var V=N.length,F=Gn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){ms(this),ko(this);var X="";break t}this.h.i=new a.TextDecoder}for(f=0;f<V;f++)this.h.h=!0,c+=this.h.i.decode(N[f],{stream:!(F&&f==V-1)});N.length=0,this.h.g+=c,this.C=0,X=this.h.g}else X=this.g.oa();if(this.o=v==200,$C(this.i,this.u,this.A,this.l,this.R,yt,v),this.o){if(this.T&&!this.K){t:{if(this.g){var ke,ct=this.g;if((ke=ct.g?ct.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!y(ke)){var Ce=ke;break t}}Ce=null}if(v=Ce)ri(this.i,this.l,v,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Yd(this,v);else{this.o=!1,this.s=3,It(12),ms(this),ko(this);break e}}if(this.P){v=!0;let pn;for(;!this.J&&this.C<X.length;)if(pn=WC(this,X),pn==Kd){yt==4&&(this.s=4,It(14),v=!1),ri(this.i,this.l,null,"[Incomplete Response]");break}else if(pn==wv){this.s=4,It(15),ri(this.i,this.l,X,"[Invalid Chunk]"),v=!1;break}else ri(this.i,this.l,pn,null),Yd(this,pn);if(Ev(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),yt!=4||X.length!=0||this.h.h||(this.s=1,It(16),v=!1),this.o=this.o&&v,!v)ri(this.i,this.l,X,"[Invalid Chunked Response]"),ms(this),ko(this);else if(0<X.length&&!this.W){this.W=!0;var vt=this.j;vt.g==this&&vt.ba&&!vt.M&&(vt.j.info("Great, no buffering proxy detected. Bytes received: "+X.length),nh(vt),vt.M=!0,It(11))}}else ri(this.i,this.l,X,null),Yd(this,X);yt==4&&ms(this),this.o&&!this.J&&(yt==4?Qv(this.j,this):(this.o=!1,bl(this)))}else lN(this.g),v==400&&0<X.indexOf("Unknown SID")?(this.s=3,It(12)):(this.s=0,It(13)),ms(this),ko(this)}}}catch{}finally{}};function Ev(c){return c.g?c.u=="GET"&&c.L!=2&&c.j.Ca:!1}function WC(c,f){var v=c.C,N=f.indexOf(`
`,v);return N==-1?Kd:(v=Number(f.substring(v,N)),isNaN(v)?wv:(N+=1,N+v>f.length?Kd:(f=f.slice(N,N+v),c.C=N+v,f)))}yr.prototype.cancel=function(){this.J=!0,ms(this)};function bl(c){c.S=Date.now()+c.I,Tv(c,c.I)}function Tv(c,f){if(c.B!=null)throw Error("WatchDog timer not null");c.B=Ro(g(c.ba,c),f)}function Qd(c){c.B&&(a.clearTimeout(c.B),c.B=null)}yr.prototype.ba=function(){this.B=null;const c=Date.now();0<=c-this.S?(BC(this.i,this.A),this.L!=2&&(Io(),It(17)),ms(this),this.s=2,ko(this)):Tv(this,this.S-c)};function ko(c){c.j.G==0||c.J||Qv(c.j,c)}function ms(c){Qd(c);var f=c.M;f&&typeof f.ma=="function"&&f.ma(),c.M=null,dv(c.U),c.g&&(f=c.g,c.g=null,f.abort(),f.ma())}function Yd(c,f){try{var v=c.j;if(v.G!=0&&(v.g==c||Xd(v.h,c))){if(!c.K&&Xd(v.h,c)&&v.G==3){try{var N=v.Da.g.parse(f)}catch{N=null}if(Array.isArray(N)&&N.length==3){var V=N;if(V[0]==0){e:if(!v.u){if(v.g)if(v.g.F+3e3<c.F)Dl(v),Pl(v);else break e;th(v),It(18)}}else v.za=V[1],0<v.za-v.T&&37500>V[2]&&v.F&&v.v==0&&!v.C&&(v.C=Ro(g(v.Za,v),6e3));if(1>=Cv(v.h)&&v.ca){try{v.ca()}catch{}v.ca=void 0}}else vs(v,11)}else if((c.K||v.g==c)&&Dl(v),!y(f))for(V=v.Da.g.parse(f),f=0;f<V.length;f++){let Ce=V[f];if(v.T=Ce[0],Ce=Ce[1],v.G==2)if(Ce[0]=="c"){v.K=Ce[1],v.ia=Ce[2];const vt=Ce[3];vt!=null&&(v.la=vt,v.j.info("VER="+v.la));const yt=Ce[4];yt!=null&&(v.Aa=yt,v.j.info("SVER="+v.Aa));const oi=Ce[5];oi!=null&&typeof oi=="number"&&0<oi&&(N=1.5*oi,v.L=N,v.j.info("backChannelRequestTimeoutMs_="+N)),N=v;const pn=c.g;if(pn){const Ol=pn.g?pn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Ol){var F=N.h;F.g||Ol.indexOf("spdy")==-1&&Ol.indexOf("quic")==-1&&Ol.indexOf("h2")==-1||(F.j=F.l,F.g=new Set,F.h&&(Jd(F,F.h),F.h=null))}if(N.D){const rh=pn.g?pn.g.getResponseHeader("X-HTTP-Session-Id"):null;rh&&(N.ya=rh,je(N.I,N.D,rh))}}v.G=3,v.l&&v.l.ua(),v.ba&&(v.R=Date.now()-c.F,v.j.info("Handshake RTT: "+v.R+"ms")),N=v;var X=c;if(N.qa=Jv(N,N.J?N.ia:null,N.W),X.K){Nv(N.h,X);var ke=X,ct=N.L;ct&&(ke.I=ct),ke.B&&(Qd(ke),bl(ke)),N.g=X}else Kv(N);0<v.i.length&&jl(v)}else Ce[0]!="stop"&&Ce[0]!="close"||vs(v,7);else v.G==3&&(Ce[0]=="stop"||Ce[0]=="close"?Ce[0]=="stop"?vs(v,7):eh(v):Ce[0]!="noop"&&v.l&&v.l.ta(Ce),v.v=0)}}Io(4)}catch{}}var qC=class{constructor(c,f){this.g=c,this.map=f}};function Sv(c){this.l=c||10,a.PerformanceNavigationTiming?(c=a.performance.getEntriesByType("navigation"),c=0<c.length&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function bv(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function Cv(c){return c.h?1:c.g?c.g.size:0}function Xd(c,f){return c.h?c.h==f:c.g?c.g.has(f):!1}function Jd(c,f){c.g?c.g.add(f):c.h=f}function Nv(c,f){c.h&&c.h==f?c.h=null:c.g&&c.g.has(f)&&c.g.delete(f)}Sv.prototype.cancel=function(){if(this.i=Iv(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const c of this.g.values())c.cancel();this.g.clear()}};function Iv(c){if(c.h!=null)return c.i.concat(c.h.D);if(c.g!=null&&c.g.size!==0){let f=c.i;for(const v of c.g.values())f=f.concat(v.D);return f}return x(c.i)}function KC(c){if(c.V&&typeof c.V=="function")return c.V();if(typeof Map<"u"&&c instanceof Map||typeof Set<"u"&&c instanceof Set)return Array.from(c.values());if(typeof c=="string")return c.split("");if(u(c)){for(var f=[],v=c.length,N=0;N<v;N++)f.push(c[N]);return f}f=[],v=0;for(N in c)f[v++]=c[N];return f}function GC(c){if(c.na&&typeof c.na=="function")return c.na();if(!c.V||typeof c.V!="function"){if(typeof Map<"u"&&c instanceof Map)return Array.from(c.keys());if(!(typeof Set<"u"&&c instanceof Set)){if(u(c)||typeof c=="string"){var f=[];c=c.length;for(var v=0;v<c;v++)f.push(v);return f}f=[],v=0;for(const N in c)f[v++]=N;return f}}}function Rv(c,f){if(c.forEach&&typeof c.forEach=="function")c.forEach(f,void 0);else if(u(c)||typeof c=="string")Array.prototype.forEach.call(c,f,void 0);else for(var v=GC(c),N=KC(c),V=N.length,F=0;F<V;F++)f.call(void 0,N[F],v&&v[F],c)}var Av=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function QC(c,f){if(c){c=c.split("&");for(var v=0;v<c.length;v++){var N=c[v].indexOf("="),V=null;if(0<=N){var F=c[v].substring(0,N);V=c[v].substring(N+1)}else F=c[v];f(F,V?decodeURIComponent(V.replace(/\+/g," ")):"")}}}function gs(c){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,c instanceof gs){this.h=c.h,Cl(this,c.j),this.o=c.o,this.g=c.g,Nl(this,c.s),this.l=c.l;var f=c.i,v=new Do;v.i=f.i,f.g&&(v.g=new Map(f.g),v.h=f.h),kv(this,v),this.m=c.m}else c&&(f=String(c).match(Av))?(this.h=!1,Cl(this,f[1]||"",!0),this.o=Po(f[2]||""),this.g=Po(f[3]||"",!0),Nl(this,f[4]),this.l=Po(f[5]||"",!0),kv(this,f[6]||"",!0),this.m=Po(f[7]||"")):(this.h=!1,this.i=new Do(null,this.h))}gs.prototype.toString=function(){var c=[],f=this.j;f&&c.push(jo(f,Pv,!0),":");var v=this.g;return(v||f=="file")&&(c.push("//"),(f=this.o)&&c.push(jo(f,Pv,!0),"@"),c.push(encodeURIComponent(String(v)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),v=this.s,v!=null&&c.push(":",String(v))),(v=this.l)&&(this.g&&v.charAt(0)!="/"&&c.push("/"),c.push(jo(v,v.charAt(0)=="/"?JC:XC,!0))),(v=this.i.toString())&&c.push("?",v),(v=this.m)&&c.push("#",jo(v,eN)),c.join("")};function Kn(c){return new gs(c)}function Cl(c,f,v){c.j=v?Po(f,!0):f,c.j&&(c.j=c.j.replace(/:$/,""))}function Nl(c,f){if(f){if(f=Number(f),isNaN(f)||0>f)throw Error("Bad port number "+f);c.s=f}else c.s=null}function kv(c,f,v){f instanceof Do?(c.i=f,tN(c.i,c.h)):(v||(f=jo(f,ZC)),c.i=new Do(f,c.h))}function je(c,f,v){c.i.set(f,v)}function Il(c){return je(c,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),c}function Po(c,f){return c?f?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function jo(c,f,v){return typeof c=="string"?(c=encodeURI(c).replace(f,YC),v&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function YC(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var Pv=/[#\/\?@]/g,XC=/[#\?:]/g,JC=/[#\?]/g,ZC=/[#\?@]/g,eN=/#/g;function Do(c,f){this.h=this.g=null,this.i=c||null,this.j=!!f}function xr(c){c.g||(c.g=new Map,c.h=0,c.i&&QC(c.i,function(f,v){c.add(decodeURIComponent(f.replace(/\+/g," ")),v)}))}t=Do.prototype,t.add=function(c,f){xr(this),this.i=null,c=si(this,c);var v=this.g.get(c);return v||this.g.set(c,v=[]),v.push(f),this.h+=1,this};function jv(c,f){xr(c),f=si(c,f),c.g.has(f)&&(c.i=null,c.h-=c.g.get(f).length,c.g.delete(f))}function Dv(c,f){return xr(c),f=si(c,f),c.g.has(f)}t.forEach=function(c,f){xr(this),this.g.forEach(function(v,N){v.forEach(function(V){c.call(f,V,N,this)},this)},this)},t.na=function(){xr(this);const c=Array.from(this.g.values()),f=Array.from(this.g.keys()),v=[];for(let N=0;N<f.length;N++){const V=c[N];for(let F=0;F<V.length;F++)v.push(f[N])}return v},t.V=function(c){xr(this);let f=[];if(typeof c=="string")Dv(this,c)&&(f=f.concat(this.g.get(si(this,c))));else{c=Array.from(this.g.values());for(let v=0;v<c.length;v++)f=f.concat(c[v])}return f},t.set=function(c,f){return xr(this),this.i=null,c=si(this,c),Dv(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[f]),this.h+=1,this},t.get=function(c,f){return c?(c=this.V(c),0<c.length?String(c[0]):f):f};function Mv(c,f,v){jv(c,f),0<v.length&&(c.i=null,c.g.set(si(c,f),x(v)),c.h+=v.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const c=[],f=Array.from(this.g.keys());for(var v=0;v<f.length;v++){var N=f[v];const F=encodeURIComponent(String(N)),X=this.V(N);for(N=0;N<X.length;N++){var V=F;X[N]!==""&&(V+="="+encodeURIComponent(String(X[N]))),c.push(V)}}return this.i=c.join("&")};function si(c,f){return f=String(f),c.j&&(f=f.toLowerCase()),f}function tN(c,f){f&&!c.j&&(xr(c),c.i=null,c.g.forEach(function(v,N){var V=N.toLowerCase();N!=V&&(jv(this,N),Mv(this,V,v))},c)),c.j=f}function nN(c,f){const v=new Ao;if(a.Image){const N=new Image;N.onload=w(wr,v,"TestLoadImage: loaded",!0,f,N),N.onerror=w(wr,v,"TestLoadImage: error",!1,f,N),N.onabort=w(wr,v,"TestLoadImage: abort",!1,f,N),N.ontimeout=w(wr,v,"TestLoadImage: timeout",!1,f,N),a.setTimeout(function(){N.ontimeout&&N.ontimeout()},1e4),N.src=c}else f(!1)}function rN(c,f){const v=new Ao,N=new AbortController,V=setTimeout(()=>{N.abort(),wr(v,"TestPingServer: timeout",!1,f)},1e4);fetch(c,{signal:N.signal}).then(F=>{clearTimeout(V),F.ok?wr(v,"TestPingServer: ok",!0,f):wr(v,"TestPingServer: server error",!1,f)}).catch(()=>{clearTimeout(V),wr(v,"TestPingServer: error",!1,f)})}function wr(c,f,v,N,V){try{V&&(V.onload=null,V.onerror=null,V.onabort=null,V.ontimeout=null),N(v)}catch{}}function sN(){this.g=new zC}function iN(c,f,v){const N=v||"";try{Rv(c,function(V,F){let X=V;d(V)&&(X=$d(V)),f.push(N+F+"="+encodeURIComponent(X))})}catch(V){throw f.push(N+"type="+encodeURIComponent("_badmap")),V}}function Rl(c){this.l=c.Ub||null,this.j=c.eb||!1}C(Rl,Bd),Rl.prototype.g=function(){return new Al(this.l,this.j)},Rl.prototype.i=function(c){return function(){return c}}({});function Al(c,f){gt.call(this),this.D=c,this.o=f,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}C(Al,gt),t=Al.prototype,t.open=function(c,f){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=c,this.A=f,this.readyState=1,Oo(this)},t.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const f={headers:this.u,method:this.B,credentials:this.m,cache:void 0};c&&(f.body=c),(this.D||a).fetch(new Request(this.A,f)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Mo(this)),this.readyState=0},t.Sa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,Oo(this)),this.g&&(this.readyState=3,Oo(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Ov(this)}else c.text().then(this.Ra.bind(this),this.ga.bind(this))};function Ov(c){c.j.read().then(c.Pa.bind(c)).catch(c.ga.bind(c))}t.Pa=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var f=c.value?c.value:new Uint8Array(0);(f=this.v.decode(f,{stream:!c.done}))&&(this.response=this.responseText+=f)}c.done?Mo(this):Oo(this),this.readyState==3&&Ov(this)}},t.Ra=function(c){this.g&&(this.response=this.responseText=c,Mo(this))},t.Qa=function(c){this.g&&(this.response=c,Mo(this))},t.ga=function(){this.g&&Mo(this)};function Mo(c){c.readyState=4,c.l=null,c.j=null,c.v=null,Oo(c)}t.setRequestHeader=function(c,f){this.u.append(c,f)},t.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const c=[],f=this.h.entries();for(var v=f.next();!v.done;)v=v.value,c.push(v[0]+": "+v[1]),v=f.next();return c.join(`\r
`)};function Oo(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty(Al.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function Vv(c){let f="";return D(c,function(v,N){f+=N,f+=":",f+=v,f+=`\r
`}),f}function Zd(c,f,v){e:{for(N in v){var N=!1;break e}N=!0}N||(v=Vv(v),typeof c=="string"?v!=null&&encodeURIComponent(String(v)):je(c,f,v))}function qe(c){gt.call(this),this.headers=new Map,this.o=c||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}C(qe,gt);var oN=/^https?$/i,aN=["POST","PUT"];t=qe.prototype,t.Ha=function(c){this.J=c},t.ea=function(c,f,v,N){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);f=f?f.toUpperCase():"GET",this.D=c,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():qd.g(),this.v=this.o?hv(this.o):hv(qd),this.g.onreadystatechange=g(this.Ea,this);try{this.B=!0,this.g.open(f,String(c),!0),this.B=!1}catch(F){Lv(this,F);return}if(c=v||"",v=new Map(this.headers),N)if(Object.getPrototypeOf(N)===Object.prototype)for(var V in N)v.set(V,N[V]);else if(typeof N.keys=="function"&&typeof N.get=="function")for(const F of N.keys())v.set(F,N.get(F));else throw Error("Unknown input type for opt_headers: "+String(N));N=Array.from(v.keys()).find(F=>F.toLowerCase()=="content-type"),V=a.FormData&&c instanceof a.FormData,!(0<=Array.prototype.indexOf.call(aN,f,void 0))||N||V||v.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[F,X]of v)this.g.setRequestHeader(F,X);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Uv(this),this.u=!0,this.g.send(c),this.u=!1}catch(F){Lv(this,F)}};function Lv(c,f){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=f,c.m=5,Fv(c),kl(c)}function Fv(c){c.A||(c.A=!0,Nt(c,"complete"),Nt(c,"error"))}t.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=c||7,Nt(this,"complete"),Nt(this,"abort"),kl(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),kl(this,!0)),qe.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?zv(this):this.bb())},t.bb=function(){zv(this)};function zv(c){if(c.h&&typeof o<"u"&&(!c.v[1]||Gn(c)!=4||c.Z()!=2)){if(c.u&&Gn(c)==4)lv(c.Ea,0,c);else if(Nt(c,"readystatechange"),Gn(c)==4){c.h=!1;try{const X=c.Z();e:switch(X){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var f=!0;break e;default:f=!1}var v;if(!(v=f)){var N;if(N=X===0){var V=String(c.D).match(Av)[1]||null;!V&&a.self&&a.self.location&&(V=a.self.location.protocol.slice(0,-1)),N=!oN.test(V?V.toLowerCase():"")}v=N}if(v)Nt(c,"complete"),Nt(c,"success");else{c.m=6;try{var F=2<Gn(c)?c.g.statusText:""}catch{F=""}c.l=F+" ["+c.Z()+"]",Fv(c)}}finally{kl(c)}}}}function kl(c,f){if(c.g){Uv(c);const v=c.g,N=c.v[0]?()=>{}:null;c.g=null,c.v=null,f||Nt(c,"ready");try{v.onreadystatechange=N}catch{}}}function Uv(c){c.I&&(a.clearTimeout(c.I),c.I=null)}t.isActive=function(){return!!this.g};function Gn(c){return c.g?c.g.readyState:0}t.Z=function(){try{return 2<Gn(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(c){if(this.g){var f=this.g.responseText;return c&&f.indexOf(c)==0&&(f=f.substring(c.length)),FC(f)}};function $v(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.H){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function lN(c){const f={};c=(c.g&&2<=Gn(c)&&c.g.getAllResponseHeaders()||"").split(`\r
`);for(let N=0;N<c.length;N++){if(y(c[N]))continue;var v=P(c[N]);const V=v[0];if(v=v[1],typeof v!="string")continue;v=v.trim();const F=f[V]||[];f[V]=F,F.push(v)}b(f,function(N){return N.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Vo(c,f,v){return v&&v.internalChannelParams&&v.internalChannelParams[c]||f}function Bv(c){this.Aa=0,this.i=[],this.j=new Ao,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Vo("failFast",!1,c),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Vo("baseRetryDelayMs",5e3,c),this.cb=Vo("retryDelaySeedMs",1e4,c),this.Wa=Vo("forwardChannelMaxRetries",2,c),this.wa=Vo("forwardChannelRequestTimeoutMs",2e4,c),this.pa=c&&c.xmlHttpFactory||void 0,this.Xa=c&&c.Tb||void 0,this.Ca=c&&c.useFetchStreams||!1,this.L=void 0,this.J=c&&c.supportsCrossDomainXhr||!1,this.K="",this.h=new Sv(c&&c.concurrentRequestLimit),this.Da=new sN,this.P=c&&c.fastHandshake||!1,this.O=c&&c.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=c&&c.Rb||!1,c&&c.xa&&this.j.xa(),c&&c.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&c&&c.detectBufferingProxy||!1,this.ja=void 0,c&&c.longPollingTimeout&&0<c.longPollingTimeout&&(this.ja=c.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=Bv.prototype,t.la=8,t.G=1,t.connect=function(c,f,v,N){It(0),this.W=c,this.H=f||{},v&&N!==void 0&&(this.H.OSID=v,this.H.OAID=N),this.F=this.X,this.I=Jv(this,null,this.W),jl(this)};function eh(c){if(Hv(c),c.G==3){var f=c.U++,v=Kn(c.I);if(je(v,"SID",c.K),je(v,"RID",f),je(v,"TYPE","terminate"),Lo(c,v),f=new yr(c,c.j,f),f.L=2,f.v=Il(Kn(v)),v=!1,a.navigator&&a.navigator.sendBeacon)try{v=a.navigator.sendBeacon(f.v.toString(),"")}catch{}!v&&a.Image&&(new Image().src=f.v,v=!0),v||(f.g=Zv(f.j,null),f.g.ea(f.v)),f.F=Date.now(),bl(f)}Xv(c)}function Pl(c){c.g&&(nh(c),c.g.cancel(),c.g=null)}function Hv(c){Pl(c),c.u&&(a.clearTimeout(c.u),c.u=null),Dl(c),c.h.cancel(),c.s&&(typeof c.s=="number"&&a.clearTimeout(c.s),c.s=null)}function jl(c){if(!bv(c.h)&&!c.s){c.s=!0;var f=c.Ga;z||Z(),O||(z(),O=!0),$.add(f,c),c.B=0}}function cN(c,f){return Cv(c.h)>=c.h.j-(c.s?1:0)?!1:c.s?(c.i=f.D.concat(c.i),!0):c.G==1||c.G==2||c.B>=(c.Va?0:c.Wa)?!1:(c.s=Ro(g(c.Ga,c,f),Yv(c,c.B)),c.B++,!0)}t.Ga=function(c){if(this.s)if(this.s=null,this.G==1){if(!c){this.U=Math.floor(1e5*Math.random()),c=this.U++;const V=new yr(this,this.j,c);let F=this.o;if(this.S&&(F?(F=S(F),R(F,this.S)):F=this.S),this.m!==null||this.O||(V.H=F,F=null),this.P)e:{for(var f=0,v=0;v<this.i.length;v++){t:{var N=this.i[v];if("__data__"in N.map&&(N=N.map.__data__,typeof N=="string")){N=N.length;break t}N=void 0}if(N===void 0)break;if(f+=N,4096<f){f=v;break e}if(f===4096||v===this.i.length-1){f=v+1;break e}}f=1e3}else f=1e3;f=qv(this,V,f),v=Kn(this.I),je(v,"RID",c),je(v,"CVER",22),this.D&&je(v,"X-HTTP-Session-Id",this.D),Lo(this,v),F&&(this.O?f="headers="+encodeURIComponent(String(Vv(F)))+"&"+f:this.m&&Zd(v,this.m,F)),Jd(this.h,V),this.Ua&&je(v,"TYPE","init"),this.P?(je(v,"$req",f),je(v,"SID","null"),V.T=!0,Gd(V,v,null)):Gd(V,v,f),this.G=2}}else this.G==3&&(c?Wv(this,c):this.i.length==0||bv(this.h)||Wv(this))};function Wv(c,f){var v;f?v=f.l:v=c.U++;const N=Kn(c.I);je(N,"SID",c.K),je(N,"RID",v),je(N,"AID",c.T),Lo(c,N),c.m&&c.o&&Zd(N,c.m,c.o),v=new yr(c,c.j,v,c.B+1),c.m===null&&(v.H=c.o),f&&(c.i=f.D.concat(c.i)),f=qv(c,v,1e3),v.I=Math.round(.5*c.wa)+Math.round(.5*c.wa*Math.random()),Jd(c.h,v),Gd(v,N,f)}function Lo(c,f){c.H&&D(c.H,function(v,N){je(f,N,v)}),c.l&&Rv({},function(v,N){je(f,N,v)})}function qv(c,f,v){v=Math.min(c.i.length,v);var N=c.l?g(c.l.Na,c.l,c):null;e:{var V=c.i;let F=-1;for(;;){const X=["count="+v];F==-1?0<v?(F=V[0].g,X.push("ofs="+F)):F=0:X.push("ofs="+F);let ke=!0;for(let ct=0;ct<v;ct++){let Ce=V[ct].g;const vt=V[ct].map;if(Ce-=F,0>Ce)F=Math.max(0,V[ct].g-100),ke=!1;else try{iN(vt,X,"req"+Ce+"_")}catch{N&&N(vt)}}if(ke){N=X.join("&");break e}}}return c=c.i.splice(0,v),f.D=c,N}function Kv(c){if(!c.g&&!c.u){c.Y=1;var f=c.Fa;z||Z(),O||(z(),O=!0),$.add(f,c),c.v=0}}function th(c){return c.g||c.u||3<=c.v?!1:(c.Y++,c.u=Ro(g(c.Fa,c),Yv(c,c.v)),c.v++,!0)}t.Fa=function(){if(this.u=null,Gv(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var c=2*this.R;this.j.info("BP detection timer enabled: "+c),this.A=Ro(g(this.ab,this),c)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,It(10),Pl(this),Gv(this))};function nh(c){c.A!=null&&(a.clearTimeout(c.A),c.A=null)}function Gv(c){c.g=new yr(c,c.j,"rpc",c.Y),c.m===null&&(c.g.H=c.o),c.g.O=0;var f=Kn(c.qa);je(f,"RID","rpc"),je(f,"SID",c.K),je(f,"AID",c.T),je(f,"CI",c.F?"0":"1"),!c.F&&c.ja&&je(f,"TO",c.ja),je(f,"TYPE","xmlhttp"),Lo(c,f),c.m&&c.o&&Zd(f,c.m,c.o),c.L&&(c.g.I=c.L);var v=c.g;c=c.ia,v.L=1,v.v=Il(Kn(f)),v.m=null,v.P=!0,_v(v,c)}t.Za=function(){this.C!=null&&(this.C=null,Pl(this),th(this),It(19))};function Dl(c){c.C!=null&&(a.clearTimeout(c.C),c.C=null)}function Qv(c,f){var v=null;if(c.g==f){Dl(c),nh(c),c.g=null;var N=2}else if(Xd(c.h,f))v=f.D,Nv(c.h,f),N=1;else return;if(c.G!=0){if(f.o)if(N==1){v=f.m?f.m.length:0,f=Date.now()-f.F;var V=c.B;N=El(),Nt(N,new vv(N,v)),jl(c)}else Kv(c);else if(V=f.s,V==3||V==0&&0<f.X||!(N==1&&cN(c,f)||N==2&&th(c)))switch(v&&0<v.length&&(f=c.h,f.i=f.i.concat(v)),V){case 1:vs(c,5);break;case 4:vs(c,10);break;case 3:vs(c,6);break;default:vs(c,2)}}}function Yv(c,f){let v=c.Ta+Math.floor(Math.random()*c.cb);return c.isActive()||(v*=2),v*f}function vs(c,f){if(c.j.info("Error code "+f),f==2){var v=g(c.fb,c),N=c.Xa;const V=!N;N=new gs(N||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||Cl(N,"https"),Il(N),V?nN(N.toString(),v):rN(N.toString(),v)}else It(2);c.G=0,c.l&&c.l.sa(f),Xv(c),Hv(c)}t.fb=function(c){c?(this.j.info("Successfully pinged google.com"),It(2)):(this.j.info("Failed to ping google.com"),It(1))};function Xv(c){if(c.G=0,c.ka=[],c.l){const f=Iv(c.h);(f.length!=0||c.i.length!=0)&&(T(c.ka,f),T(c.ka,c.i),c.h.i.length=0,x(c.i),c.i.length=0),c.l.ra()}}function Jv(c,f,v){var N=v instanceof gs?Kn(v):new gs(v);if(N.g!="")f&&(N.g=f+"."+N.g),Nl(N,N.s);else{var V=a.location;N=V.protocol,f=f?f+"."+V.hostname:V.hostname,V=+V.port;var F=new gs(null);N&&Cl(F,N),f&&(F.g=f),V&&Nl(F,V),v&&(F.l=v),N=F}return v=c.D,f=c.ya,v&&f&&je(N,v,f),je(N,"VER",c.la),Lo(c,N),N}function Zv(c,f,v){if(f&&!c.J)throw Error("Can't create secondary domain capable XhrIo object.");return f=c.Ca&&!c.pa?new qe(new Rl({eb:v})):new qe(c.pa),f.Ha(c.J),f}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function ey(){}t=ey.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Ml(){}Ml.prototype.g=function(c,f){return new qt(c,f)};function qt(c,f){gt.call(this),this.g=new Bv(f),this.l=c,this.h=f&&f.messageUrlParams||null,c=f&&f.messageHeaders||null,f&&f.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=f&&f.initMessageHeaders||null,f&&f.messageContentType&&(c?c["X-WebChannel-Content-Type"]=f.messageContentType:c={"X-WebChannel-Content-Type":f.messageContentType}),f&&f.va&&(c?c["X-WebChannel-Client-Profile"]=f.va:c={"X-WebChannel-Client-Profile":f.va}),this.g.S=c,(c=f&&f.Sb)&&!y(c)&&(this.g.m=c),this.v=f&&f.supportsCrossDomainXhr||!1,this.u=f&&f.sendRawJson||!1,(f=f&&f.httpSessionIdParam)&&!y(f)&&(this.g.D=f,c=this.h,c!==null&&f in c&&(c=this.h,f in c&&delete c[f])),this.j=new ii(this)}C(qt,gt),qt.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},qt.prototype.close=function(){eh(this.g)},qt.prototype.o=function(c){var f=this.g;if(typeof c=="string"){var v={};v.__data__=c,c=v}else this.u&&(v={},v.__data__=$d(c),c=v);f.i.push(new qC(f.Ya++,c)),f.G==3&&jl(f)},qt.prototype.N=function(){this.g.l=null,delete this.j,eh(this.g),delete this.g,qt.aa.N.call(this)};function ty(c){Hd.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var f=c.__sm__;if(f){e:{for(const v in f){c=v;break e}c=void 0}(this.i=c)&&(c=this.i,f=f!==null&&c in f?f[c]:void 0),this.data=f}else this.data=c}C(ty,Hd);function ny(){Wd.call(this),this.status=1}C(ny,Wd);function ii(c){this.g=c}C(ii,ey),ii.prototype.ua=function(){Nt(this.g,"a")},ii.prototype.ta=function(c){Nt(this.g,new ty(c))},ii.prototype.sa=function(c){Nt(this.g,new ny)},ii.prototype.ra=function(){Nt(this.g,"b")},Ml.prototype.createWebChannel=Ml.prototype.g,qt.prototype.send=qt.prototype.o,qt.prototype.open=qt.prototype.m,qt.prototype.close=qt.prototype.close,IS=function(){return new Ml},NS=function(){return El()},CS=ps,wp={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Tl.NO_ERROR=0,Tl.TIMEOUT=8,Tl.HTTP_ERROR=6,Rc=Tl,yv.COMPLETE="complete",bS=yv,fv.EventType=No,No.OPEN="a",No.CLOSE="b",No.ERROR="c",No.MESSAGE="d",gt.prototype.listen=gt.prototype.K,ta=fv,qe.prototype.listenOnce=qe.prototype.L,qe.prototype.getLastError=qe.prototype.Ka,qe.prototype.getLastErrorCode=qe.prototype.Ba,qe.prototype.getStatus=qe.prototype.Z,qe.prototype.getResponseJson=qe.prototype.Oa,qe.prototype.getResponseText=qe.prototype.oa,qe.prototype.send=qe.prototype.ea,qe.prototype.setWithCredentials=qe.prototype.Ha,SS=qe}).apply(typeof ac<"u"?ac:typeof self<"u"?self:typeof window<"u"?window:{});const c0="@firebase/firestore",u0="4.7.17";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Et{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Et.UNAUTHENTICATED=new Et(null),Et.GOOGLE_CREDENTIALS=new Et("google-credentials-uid"),Et.FIRST_PARTY=new Et("first-party-uid"),Et.MOCK_USER=new Et("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let _o="11.9.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gs=new yS("@firebase/firestore");function di(){return Gs.logLevel}function te(t,...e){if(Gs.logLevel<=Ee.DEBUG){const n=e.map(pg);Gs.debug(`Firestore (${_o}): ${t}`,...n)}}function dr(t,...e){if(Gs.logLevel<=Ee.ERROR){const n=e.map(pg);Gs.error(`Firestore (${_o}): ${t}`,...n)}}function to(t,...e){if(Gs.logLevel<=Ee.WARN){const n=e.map(pg);Gs.warn(`Firestore (${_o}): ${t}`,...n)}}function pg(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ae(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,RS(t,r,n)}function RS(t,e,n){let r=`FIRESTORE (${_o}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw dr(r),new Error(r)}function Ie(t,e,n,r){let s="Unexpected state";typeof n=="string"?s=n:r=n,t||RS(e,s,r)}function fe(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ne extends wo{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rr{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AS{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class AM{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Et.UNAUTHENTICATED))}shutdown(){}}class kM{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class PM{constructor(e){this.t=e,this.currentUser=Et.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Ie(this.o===void 0,42304);let r=this.i;const s=u=>this.i!==r?(r=this.i,n(u)):Promise.resolve();let i=new rr;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new rr,e.enqueueRetryable(()=>s(this.currentUser))};const o=()=>{const u=i;e.enqueueRetryable(async()=>{await u.promise,await s(this.currentUser)})},a=u=>{te("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(u=>a(u)),setTimeout(()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?a(u):(te("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new rr)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(te("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Ie(typeof r.accessToken=="string",31837,{l:r}),new AS(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Ie(e===null||typeof e=="string",2055,{h:e}),new Et(e)}}class jM{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=Et.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class DM{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new jM(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(Et.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class d0{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class MM{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,hM(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){Ie(this.o===void 0,3512);const r=i=>{i.error!=null&&te("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const o=i.token!==this.m;return this.m=i.token,te("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>r(i))};const s=i=>{te("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(i=>s(i)),setTimeout(()=>{if(!this.appCheck){const i=this.V.getImmediate({optional:!0});i?s(i):te("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new d0(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Ie(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new d0(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OM(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kS(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PS{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const s=OM(40);for(let i=0;i<s.length;++i)r.length<20&&s[i]<n&&(r+=e.charAt(s[i]%62))}return r}}function ge(t,e){return t<e?-1:t>e?1:0}function _p(t,e){let n=0;for(;n<t.length&&n<e.length;){const r=t.codePointAt(n),s=e.codePointAt(n);if(r!==s){if(r<128&&s<128)return ge(r,s);{const i=kS(),o=VM(i.encode(h0(t,n)),i.encode(h0(e,n)));return o!==0?o:ge(r,s)}}n+=r>65535?2:1}return ge(t.length,e.length)}function h0(t,e){return t.codePointAt(e)>65535?t.substring(e,e+2):t.substring(e,e+1)}function VM(t,e){for(let n=0;n<t.length&&n<e.length;++n)if(t[n]!==e[n])return ge(t[n],e[n]);return ge(t.length,e.length)}function no(t,e,n){return t.length===e.length&&t.every((r,s)=>n(r,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f0=-62135596800,p0=1e6;class Ge{static now(){return Ge.fromMillis(Date.now())}static fromDate(e){return Ge.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*p0);return new Ge(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new ne(H.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new ne(H.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<f0)throw new ne(H.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ne(H.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/p0}_compareTo(e){return this.seconds===e.seconds?ge(this.nanoseconds,e.nanoseconds):ge(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds-f0;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class he{static fromTimestamp(e){return new he(e)}static min(){return new he(new Ge(0,0))}static max(){return new he(new Ge(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const m0="__name__";class kn{constructor(e,n,r){n===void 0?n=0:n>e.length&&ae(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&ae(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return kn.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof kn?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let s=0;s<r;s++){const i=kn.compareSegments(e.get(s),n.get(s));if(i!==0)return i}return ge(e.length,n.length)}static compareSegments(e,n){const r=kn.isNumericId(e),s=kn.isNumericId(n);return r&&!s?-1:!r&&s?1:r&&s?kn.extractNumericId(e).compare(kn.extractNumericId(n)):_p(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Hr.fromString(e.substring(4,e.length-2))}}class Oe extends kn{construct(e,n,r){return new Oe(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new ne(H.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(s=>s.length>0))}return new Oe(n)}static emptyPath(){return new Oe([])}}const LM=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class ht extends kn{construct(e,n,r){return new ht(e,n,r)}static isValidIdentifier(e){return LM.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),ht.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===m0}static keyField(){return new ht([m0])}static fromServerFormat(e){const n=[];let r="",s=0;const i=()=>{if(r.length===0)throw new ne(H.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;s<e.length;){const a=e[s];if(a==="\\"){if(s+1===e.length)throw new ne(H.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const u=e[s+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new ne(H.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,s+=2}else a==="`"?(o=!o,s++):a!=="."||o?(r+=a,s++):(i(),s++)}if(i(),o)throw new ne(H.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new ht(n)}static emptyPath(){return new ht([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ie{constructor(e){this.path=e}static fromPath(e){return new ie(Oe.fromString(e))}static fromName(e){return new ie(Oe.fromString(e).popFirst(5))}static empty(){return new ie(Oe.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Oe.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Oe.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ie(new Oe(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wa=-1;function FM(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,s=he.fromTimestamp(r===1e9?new Ge(n+1,0):new Ge(n,r));return new Yr(s,ie.empty(),e)}function zM(t){return new Yr(t.readTime,t.key,Wa)}class Yr{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Yr(he.min(),ie.empty(),Wa)}static max(){return new Yr(he.max(),ie.empty(),Wa)}}function UM(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=ie.comparator(t.documentKey,e.documentKey),n!==0?n:ge(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $M="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class BM{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Eo(t){if(t.code!==H.FAILED_PRECONDITION||t.message!==$M)throw t;te("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&ae(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new q((r,s)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(r,s)},this.catchCallback=i=>{this.wrapFailure(n,i).next(r,s)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof q?n:q.resolve(n)}catch(n){return q.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):q.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):q.reject(n)}static resolve(e){return new q((n,r)=>{n(e)})}static reject(e){return new q((n,r)=>{r(e)})}static waitFor(e){return new q((n,r)=>{let s=0,i=0,o=!1;e.forEach(a=>{++s,a.next(()=>{++i,o&&i===s&&n()},u=>r(u))}),o=!0,i===s&&n()})}static or(e){let n=q.resolve(!1);for(const r of e)n=n.next(s=>s?q.resolve(s):r());return n}static forEach(e,n){const r=[];return e.forEach((s,i)=>{r.push(n.call(this,s,i))}),this.waitFor(r)}static mapArray(e,n){return new q((r,s)=>{const i=e.length,o=new Array(i);let a=0;for(let u=0;u<i;u++){const d=u;n(e[d]).next(h=>{o[d]=h,++a,a===i&&r(o)},h=>s(h))}})}static doWhile(e,n){return new q((r,s)=>{const i=()=>{e()===!0?n().next(()=>{i()},s):r()};i()})}}function HM(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function To(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hd{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ue(r),this.ce=r=>n.writeSequenceNumber(r))}ue(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ce&&this.ce(e),e}}hd.le=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mg=-1;function fd(t){return t==null}function mu(t){return t===0&&1/t==-1/0}function WM(t){return typeof t=="number"&&Number.isInteger(t)&&!mu(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jS="";function qM(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=g0(e)),e=KM(t.get(n),e);return g0(e)}function KM(t,e){let n=e;const r=t.length;for(let s=0;s<r;s++){const i=t.charAt(s);switch(i){case"\0":n+="";break;case jS:n+="";break;default:n+=i}}return n}function g0(t){return t+jS+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function v0(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function cs(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function DS(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class We{constructor(e,n){this.comparator=e,this.root=n||dt.EMPTY}insert(e,n){return new We(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,dt.BLACK,null,null))}remove(e){return new We(this.comparator,this.root.remove(e,this.comparator).copy(null,null,dt.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new lc(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new lc(this.root,e,this.comparator,!1)}getReverseIterator(){return new lc(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new lc(this.root,e,this.comparator,!0)}}class lc{constructor(e,n,r,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=n?r(e.key,n):1,n&&s&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class dt{constructor(e,n,r,s,i){this.key=e,this.value=n,this.color=r??dt.RED,this.left=s??dt.EMPTY,this.right=i??dt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,s,i){return new dt(e??this.key,n??this.value,r??this.color,s??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const i=r(e,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(e,n,r),null):i===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return dt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return dt.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,dt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,dt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw ae(43730,{key:this.key,value:this.value});if(this.right.isRed())throw ae(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw ae(27949);return e+(this.isRed()?0:1)}}dt.EMPTY=null,dt.RED=!0,dt.BLACK=!1;dt.EMPTY=new class{constructor(){this.size=0}get key(){throw ae(57766)}get value(){throw ae(16141)}get color(){throw ae(16727)}get left(){throw ae(29726)}get right(){throw ae(36894)}copy(e,n,r,s,i){return this}insert(e,n,r){return new dt(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rt{constructor(e){this.comparator=e,this.data=new We(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new y0(this.data.getIterator())}getIteratorFrom(e){return new y0(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof rt)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(this.comparator(s,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new rt(this.comparator);return n.data=e,n}}class y0{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zt{constructor(e){this.fields=e,e.sort(ht.comparator)}static empty(){return new Zt([])}unionWith(e){let n=new rt(ht.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new Zt(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return no(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MS extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(s){try{return atob(s)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new MS("Invalid base64 string: "+i):i}}(e);return new mt(n)}static fromUint8Array(e){const n=function(s){let i="";for(let o=0;o<s.length;++o)i+=String.fromCharCode(s[o]);return i}(e);return new mt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ge(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}mt.EMPTY_BYTE_STRING=new mt("");const GM=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Xr(t){if(Ie(!!t,39018),typeof t=="string"){let e=0;const n=GM.exec(t);if(Ie(!!n,46558,{timestamp:t}),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Qe(t.seconds),nanos:Qe(t.nanos)}}function Qe(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Jr(t){return typeof t=="string"?mt.fromBase64String(t):mt.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OS="server_timestamp",VS="__type__",LS="__previous_value__",FS="__local_write_time__";function gg(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{})[VS])===null||n===void 0?void 0:n.stringValue)===OS}function pd(t){const e=t.mapValue.fields[LS];return gg(e)?pd(e):e}function qa(t){const e=Xr(t.mapValue.fields[FS].timestampValue);return new Ge(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QM{constructor(e,n,r,s,i,o,a,u,d,h){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=u,this.useFetchStreams=d,this.isUsingEmulator=h}}const gu="(default)";class Ka{constructor(e,n){this.projectId=e,this.database=n||gu}static empty(){return new Ka("","")}get isDefaultDatabase(){return this.database===gu}isEqual(e){return e instanceof Ka&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zS="__type__",YM="__max__",cc={mapValue:{}},US="__vector__",vu="value";function Zr(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?gg(t)?4:JM(t)?9007199254740991:XM(t)?10:11:ae(28295,{value:t})}function Hn(t,e){if(t===e)return!0;const n=Zr(t);if(n!==Zr(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return qa(t).isEqual(qa(e));case 3:return function(s,i){if(typeof s.timestampValue=="string"&&typeof i.timestampValue=="string"&&s.timestampValue.length===i.timestampValue.length)return s.timestampValue===i.timestampValue;const o=Xr(s.timestampValue),a=Xr(i.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,i){return Jr(s.bytesValue).isEqual(Jr(i.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,i){return Qe(s.geoPointValue.latitude)===Qe(i.geoPointValue.latitude)&&Qe(s.geoPointValue.longitude)===Qe(i.geoPointValue.longitude)}(t,e);case 2:return function(s,i){if("integerValue"in s&&"integerValue"in i)return Qe(s.integerValue)===Qe(i.integerValue);if("doubleValue"in s&&"doubleValue"in i){const o=Qe(s.doubleValue),a=Qe(i.doubleValue);return o===a?mu(o)===mu(a):isNaN(o)&&isNaN(a)}return!1}(t,e);case 9:return no(t.arrayValue.values||[],e.arrayValue.values||[],Hn);case 10:case 11:return function(s,i){const o=s.mapValue.fields||{},a=i.mapValue.fields||{};if(v0(o)!==v0(a))return!1;for(const u in o)if(o.hasOwnProperty(u)&&(a[u]===void 0||!Hn(o[u],a[u])))return!1;return!0}(t,e);default:return ae(52216,{left:t})}}function Ga(t,e){return(t.values||[]).find(n=>Hn(n,e))!==void 0}function ro(t,e){if(t===e)return 0;const n=Zr(t),r=Zr(e);if(n!==r)return ge(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return ge(t.booleanValue,e.booleanValue);case 2:return function(i,o){const a=Qe(i.integerValue||i.doubleValue),u=Qe(o.integerValue||o.doubleValue);return a<u?-1:a>u?1:a===u?0:isNaN(a)?isNaN(u)?0:-1:1}(t,e);case 3:return x0(t.timestampValue,e.timestampValue);case 4:return x0(qa(t),qa(e));case 5:return _p(t.stringValue,e.stringValue);case 6:return function(i,o){const a=Jr(i),u=Jr(o);return a.compareTo(u)}(t.bytesValue,e.bytesValue);case 7:return function(i,o){const a=i.split("/"),u=o.split("/");for(let d=0;d<a.length&&d<u.length;d++){const h=ge(a[d],u[d]);if(h!==0)return h}return ge(a.length,u.length)}(t.referenceValue,e.referenceValue);case 8:return function(i,o){const a=ge(Qe(i.latitude),Qe(o.latitude));return a!==0?a:ge(Qe(i.longitude),Qe(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return w0(t.arrayValue,e.arrayValue);case 10:return function(i,o){var a,u,d,h;const p=i.fields||{},g=o.fields||{},w=(a=p[vu])===null||a===void 0?void 0:a.arrayValue,C=(u=g[vu])===null||u===void 0?void 0:u.arrayValue,x=ge(((d=w==null?void 0:w.values)===null||d===void 0?void 0:d.length)||0,((h=C==null?void 0:C.values)===null||h===void 0?void 0:h.length)||0);return x!==0?x:w0(w,C)}(t.mapValue,e.mapValue);case 11:return function(i,o){if(i===cc.mapValue&&o===cc.mapValue)return 0;if(i===cc.mapValue)return 1;if(o===cc.mapValue)return-1;const a=i.fields||{},u=Object.keys(a),d=o.fields||{},h=Object.keys(d);u.sort(),h.sort();for(let p=0;p<u.length&&p<h.length;++p){const g=_p(u[p],h[p]);if(g!==0)return g;const w=ro(a[u[p]],d[h[p]]);if(w!==0)return w}return ge(u.length,h.length)}(t.mapValue,e.mapValue);default:throw ae(23264,{Pe:n})}}function x0(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return ge(t,e);const n=Xr(t),r=Xr(e),s=ge(n.seconds,r.seconds);return s!==0?s:ge(n.nanos,r.nanos)}function w0(t,e){const n=t.values||[],r=e.values||[];for(let s=0;s<n.length&&s<r.length;++s){const i=ro(n[s],r[s]);if(i)return i}return ge(n.length,r.length)}function so(t){return Ep(t)}function Ep(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=Xr(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Jr(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return ie.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",s=!0;for(const i of n.values||[])s?s=!1:r+=",",r+=Ep(i);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let s="{",i=!0;for(const o of r)i?i=!1:s+=",",s+=`${o}:${Ep(n.fields[o])}`;return s+"}"}(t.mapValue):ae(61005,{value:t})}function Ac(t){switch(Zr(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=pd(t);return e?16+Ac(e):16;case 5:return 2*t.stringValue.length;case 6:return Jr(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((s,i)=>s+Ac(i),0)}(t.arrayValue);case 10:case 11:return function(r){let s=0;return cs(r.fields,(i,o)=>{s+=i.length+Ac(o)}),s}(t.mapValue);default:throw ae(13486,{value:t})}}function _0(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function Tp(t){return!!t&&"integerValue"in t}function vg(t){return!!t&&"arrayValue"in t}function E0(t){return!!t&&"nullValue"in t}function T0(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function kc(t){return!!t&&"mapValue"in t}function XM(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{})[zS])===null||n===void 0?void 0:n.stringValue)===US}function ya(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return cs(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=ya(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=ya(t.arrayValue.values[n]);return e}return Object.assign({},t)}function JM(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===YM}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vt{constructor(e){this.value=e}static empty(){return new Vt({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!kc(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=ya(n)}setAll(e){let n=ht.emptyPath(),r={},s=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const u=this.getFieldsMap(n);this.applyChanges(u,r,s),r={},s=[],n=a.popLast()}o?r[a.lastSegment()]=ya(o):s.push(a.lastSegment())});const i=this.getFieldsMap(n);this.applyChanges(i,r,s)}delete(e){const n=this.field(e.popLast());kc(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Hn(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=n.mapValue.fields[e.get(r)];kc(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,r){cs(n,(s,i)=>e[s]=i);for(const s of r)delete e[s]}clone(){return new Vt(ya(this.value))}}function $S(t){const e=[];return cs(t.fields,(n,r)=>{const s=new ht([n]);if(kc(r)){const i=$S(r.mapValue).fields;if(i.length===0)e.push(s);else for(const o of i)e.push(s.child(o))}else e.push(s)}),new Zt(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class St{constructor(e,n,r,s,i,o,a){this.key=e,this.documentType=n,this.version=r,this.readTime=s,this.createTime=i,this.data=o,this.documentState=a}static newInvalidDocument(e){return new St(e,0,he.min(),he.min(),he.min(),Vt.empty(),0)}static newFoundDocument(e,n,r,s){return new St(e,1,n,he.min(),r,s,0)}static newNoDocument(e,n){return new St(e,2,n,he.min(),he.min(),Vt.empty(),0)}static newUnknownDocument(e,n){return new St(e,3,n,he.min(),he.min(),Vt.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(he.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Vt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Vt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=he.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof St&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new St(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yu{constructor(e,n){this.position=e,this.inclusive=n}}function S0(t,e,n){let r=0;for(let s=0;s<t.position.length;s++){const i=e[s],o=t.position[s];if(i.field.isKeyField()?r=ie.comparator(ie.fromName(o.referenceValue),n.key):r=ro(o,n.data.field(i.field)),i.dir==="desc"&&(r*=-1),r!==0)break}return r}function b0(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Hn(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qa{constructor(e,n="asc"){this.field=e,this.dir=n}}function ZM(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BS{}class et extends BS{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new tO(e,n,r):n==="array-contains"?new sO(e,r):n==="in"?new iO(e,r):n==="not-in"?new oO(e,r):n==="array-contains-any"?new aO(e,r):new et(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new nO(e,r):new rO(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(ro(n,this.value)):n!==null&&Zr(this.value)===Zr(n)&&this.matchesComparison(ro(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ae(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Cn extends BS{constructor(e,n){super(),this.filters=e,this.op=n,this.Te=null}static create(e,n){return new Cn(e,n)}matches(e){return HS(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.Te!==null||(this.Te=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.Te}getFilters(){return Object.assign([],this.filters)}}function HS(t){return t.op==="and"}function WS(t){return eO(t)&&HS(t)}function eO(t){for(const e of t.filters)if(e instanceof Cn)return!1;return!0}function Sp(t){if(t instanceof et)return t.field.canonicalString()+t.op.toString()+so(t.value);if(WS(t))return t.filters.map(e=>Sp(e)).join(",");{const e=t.filters.map(n=>Sp(n)).join(",");return`${t.op}(${e})`}}function qS(t,e){return t instanceof et?function(r,s){return s instanceof et&&r.op===s.op&&r.field.isEqual(s.field)&&Hn(r.value,s.value)}(t,e):t instanceof Cn?function(r,s){return s instanceof Cn&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce((i,o,a)=>i&&qS(o,s.filters[a]),!0):!1}(t,e):void ae(19439)}function KS(t){return t instanceof et?function(n){return`${n.field.canonicalString()} ${n.op} ${so(n.value)}`}(t):t instanceof Cn?function(n){return n.op.toString()+" {"+n.getFilters().map(KS).join(" ,")+"}"}(t):"Filter"}class tO extends et{constructor(e,n,r){super(e,n,r),this.key=ie.fromName(r.referenceValue)}matches(e){const n=ie.comparator(e.key,this.key);return this.matchesComparison(n)}}class nO extends et{constructor(e,n){super(e,"in",n),this.keys=GS("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class rO extends et{constructor(e,n){super(e,"not-in",n),this.keys=GS("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function GS(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>ie.fromName(r.referenceValue))}class sO extends et{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return vg(n)&&Ga(n.arrayValue,this.value)}}class iO extends et{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Ga(this.value.arrayValue,n)}}class oO extends et{constructor(e,n){super(e,"not-in",n)}matches(e){if(Ga(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!Ga(this.value.arrayValue,n)}}class aO extends et{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!vg(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Ga(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lO{constructor(e,n=null,r=[],s=[],i=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=i,this.startAt=o,this.endAt=a,this.Ie=null}}function C0(t,e=null,n=[],r=[],s=null,i=null,o=null){return new lO(t,e,n,r,s,i,o)}function yg(t){const e=fe(t);if(e.Ie===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>Sp(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(i){return i.field.canonicalString()+i.dir}(r)).join(","),fd(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>so(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>so(r)).join(",")),e.Ie=n}return e.Ie}function xg(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!ZM(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!qS(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!b0(t.startAt,e.startAt)&&b0(t.endAt,e.endAt)}function bp(t){return ie.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class So{constructor(e,n=null,r=[],s=[],i=null,o="F",a=null,u=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=i,this.limitType=o,this.startAt=a,this.endAt=u,this.Ee=null,this.de=null,this.Ae=null,this.startAt,this.endAt}}function cO(t,e,n,r,s,i,o,a){return new So(t,e,n,r,s,i,o,a)}function md(t){return new So(t)}function N0(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function QS(t){return t.collectionGroup!==null}function xa(t){const e=fe(t);if(e.Ee===null){e.Ee=[];const n=new Set;for(const i of e.explicitOrderBy)e.Ee.push(i),n.add(i.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new rt(ht.comparator);return o.filters.forEach(u=>{u.getFlattenedFilters().forEach(d=>{d.isInequality()&&(a=a.add(d.field))})}),a})(e).forEach(i=>{n.has(i.canonicalString())||i.isKeyField()||e.Ee.push(new Qa(i,r))}),n.has(ht.keyField().canonicalString())||e.Ee.push(new Qa(ht.keyField(),r))}return e.Ee}function zn(t){const e=fe(t);return e.de||(e.de=uO(e,xa(t))),e.de}function uO(t,e){if(t.limitType==="F")return C0(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(s=>{const i=s.dir==="desc"?"asc":"desc";return new Qa(s.field,i)});const n=t.endAt?new yu(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new yu(t.startAt.position,t.startAt.inclusive):null;return C0(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function Cp(t,e){const n=t.filters.concat([e]);return new So(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function xu(t,e,n){return new So(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function gd(t,e){return xg(zn(t),zn(e))&&t.limitType===e.limitType}function YS(t){return`${yg(zn(t))}|lt:${t.limitType}`}function hi(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(s=>KS(s)).join(", ")}]`),fd(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(s=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(s)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(s=>so(s)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(s=>so(s)).join(",")),`Target(${r})`}(zn(t))}; limitType=${t.limitType})`}function vd(t,e){return e.isFoundDocument()&&function(r,s){const i=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(i):ie.isDocumentKey(r.path)?r.path.isEqual(i):r.path.isImmediateParentOf(i)}(t,e)&&function(r,s){for(const i of xa(r))if(!i.field.isKeyField()&&s.data.field(i.field)===null)return!1;return!0}(t,e)&&function(r,s){for(const i of r.filters)if(!i.matches(s))return!1;return!0}(t,e)&&function(r,s){return!(r.startAt&&!function(o,a,u){const d=S0(o,a,u);return o.inclusive?d<=0:d<0}(r.startAt,xa(r),s)||r.endAt&&!function(o,a,u){const d=S0(o,a,u);return o.inclusive?d>=0:d>0}(r.endAt,xa(r),s))}(t,e)}function dO(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function XS(t){return(e,n)=>{let r=!1;for(const s of xa(t)){const i=hO(s,e,n);if(i!==0)return i;r=r||s.field.isKeyField()}return 0}}function hO(t,e,n){const r=t.field.isKeyField()?ie.comparator(e.key,n.key):function(i,o,a){const u=o.data.field(i),d=a.data.field(i);return u!==null&&d!==null?ro(u,d):ae(42886)}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return ae(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ei{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[s,i]of r)if(this.equalsFn(s,e))return i}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],e))return void(s[i]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){cs(this.inner,(n,r)=>{for(const[s,i]of r)e(s,i)})}isEmpty(){return DS(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fO=new We(ie.comparator);function hr(){return fO}const JS=new We(ie.comparator);function na(...t){let e=JS;for(const n of t)e=e.insert(n.key,n);return e}function ZS(t){let e=JS;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Is(){return wa()}function eb(){return wa()}function wa(){return new ei(t=>t.toString(),(t,e)=>t.isEqual(e))}const pO=new We(ie.comparator),mO=new rt(ie.comparator);function xe(...t){let e=mO;for(const n of t)e=e.add(n);return e}const gO=new rt(ge);function vO(){return gO}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wg(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:mu(e)?"-0":e}}function tb(t){return{integerValue:""+t}}function yO(t,e){return WM(e)?tb(e):wg(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yd{constructor(){this._=void 0}}function xO(t,e,n){return t instanceof wu?function(s,i){const o={fields:{[VS]:{stringValue:OS},[FS]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return i&&gg(i)&&(i=pd(i)),i&&(o.fields[LS]=i),{mapValue:o}}(n,e):t instanceof Ya?rb(t,e):t instanceof Xa?sb(t,e):function(s,i){const o=nb(s,i),a=I0(o)+I0(s.Re);return Tp(o)&&Tp(s.Re)?tb(a):wg(s.serializer,a)}(t,e)}function wO(t,e,n){return t instanceof Ya?rb(t,e):t instanceof Xa?sb(t,e):n}function nb(t,e){return t instanceof _u?function(r){return Tp(r)||function(i){return!!i&&"doubleValue"in i}(r)}(e)?e:{integerValue:0}:null}class wu extends yd{}class Ya extends yd{constructor(e){super(),this.elements=e}}function rb(t,e){const n=ib(e);for(const r of t.elements)n.some(s=>Hn(s,r))||n.push(r);return{arrayValue:{values:n}}}class Xa extends yd{constructor(e){super(),this.elements=e}}function sb(t,e){let n=ib(e);for(const r of t.elements)n=n.filter(s=>!Hn(s,r));return{arrayValue:{values:n}}}class _u extends yd{constructor(e,n){super(),this.serializer=e,this.Re=n}}function I0(t){return Qe(t.integerValue||t.doubleValue)}function ib(t){return vg(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function _O(t,e){return t.field.isEqual(e.field)&&function(r,s){return r instanceof Ya&&s instanceof Ya||r instanceof Xa&&s instanceof Xa?no(r.elements,s.elements,Hn):r instanceof _u&&s instanceof _u?Hn(r.Re,s.Re):r instanceof wu&&s instanceof wu}(t.transform,e.transform)}class EO{constructor(e,n){this.version=e,this.transformResults=n}}class dn{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new dn}static exists(e){return new dn(void 0,e)}static updateTime(e){return new dn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Pc(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class xd{}function ob(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new _g(t.key,dn.none()):new pl(t.key,t.data,dn.none());{const n=t.data,r=Vt.empty();let s=new rt(ht.comparator);for(let i of e.fields)if(!s.has(i)){let o=n.field(i);o===null&&i.length>1&&(i=i.popLast(),o=n.field(i)),o===null?r.delete(i):r.set(i,o),s=s.add(i)}return new us(t.key,r,new Zt(s.toArray()),dn.none())}}function TO(t,e,n){t instanceof pl?function(s,i,o){const a=s.value.clone(),u=A0(s.fieldTransforms,i,o.transformResults);a.setAll(u),i.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(t,e,n):t instanceof us?function(s,i,o){if(!Pc(s.precondition,i))return void i.convertToUnknownDocument(o.version);const a=A0(s.fieldTransforms,i,o.transformResults),u=i.data;u.setAll(ab(s)),u.setAll(a),i.convertToFoundDocument(o.version,u).setHasCommittedMutations()}(t,e,n):function(s,i,o){i.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function _a(t,e,n,r){return t instanceof pl?function(i,o,a,u){if(!Pc(i.precondition,o))return a;const d=i.value.clone(),h=k0(i.fieldTransforms,u,o);return d.setAll(h),o.convertToFoundDocument(o.version,d).setHasLocalMutations(),null}(t,e,n,r):t instanceof us?function(i,o,a,u){if(!Pc(i.precondition,o))return a;const d=k0(i.fieldTransforms,u,o),h=o.data;return h.setAll(ab(i)),h.setAll(d),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),a===null?null:a.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(p=>p.field))}(t,e,n,r):function(i,o,a){return Pc(i.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(t,e,n)}function SO(t,e){let n=null;for(const r of t.fieldTransforms){const s=e.data.field(r.field),i=nb(r.transform,s||null);i!=null&&(n===null&&(n=Vt.empty()),n.set(r.field,i))}return n||null}function R0(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&no(r,s,(i,o)=>_O(i,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class pl extends xd{constructor(e,n,r,s=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class us extends xd{constructor(e,n,r,s,i=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function ab(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function A0(t,e,n){const r=new Map;Ie(t.length===n.length,32656,{Ve:n.length,me:t.length});for(let s=0;s<n.length;s++){const i=t[s],o=i.transform,a=e.data.field(i.field);r.set(i.field,wO(o,a,n[s]))}return r}function k0(t,e,n){const r=new Map;for(const s of t){const i=s.transform,o=n.data.field(s.field);r.set(s.field,xO(i,o,e))}return r}class _g extends xd{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class bO extends xd{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CO{constructor(e,n,r,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const i=this.mutations[s];i.key.isEqual(e.key)&&TO(i,e,r[s])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=_a(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=_a(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=eb();return this.mutations.forEach(s=>{const i=e.get(s.key),o=i.overlayedDocument;let a=this.applyToLocalView(o,i.mutatedFields);a=n.has(s.key)?null:a;const u=ob(o,a);u!==null&&r.set(s.key,u),o.isValidDocument()||o.convertToNoDocument(he.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),xe())}isEqual(e){return this.batchId===e.batchId&&no(this.mutations,e.mutations,(n,r)=>R0(n,r))&&no(this.baseMutations,e.baseMutations,(n,r)=>R0(n,r))}}class Eg{constructor(e,n,r,s){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=s}static from(e,n,r){Ie(e.mutations.length===r.length,58842,{fe:e.mutations.length,ge:r.length});let s=function(){return pO}();const i=e.mutations;for(let o=0;o<i.length;o++)s=s.insert(i[o].key,r[o].version);return new Eg(e,n,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NO{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IO{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Xe,_e;function RO(t){switch(t){case H.OK:return ae(64938);case H.CANCELLED:case H.UNKNOWN:case H.DEADLINE_EXCEEDED:case H.RESOURCE_EXHAUSTED:case H.INTERNAL:case H.UNAVAILABLE:case H.UNAUTHENTICATED:return!1;case H.INVALID_ARGUMENT:case H.NOT_FOUND:case H.ALREADY_EXISTS:case H.PERMISSION_DENIED:case H.FAILED_PRECONDITION:case H.ABORTED:case H.OUT_OF_RANGE:case H.UNIMPLEMENTED:case H.DATA_LOSS:return!0;default:return ae(15467,{code:t})}}function lb(t){if(t===void 0)return dr("GRPC error has no .code"),H.UNKNOWN;switch(t){case Xe.OK:return H.OK;case Xe.CANCELLED:return H.CANCELLED;case Xe.UNKNOWN:return H.UNKNOWN;case Xe.DEADLINE_EXCEEDED:return H.DEADLINE_EXCEEDED;case Xe.RESOURCE_EXHAUSTED:return H.RESOURCE_EXHAUSTED;case Xe.INTERNAL:return H.INTERNAL;case Xe.UNAVAILABLE:return H.UNAVAILABLE;case Xe.UNAUTHENTICATED:return H.UNAUTHENTICATED;case Xe.INVALID_ARGUMENT:return H.INVALID_ARGUMENT;case Xe.NOT_FOUND:return H.NOT_FOUND;case Xe.ALREADY_EXISTS:return H.ALREADY_EXISTS;case Xe.PERMISSION_DENIED:return H.PERMISSION_DENIED;case Xe.FAILED_PRECONDITION:return H.FAILED_PRECONDITION;case Xe.ABORTED:return H.ABORTED;case Xe.OUT_OF_RANGE:return H.OUT_OF_RANGE;case Xe.UNIMPLEMENTED:return H.UNIMPLEMENTED;case Xe.DATA_LOSS:return H.DATA_LOSS;default:return ae(39323,{code:t})}}(_e=Xe||(Xe={}))[_e.OK=0]="OK",_e[_e.CANCELLED=1]="CANCELLED",_e[_e.UNKNOWN=2]="UNKNOWN",_e[_e.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",_e[_e.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",_e[_e.NOT_FOUND=5]="NOT_FOUND",_e[_e.ALREADY_EXISTS=6]="ALREADY_EXISTS",_e[_e.PERMISSION_DENIED=7]="PERMISSION_DENIED",_e[_e.UNAUTHENTICATED=16]="UNAUTHENTICATED",_e[_e.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",_e[_e.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",_e[_e.ABORTED=10]="ABORTED",_e[_e.OUT_OF_RANGE=11]="OUT_OF_RANGE",_e[_e.UNIMPLEMENTED=12]="UNIMPLEMENTED",_e[_e.INTERNAL=13]="INTERNAL",_e[_e.UNAVAILABLE=14]="UNAVAILABLE",_e[_e.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AO=new Hr([4294967295,4294967295],0);function P0(t){const e=kS().encode(t),n=new TS;return n.update(e),new Uint8Array(n.digest())}function j0(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new Hr([n,r],0),new Hr([s,i],0)]}class Tg{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new ra(`Invalid padding: ${n}`);if(r<0)throw new ra(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new ra(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new ra(`Invalid padding when bitmap length is 0: ${n}`);this.pe=8*e.length-n,this.ye=Hr.fromNumber(this.pe)}we(e,n,r){let s=e.add(n.multiply(Hr.fromNumber(r)));return s.compare(AO)===1&&(s=new Hr([s.getBits(0),s.getBits(1)],0)),s.modulo(this.ye).toNumber()}be(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.pe===0)return!1;const n=P0(e),[r,s]=j0(n);for(let i=0;i<this.hashCount;i++){const o=this.we(r,s,i);if(!this.be(o))return!1}return!0}static create(e,n,r){const s=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),o=new Tg(i,s,n);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.pe===0)return;const n=P0(e),[r,s]=j0(n);for(let i=0;i<this.hashCount;i++){const o=this.we(r,s,i);this.Se(o)}}Se(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class ra extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wd{constructor(e,n,r,s,i){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const s=new Map;return s.set(e,ml.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new wd(he.min(),s,new We(ge),hr(),xe())}}class ml{constructor(e,n,r,s,i){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new ml(r,n,xe(),xe(),xe())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jc{constructor(e,n,r,s){this.De=e,this.removedTargetIds=n,this.key=r,this.ve=s}}class cb{constructor(e,n){this.targetId=e,this.Ce=n}}class ub{constructor(e,n,r=mt.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=s}}class D0{constructor(){this.Fe=0,this.Me=M0(),this.xe=mt.EMPTY_BYTE_STRING,this.Oe=!1,this.Ne=!0}get current(){return this.Oe}get resumeToken(){return this.xe}get Be(){return this.Fe!==0}get Le(){return this.Ne}ke(e){e.approximateByteSize()>0&&(this.Ne=!0,this.xe=e)}qe(){let e=xe(),n=xe(),r=xe();return this.Me.forEach((s,i)=>{switch(i){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:ae(38017,{changeType:i})}}),new ml(this.xe,this.Oe,e,n,r)}Qe(){this.Ne=!1,this.Me=M0()}$e(e,n){this.Ne=!0,this.Me=this.Me.insert(e,n)}Ue(e){this.Ne=!0,this.Me=this.Me.remove(e)}Ke(){this.Fe+=1}We(){this.Fe-=1,Ie(this.Fe>=0,3241,{Fe:this.Fe})}Ge(){this.Ne=!0,this.Oe=!0}}class kO{constructor(e){this.ze=e,this.je=new Map,this.He=hr(),this.Je=uc(),this.Ye=uc(),this.Ze=new We(ge)}Xe(e){for(const n of e.De)e.ve&&e.ve.isFoundDocument()?this.et(n,e.ve):this.tt(n,e.key,e.ve);for(const n of e.removedTargetIds)this.tt(n,e.key,e.ve)}nt(e){this.forEachTarget(e,n=>{const r=this.rt(n);switch(e.state){case 0:this.it(n)&&r.ke(e.resumeToken);break;case 1:r.We(),r.Be||r.Qe(),r.ke(e.resumeToken);break;case 2:r.We(),r.Be||this.removeTarget(n);break;case 3:this.it(n)&&(r.Ge(),r.ke(e.resumeToken));break;case 4:this.it(n)&&(this.st(n),r.ke(e.resumeToken));break;default:ae(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.je.forEach((r,s)=>{this.it(s)&&n(s)})}ot(e){const n=e.targetId,r=e.Ce.count,s=this._t(n);if(s){const i=s.target;if(bp(i))if(r===0){const o=new ie(i.path);this.tt(n,o,St.newNoDocument(o,he.min()))}else Ie(r===1,20013,{expectedCount:r});else{const o=this.ut(n);if(o!==r){const a=this.ct(e),u=a?this.lt(a,e,o):1;if(u!==0){this.st(n);const d=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(n,d)}}}}}ct(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:i=0}=n;let o,a;try{o=Jr(r).toUint8Array()}catch(u){if(u instanceof MS)return to("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{a=new Tg(o,s,i)}catch(u){return to(u instanceof ra?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return a.pe===0?null:a}lt(e,n,r){return n.Ce.count===r-this.Tt(e,n.targetId)?0:2}Tt(e,n){const r=this.ze.getRemoteKeysForTarget(n);let s=0;return r.forEach(i=>{const o=this.ze.Pt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${i.path.canonicalString()}`;e.mightContain(a)||(this.tt(n,i,null),s++)}),s}It(e){const n=new Map;this.je.forEach((i,o)=>{const a=this._t(o);if(a){if(i.current&&bp(a.target)){const u=new ie(a.target.path);this.Et(u).has(o)||this.dt(o,u)||this.tt(o,u,St.newNoDocument(u,e))}i.Le&&(n.set(o,i.qe()),i.Qe())}});let r=xe();this.Ye.forEach((i,o)=>{let a=!0;o.forEachWhile(u=>{const d=this._t(u);return!d||d.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(i))}),this.He.forEach((i,o)=>o.setReadTime(e));const s=new wd(e,n,this.Ze,this.He,r);return this.He=hr(),this.Je=uc(),this.Ye=uc(),this.Ze=new We(ge),s}et(e,n){if(!this.it(e))return;const r=this.dt(e,n.key)?2:0;this.rt(e).$e(n.key,r),this.He=this.He.insert(n.key,n),this.Je=this.Je.insert(n.key,this.Et(n.key).add(e)),this.Ye=this.Ye.insert(n.key,this.At(n.key).add(e))}tt(e,n,r){if(!this.it(e))return;const s=this.rt(e);this.dt(e,n)?s.$e(n,1):s.Ue(n),this.Ye=this.Ye.insert(n,this.At(n).delete(e)),this.Ye=this.Ye.insert(n,this.At(n).add(e)),r&&(this.He=this.He.insert(n,r))}removeTarget(e){this.je.delete(e)}ut(e){const n=this.rt(e).qe();return this.ze.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ke(e){this.rt(e).Ke()}rt(e){let n=this.je.get(e);return n||(n=new D0,this.je.set(e,n)),n}At(e){let n=this.Ye.get(e);return n||(n=new rt(ge),this.Ye=this.Ye.insert(e,n)),n}Et(e){let n=this.Je.get(e);return n||(n=new rt(ge),this.Je=this.Je.insert(e,n)),n}it(e){const n=this._t(e)!==null;return n||te("WatchChangeAggregator","Detected inactive target",e),n}_t(e){const n=this.je.get(e);return n&&n.Be?null:this.ze.Rt(e)}st(e){this.je.set(e,new D0),this.ze.getRemoteKeysForTarget(e).forEach(n=>{this.tt(e,n,null)})}dt(e,n){return this.ze.getRemoteKeysForTarget(e).has(n)}}function uc(){return new We(ie.comparator)}function M0(){return new We(ie.comparator)}const PO={asc:"ASCENDING",desc:"DESCENDING"},jO={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},DO={and:"AND",or:"OR"};class MO{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Np(t,e){return t.useProto3Json||fd(e)?e:{value:e}}function Eu(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function db(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function OO(t,e){return Eu(t,e.toTimestamp())}function Un(t){return Ie(!!t,49232),he.fromTimestamp(function(n){const r=Xr(n);return new Ge(r.seconds,r.nanos)}(t))}function Sg(t,e){return Ip(t,e).canonicalString()}function Ip(t,e){const n=function(s){return new Oe(["projects",s.projectId,"databases",s.database])}(t).child("documents");return e===void 0?n:n.child(e)}function hb(t){const e=Oe.fromString(t);return Ie(vb(e),10190,{key:e.toString()}),e}function Rp(t,e){return Sg(t.databaseId,e.path)}function Qh(t,e){const n=hb(e);if(n.get(1)!==t.databaseId.projectId)throw new ne(H.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new ne(H.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new ie(pb(n))}function fb(t,e){return Sg(t.databaseId,e)}function VO(t){const e=hb(t);return e.length===4?Oe.emptyPath():pb(e)}function Ap(t){return new Oe(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function pb(t){return Ie(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function O0(t,e,n){return{name:Rp(t,e),fields:n.value.mapValue.fields}}function LO(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(d){return d==="NO_CHANGE"?0:d==="ADD"?1:d==="REMOVE"?2:d==="CURRENT"?3:d==="RESET"?4:ae(39313,{state:d})}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],i=function(d,h){return d.useProto3Json?(Ie(h===void 0||typeof h=="string",58123),mt.fromBase64String(h||"")):(Ie(h===void 0||h instanceof Buffer||h instanceof Uint8Array,16193),mt.fromUint8Array(h||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(d){const h=d.code===void 0?H.UNKNOWN:lb(d.code);return new ne(h,d.message||"")}(o);n=new ub(r,s,i,a||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=Qh(t,r.document.name),i=Un(r.document.updateTime),o=r.document.createTime?Un(r.document.createTime):he.min(),a=new Vt({mapValue:{fields:r.document.fields}}),u=St.newFoundDocument(s,i,o,a),d=r.targetIds||[],h=r.removedTargetIds||[];n=new jc(d,h,u.key,u)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=Qh(t,r.document),i=r.readTime?Un(r.readTime):he.min(),o=St.newNoDocument(s,i),a=r.removedTargetIds||[];n=new jc([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=Qh(t,r.document),i=r.removedTargetIds||[];n=new jc([],i,s,null)}else{if(!("filter"in e))return ae(11601,{Vt:e});{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:i}=r,o=new IO(s,i),a=r.targetId;n=new cb(a,o)}}return n}function FO(t,e){let n;if(e instanceof pl)n={update:O0(t,e.key,e.value)};else if(e instanceof _g)n={delete:Rp(t,e.key)};else if(e instanceof us)n={update:O0(t,e.key,e.data),updateMask:GO(e.fieldMask)};else{if(!(e instanceof bO))return ae(16599,{ft:e.type});n={verify:Rp(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(i,o){const a=o.transform;if(a instanceof wu)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof Ya)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof Xa)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof _u)return{fieldPath:o.field.canonicalString(),increment:a.Re};throw ae(20930,{transform:o.transform})}(0,r))),e.precondition.isNone||(n.currentDocument=function(s,i){return i.updateTime!==void 0?{updateTime:OO(s,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:ae(27497)}(t,e.precondition)),n}function zO(t,e){return t&&t.length>0?(Ie(e!==void 0,14353),t.map(n=>function(s,i){let o=s.updateTime?Un(s.updateTime):Un(i);return o.isEqual(he.min())&&(o=Un(i)),new EO(o,s.transformResults||[])}(n,e))):[]}function UO(t,e){return{documents:[fb(t,e.path)]}}function $O(t,e){const n={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=fb(t,s);const i=function(d){if(d.length!==0)return gb(Cn.create(d,"and"))}(e.filters);i&&(n.structuredQuery.where=i);const o=function(d){if(d.length!==0)return d.map(h=>function(g){return{field:fi(g.field),direction:WO(g.dir)}}(h))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const a=Np(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(d){return{before:d.inclusive,values:d.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(d){return{before:!d.inclusive,values:d.position}}(e.endAt)),{gt:n,parent:s}}function BO(t){let e=VO(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){Ie(r===1,65062);const h=n.from[0];h.allDescendants?s=h.collectionId:e=e.child(h.collectionId)}let i=[];n.where&&(i=function(p){const g=mb(p);return g instanceof Cn&&WS(g)?g.getFilters():[g]}(n.where));let o=[];n.orderBy&&(o=function(p){return p.map(g=>function(C){return new Qa(pi(C.field),function(T){switch(T){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(C.direction))}(g))}(n.orderBy));let a=null;n.limit&&(a=function(p){let g;return g=typeof p=="object"?p.value:p,fd(g)?null:g}(n.limit));let u=null;n.startAt&&(u=function(p){const g=!!p.before,w=p.values||[];return new yu(w,g)}(n.startAt));let d=null;return n.endAt&&(d=function(p){const g=!p.before,w=p.values||[];return new yu(w,g)}(n.endAt)),cO(e,s,o,i,a,"F",u,d)}function HO(t,e){const n=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ae(28987,{purpose:s})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function mb(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=pi(n.unaryFilter.field);return et.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=pi(n.unaryFilter.field);return et.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=pi(n.unaryFilter.field);return et.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=pi(n.unaryFilter.field);return et.create(o,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return ae(61313);default:return ae(60726)}}(t):t.fieldFilter!==void 0?function(n){return et.create(pi(n.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return ae(58110);default:return ae(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return Cn.create(n.compositeFilter.filters.map(r=>mb(r)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return ae(1026)}}(n.compositeFilter.op))}(t):ae(30097,{filter:t})}function WO(t){return PO[t]}function qO(t){return jO[t]}function KO(t){return DO[t]}function fi(t){return{fieldPath:t.canonicalString()}}function pi(t){return ht.fromServerFormat(t.fieldPath)}function gb(t){return t instanceof et?function(n){if(n.op==="=="){if(T0(n.value))return{unaryFilter:{field:fi(n.field),op:"IS_NAN"}};if(E0(n.value))return{unaryFilter:{field:fi(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(T0(n.value))return{unaryFilter:{field:fi(n.field),op:"IS_NOT_NAN"}};if(E0(n.value))return{unaryFilter:{field:fi(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:fi(n.field),op:qO(n.op),value:n.value}}}(t):t instanceof Cn?function(n){const r=n.getFilters().map(s=>gb(s));return r.length===1?r[0]:{compositeFilter:{op:KO(n.op),filters:r}}}(t):ae(54877,{filter:t})}function GO(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function vb(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jr{constructor(e,n,r,s,i=he.min(),o=he.min(),a=mt.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=u}withSequenceNumber(e){return new jr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new jr(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new jr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new jr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QO{constructor(e){this.wt=e}}function YO(t){const e=BO({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?xu(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XO{constructor(){this.Cn=new JO}addToCollectionParentIndex(e,n){return this.Cn.add(n),q.resolve()}getCollectionParents(e,n){return q.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return q.resolve()}deleteFieldIndex(e,n){return q.resolve()}deleteAllFieldIndexes(e){return q.resolve()}createTargetIndexes(e,n){return q.resolve()}getDocumentsMatchingTarget(e,n){return q.resolve(null)}getIndexType(e,n){return q.resolve(0)}getFieldIndexes(e,n){return q.resolve([])}getNextCollectionGroupToUpdate(e){return q.resolve(null)}getMinOffset(e,n){return q.resolve(Yr.min())}getMinOffsetFromCollectionGroup(e,n){return q.resolve(Yr.min())}updateCollectionGroup(e,n,r){return q.resolve()}updateIndexEntries(e,n){return q.resolve()}}class JO{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n]||new rt(Oe.comparator),i=!s.has(r);return this.index[n]=s.add(r),i}has(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(e){return(this.index[e]||new rt(Oe.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V0={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},yb=41943040;class Mt{static withCacheSize(e){return new Mt(e,Mt.DEFAULT_COLLECTION_PERCENTILE,Mt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Mt.DEFAULT_COLLECTION_PERCENTILE=10,Mt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Mt.DEFAULT=new Mt(yb,Mt.DEFAULT_COLLECTION_PERCENTILE,Mt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Mt.DISABLED=new Mt(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class io{constructor(e){this.ur=e}next(){return this.ur+=2,this.ur}static cr(){return new io(0)}static lr(){return new io(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L0="LruGarbageCollector",ZO=1048576;function F0([t,e],[n,r]){const s=ge(t,n);return s===0?ge(e,r):s}class eV{constructor(e){this.Er=e,this.buffer=new rt(F0),this.dr=0}Ar(){return++this.dr}Rr(e){const n=[e,this.Ar()];if(this.buffer.size<this.Er)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();F0(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class tV{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Vr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.mr(6e4)}stop(){this.Vr&&(this.Vr.cancel(),this.Vr=null)}get started(){return this.Vr!==null}mr(e){te(L0,`Garbage collection scheduled in ${e}ms`),this.Vr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Vr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){To(n)?te(L0,"Ignoring IndexedDB error during garbage collection: ",n):await Eo(n)}await this.mr(3e5)})}}class nV{constructor(e,n){this.gr=e,this.params=n}calculateTargetCount(e,n){return this.gr.pr(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return q.resolve(hd.le);const r=new eV(n);return this.gr.forEachTarget(e,s=>r.Rr(s.sequenceNumber)).next(()=>this.gr.yr(e,s=>r.Rr(s))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.gr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.gr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(te("LruGarbageCollector","Garbage collection skipped; disabled"),q.resolve(V0)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(te("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),V0):this.wr(e,n))}getCacheSize(e){return this.gr.getCacheSize(e)}wr(e,n){let r,s,i,o,a,u,d;const h=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(p=>(p>this.params.maximumSequenceNumbersToCollect?(te("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${p}`),s=this.params.maximumSequenceNumbersToCollect):s=p,o=Date.now(),this.nthSequenceNumber(e,s))).next(p=>(r=p,a=Date.now(),this.removeTargets(e,r,n))).next(p=>(i=p,u=Date.now(),this.removeOrphanedDocuments(e,r))).next(p=>(d=Date.now(),di()<=Ee.DEBUG&&te("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-h}ms
	Determined least recently used ${s} in `+(a-o)+`ms
	Removed ${i} targets in `+(u-a)+`ms
	Removed ${p} documents in `+(d-u)+`ms
Total Duration: ${d-h}ms`),q.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:i,documentsRemoved:p})))}}function rV(t,e){return new nV(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sV{constructor(){this.changes=new ei(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,St.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?q.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iV{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oV{constructor(e,n,r,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,n))).next(s=>(r!==null&&_a(r.mutation,s,Zt.empty(),Ge.now()),s))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,xe()).next(()=>r))}getLocalViewOfDocuments(e,n,r=xe()){const s=Is();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,r).next(i=>{let o=na();return i.forEach((a,u)=>{o=o.insert(a,u.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=Is();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,xe()))}populateOverlays(e,n,r){const s=[];return r.forEach(i=>{n.has(i)||s.push(i)}),this.documentOverlayCache.getOverlays(e,s).next(i=>{i.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,r,s){let i=hr();const o=wa(),a=function(){return wa()}();return n.forEach((u,d)=>{const h=r.get(d.key);s.has(d.key)&&(h===void 0||h.mutation instanceof us)?i=i.insert(d.key,d):h!==void 0?(o.set(d.key,h.mutation.getFieldMask()),_a(h.mutation,d,h.mutation.getFieldMask(),Ge.now())):o.set(d.key,Zt.empty())}),this.recalculateAndSaveOverlays(e,i).next(u=>(u.forEach((d,h)=>o.set(d,h)),n.forEach((d,h)=>{var p;return a.set(d,new iV(h,(p=o.get(d))!==null&&p!==void 0?p:null))}),a))}recalculateAndSaveOverlays(e,n){const r=wa();let s=new We((o,a)=>o-a),i=xe();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const a of o)a.keys().forEach(u=>{const d=n.get(u);if(d===null)return;let h=r.get(u)||Zt.empty();h=a.applyToLocalView(d,h),r.set(u,h);const p=(s.get(a.batchId)||xe()).add(u);s=s.insert(a.batchId,p)})}).next(()=>{const o=[],a=s.getReverseIterator();for(;a.hasNext();){const u=a.getNext(),d=u.key,h=u.value,p=eb();h.forEach(g=>{if(!i.has(g)){const w=ob(n.get(g),r.get(g));w!==null&&p.set(g,w),i=i.add(g)}}),o.push(this.documentOverlayCache.saveOverlays(e,d,p))}return q.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,s){return function(o){return ie.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):QS(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,s):this.getDocumentsMatchingCollectionQuery(e,n,r,s)}getNextDocuments(e,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,s).next(i=>{const o=s-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,s-i.size):q.resolve(Is());let a=Wa,u=i;return o.next(d=>q.forEach(d,(h,p)=>(a<p.largestBatchId&&(a=p.largestBatchId),i.get(h)?q.resolve():this.remoteDocumentCache.getEntry(e,h).next(g=>{u=u.insert(h,g)}))).next(()=>this.populateOverlays(e,d,i)).next(()=>this.computeViews(e,u,d,xe())).next(h=>({batchId:a,changes:ZS(h)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new ie(n)).next(r=>{let s=na();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,n,r,s){const i=n.collectionGroup;let o=na();return this.indexManager.getCollectionParents(e,i).next(a=>q.forEach(a,u=>{const d=function(p,g){return new So(g,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)}(n,u.child(i));return this.getDocumentsMatchingCollectionQuery(e,d,r,s).next(h=>{h.forEach((p,g)=>{o=o.insert(p,g)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,s){let i;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(i=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,i,s))).next(o=>{i.forEach((u,d)=>{const h=d.getKey();o.get(h)===null&&(o=o.insert(h,St.newInvalidDocument(h)))});let a=na();return o.forEach((u,d)=>{const h=i.get(u);h!==void 0&&_a(h.mutation,d,Zt.empty(),Ge.now()),vd(n,d)&&(a=a.insert(u,d))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aV{constructor(e){this.serializer=e,this.kr=new Map,this.qr=new Map}getBundleMetadata(e,n){return q.resolve(this.kr.get(n))}saveBundleMetadata(e,n){return this.kr.set(n.id,function(s){return{id:s.id,version:s.version,createTime:Un(s.createTime)}}(n)),q.resolve()}getNamedQuery(e,n){return q.resolve(this.qr.get(n))}saveNamedQuery(e,n){return this.qr.set(n.name,function(s){return{name:s.name,query:YO(s.bundledQuery),readTime:Un(s.readTime)}}(n)),q.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lV{constructor(){this.overlays=new We(ie.comparator),this.Qr=new Map}getOverlay(e,n){return q.resolve(this.overlays.get(n))}getOverlays(e,n){const r=Is();return q.forEach(n,s=>this.getOverlay(e,s).next(i=>{i!==null&&r.set(s,i)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((s,i)=>{this.St(e,n,i)}),q.resolve()}removeOverlaysForBatchId(e,n,r){const s=this.Qr.get(r);return s!==void 0&&(s.forEach(i=>this.overlays=this.overlays.remove(i)),this.Qr.delete(r)),q.resolve()}getOverlaysForCollection(e,n,r){const s=Is(),i=n.length+1,o=new ie(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const u=a.getNext().value,d=u.getKey();if(!n.isPrefixOf(d.path))break;d.path.length===i&&u.largestBatchId>r&&s.set(u.getKey(),u)}return q.resolve(s)}getOverlaysForCollectionGroup(e,n,r,s){let i=new We((d,h)=>d-h);const o=this.overlays.getIterator();for(;o.hasNext();){const d=o.getNext().value;if(d.getKey().getCollectionGroup()===n&&d.largestBatchId>r){let h=i.get(d.largestBatchId);h===null&&(h=Is(),i=i.insert(d.largestBatchId,h)),h.set(d.getKey(),d)}}const a=Is(),u=i.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((d,h)=>a.set(d,h)),!(a.size()>=s)););return q.resolve(a)}St(e,n,r){const s=this.overlays.get(r.key);if(s!==null){const o=this.Qr.get(s.largestBatchId).delete(r.key);this.Qr.set(s.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new NO(n,r));let i=this.Qr.get(n);i===void 0&&(i=xe(),this.Qr.set(n,i)),this.Qr.set(n,i.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cV{constructor(){this.sessionToken=mt.EMPTY_BYTE_STRING}getSessionToken(e){return q.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,q.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bg{constructor(){this.$r=new rt(st.Ur),this.Kr=new rt(st.Wr)}isEmpty(){return this.$r.isEmpty()}addReference(e,n){const r=new st(e,n);this.$r=this.$r.add(r),this.Kr=this.Kr.add(r)}Gr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.zr(new st(e,n))}jr(e,n){e.forEach(r=>this.removeReference(r,n))}Hr(e){const n=new ie(new Oe([])),r=new st(n,e),s=new st(n,e+1),i=[];return this.Kr.forEachInRange([r,s],o=>{this.zr(o),i.push(o.key)}),i}Jr(){this.$r.forEach(e=>this.zr(e))}zr(e){this.$r=this.$r.delete(e),this.Kr=this.Kr.delete(e)}Yr(e){const n=new ie(new Oe([])),r=new st(n,e),s=new st(n,e+1);let i=xe();return this.Kr.forEachInRange([r,s],o=>{i=i.add(o.key)}),i}containsKey(e){const n=new st(e,0),r=this.$r.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class st{constructor(e,n){this.key=e,this.Zr=n}static Ur(e,n){return ie.comparator(e.key,n.key)||ge(e.Zr,n.Zr)}static Wr(e,n){return ge(e.Zr,n.Zr)||ie.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uV{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.nr=1,this.Xr=new rt(st.Ur)}checkEmpty(e){return q.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,s){const i=this.nr;this.nr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new CO(i,n,r,s);this.mutationQueue.push(o);for(const a of s)this.Xr=this.Xr.add(new st(a.key,i)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return q.resolve(o)}lookupMutationBatch(e,n){return q.resolve(this.ei(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=this.ti(r),i=s<0?0:s;return q.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return q.resolve(this.mutationQueue.length===0?mg:this.nr-1)}getAllMutationBatches(e){return q.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new st(n,0),s=new st(n,Number.POSITIVE_INFINITY),i=[];return this.Xr.forEachInRange([r,s],o=>{const a=this.ei(o.Zr);i.push(a)}),q.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new rt(ge);return n.forEach(s=>{const i=new st(s,0),o=new st(s,Number.POSITIVE_INFINITY);this.Xr.forEachInRange([i,o],a=>{r=r.add(a.Zr)})}),q.resolve(this.ni(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1;let i=r;ie.isDocumentKey(i)||(i=i.child(""));const o=new st(new ie(i),0);let a=new rt(ge);return this.Xr.forEachWhile(u=>{const d=u.key.path;return!!r.isPrefixOf(d)&&(d.length===s&&(a=a.add(u.Zr)),!0)},o),q.resolve(this.ni(a))}ni(e){const n=[];return e.forEach(r=>{const s=this.ei(r);s!==null&&n.push(s)}),n}removeMutationBatch(e,n){Ie(this.ri(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Xr;return q.forEach(n.mutations,s=>{const i=new st(s.key,n.batchId);return r=r.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.Xr=r})}sr(e){}containsKey(e,n){const r=new st(n,0),s=this.Xr.firstAfterOrEqual(r);return q.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,q.resolve()}ri(e,n){return this.ti(e)}ti(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}ei(e){const n=this.ti(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dV{constructor(e){this.ii=e,this.docs=function(){return new We(ie.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,s=this.docs.get(r),i=s?s.size:0,o=this.ii(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return q.resolve(r?r.document.mutableCopy():St.newInvalidDocument(n))}getEntries(e,n){let r=hr();return n.forEach(s=>{const i=this.docs.get(s);r=r.insert(s,i?i.document.mutableCopy():St.newInvalidDocument(s))}),q.resolve(r)}getDocumentsMatchingQuery(e,n,r,s){let i=hr();const o=n.path,a=new ie(o.child("__id-9223372036854775808__")),u=this.docs.getIteratorFrom(a);for(;u.hasNext();){const{key:d,value:{document:h}}=u.getNext();if(!o.isPrefixOf(d.path))break;d.path.length>o.length+1||UM(zM(h),r)<=0||(s.has(h.key)||vd(n,h))&&(i=i.insert(h.key,h.mutableCopy()))}return q.resolve(i)}getAllFromCollectionGroup(e,n,r,s){ae(9500)}si(e,n){return q.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new hV(this)}getSize(e){return q.resolve(this.size)}}class hV extends sV{constructor(e){super(),this.Br=e}applyChanges(e){const n=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?n.push(this.Br.addEntry(e,s)):this.Br.removeEntry(r)}),q.waitFor(n)}getFromCache(e,n){return this.Br.getEntry(e,n)}getAllFromCache(e,n){return this.Br.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fV{constructor(e){this.persistence=e,this.oi=new ei(n=>yg(n),xg),this.lastRemoteSnapshotVersion=he.min(),this.highestTargetId=0,this._i=0,this.ai=new bg,this.targetCount=0,this.ui=io.cr()}forEachTarget(e,n){return this.oi.forEach((r,s)=>n(s)),q.resolve()}getLastRemoteSnapshotVersion(e){return q.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return q.resolve(this._i)}allocateTargetId(e){return this.highestTargetId=this.ui.next(),q.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this._i&&(this._i=n),q.resolve()}Tr(e){this.oi.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ui=new io(n),this.highestTargetId=n),e.sequenceNumber>this._i&&(this._i=e.sequenceNumber)}addTargetData(e,n){return this.Tr(n),this.targetCount+=1,q.resolve()}updateTargetData(e,n){return this.Tr(n),q.resolve()}removeTargetData(e,n){return this.oi.delete(n.target),this.ai.Hr(n.targetId),this.targetCount-=1,q.resolve()}removeTargets(e,n,r){let s=0;const i=[];return this.oi.forEach((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.oi.delete(o),i.push(this.removeMatchingKeysForTargetId(e,a.targetId)),s++)}),q.waitFor(i).next(()=>s)}getTargetCount(e){return q.resolve(this.targetCount)}getTargetData(e,n){const r=this.oi.get(n)||null;return q.resolve(r)}addMatchingKeys(e,n,r){return this.ai.Gr(n,r),q.resolve()}removeMatchingKeys(e,n,r){this.ai.jr(n,r);const s=this.persistence.referenceDelegate,i=[];return s&&n.forEach(o=>{i.push(s.markPotentiallyOrphaned(e,o))}),q.waitFor(i)}removeMatchingKeysForTargetId(e,n){return this.ai.Hr(n),q.resolve()}getMatchingKeysForTargetId(e,n){const r=this.ai.Yr(n);return q.resolve(r)}containsKey(e,n){return q.resolve(this.ai.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xb{constructor(e,n){this.ci={},this.overlays={},this.li=new hd(0),this.hi=!1,this.hi=!0,this.Pi=new cV,this.referenceDelegate=e(this),this.Ti=new fV(this),this.indexManager=new XO,this.remoteDocumentCache=function(s){return new dV(s)}(r=>this.referenceDelegate.Ii(r)),this.serializer=new QO(n),this.Ei=new aV(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.hi=!1,Promise.resolve()}get started(){return this.hi}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new lV,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.ci[e.toKey()];return r||(r=new uV(n,this.referenceDelegate),this.ci[e.toKey()]=r),r}getGlobalsCache(){return this.Pi}getTargetCache(){return this.Ti}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ei}runTransaction(e,n,r){te("MemoryPersistence","Starting transaction:",e);const s=new pV(this.li.next());return this.referenceDelegate.di(),r(s).next(i=>this.referenceDelegate.Ai(s).next(()=>i)).toPromise().then(i=>(s.raiseOnCommittedEvent(),i))}Ri(e,n){return q.or(Object.values(this.ci).map(r=>()=>r.containsKey(e,n)))}}class pV extends BM{constructor(e){super(),this.currentSequenceNumber=e}}class Cg{constructor(e){this.persistence=e,this.Vi=new bg,this.mi=null}static fi(e){return new Cg(e)}get gi(){if(this.mi)return this.mi;throw ae(60996)}addReference(e,n,r){return this.Vi.addReference(r,n),this.gi.delete(r.toString()),q.resolve()}removeReference(e,n,r){return this.Vi.removeReference(r,n),this.gi.add(r.toString()),q.resolve()}markPotentiallyOrphaned(e,n){return this.gi.add(n.toString()),q.resolve()}removeTarget(e,n){this.Vi.Hr(n.targetId).forEach(s=>this.gi.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(s=>{s.forEach(i=>this.gi.add(i.toString()))}).next(()=>r.removeTargetData(e,n))}di(){this.mi=new Set}Ai(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return q.forEach(this.gi,r=>{const s=ie.fromPath(r);return this.pi(e,s).next(i=>{i||n.removeEntry(s,he.min())})}).next(()=>(this.mi=null,n.apply(e)))}updateLimboDocument(e,n){return this.pi(e,n).next(r=>{r?this.gi.delete(n.toString()):this.gi.add(n.toString())})}Ii(e){return 0}pi(e,n){return q.or([()=>q.resolve(this.Vi.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ri(e,n)])}}class Tu{constructor(e,n){this.persistence=e,this.yi=new ei(r=>qM(r.path),(r,s)=>r.isEqual(s)),this.garbageCollector=rV(this,n)}static fi(e,n){return new Tu(e,n)}di(){}Ai(e){return q.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}pr(e){const n=this.br(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>n.next(s=>r+s))}br(e){let n=0;return this.yr(e,r=>{n++}).next(()=>n)}yr(e,n){return q.forEach(this.yi,(r,s)=>this.Dr(e,r,s).next(i=>i?q.resolve():n(s)))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const s=this.persistence.getRemoteDocumentCache(),i=s.newChangeBuffer();return s.si(e,o=>this.Dr(e,o,n).next(a=>{a||(r++,i.removeEntry(o,he.min()))})).next(()=>i.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,n){return this.yi.set(n,e.currentSequenceNumber),q.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.yi.set(r,e.currentSequenceNumber),q.resolve()}removeReference(e,n,r){return this.yi.set(r,e.currentSequenceNumber),q.resolve()}updateLimboDocument(e,n){return this.yi.set(n,e.currentSequenceNumber),q.resolve()}Ii(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=Ac(e.data.value)),n}Dr(e,n,r){return q.or([()=>this.persistence.Ri(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const s=this.yi.get(n);return q.resolve(s!==void 0&&s>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ng{constructor(e,n,r,s){this.targetId=e,this.fromCache=n,this.ds=r,this.As=s}static Rs(e,n){let r=xe(),s=xe();for(const i of n.docChanges)switch(i.type){case 0:r=r.add(i.doc.key);break;case 1:s=s.add(i.doc.key)}return new Ng(e,n.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mV{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gV{constructor(){this.Vs=!1,this.fs=!1,this.gs=100,this.ps=function(){return cD()?8:HM(aD())>0?6:4}()}initialize(e,n){this.ys=e,this.indexManager=n,this.Vs=!0}getDocumentsMatchingQuery(e,n,r,s){const i={result:null};return this.ws(e,n).next(o=>{i.result=o}).next(()=>{if(!i.result)return this.bs(e,n,s,r).next(o=>{i.result=o})}).next(()=>{if(i.result)return;const o=new mV;return this.Ss(e,n,o).next(a=>{if(i.result=a,this.fs)return this.Ds(e,n,o,a.size)})}).next(()=>i.result)}Ds(e,n,r,s){return r.documentReadCount<this.gs?(di()<=Ee.DEBUG&&te("QueryEngine","SDK will not create cache indexes for query:",hi(n),"since it only creates cache indexes for collection contains","more than or equal to",this.gs,"documents"),q.resolve()):(di()<=Ee.DEBUG&&te("QueryEngine","Query:",hi(n),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.ps*s?(di()<=Ee.DEBUG&&te("QueryEngine","The SDK decides to create cache indexes for query:",hi(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,zn(n))):q.resolve())}ws(e,n){if(N0(n))return q.resolve(null);let r=zn(n);return this.indexManager.getIndexType(e,r).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=xu(n,null,"F"),r=zn(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(i=>{const o=xe(...i);return this.ys.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(u=>{const d=this.vs(n,a);return this.Cs(n,d,o,u.readTime)?this.ws(e,xu(n,null,"F")):this.Fs(e,d,n,u)}))})))}bs(e,n,r,s){return N0(n)||s.isEqual(he.min())?q.resolve(null):this.ys.getDocuments(e,r).next(i=>{const o=this.vs(n,i);return this.Cs(n,o,r,s)?q.resolve(null):(di()<=Ee.DEBUG&&te("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),hi(n)),this.Fs(e,o,n,FM(s,Wa)).next(a=>a))})}vs(e,n){let r=new rt(XS(e));return n.forEach((s,i)=>{vd(e,i)&&(r=r.add(i))}),r}Cs(e,n,r,s){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const i=e.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}Ss(e,n,r){return di()<=Ee.DEBUG&&te("QueryEngine","Using full collection scan to execute query:",hi(n)),this.ys.getDocumentsMatchingQuery(e,n,Yr.min(),r)}Fs(e,n,r,s){return this.ys.getDocumentsMatchingQuery(e,r,s).next(i=>(n.forEach(o=>{i=i.insert(o.key,o)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ig="LocalStore",vV=3e8;class yV{constructor(e,n,r,s){this.persistence=e,this.Ms=n,this.serializer=s,this.xs=new We(ge),this.Os=new ei(i=>yg(i),xg),this.Ns=new Map,this.Bs=e.getRemoteDocumentCache(),this.Ti=e.getTargetCache(),this.Ei=e.getBundleCache(),this.Ls(r)}Ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new oV(this.Bs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Bs.setIndexManager(this.indexManager),this.Ms.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.xs))}}function xV(t,e,n,r){return new yV(t,e,n,r)}async function wb(t,e){const n=fe(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next(i=>(s=i,n.Ls(e),n.mutationQueue.getAllMutationBatches(r))).next(i=>{const o=[],a=[];let u=xe();for(const d of s){o.push(d.batchId);for(const h of d.mutations)u=u.add(h.key)}for(const d of i){a.push(d.batchId);for(const h of d.mutations)u=u.add(h.key)}return n.localDocuments.getDocuments(r,u).next(d=>({ks:d,removedBatchIds:o,addedBatchIds:a}))})})}function wV(t,e){const n=fe(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),i=n.Bs.newChangeBuffer({trackRemovals:!0});return function(a,u,d,h){const p=d.batch,g=p.keys();let w=q.resolve();return g.forEach(C=>{w=w.next(()=>h.getEntry(u,C)).next(x=>{const T=d.docVersions.get(C);Ie(T!==null,48541),x.version.compareTo(T)<0&&(p.applyToRemoteDocument(x,d),x.isValidDocument()&&(x.setReadTime(d.commitVersion),h.addEntry(x)))})}),w.next(()=>a.mutationQueue.removeMutationBatch(u,p))}(n,r,e,i).next(()=>i.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let u=xe();for(let d=0;d<a.mutationResults.length;++d)a.mutationResults[d].transformResults.length>0&&(u=u.add(a.batch.mutations[d].key));return u}(e))).next(()=>n.localDocuments.getDocuments(r,s))})}function _b(t){const e=fe(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ti.getLastRemoteSnapshotVersion(n))}function _V(t,e){const n=fe(t),r=e.snapshotVersion;let s=n.xs;return n.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const o=n.Bs.newChangeBuffer({trackRemovals:!0});s=n.xs;const a=[];e.targetChanges.forEach((h,p)=>{const g=s.get(p);if(!g)return;a.push(n.Ti.removeMatchingKeys(i,h.removedDocuments,p).next(()=>n.Ti.addMatchingKeys(i,h.addedDocuments,p)));let w=g.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(p)!==null?w=w.withResumeToken(mt.EMPTY_BYTE_STRING,he.min()).withLastLimboFreeSnapshotVersion(he.min()):h.resumeToken.approximateByteSize()>0&&(w=w.withResumeToken(h.resumeToken,r)),s=s.insert(p,w),function(x,T,_){return x.resumeToken.approximateByteSize()===0||T.snapshotVersion.toMicroseconds()-x.snapshotVersion.toMicroseconds()>=vV?!0:_.addedDocuments.size+_.modifiedDocuments.size+_.removedDocuments.size>0}(g,w,h)&&a.push(n.Ti.updateTargetData(i,w))});let u=hr(),d=xe();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(i,h))}),a.push(EV(i,o,e.documentUpdates).next(h=>{u=h.qs,d=h.Qs})),!r.isEqual(he.min())){const h=n.Ti.getLastRemoteSnapshotVersion(i).next(p=>n.Ti.setTargetsMetadata(i,i.currentSequenceNumber,r));a.push(h)}return q.waitFor(a).next(()=>o.apply(i)).next(()=>n.localDocuments.getLocalViewOfDocuments(i,u,d)).next(()=>u)}).then(i=>(n.xs=s,i))}function EV(t,e,n){let r=xe(),s=xe();return n.forEach(i=>r=r.add(i)),e.getEntries(t,r).next(i=>{let o=hr();return n.forEach((a,u)=>{const d=i.get(a);u.isFoundDocument()!==d.isFoundDocument()&&(s=s.add(a)),u.isNoDocument()&&u.version.isEqual(he.min())?(e.removeEntry(a,u.readTime),o=o.insert(a,u)):!d.isValidDocument()||u.version.compareTo(d.version)>0||u.version.compareTo(d.version)===0&&d.hasPendingWrites?(e.addEntry(u),o=o.insert(a,u)):te(Ig,"Ignoring outdated watch update for ",a,". Current version:",d.version," Watch version:",u.version)}),{qs:o,Qs:s}})}function TV(t,e){const n=fe(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=mg),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function SV(t,e){const n=fe(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return n.Ti.getTargetData(r,e).next(i=>i?(s=i,q.resolve(s)):n.Ti.allocateTargetId(r).next(o=>(s=new jr(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Ti.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=n.xs.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.xs=n.xs.insert(r.targetId,r),n.Os.set(e,r.targetId)),r})}async function kp(t,e,n){const r=fe(t),s=r.xs.get(e),i=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",i,o=>r.persistence.referenceDelegate.removeTarget(o,s))}catch(o){if(!To(o))throw o;te(Ig,`Failed to update sequence numbers for target ${e}: ${o}`)}r.xs=r.xs.remove(e),r.Os.delete(s.target)}function z0(t,e,n){const r=fe(t);let s=he.min(),i=xe();return r.persistence.runTransaction("Execute query","readwrite",o=>function(u,d,h){const p=fe(u),g=p.Os.get(h);return g!==void 0?q.resolve(p.xs.get(g)):p.Ti.getTargetData(d,h)}(r,o,zn(e)).next(a=>{if(a)return s=a.lastLimboFreeSnapshotVersion,r.Ti.getMatchingKeysForTargetId(o,a.targetId).next(u=>{i=u})}).next(()=>r.Ms.getDocumentsMatchingQuery(o,e,n?s:he.min(),n?i:xe())).next(a=>(bV(r,dO(e),a),{documents:a,$s:i})))}function bV(t,e,n){let r=t.Ns.get(e)||he.min();n.forEach((s,i)=>{i.readTime.compareTo(r)>0&&(r=i.readTime)}),t.Ns.set(e,r)}class U0{constructor(){this.activeTargetIds=vO()}js(e){this.activeTargetIds=this.activeTargetIds.add(e)}Hs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}zs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class CV{constructor(){this.xo=new U0,this.Oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.xo.js(e),this.Oo[e]||"not-current"}updateQueryState(e,n,r){this.Oo[e]=n}removeLocalQueryTarget(e){this.xo.Hs(e)}isLocalQueryTarget(e){return this.xo.activeTargetIds.has(e)}clearQueryState(e){delete this.Oo[e]}getAllActiveQueryTargets(){return this.xo.activeTargetIds}isActiveQueryTarget(e){return this.xo.activeTargetIds.has(e)}start(){return this.xo=new U0,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NV{No(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $0="ConnectivityMonitor";class B0{constructor(){this.Bo=()=>this.Lo(),this.ko=()=>this.qo(),this.Qo=[],this.$o()}No(e){this.Qo.push(e)}shutdown(){window.removeEventListener("online",this.Bo),window.removeEventListener("offline",this.ko)}$o(){window.addEventListener("online",this.Bo),window.addEventListener("offline",this.ko)}Lo(){te($0,"Network connectivity changed: AVAILABLE");for(const e of this.Qo)e(0)}qo(){te($0,"Network connectivity changed: UNAVAILABLE");for(const e of this.Qo)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let dc=null;function Pp(){return dc===null?dc=function(){return 268435456+Math.round(2147483648*Math.random())}():dc++,"0x"+dc.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yh="RestConnection",IV={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class RV{get Uo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Ko=n+"://"+e.host,this.Wo=`projects/${r}/databases/${s}`,this.Go=this.databaseId.database===gu?`project_id=${r}`:`project_id=${r}&database_id=${s}`}zo(e,n,r,s,i){const o=Pp(),a=this.jo(e,n.toUriEncodedString());te(Yh,`Sending RPC '${e}' ${o}:`,a,r);const u={"google-cloud-resource-prefix":this.Wo,"x-goog-request-params":this.Go};this.Ho(u,s,i);const{host:d}=new URL(a),h=dg(d);return this.Jo(e,a,u,r,h).then(p=>(te(Yh,`Received RPC '${e}' ${o}: `,p),p),p=>{throw to(Yh,`RPC '${e}' ${o} failed with error: `,p,"url: ",a,"request:",r),p})}Yo(e,n,r,s,i,o){return this.zo(e,n,r,s,i)}Ho(e,n,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+_o}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((s,i)=>e[i]=s),r&&r.headers.forEach((s,i)=>e[i]=s)}jo(e,n){const r=IV[e];return`${this.Ko}/v1/${n}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AV{constructor(e){this.Zo=e.Zo,this.Xo=e.Xo}e_(e){this.t_=e}n_(e){this.r_=e}i_(e){this.s_=e}onMessage(e){this.o_=e}close(){this.Xo()}send(e){this.Zo(e)}__(){this.t_()}a_(){this.r_()}u_(e){this.s_(e)}c_(e){this.o_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _t="WebChannelConnection";class kV extends RV{constructor(e){super(e),this.l_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,r,s,i){const o=Pp();return new Promise((a,u)=>{const d=new SS;d.setWithCredentials(!0),d.listenOnce(bS.COMPLETE,()=>{try{switch(d.getLastErrorCode()){case Rc.NO_ERROR:const p=d.getResponseJson();te(_t,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(p)),a(p);break;case Rc.TIMEOUT:te(_t,`RPC '${e}' ${o} timed out`),u(new ne(H.DEADLINE_EXCEEDED,"Request time out"));break;case Rc.HTTP_ERROR:const g=d.getStatus();if(te(_t,`RPC '${e}' ${o} failed with status:`,g,"response text:",d.getResponseText()),g>0){let w=d.getResponseJson();Array.isArray(w)&&(w=w[0]);const C=w==null?void 0:w.error;if(C&&C.status&&C.message){const x=function(_){const y=_.toLowerCase().replace(/_/g,"-");return Object.values(H).indexOf(y)>=0?y:H.UNKNOWN}(C.status);u(new ne(x,C.message))}else u(new ne(H.UNKNOWN,"Server responded with status "+d.getStatus()))}else u(new ne(H.UNAVAILABLE,"Connection failed."));break;default:ae(9055,{h_:e,streamId:o,P_:d.getLastErrorCode(),T_:d.getLastError()})}}finally{te(_t,`RPC '${e}' ${o} completed.`)}});const h=JSON.stringify(s);te(_t,`RPC '${e}' ${o} sending request:`,s),d.send(n,"POST",h,r,15)})}I_(e,n,r){const s=Pp(),i=[this.Ko,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=IS(),a=NS(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},d=this.longPollingOptions.timeoutSeconds;d!==void 0&&(u.longPollingTimeout=Math.round(1e3*d)),this.useFetchStreams&&(u.useFetchStreams=!0),this.Ho(u.initMessageHeaders,n,r),u.encodeInitMessageHeaders=!0;const h=i.join("");te(_t,`Creating RPC '${e}' stream ${s}: ${h}`,u);const p=o.createWebChannel(h,u);this.E_(p);let g=!1,w=!1;const C=new AV({Zo:T=>{w?te(_t,`Not sending because RPC '${e}' stream ${s} is closed:`,T):(g||(te(_t,`Opening RPC '${e}' stream ${s} transport.`),p.open(),g=!0),te(_t,`RPC '${e}' stream ${s} sending:`,T),p.send(T))},Xo:()=>p.close()}),x=(T,_,y)=>{T.listen(_,E=>{try{y(E)}catch(k){setTimeout(()=>{throw k},0)}})};return x(p,ta.EventType.OPEN,()=>{w||(te(_t,`RPC '${e}' stream ${s} transport opened.`),C.__())}),x(p,ta.EventType.CLOSE,()=>{w||(w=!0,te(_t,`RPC '${e}' stream ${s} transport closed`),C.u_(),this.d_(p))}),x(p,ta.EventType.ERROR,T=>{w||(w=!0,to(_t,`RPC '${e}' stream ${s} transport errored. Name:`,T.name,"Message:",T.message),C.u_(new ne(H.UNAVAILABLE,"The operation could not be completed")))}),x(p,ta.EventType.MESSAGE,T=>{var _;if(!w){const y=T.data[0];Ie(!!y,16349);const E=y,k=(E==null?void 0:E.error)||((_=E[0])===null||_===void 0?void 0:_.error);if(k){te(_t,`RPC '${e}' stream ${s} received error:`,k);const M=k.status;let D=function(I){const R=Xe[I];if(R!==void 0)return lb(R)}(M),b=k.message;D===void 0&&(D=H.INTERNAL,b="Unknown error status: "+M+" with message "+k.message),w=!0,C.u_(new ne(D,b)),p.close()}else te(_t,`RPC '${e}' stream ${s} received:`,y),C.c_(y)}}),x(a,CS.STAT_EVENT,T=>{T.stat===wp.PROXY?te(_t,`RPC '${e}' stream ${s} detected buffering proxy`):T.stat===wp.NOPROXY&&te(_t,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{C.a_()},0),C}terminate(){this.l_.forEach(e=>e.close()),this.l_=[]}E_(e){this.l_.push(e)}d_(e){this.l_=this.l_.filter(n=>n===e)}}function Xh(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _d(t){return new MO(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eb{constructor(e,n,r=1e3,s=1.5,i=6e4){this.xi=e,this.timerId=n,this.A_=r,this.R_=s,this.V_=i,this.m_=0,this.f_=null,this.g_=Date.now(),this.reset()}reset(){this.m_=0}p_(){this.m_=this.V_}y_(e){this.cancel();const n=Math.floor(this.m_+this.w_()),r=Math.max(0,Date.now()-this.g_),s=Math.max(0,n-r);s>0&&te("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.m_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.f_=this.xi.enqueueAfterDelay(this.timerId,s,()=>(this.g_=Date.now(),e())),this.m_*=this.R_,this.m_<this.A_&&(this.m_=this.A_),this.m_>this.V_&&(this.m_=this.V_)}b_(){this.f_!==null&&(this.f_.skipDelay(),this.f_=null)}cancel(){this.f_!==null&&(this.f_.cancel(),this.f_=null)}w_(){return(Math.random()-.5)*this.m_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H0="PersistentStream";class Tb{constructor(e,n,r,s,i,o,a,u){this.xi=e,this.S_=r,this.D_=s,this.connection=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=u,this.state=0,this.v_=0,this.C_=null,this.F_=null,this.stream=null,this.M_=0,this.x_=new Eb(e,n)}O_(){return this.state===1||this.state===5||this.N_()}N_(){return this.state===2||this.state===3}start(){this.M_=0,this.state!==4?this.auth():this.B_()}async stop(){this.O_()&&await this.close(0)}L_(){this.state=0,this.x_.reset()}k_(){this.N_()&&this.C_===null&&(this.C_=this.xi.enqueueAfterDelay(this.S_,6e4,()=>this.q_()))}Q_(e){this.U_(),this.stream.send(e)}async q_(){if(this.N_())return this.close(0)}U_(){this.C_&&(this.C_.cancel(),this.C_=null)}K_(){this.F_&&(this.F_.cancel(),this.F_=null)}async close(e,n){this.U_(),this.K_(),this.x_.cancel(),this.v_++,e!==4?this.x_.reset():n&&n.code===H.RESOURCE_EXHAUSTED?(dr(n.toString()),dr("Using maximum backoff delay to prevent overloading the backend."),this.x_.p_()):n&&n.code===H.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.W_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.i_(n)}W_(){}auth(){this.state=1;const e=this.G_(this.v_),n=this.v_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.v_===n&&this.z_(r,s)},r=>{e(()=>{const s=new ne(H.UNKNOWN,"Fetching auth token failed: "+r.message);return this.j_(s)})})}z_(e,n){const r=this.G_(this.v_);this.stream=this.H_(e,n),this.stream.e_(()=>{r(()=>this.listener.e_())}),this.stream.n_(()=>{r(()=>(this.state=2,this.F_=this.xi.enqueueAfterDelay(this.D_,1e4,()=>(this.N_()&&(this.state=3),Promise.resolve())),this.listener.n_()))}),this.stream.i_(s=>{r(()=>this.j_(s))}),this.stream.onMessage(s=>{r(()=>++this.M_==1?this.J_(s):this.onNext(s))})}B_(){this.state=5,this.x_.y_(async()=>{this.state=0,this.start()})}j_(e){return te(H0,`close with error: ${e}`),this.stream=null,this.close(4,e)}G_(e){return n=>{this.xi.enqueueAndForget(()=>this.v_===e?n():(te(H0,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class PV extends Tb{constructor(e,n,r,s,i,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}H_(e,n){return this.connection.I_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.x_.reset();const n=LO(this.serializer,e),r=function(i){if(!("targetChange"in i))return he.min();const o=i.targetChange;return o.targetIds&&o.targetIds.length?he.min():o.readTime?Un(o.readTime):he.min()}(e);return this.listener.Y_(n,r)}Z_(e){const n={};n.database=Ap(this.serializer),n.addTarget=function(i,o){let a;const u=o.target;if(a=bp(u)?{documents:UO(i,u)}:{query:$O(i,u).gt},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=db(i,o.resumeToken);const d=Np(i,o.expectedCount);d!==null&&(a.expectedCount=d)}else if(o.snapshotVersion.compareTo(he.min())>0){a.readTime=Eu(i,o.snapshotVersion.toTimestamp());const d=Np(i,o.expectedCount);d!==null&&(a.expectedCount=d)}return a}(this.serializer,e);const r=HO(this.serializer,e);r&&(n.labels=r),this.Q_(n)}X_(e){const n={};n.database=Ap(this.serializer),n.removeTarget=e,this.Q_(n)}}class jV extends Tb{constructor(e,n,r,s,i,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}get ea(){return this.M_>0}start(){this.lastStreamToken=void 0,super.start()}W_(){this.ea&&this.ta([])}H_(e,n){return this.connection.I_("Write",e,n)}J_(e){return Ie(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Ie(!e.writeResults||e.writeResults.length===0,55816),this.listener.na()}onNext(e){Ie(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.x_.reset();const n=zO(e.writeResults,e.commitTime),r=Un(e.commitTime);return this.listener.ra(r,n)}ia(){const e={};e.database=Ap(this.serializer),this.Q_(e)}ta(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>FO(this.serializer,r))};this.Q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DV{}class MV extends DV{constructor(e,n,r,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.sa=!1}oa(){if(this.sa)throw new ne(H.FAILED_PRECONDITION,"The client has already been terminated.")}zo(e,n,r,s){return this.oa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,o])=>this.connection.zo(e,Ip(n,r),s,i,o)).catch(i=>{throw i.name==="FirebaseError"?(i.code===H.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new ne(H.UNKNOWN,i.toString())})}Yo(e,n,r,s,i){return this.oa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Yo(e,Ip(n,r),s,o,a,i)).catch(o=>{throw o.name==="FirebaseError"?(o.code===H.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new ne(H.UNKNOWN,o.toString())})}terminate(){this.sa=!0,this.connection.terminate()}}class OV{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this._a=0,this.aa=null,this.ua=!0}ca(){this._a===0&&(this.la("Unknown"),this.aa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.aa=null,this.ha("Backend didn't respond within 10 seconds."),this.la("Offline"),Promise.resolve())))}Pa(e){this.state==="Online"?this.la("Unknown"):(this._a++,this._a>=1&&(this.Ta(),this.ha(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.la("Offline")))}set(e){this.Ta(),this._a=0,e==="Online"&&(this.ua=!1),this.la(e)}la(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ha(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.ua?(dr(n),this.ua=!1):te("OnlineStateTracker",n)}Ta(){this.aa!==null&&(this.aa.cancel(),this.aa=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qs="RemoteStore";class VV{constructor(e,n,r,s,i){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Ia=[],this.Ea=new Map,this.da=new Set,this.Aa=[],this.Ra=i,this.Ra.No(o=>{r.enqueueAndForget(async()=>{ti(this)&&(te(Qs,"Restarting streams for network reachability change."),await async function(u){const d=fe(u);d.da.add(4),await gl(d),d.Va.set("Unknown"),d.da.delete(4),await Ed(d)}(this))})}),this.Va=new OV(r,s)}}async function Ed(t){if(ti(t))for(const e of t.Aa)await e(!0)}async function gl(t){for(const e of t.Aa)await e(!1)}function Sb(t,e){const n=fe(t);n.Ea.has(e.targetId)||(n.Ea.set(e.targetId,e),Pg(n)?kg(n):bo(n).N_()&&Ag(n,e))}function Rg(t,e){const n=fe(t),r=bo(n);n.Ea.delete(e),r.N_()&&bb(n,e),n.Ea.size===0&&(r.N_()?r.k_():ti(n)&&n.Va.set("Unknown"))}function Ag(t,e){if(t.ma.Ke(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(he.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}bo(t).Z_(e)}function bb(t,e){t.ma.Ke(e),bo(t).X_(e)}function kg(t){t.ma=new kO({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),Rt:e=>t.Ea.get(e)||null,Pt:()=>t.datastore.serializer.databaseId}),bo(t).start(),t.Va.ca()}function Pg(t){return ti(t)&&!bo(t).O_()&&t.Ea.size>0}function ti(t){return fe(t).da.size===0}function Cb(t){t.ma=void 0}async function LV(t){t.Va.set("Online")}async function FV(t){t.Ea.forEach((e,n)=>{Ag(t,e)})}async function zV(t,e){Cb(t),Pg(t)?(t.Va.Pa(e),kg(t)):t.Va.set("Unknown")}async function UV(t,e,n){if(t.Va.set("Online"),e instanceof ub&&e.state===2&&e.cause)try{await async function(s,i){const o=i.cause;for(const a of i.targetIds)s.Ea.has(a)&&(await s.remoteSyncer.rejectListen(a,o),s.Ea.delete(a),s.ma.removeTarget(a))}(t,e)}catch(r){te(Qs,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Su(t,r)}else if(e instanceof jc?t.ma.Xe(e):e instanceof cb?t.ma.ot(e):t.ma.nt(e),!n.isEqual(he.min()))try{const r=await _b(t.localStore);n.compareTo(r)>=0&&await function(i,o){const a=i.ma.It(o);return a.targetChanges.forEach((u,d)=>{if(u.resumeToken.approximateByteSize()>0){const h=i.Ea.get(d);h&&i.Ea.set(d,h.withResumeToken(u.resumeToken,o))}}),a.targetMismatches.forEach((u,d)=>{const h=i.Ea.get(u);if(!h)return;i.Ea.set(u,h.withResumeToken(mt.EMPTY_BYTE_STRING,h.snapshotVersion)),bb(i,u);const p=new jr(h.target,u,d,h.sequenceNumber);Ag(i,p)}),i.remoteSyncer.applyRemoteEvent(a)}(t,n)}catch(r){te(Qs,"Failed to raise snapshot:",r),await Su(t,r)}}async function Su(t,e,n){if(!To(e))throw e;t.da.add(1),await gl(t),t.Va.set("Offline"),n||(n=()=>_b(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{te(Qs,"Retrying IndexedDB access"),await n(),t.da.delete(1),await Ed(t)})}function Nb(t,e){return e().catch(n=>Su(t,n,e))}async function Td(t){const e=fe(t),n=es(e);let r=e.Ia.length>0?e.Ia[e.Ia.length-1].batchId:mg;for(;$V(e);)try{const s=await TV(e.localStore,r);if(s===null){e.Ia.length===0&&n.k_();break}r=s.batchId,BV(e,s)}catch(s){await Su(e,s)}Ib(e)&&Rb(e)}function $V(t){return ti(t)&&t.Ia.length<10}function BV(t,e){t.Ia.push(e);const n=es(t);n.N_()&&n.ea&&n.ta(e.mutations)}function Ib(t){return ti(t)&&!es(t).O_()&&t.Ia.length>0}function Rb(t){es(t).start()}async function HV(t){es(t).ia()}async function WV(t){const e=es(t);for(const n of t.Ia)e.ta(n.mutations)}async function qV(t,e,n){const r=t.Ia.shift(),s=Eg.from(r,e,n);await Nb(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await Td(t)}async function KV(t,e){e&&es(t).ea&&await async function(r,s){if(function(o){return RO(o)&&o!==H.ABORTED}(s.code)){const i=r.Ia.shift();es(r).L_(),await Nb(r,()=>r.remoteSyncer.rejectFailedWrite(i.batchId,s)),await Td(r)}}(t,e),Ib(t)&&Rb(t)}async function W0(t,e){const n=fe(t);n.asyncQueue.verifyOperationInProgress(),te(Qs,"RemoteStore received new credentials");const r=ti(n);n.da.add(3),await gl(n),r&&n.Va.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.da.delete(3),await Ed(n)}async function GV(t,e){const n=fe(t);e?(n.da.delete(2),await Ed(n)):e||(n.da.add(2),await gl(n),n.Va.set("Unknown"))}function bo(t){return t.fa||(t.fa=function(n,r,s){const i=fe(n);return i.oa(),new PV(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{e_:LV.bind(null,t),n_:FV.bind(null,t),i_:zV.bind(null,t),Y_:UV.bind(null,t)}),t.Aa.push(async e=>{e?(t.fa.L_(),Pg(t)?kg(t):t.Va.set("Unknown")):(await t.fa.stop(),Cb(t))})),t.fa}function es(t){return t.ga||(t.ga=function(n,r,s){const i=fe(n);return i.oa(),new jV(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{e_:()=>Promise.resolve(),n_:HV.bind(null,t),i_:KV.bind(null,t),na:WV.bind(null,t),ra:qV.bind(null,t)}),t.Aa.push(async e=>{e?(t.ga.L_(),await Td(t)):(await t.ga.stop(),t.Ia.length>0&&(te(Qs,`Stopping write stream with ${t.Ia.length} pending writes`),t.Ia=[]))})),t.ga}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jg{constructor(e,n,r,s,i){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=i,this.deferred=new rr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,s,i){const o=Date.now()+r,a=new jg(e,n,o,s,i);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ne(H.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Dg(t,e){if(dr("AsyncQueue",`${e}: ${t}`),To(t))return new ne(H.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zi{static emptySet(e){return new zi(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||ie.comparator(n.key,r.key):(n,r)=>ie.comparator(n.key,r.key),this.keyedMap=na(),this.sortedSet=new We(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof zi)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(!s.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new zi;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q0{constructor(){this.pa=new We(ie.comparator)}track(e){const n=e.doc.key,r=this.pa.get(n);r?e.type!==0&&r.type===3?this.pa=this.pa.insert(n,e):e.type===3&&r.type!==1?this.pa=this.pa.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.pa=this.pa.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.pa=this.pa.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.pa=this.pa.remove(n):e.type===1&&r.type===2?this.pa=this.pa.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.pa=this.pa.insert(n,{type:2,doc:e.doc}):ae(63341,{Vt:e,ya:r}):this.pa=this.pa.insert(n,e)}wa(){const e=[];return this.pa.inorderTraversal((n,r)=>{e.push(r)}),e}}class oo{constructor(e,n,r,s,i,o,a,u,d){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=u,this.hasCachedResults=d}static fromInitialDocuments(e,n,r,s,i){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new oo(e,n,zi.emptySet(n),o,r,s,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&gd(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QV{constructor(){this.ba=void 0,this.Sa=[]}Da(){return this.Sa.some(e=>e.va())}}class YV{constructor(){this.queries=K0(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,r){const s=fe(n),i=s.queries;s.queries=K0(),i.forEach((o,a)=>{for(const u of a.Sa)u.onError(r)})})(this,new ne(H.ABORTED,"Firestore shutting down"))}}function K0(){return new ei(t=>YS(t),gd)}async function Mg(t,e){const n=fe(t);let r=3;const s=e.query;let i=n.queries.get(s);i?!i.Da()&&e.va()&&(r=2):(i=new QV,r=e.va()?0:1);try{switch(r){case 0:i.ba=await n.onListen(s,!0);break;case 1:i.ba=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(o){const a=Dg(o,`Initialization of query '${hi(e.query)}' failed`);return void e.onError(a)}n.queries.set(s,i),i.Sa.push(e),e.Fa(n.onlineState),i.ba&&e.Ma(i.ba)&&Vg(n)}async function Og(t,e){const n=fe(t),r=e.query;let s=3;const i=n.queries.get(r);if(i){const o=i.Sa.indexOf(e);o>=0&&(i.Sa.splice(o,1),i.Sa.length===0?s=e.va()?0:1:!i.Da()&&e.va()&&(s=2))}switch(s){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function XV(t,e){const n=fe(t);let r=!1;for(const s of e){const i=s.query,o=n.queries.get(i);if(o){for(const a of o.Sa)a.Ma(s)&&(r=!0);o.ba=s}}r&&Vg(n)}function JV(t,e,n){const r=fe(t),s=r.queries.get(e);if(s)for(const i of s.Sa)i.onError(n);r.queries.delete(e)}function Vg(t){t.Ca.forEach(e=>{e.next()})}var jp,G0;(G0=jp||(jp={})).xa="default",G0.Cache="cache";class Lg{constructor(e,n,r){this.query=e,this.Oa=n,this.Na=!1,this.Ba=null,this.onlineState="Unknown",this.options=r||{}}Ma(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new oo(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Na?this.La(e)&&(this.Oa.next(e),n=!0):this.ka(e,this.onlineState)&&(this.qa(e),n=!0),this.Ba=e,n}onError(e){this.Oa.error(e)}Fa(e){this.onlineState=e;let n=!1;return this.Ba&&!this.Na&&this.ka(this.Ba,e)&&(this.qa(this.Ba),n=!0),n}ka(e,n){if(!e.fromCache||!this.va())return!0;const r=n!=="Offline";return(!this.options.Qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}La(e){if(e.docChanges.length>0)return!0;const n=this.Ba&&this.Ba.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}qa(e){e=oo.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Na=!0,this.Oa.next(e)}va(){return this.options.source!==jp.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ab{constructor(e){this.key=e}}class kb{constructor(e){this.key=e}}class ZV{constructor(e,n){this.query=e,this.Ha=n,this.Ja=null,this.hasCachedResults=!1,this.current=!1,this.Ya=xe(),this.mutatedKeys=xe(),this.Za=XS(e),this.Xa=new zi(this.Za)}get eu(){return this.Ha}tu(e,n){const r=n?n.nu:new q0,s=n?n.Xa:this.Xa;let i=n?n.mutatedKeys:this.mutatedKeys,o=s,a=!1;const u=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,d=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((h,p)=>{const g=s.get(h),w=vd(this.query,p)?p:null,C=!!g&&this.mutatedKeys.has(g.key),x=!!w&&(w.hasLocalMutations||this.mutatedKeys.has(w.key)&&w.hasCommittedMutations);let T=!1;g&&w?g.data.isEqual(w.data)?C!==x&&(r.track({type:3,doc:w}),T=!0):this.ru(g,w)||(r.track({type:2,doc:w}),T=!0,(u&&this.Za(w,u)>0||d&&this.Za(w,d)<0)&&(a=!0)):!g&&w?(r.track({type:0,doc:w}),T=!0):g&&!w&&(r.track({type:1,doc:g}),T=!0,(u||d)&&(a=!0)),T&&(w?(o=o.add(w),i=x?i.add(h):i.delete(h)):(o=o.delete(h),i=i.delete(h)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const h=this.query.limitType==="F"?o.last():o.first();o=o.delete(h.key),i=i.delete(h.key),r.track({type:1,doc:h})}return{Xa:o,nu:r,Cs:a,mutatedKeys:i}}ru(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,s){const i=this.Xa;this.Xa=e.Xa,this.mutatedKeys=e.mutatedKeys;const o=e.nu.wa();o.sort((h,p)=>function(w,C){const x=T=>{switch(T){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ae(20277,{Vt:T})}};return x(w)-x(C)}(h.type,p.type)||this.Za(h.doc,p.doc)),this.iu(r),s=s!=null&&s;const a=n&&!s?this.su():[],u=this.Ya.size===0&&this.current&&!s?1:0,d=u!==this.Ja;return this.Ja=u,o.length!==0||d?{snapshot:new oo(this.query,e.Xa,i,o,e.mutatedKeys,u===0,d,!1,!!r&&r.resumeToken.approximateByteSize()>0),ou:a}:{ou:a}}Fa(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Xa:this.Xa,nu:new q0,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{ou:[]}}_u(e){return!this.Ha.has(e)&&!!this.Xa.has(e)&&!this.Xa.get(e).hasLocalMutations}iu(e){e&&(e.addedDocuments.forEach(n=>this.Ha=this.Ha.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ha=this.Ha.delete(n)),this.current=e.current)}su(){if(!this.current)return[];const e=this.Ya;this.Ya=xe(),this.Xa.forEach(r=>{this._u(r.key)&&(this.Ya=this.Ya.add(r.key))});const n=[];return e.forEach(r=>{this.Ya.has(r)||n.push(new kb(r))}),this.Ya.forEach(r=>{e.has(r)||n.push(new Ab(r))}),n}au(e){this.Ha=e.$s,this.Ya=xe();const n=this.tu(e.documents);return this.applyChanges(n,!0)}uu(){return oo.fromInitialDocuments(this.query,this.Xa,this.mutatedKeys,this.Ja===0,this.hasCachedResults)}}const Fg="SyncEngine";class e3{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class t3{constructor(e){this.key=e,this.cu=!1}}class n3{constructor(e,n,r,s,i,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.lu={},this.hu=new ei(a=>YS(a),gd),this.Pu=new Map,this.Tu=new Set,this.Iu=new We(ie.comparator),this.Eu=new Map,this.du=new bg,this.Au={},this.Ru=new Map,this.Vu=io.lr(),this.onlineState="Unknown",this.mu=void 0}get isPrimaryClient(){return this.mu===!0}}async function r3(t,e,n=!0){const r=Vb(t);let s;const i=r.hu.get(e);return i?(r.sharedClientState.addLocalQueryTarget(i.targetId),s=i.view.uu()):s=await Pb(r,e,n,!0),s}async function s3(t,e){const n=Vb(t);await Pb(n,e,!0,!1)}async function Pb(t,e,n,r){const s=await SV(t.localStore,zn(e)),i=s.targetId,o=t.sharedClientState.addLocalQueryTarget(i,n);let a;return r&&(a=await i3(t,e,i,o==="current",s.resumeToken)),t.isPrimaryClient&&n&&Sb(t.remoteStore,s),a}async function i3(t,e,n,r,s){t.fu=(p,g,w)=>async function(x,T,_,y){let E=T.view.tu(_);E.Cs&&(E=await z0(x.localStore,T.query,!1).then(({documents:b})=>T.view.tu(b,E)));const k=y&&y.targetChanges.get(T.targetId),M=y&&y.targetMismatches.get(T.targetId)!=null,D=T.view.applyChanges(E,x.isPrimaryClient,k,M);return Y0(x,T.targetId,D.ou),D.snapshot}(t,p,g,w);const i=await z0(t.localStore,e,!0),o=new ZV(e,i.$s),a=o.tu(i.documents),u=ml.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",s),d=o.applyChanges(a,t.isPrimaryClient,u);Y0(t,n,d.ou);const h=new e3(e,n,o);return t.hu.set(e,h),t.Pu.has(n)?t.Pu.get(n).push(e):t.Pu.set(n,[e]),d.snapshot}async function o3(t,e,n){const r=fe(t),s=r.hu.get(e),i=r.Pu.get(s.targetId);if(i.length>1)return r.Pu.set(s.targetId,i.filter(o=>!gd(o,e))),void r.hu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await kp(r.localStore,s.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(s.targetId),n&&Rg(r.remoteStore,s.targetId),Dp(r,s.targetId)}).catch(Eo)):(Dp(r,s.targetId),await kp(r.localStore,s.targetId,!0))}async function a3(t,e){const n=fe(t),r=n.hu.get(e),s=n.Pu.get(r.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Rg(n.remoteStore,r.targetId))}async function l3(t,e,n){const r=m3(t);try{const s=await function(o,a){const u=fe(o),d=Ge.now(),h=a.reduce((w,C)=>w.add(C.key),xe());let p,g;return u.persistence.runTransaction("Locally write mutations","readwrite",w=>{let C=hr(),x=xe();return u.Bs.getEntries(w,h).next(T=>{C=T,C.forEach((_,y)=>{y.isValidDocument()||(x=x.add(_))})}).next(()=>u.localDocuments.getOverlayedDocuments(w,C)).next(T=>{p=T;const _=[];for(const y of a){const E=SO(y,p.get(y.key).overlayedDocument);E!=null&&_.push(new us(y.key,E,$S(E.value.mapValue),dn.exists(!0)))}return u.mutationQueue.addMutationBatch(w,d,_,a)}).next(T=>{g=T;const _=T.applyToLocalDocumentSet(p,x);return u.documentOverlayCache.saveOverlays(w,T.batchId,_)})}).then(()=>({batchId:g.batchId,changes:ZS(p)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(o,a,u){let d=o.Au[o.currentUser.toKey()];d||(d=new We(ge)),d=d.insert(a,u),o.Au[o.currentUser.toKey()]=d}(r,s.batchId,n),await vl(r,s.changes),await Td(r.remoteStore)}catch(s){const i=Dg(s,"Failed to persist write");n.reject(i)}}async function jb(t,e){const n=fe(t);try{const r=await _V(n.localStore,e);e.targetChanges.forEach((s,i)=>{const o=n.Eu.get(i);o&&(Ie(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1,22616),s.addedDocuments.size>0?o.cu=!0:s.modifiedDocuments.size>0?Ie(o.cu,14607):s.removedDocuments.size>0&&(Ie(o.cu,42227),o.cu=!1))}),await vl(n,r,e)}catch(r){await Eo(r)}}function Q0(t,e,n){const r=fe(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.hu.forEach((i,o)=>{const a=o.view.Fa(e);a.snapshot&&s.push(a.snapshot)}),function(o,a){const u=fe(o);u.onlineState=a;let d=!1;u.queries.forEach((h,p)=>{for(const g of p.Sa)g.Fa(a)&&(d=!0)}),d&&Vg(u)}(r.eventManager,e),s.length&&r.lu.Y_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function c3(t,e,n){const r=fe(t);r.sharedClientState.updateQueryState(e,"rejected",n);const s=r.Eu.get(e),i=s&&s.key;if(i){let o=new We(ie.comparator);o=o.insert(i,St.newNoDocument(i,he.min()));const a=xe().add(i),u=new wd(he.min(),new Map,new We(ge),o,a);await jb(r,u),r.Iu=r.Iu.remove(i),r.Eu.delete(e),zg(r)}else await kp(r.localStore,e,!1).then(()=>Dp(r,e,n)).catch(Eo)}async function u3(t,e){const n=fe(t),r=e.batch.batchId;try{const s=await wV(n.localStore,e);Mb(n,r,null),Db(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await vl(n,s)}catch(s){await Eo(s)}}async function d3(t,e,n){const r=fe(t);try{const s=await function(o,a){const u=fe(o);return u.persistence.runTransaction("Reject batch","readwrite-primary",d=>{let h;return u.mutationQueue.lookupMutationBatch(d,a).next(p=>(Ie(p!==null,37113),h=p.keys(),u.mutationQueue.removeMutationBatch(d,p))).next(()=>u.mutationQueue.performConsistencyCheck(d)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(d,h,a)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(d,h)).next(()=>u.localDocuments.getDocuments(d,h))})}(r.localStore,e);Mb(r,e,n),Db(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await vl(r,s)}catch(s){await Eo(s)}}function Db(t,e){(t.Ru.get(e)||[]).forEach(n=>{n.resolve()}),t.Ru.delete(e)}function Mb(t,e,n){const r=fe(t);let s=r.Au[r.currentUser.toKey()];if(s){const i=s.get(e);i&&(n?i.reject(n):i.resolve(),s=s.remove(e)),r.Au[r.currentUser.toKey()]=s}}function Dp(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Pu.get(e))t.hu.delete(r),n&&t.lu.gu(r,n);t.Pu.delete(e),t.isPrimaryClient&&t.du.Hr(e).forEach(r=>{t.du.containsKey(r)||Ob(t,r)})}function Ob(t,e){t.Tu.delete(e.path.canonicalString());const n=t.Iu.get(e);n!==null&&(Rg(t.remoteStore,n),t.Iu=t.Iu.remove(e),t.Eu.delete(n),zg(t))}function Y0(t,e,n){for(const r of n)r instanceof Ab?(t.du.addReference(r.key,e),h3(t,r)):r instanceof kb?(te(Fg,"Document no longer in limbo: "+r.key),t.du.removeReference(r.key,e),t.du.containsKey(r.key)||Ob(t,r.key)):ae(19791,{pu:r})}function h3(t,e){const n=e.key,r=n.path.canonicalString();t.Iu.get(n)||t.Tu.has(r)||(te(Fg,"New document in limbo: "+n),t.Tu.add(r),zg(t))}function zg(t){for(;t.Tu.size>0&&t.Iu.size<t.maxConcurrentLimboResolutions;){const e=t.Tu.values().next().value;t.Tu.delete(e);const n=new ie(Oe.fromString(e)),r=t.Vu.next();t.Eu.set(r,new t3(n)),t.Iu=t.Iu.insert(n,r),Sb(t.remoteStore,new jr(zn(md(n.path)),r,"TargetPurposeLimboResolution",hd.le))}}async function vl(t,e,n){const r=fe(t),s=[],i=[],o=[];r.hu.isEmpty()||(r.hu.forEach((a,u)=>{o.push(r.fu(u,e,n).then(d=>{var h;if((d||n)&&r.isPrimaryClient){const p=d?!d.fromCache:(h=n==null?void 0:n.targetChanges.get(u.targetId))===null||h===void 0?void 0:h.current;r.sharedClientState.updateQueryState(u.targetId,p?"current":"not-current")}if(d){s.push(d);const p=Ng.Rs(u.targetId,d);i.push(p)}}))}),await Promise.all(o),r.lu.Y_(s),await async function(u,d){const h=fe(u);try{await h.persistence.runTransaction("notifyLocalViewChanges","readwrite",p=>q.forEach(d,g=>q.forEach(g.ds,w=>h.persistence.referenceDelegate.addReference(p,g.targetId,w)).next(()=>q.forEach(g.As,w=>h.persistence.referenceDelegate.removeReference(p,g.targetId,w)))))}catch(p){if(!To(p))throw p;te(Ig,"Failed to update sequence numbers: "+p)}for(const p of d){const g=p.targetId;if(!p.fromCache){const w=h.xs.get(g),C=w.snapshotVersion,x=w.withLastLimboFreeSnapshotVersion(C);h.xs=h.xs.insert(g,x)}}}(r.localStore,i))}async function f3(t,e){const n=fe(t);if(!n.currentUser.isEqual(e)){te(Fg,"User change. New user:",e.toKey());const r=await wb(n.localStore,e);n.currentUser=e,function(i,o){i.Ru.forEach(a=>{a.forEach(u=>{u.reject(new ne(H.CANCELLED,o))})}),i.Ru.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await vl(n,r.ks)}}function p3(t,e){const n=fe(t),r=n.Eu.get(e);if(r&&r.cu)return xe().add(r.key);{let s=xe();const i=n.Pu.get(e);if(!i)return s;for(const o of i){const a=n.hu.get(o);s=s.unionWith(a.view.eu)}return s}}function Vb(t){const e=fe(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=jb.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=p3.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=c3.bind(null,e),e.lu.Y_=XV.bind(null,e.eventManager),e.lu.gu=JV.bind(null,e.eventManager),e}function m3(t){const e=fe(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=u3.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=d3.bind(null,e),e}class bu{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=_d(e.databaseInfo.databaseId),this.sharedClientState=this.bu(e),this.persistence=this.Su(e),await this.persistence.start(),this.localStore=this.Du(e),this.gcScheduler=this.vu(e,this.localStore),this.indexBackfillerScheduler=this.Cu(e,this.localStore)}vu(e,n){return null}Cu(e,n){return null}Du(e){return xV(this.persistence,new gV,e.initialUser,this.serializer)}Su(e){return new xb(Cg.fi,this.serializer)}bu(e){return new CV}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}bu.provider={build:()=>new bu};class g3 extends bu{constructor(e){super(),this.cacheSizeBytes=e}vu(e,n){Ie(this.persistence.referenceDelegate instanceof Tu,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new tV(r,e.asyncQueue,n)}Su(e){const n=this.cacheSizeBytes!==void 0?Mt.withCacheSize(this.cacheSizeBytes):Mt.DEFAULT;return new xb(r=>Tu.fi(r,n),this.serializer)}}class Mp{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>Q0(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=f3.bind(null,this.syncEngine),await GV(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new YV}()}createDatastore(e){const n=_d(e.databaseInfo.databaseId),r=function(i){return new kV(i)}(e.databaseInfo);return function(i,o,a,u){return new MV(i,o,a,u)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,s,i,o,a){return new VV(r,s,i,o,a)}(this.localStore,this.datastore,e.asyncQueue,n=>Q0(this.syncEngine,n,0),function(){return B0.C()?new B0:new NV}())}createSyncEngine(e,n){return function(s,i,o,a,u,d,h){const p=new n3(s,i,o,a,u,d);return h&&(p.mu=!0),p}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(s){const i=fe(s);te(Qs,"RemoteStore shutting down."),i.da.add(5),await gl(i),i.Ra.shutdown(),i.Va.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}Mp.provider={build:()=>new Mp};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ug{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Mu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Mu(this.observer.error,e):dr("Uncaught Error in snapshot listener:",e.toString()))}xu(){this.muted=!0}Mu(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ts="FirestoreClient";class v3{constructor(e,n,r,s,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=s,this.user=Et.UNAUTHENTICATED,this.clientId=PS.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(r,async o=>{te(ts,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(te(ts,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new rr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=Dg(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function Jh(t,e){t.asyncQueue.verifyOperationInProgress(),te(ts,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async s=>{r.isEqual(s)||(await wb(e.localStore,s),r=s)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function X0(t,e){t.asyncQueue.verifyOperationInProgress();const n=await y3(t);te(ts,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>W0(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,s)=>W0(e.remoteStore,s)),t._onlineComponents=e}async function y3(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){te(ts,"Using user provided OfflineComponentProvider");try{await Jh(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(s){return s.name==="FirebaseError"?s.code===H.FAILED_PRECONDITION||s.code===H.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(n))throw n;to("Error using user provided cache. Falling back to memory cache: "+n),await Jh(t,new bu)}}else te(ts,"Using default OfflineComponentProvider"),await Jh(t,new g3(void 0));return t._offlineComponents}async function Lb(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(te(ts,"Using user provided OnlineComponentProvider"),await X0(t,t._uninitializedComponentsProvider._online)):(te(ts,"Using default OnlineComponentProvider"),await X0(t,new Mp))),t._onlineComponents}function x3(t){return Lb(t).then(e=>e.syncEngine)}async function Cu(t){const e=await Lb(t),n=e.eventManager;return n.onListen=r3.bind(null,e.syncEngine),n.onUnlisten=o3.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=s3.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=a3.bind(null,e.syncEngine),n}function w3(t,e,n={}){const r=new rr;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,a,u,d){const h=new Ug({next:g=>{h.xu(),o.enqueueAndForget(()=>Og(i,p));const w=g.docs.has(a);!w&&g.fromCache?d.reject(new ne(H.UNAVAILABLE,"Failed to get document because the client is offline.")):w&&g.fromCache&&u&&u.source==="server"?d.reject(new ne(H.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):d.resolve(g)},error:g=>d.reject(g)}),p=new Lg(md(a.path),h,{includeMetadataChanges:!0,Qa:!0});return Mg(i,p)}(await Cu(t),t.asyncQueue,e,n,r)),r.promise}function _3(t,e,n={}){const r=new rr;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,a,u,d){const h=new Ug({next:g=>{h.xu(),o.enqueueAndForget(()=>Og(i,p)),g.fromCache&&u.source==="server"?d.reject(new ne(H.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):d.resolve(g)},error:g=>d.reject(g)}),p=new Lg(a,h,{includeMetadataChanges:!0,Qa:!0});return Mg(i,p)}(await Cu(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fb(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J0=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zb(t,e,n){if(!n)throw new ne(H.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function E3(t,e,n,r){if(e===!0&&r===!0)throw new ne(H.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function Z0(t){if(!ie.isDocumentKey(t))throw new ne(H.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function ew(t){if(ie.isDocumentKey(t))throw new ne(H.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function Sd(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":ae(12329,{type:typeof t})}function Ht(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new ne(H.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Sd(t);throw new ne(H.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ub="firestore.googleapis.com",tw=!0;class nw{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new ne(H.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=Ub,this.ssl=tw}else this.host=e.host,this.ssl=(n=e.ssl)!==null&&n!==void 0?n:tw;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=yb;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<ZO)throw new ne(H.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}E3("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Fb((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new ne(H.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new ne(H.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new ne(H.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,s){return r.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class bd{constructor(e,n,r,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new nw({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ne(H.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ne(H.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new nw(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new AM;switch(r.type){case"firstParty":return new DM(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new ne(H.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=J0.get(n);r&&(te("ComponentProvider","Removing Datastore"),J0.delete(n),r.terminate())}(this),Promise.resolve()}}function T3(t,e,n,r={}){var s;t=Ht(t,bd);const i=dg(e),o=t._getSettings(),a=Object.assign(Object.assign({},o),{emulatorOptions:t._getEmulatorOptions()}),u=`${e}:${n}`;i&&(nD(`https://${u}`),oD("Firestore",!0)),o.host!==Ub&&o.host!==u&&to("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const d=Object.assign(Object.assign({},o),{host:u,ssl:i,emulatorOptions:r});if(!fu(d,a)&&(t._setSettings(d),r.mockUserToken)){let h,p;if(typeof r.mockUserToken=="string")h=r.mockUserToken,p=Et.MOCK_USER;else{h=rD(r.mockUserToken,(s=t._app)===null||s===void 0?void 0:s.options.projectId);const g=r.mockUserToken.sub||r.mockUserToken.user_id;if(!g)throw new ne(H.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");p=new Et(g)}t._authCredentials=new kM(new AS(h,p))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gr{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new gr(this.firestore,e,this._query)}}class bt{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Wr(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new bt(this.firestore,e,this._key)}}class Wr extends gr{constructor(e,n,r){super(e,n,md(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new bt(this.firestore,null,new ie(e))}withConverter(e){return new Wr(this.firestore,e,this._path)}}function Op(t,e,...n){if(t=Bn(t),zb("collection","path",e),t instanceof bd){const r=Oe.fromString(e,...n);return ew(r),new Wr(t,null,r)}{if(!(t instanceof bt||t instanceof Wr))throw new ne(H.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Oe.fromString(e,...n));return ew(r),new Wr(t.firestore,null,r)}}function Ri(t,e,...n){if(t=Bn(t),arguments.length===1&&(e=PS.newId()),zb("doc","path",e),t instanceof bd){const r=Oe.fromString(e,...n);return Z0(r),new bt(t,null,new ie(r))}{if(!(t instanceof bt||t instanceof Wr))throw new ne(H.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Oe.fromString(e,...n));return Z0(r),new bt(t.firestore,t instanceof Wr?t.converter:null,new ie(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rw="AsyncQueue";class sw{constructor(e=Promise.resolve()){this.Ju=[],this.Yu=!1,this.Zu=[],this.Xu=null,this.ec=!1,this.tc=!1,this.nc=[],this.x_=new Eb(this,"async_queue_retry"),this.rc=()=>{const r=Xh();r&&te(rw,"Visibility state changed to "+r.visibilityState),this.x_.b_()},this.sc=e;const n=Xh();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.rc)}get isShuttingDown(){return this.Yu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.oc(),this._c(e)}enterRestrictedMode(e){if(!this.Yu){this.Yu=!0,this.tc=e||!1;const n=Xh();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.rc)}}enqueue(e){if(this.oc(),this.Yu)return new Promise(()=>{});const n=new rr;return this._c(()=>this.Yu&&this.tc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Ju.push(e),this.ac()))}async ac(){if(this.Ju.length!==0){try{await this.Ju[0](),this.Ju.shift(),this.x_.reset()}catch(e){if(!To(e))throw e;te(rw,"Operation failed with retryable error: "+e)}this.Ju.length>0&&this.x_.y_(()=>this.ac())}}_c(e){const n=this.sc.then(()=>(this.ec=!0,e().catch(r=>{throw this.Xu=r,this.ec=!1,dr("INTERNAL UNHANDLED ERROR: ",iw(r)),r}).then(r=>(this.ec=!1,r))));return this.sc=n,n}enqueueAfterDelay(e,n,r){this.oc(),this.nc.indexOf(e)>-1&&(n=0);const s=jg.createAndSchedule(this,e,n,r,i=>this.uc(i));return this.Zu.push(s),s}oc(){this.Xu&&ae(47125,{cc:iw(this.Xu)})}verifyOperationInProgress(){}async lc(){let e;do e=this.sc,await e;while(e!==this.sc)}hc(e){for(const n of this.Zu)if(n.timerId===e)return!0;return!1}Pc(e){return this.lc().then(()=>{this.Zu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.Zu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.lc()})}Tc(e){this.nc.push(e)}uc(e){const n=this.Zu.indexOf(e);this.Zu.splice(n,1)}}function iw(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ow(t){return function(n,r){if(typeof n!="object"||n===null)return!1;const s=n;for(const i of r)if(i in s&&typeof s[i]=="function")return!0;return!1}(t,["next","error","complete"])}class fr extends bd{constructor(e,n,r,s){super(e,n,r,s),this.type="firestore",this._queue=new sw,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new sw(e),this._firestoreClient=void 0,await e}}}function Vp(t,e){const n=gM(),r=gu,s=dM(n,"firestore").getImmediate({identifier:r});if(!s._initialized){const i=eD("firestore");i&&T3(s,...i)}return s}function Cd(t){if(t._terminated)throw new ne(H.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||S3(t),t._firestoreClient}function S3(t){var e,n,r;const s=t._freezeSettings(),i=function(a,u,d,h){return new QM(a,u,d,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,Fb(h.experimentalLongPollingOptions),h.useFetchStreams,h.isUsingEmulator)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,s);t._componentsProvider||!((n=s.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=s.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider}),t._firestoreClient=new v3(t._authCredentials,t._appCheckCredentials,t._queue,i,t._componentsProvider&&function(a){const u=a==null?void 0:a._online.build();return{_offline:a==null?void 0:a._offline.build(u),_online:u}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ao{constructor(e){this._byteString=e}static fromBase64String(e){try{return new ao(mt.fromBase64String(e))}catch(n){throw new ne(H.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new ao(mt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nd{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new ne(H.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new ht(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $g{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bg{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new ne(H.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new ne(H.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return ge(this._lat,e._lat)||ge(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hg{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,s){if(r.length!==s.length)return!1;for(let i=0;i<r.length;++i)if(r[i]!==s[i])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b3=/^__.*__$/;class C3{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new us(e,this.data,this.fieldMask,n,this.fieldTransforms):new pl(e,this.data,n,this.fieldTransforms)}}class $b{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new us(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function Bb(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ae(40011,{Ic:t})}}class Wg{constructor(e,n,r,s,i,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=s,i===void 0&&this.Ec(),this.fieldTransforms=i||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Ic(){return this.settings.Ic}dc(e){return new Wg(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Ac(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.dc({path:r,Rc:!1});return s.Vc(e),s}mc(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.dc({path:r,Rc:!1});return s.Ec(),s}fc(e){return this.dc({path:void 0,Rc:!0})}gc(e){return Nu(e,this.settings.methodName,this.settings.yc||!1,this.path,this.settings.wc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Ec(){if(this.path)for(let e=0;e<this.path.length;e++)this.Vc(this.path.get(e))}Vc(e){if(e.length===0)throw this.gc("Document fields must not be empty");if(Bb(this.Ic)&&b3.test(e))throw this.gc('Document fields cannot begin and end with "__"')}}class N3{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||_d(e)}bc(e,n,r,s=!1){return new Wg({Ic:e,methodName:n,wc:r,path:ht.emptyPath(),Rc:!1,yc:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Id(t){const e=t._freezeSettings(),n=_d(t._databaseId);return new N3(t._databaseId,!!e.ignoreUndefinedProperties,n)}function Hb(t,e,n,r,s,i={}){const o=t.bc(i.merge||i.mergeFields?2:0,e,n,s);qg("Data must be an object, but it was:",o,r);const a=Wb(r,o);let u,d;if(i.merge)u=new Zt(o.fieldMask),d=o.fieldTransforms;else if(i.mergeFields){const h=[];for(const p of i.mergeFields){const g=Lp(e,p,n);if(!o.contains(g))throw new ne(H.INVALID_ARGUMENT,`Field '${g}' is specified in your field mask but missing from your input data.`);Kb(h,g)||h.push(g)}u=new Zt(h),d=o.fieldTransforms.filter(p=>u.covers(p.field))}else u=null,d=o.fieldTransforms;return new C3(new Vt(a),u,d)}class Rd extends $g{_toFieldTransform(e){if(e.Ic!==2)throw e.Ic===1?e.gc(`${this._methodName}() can only appear at the top level of your update data`):e.gc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Rd}}function I3(t,e,n,r){const s=t.bc(1,e,n);qg("Data must be an object, but it was:",s,r);const i=[],o=Vt.empty();cs(r,(u,d)=>{const h=Kg(e,u,n);d=Bn(d);const p=s.mc(h);if(d instanceof Rd)i.push(h);else{const g=yl(d,p);g!=null&&(i.push(h),o.set(h,g))}});const a=new Zt(i);return new $b(o,a,s.fieldTransforms)}function R3(t,e,n,r,s,i){const o=t.bc(1,e,n),a=[Lp(e,r,n)],u=[s];if(i.length%2!=0)throw new ne(H.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let g=0;g<i.length;g+=2)a.push(Lp(e,i[g])),u.push(i[g+1]);const d=[],h=Vt.empty();for(let g=a.length-1;g>=0;--g)if(!Kb(d,a[g])){const w=a[g];let C=u[g];C=Bn(C);const x=o.mc(w);if(C instanceof Rd)d.push(w);else{const T=yl(C,x);T!=null&&(d.push(w),h.set(w,T))}}const p=new Zt(d);return new $b(h,p,o.fieldTransforms)}function A3(t,e,n,r=!1){return yl(n,t.bc(r?4:3,e))}function yl(t,e){if(qb(t=Bn(t)))return qg("Unsupported field value:",e,t),Wb(t,e);if(t instanceof $g)return function(r,s){if(!Bb(s.Ic))throw s.gc(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.gc(`${r._methodName}() is not currently supported inside arrays`);const i=r._toFieldTransform(s);i&&s.fieldTransforms.push(i)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.Rc&&e.Ic!==4)throw e.gc("Nested arrays are not supported");return function(r,s){const i=[];let o=0;for(const a of r){let u=yl(a,s.fc(o));u==null&&(u={nullValue:"NULL_VALUE"}),i.push(u),o++}return{arrayValue:{values:i}}}(t,e)}return function(r,s){if((r=Bn(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return yO(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const i=Ge.fromDate(r);return{timestampValue:Eu(s.serializer,i)}}if(r instanceof Ge){const i=new Ge(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Eu(s.serializer,i)}}if(r instanceof Bg)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof ao)return{bytesValue:db(s.serializer,r._byteString)};if(r instanceof bt){const i=s.databaseId,o=r.firestore._databaseId;if(!o.isEqual(i))throw s.gc(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:Sg(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof Hg)return function(o,a){return{mapValue:{fields:{[zS]:{stringValue:US},[vu]:{arrayValue:{values:o.toArray().map(d=>{if(typeof d!="number")throw a.gc("VectorValues must only contain numeric values.");return wg(a.serializer,d)})}}}}}}(r,s);throw s.gc(`Unsupported field value: ${Sd(r)}`)}(t,e)}function Wb(t,e){const n={};return DS(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):cs(t,(r,s)=>{const i=yl(s,e.Ac(r));i!=null&&(n[r]=i)}),{mapValue:{fields:n}}}function qb(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Ge||t instanceof Bg||t instanceof ao||t instanceof bt||t instanceof $g||t instanceof Hg)}function qg(t,e,n){if(!qb(n)||!function(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}(n)){const r=Sd(n);throw r==="an object"?e.gc(t+" a custom object"):e.gc(t+" "+r)}}function Lp(t,e,n){if((e=Bn(e))instanceof Nd)return e._internalPath;if(typeof e=="string")return Kg(t,e);throw Nu("Field path arguments must be of type string or ",t,!1,void 0,n)}const k3=new RegExp("[~\\*/\\[\\]]");function Kg(t,e,n){if(e.search(k3)>=0)throw Nu(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Nd(...e.split("."))._internalPath}catch{throw Nu(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Nu(t,e,n,r,s){const i=r&&!r.isEmpty(),o=s!==void 0;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let u="";return(i||o)&&(u+=" (found",i&&(u+=` in field ${r}`),o&&(u+=` in document ${s}`),u+=")"),new ne(H.INVALID_ARGUMENT,a+t+u)}function Kb(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gb{constructor(e,n,r,s,i){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new bt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new P3(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Ad("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class P3 extends Gb{data(){return super.data()}}function Ad(t,e){return typeof e=="string"?Kg(t,e):e instanceof Nd?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qb(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new ne(H.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Gg{}class Qg extends Gg{}function Cr(t,e,...n){let r=[];e instanceof Gg&&r.push(e),r=r.concat(n),function(i){const o=i.filter(u=>u instanceof Yg).length,a=i.filter(u=>u instanceof kd).length;if(o>1||o>0&&a>0)throw new ne(H.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const s of r)t=s._apply(t);return t}class kd extends Qg{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new kd(e,n,r)}_apply(e){const n=this._parse(e);return Yb(e._query,n),new gr(e.firestore,e.converter,Cp(e._query,n))}_parse(e){const n=Id(e.firestore);return function(i,o,a,u,d,h,p){let g;if(d.isKeyField()){if(h==="array-contains"||h==="array-contains-any")throw new ne(H.INVALID_ARGUMENT,`Invalid Query. You can't perform '${h}' queries on documentId().`);if(h==="in"||h==="not-in"){lw(p,h);const C=[];for(const x of p)C.push(aw(u,i,x));g={arrayValue:{values:C}}}else g=aw(u,i,p)}else h!=="in"&&h!=="not-in"&&h!=="array-contains-any"||lw(p,h),g=A3(a,o,p,h==="in"||h==="not-in");return et.create(d,h,g)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function xs(t,e,n){const r=e,s=Ad("where",t);return kd._create(s,r,n)}class Yg extends Gg{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new Yg(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:Cn.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(s,i){let o=s;const a=i.getFlattenedFilters();for(const u of a)Yb(o,u),o=Cp(o,u)}(e._query,n),new gr(e.firestore,e.converter,Cp(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Xg extends Qg{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new Xg(e,n)}_apply(e){const n=function(s,i,o){if(s.startAt!==null)throw new ne(H.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new ne(H.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Qa(i,o)}(e._query,this._field,this._direction);return new gr(e.firestore,e.converter,function(s,i){const o=s.explicitOrderBy.concat([i]);return new So(s.path,s.collectionGroup,o,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}(e._query,n))}}function j3(t,e="asc"){const n=e,r=Ad("orderBy",t);return Xg._create(r,n)}class Jg extends Qg{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new Jg(e,n,r)}_apply(e){return new gr(e.firestore,e.converter,xu(e._query,this._limit,this._limitType))}}function D3(t){return Jg._create("limit",t,"F")}function aw(t,e,n){if(typeof(n=Bn(n))=="string"){if(n==="")throw new ne(H.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!QS(e)&&n.indexOf("/")!==-1)throw new ne(H.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(Oe.fromString(n));if(!ie.isDocumentKey(r))throw new ne(H.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return _0(t,new ie(r))}if(n instanceof bt)return _0(t,n._key);throw new ne(H.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Sd(n)}.`)}function lw(t,e){if(!Array.isArray(t)||t.length===0)throw new ne(H.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function Yb(t,e){const n=function(s,i){for(const o of s)for(const a of o.getFlattenedFilters())if(i.indexOf(a.op)>=0)return a.op;return null}(t.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new ne(H.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new ne(H.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class M3{convertValue(e,n="none"){switch(Zr(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Qe(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Jr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw ae(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return cs(e,(s,i)=>{r[s]=this.convertValue(i,n)}),r}convertVectorValue(e){var n,r,s;const i=(s=(r=(n=e.fields)===null||n===void 0?void 0:n[vu].arrayValue)===null||r===void 0?void 0:r.values)===null||s===void 0?void 0:s.map(o=>Qe(o.doubleValue));return new Hg(i)}convertGeoPoint(e){return new Bg(Qe(e.latitude),Qe(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=pd(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(qa(e));default:return null}}convertTimestamp(e){const n=Xr(e);return new Ge(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=Oe.fromString(e);Ie(vb(r),9688,{name:e});const s=new Ka(r.get(1),r.get(3)),i=new ie(r.popFirst(5));return s.isEqual(n)||dr(`Document ${i} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xb(t,e,n){let r;return r=t?t.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sa{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Jb extends Gb{constructor(e,n,r,s,i,o){super(e,n,r,s,o),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Dc(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(Ad("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class Dc extends Jb{data(e={}){return super.data(e)}}class Zb{constructor(e,n,r,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new sa(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new Dc(this._firestore,this._userDataWriter,r.key,r,new sa(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new ne(H.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(s,i){if(s._snapshot.oldDocs.isEmpty()){let o=0;return s._snapshot.docChanges.map(a=>{const u=new Dc(s._firestore,s._userDataWriter,a.doc.key,a.doc,new sa(s._snapshot.mutatedKeys.has(a.doc.key),s._snapshot.fromCache),s.query.converter);return a.doc,{type:"added",doc:u,oldIndex:-1,newIndex:o++}})}{let o=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(a=>i||a.type!==3).map(a=>{const u=new Dc(s._firestore,s._userDataWriter,a.doc.key,a.doc,new sa(s._snapshot.mutatedKeys.has(a.doc.key),s._snapshot.fromCache),s.query.converter);let d=-1,h=-1;return a.type!==0&&(d=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),h=o.indexOf(a.doc.key)),{type:O3(a.type),doc:u,oldIndex:d,newIndex:h}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function O3(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ae(61501,{type:t})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fp(t){t=Ht(t,bt);const e=Ht(t.firestore,fr);return w3(Cd(e),t._key).then(n=>eC(e,t,n))}class Zg extends M3{constructor(e){super(),this.firestore=e}convertBytes(e){return new ao(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new bt(this.firestore,null,n)}}function Yn(t){t=Ht(t,gr);const e=Ht(t.firestore,fr),n=Cd(e),r=new Zg(e);return Qb(t._query),_3(n,t._query).then(s=>new Zb(e,r,t,s))}function V3(t,e,n){t=Ht(t,bt);const r=Ht(t.firestore,fr),s=Xb(t.converter,e);return Pd(r,[Hb(Id(r),"setDoc",t._key,s,t.converter!==null,n).toMutation(t._key,dn.none())])}function cw(t,e,n,...r){t=Ht(t,bt);const s=Ht(t.firestore,fr),i=Id(s);let o;return o=typeof(e=Bn(e))=="string"||e instanceof Nd?R3(i,"updateDoc",t._key,e,n,r):I3(i,"updateDoc",t._key,e),Pd(s,[o.toMutation(t._key,dn.exists(!0))])}function uw(t){return Pd(Ht(t.firestore,fr),[new _g(t._key,dn.none())])}function dw(t,e){const n=Ht(t.firestore,fr),r=Ri(t),s=Xb(t.converter,e);return Pd(n,[Hb(Id(t.firestore),"addDoc",r._key,s,t.converter!==null,{}).toMutation(r._key,dn.exists(!1))]).then(()=>r)}function L3(t,...e){var n,r,s;t=Bn(t);let i={includeMetadataChanges:!1,source:"default"},o=0;typeof e[o]!="object"||ow(e[o])||(i=e[o],o++);const a={includeMetadataChanges:i.includeMetadataChanges,source:i.source};if(ow(e[o])){const p=e[o];e[o]=(n=p.next)===null||n===void 0?void 0:n.bind(p),e[o+1]=(r=p.error)===null||r===void 0?void 0:r.bind(p),e[o+2]=(s=p.complete)===null||s===void 0?void 0:s.bind(p)}let u,d,h;if(t instanceof bt)d=Ht(t.firestore,fr),h=md(t._key.path),u={next:p=>{e[o]&&e[o](eC(d,t,p))},error:e[o+1],complete:e[o+2]};else{const p=Ht(t,gr);d=Ht(p.firestore,fr),h=p._query;const g=new Zg(d);u={next:w=>{e[o]&&e[o](new Zb(d,g,p,w))},error:e[o+1],complete:e[o+2]},Qb(t._query)}return function(g,w,C,x){const T=new Ug(x),_=new Lg(w,T,C);return g.asyncQueue.enqueueAndForget(async()=>Mg(await Cu(g),_)),()=>{T.xu(),g.asyncQueue.enqueueAndForget(async()=>Og(await Cu(g),_))}}(Cd(d),h,a,u)}function Pd(t,e){return function(r,s){const i=new rr;return r.asyncQueue.enqueueAndForget(async()=>l3(await x3(r),s,i)),i.promise}(Cd(t),e)}function eC(t,e,n){const r=n.docs.get(e._key),s=new Zg(t);return new Jb(t,s,e._key,r,new sa(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){(function(s){_o=s})(mM),pu(new $a("firestore",(r,{instanceIdentifier:s,options:i})=>{const o=r.getProvider("app").getImmediate(),a=new fr(new PM(r.getProvider("auth-internal")),new MM(o,r.getProvider("app-check-internal")),function(d,h){if(!Object.prototype.hasOwnProperty.apply(d.options,["projectId"]))throw new ne(H.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ka(d.options.projectId,h)}(o,s),o);return i=Object.assign({useFetchStreams:n},i),a._setSettings(i),a},"PUBLIC").setMultipleInstances(!0)),Fi(c0,u0,e),Fi(c0,u0,"esm2017")})();class Ui{static setMachineId(e){this.machineId=e%1024}static generateId(){let e=Date.now();if(e<this.lastTimestamp)throw new Error("Clock moved backwards");return e===this.lastTimestamp?(this.sequence=(this.sequence+1)%4096,this.sequence===0&&(e=this.waitNextMillis(this.lastTimestamp))):this.sequence=0,this.lastTimestamp=e,e-16409952e5<<22|this.machineId<<12|this.sequence}static waitNextMillis(e){let n=Date.now();for(;n<=e;)n=Date.now();return n}}Fe(Ui,"sequence",0),Fe(Ui,"lastTimestamp",0),Fe(Ui,"machineId",1);class F3{constructor(){Fe(this,"config");Fe(this,"currentIndex",0);Fe(this,"urlStats",new Map);Fe(this,"FAILURE_THRESHOLD",3);Fe(this,"RESET_TIMEOUT",3e5);this.config={baseUrls:this.getApiBaseUrls(),timeout:3e4,apiKey:this.getApiKey()},this.initializeUrlStats(),this.validateConfig()}getApiBaseUrls(){return"https://trip-advisor-scraping-api.vercel.app,https://trip-advisor-craping-api-2-git-main-fabiodagostinos-projects.vercel.app,https://trip-advisor-craping-api-3.vercel.app,https://trip-advisor-craping-api-4.vercel.app,https://trip-advisor-craping-api-5.vercel.app,https://trip-advisor-craping-api-6.vercel.app,https://trip-advisor-craping-api-7.vercel.app,https://trip-advisor-craping-api-8.vercel.app,https://trip-advisor-craping-api-9.vercel.app".split(",").map(n=>n.trim())}initializeUrlStats(){this.config.baseUrls.forEach(e=>{this.urlStats.set(e,{failures:0,lastFailure:0,successCount:0,totalRequests:0})})}getApiKey(){return"w7c9i4l9TMv9Q2dzGLFGdjkkV0t3uMOk"||""}validateConfig(){this.config.apiKey||console.error("❌ API Key mancante. Configura VITE_SCRAPING_API_KEY nel tuo .env")}getHeaders(){const e={"Content-Type":"application/json"};return this.config.apiKey&&(e["X-API-Key"]=this.config.apiKey),e}getNextAvailableUrl(){const e=Date.now();let n=0;for(this.urlStats.forEach((r,s)=>{r.failures>0&&e-r.lastFailure>this.RESET_TIMEOUT&&(r.failures=0)});n<this.config.baseUrls.length;){const r=this.config.baseUrls[this.currentIndex%this.config.baseUrls.length];this.currentIndex++;const s=this.urlStats.get(r);if(!s||s.failures<this.FAILURE_THRESHOLD)return r;n++}return this.urlStats.forEach(r=>{r.failures=0}),this.config.baseUrls[0]}markUrlFailed(e,n){const r=this.urlStats.get(e);r&&(r.failures++,r.lastFailure=Date.now(),r.totalRequests++)}markUrlSuccess(e){const n=this.urlStats.get(e);n&&(n.failures=0,n.successCount++,n.totalRequests++)}async healthCheck(){const e=[];for(const n of this.config.baseUrls)try{const r=await fetch(`${n}/api/health`,{method:"GET",headers:this.getHeaders(),signal:AbortSignal.timeout(5e3)});if(!r.ok)throw new Error(`${r.status} ${r.statusText}`);const s=await r.json();e.push(s)}catch(r){console.error(`❌ ${n}: ${r}`),e.push({status:"unhealthy",timestamp:new Date().toISOString(),uptime:0,version:"unknown",services:{scraping:"down",external_apis:"down"}})}return e}async scrapeRestaurant(e){if(!e.url||!e.url.includes("tripadvisor"))throw new Error("URL TripAdvisor richiesto");if(!this.config.apiKey)throw new Error("API Key mancante. Configurare VITE_SCRAPING_API_KEY");let n=null,r=0;const s=this.config.baseUrls.length;for(;r<s;){const i=this.getNextAvailableUrl();if(!i)throw new Error("Nessun endpoint disponibile");try{r++;const o=await fetch(`${i}/api/scrape`,{method:"POST",headers:this.getHeaders(),body:JSON.stringify(e),signal:AbortSignal.timeout(this.config.timeout)});if(!o.ok){let u=`HTTP ${o.status}`;try{u=(await o.json()).error||u}catch(d){console.error("❌ Failed to parse error response:",d)}throw new Error(u)}const a=await o.json();if(!a.success||!a.data)throw new Error(a.error||"Errore durante lo scraping");return this.markUrlSuccess(i),a.data}catch(o){const a=o instanceof Error?o.message:"Errore sconosciuto";console.error(`❌ Errore con ${i}:`,a),this.markUrlFailed(i,a),n=o instanceof Error?o:new Error(a),r<s&&await new Promise(u=>setTimeout(u,1e3))}}throw console.error("❌ Tutti gli endpoints hanno fallito"),this.logStats(),n?n.name==="TimeoutError"||n.message.includes("timeout")?new Error("Lo scraping ha impiegato troppo tempo. Riprova o inserisci i dati manualmente."):n.message.includes("401")||n.message.includes("Unauthorized")?new Error("Errore di autenticazione. Verifica la configurazione dell'API key."):n.message.includes("403")||n.message.includes("Forbidden")?new Error("Accesso negato. Verifica le autorizzazioni dell'API."):n:new Error("Tutti gli endpoints di scraping non sono disponibili. Riprova più tardi.")}async testApi(){const e=await this.healthCheck(),n=this.config.baseUrls.map((s,i)=>{var o;return{url:s,status:((o=e[i])==null?void 0:o.status)||"unknown"}});return{working:n.filter(s=>s.status==="healthy").length,total:this.config.baseUrls.length,details:n}}getStats(){return Array.from(this.urlStats.entries()).map(([e,n])=>({url:e,stats:{...n}}))}logStats(){this.urlStats.forEach((e,n)=>{e.totalRequests>0&&(e.successCount/e.totalRequests*100).toFixed(1)})}async testAuthentication(){try{if(!this.config.apiKey)return{success:!1,message:"API Key mancante. Configura VITE_SCRAPING_API_KEY nel file .env",details:null};const e=await this.testApi();return e.working>0?{success:!0,message:`${e.working}/${e.total} endpoints funzionanti`,details:e.details}:{success:!1,message:"Nessun endpoint disponibile",details:e.details}}catch(e){return{success:!1,message:`Errore di connessione: ${e instanceof Error?e.message:"Errore sconosciuto"}`,details:null}}}getApiInfo(){return{baseUrls:this.config.baseUrls,totalEndpoints:this.config.baseUrls.length,timeout:this.config.timeout,environment:"production",hasApiKey:!!this.config.apiKey,configSource:"multiple-urls",stats:this.getStats()}}resetStats(){this.urlStats.forEach(e=>{e.failures=0,e.lastFailure=0,e.successCount=0,e.totalRequests=0})}updateConfig(e){this.config={...this.config,...e},e.baseUrls&&this.initializeUrlStats()}}const z3=new F3,Zh={apiKey:"AIzaSyAFbqkAtEvQroMp1zGYvfjIPOYXWTZSBmg",authDomain:"rotiniel-35c5b.firebaseapp.com",projectId:"rotiniel-35c5b",storageBucket:"rotiniel-35c5b.firebasestorage.app",messagingSenderId:"546264380520",appId:"1:546264380520:web:7034e18e1211898418f7dd"};function Kt(t){return t?t instanceof Date?t:t instanceof Ge||typeof t.toDate=="function"?t.toDate():new Date:new Date}function U3(){if(!Zh.apiKey||!Zh.projectId)throw new Ne("Configurazione Firebase incompleta. Verificare le variabili d'ambiente VITE_FIREBASE_*.","FIREBASE_CONFIG_ERROR");if(!vM().length)try{fg(Zh)}catch(e){throw new Ne("Errore nell'inizializzazione di Firebase","FIREBASE_INIT_ERROR",e)}return Ui.setMachineId(100),Vp()}class Ne extends Error{constructor(e,n,r){super(e),this.code=n,this.originalError=r,this.name="RestaurantServiceError"}getUserFriendlyMessage(){switch(this.code){case"FIREBASE_CONFIG_ERROR":return"Errore di configurazione del database. Contatta il supporto tecnico.";case"FIREBASE_INIT_ERROR":return"Impossibile connettersi al database. Riprova tra qualche minuto.";case"FETCH_ERROR":return"Problemi di connessione. Riprova tra qualche minuto.";case"VALIDATION_ERROR":return"I dati inseriti non sono corretti. Controlla i campi evidenziati.";case"INVALID_URL":return"L'URL di TripAdvisor non è valido. Assicurati di copiare il link completo.";case"EXTRACTION_ERROR":return"Impossibile estrarre i dati da TripAdvisor. L'URL potrebbe non essere accessibile.";case"PAST_DATE":return"Non puoi prenotare per una data già passata.";case"INVALID_ID":case"INVALID_RESTAURANT_ID":case"INVALID_BOOKING_ID":return"ID non valido. Ricarica la pagina e riprova.";case"NOT_FOUND":return"Elemento non trovato.";case"DELETE_ERROR":return"Impossibile eliminare l'elemento. Riprova.";default:return this.message}}}class Gt{static validateTripAdvisorUrl(e){try{const n=new URL(e);return n.hostname.includes("tripadvisor.com")||n.hostname.includes("tripadvisor.it")||n.hostname.includes("tripadvisor.")}catch{return!1}}static validateRestaurantData(e){const n=[];return(!e.name||e.name.trim().length<2)&&n.push("Il nome del ristorante deve avere almeno 2 caratteri"),e.name&&e.name.length>100&&n.push("Il nome del ristorante non può superare i 100 caratteri"),(!e.tripadvisorUrl||!this.validateTripAdvisorUrl(e.tripadvisorUrl))&&n.push("URL TripAdvisor non valido"),(!e.cuisines||e.cuisines.length===0)&&n.push("Almeno un tipo di cucina è obbligatorio"),e.priceRange||n.push("Fascia di prezzo obbligatoria"),["€","€€","€€€","€€€€"].includes(e.priceRange||"")||n.push("Fascia di prezzo non valida"),(!e.location||e.location.trim().length<2)&&n.push("Posizione obbligatoria"),e.location&&e.location.length>200&&n.push("La posizione non può superare i 200 caratteri"),e.phone&&!/^[\d\s\-\+\(\)]+$/.test(e.phone)&&n.push("Numero di telefono non valido"),e.rating&&!this.validateRating(e.rating)&&n.push("Rating non valido (deve essere tra 1.0 e 5.0)"),n}static validateBookingData(e){const n=[];if(e.restaurantId||n.push("ID ristorante non valido"),!e.date)n.push("Data prenotazione obbligatoria");else{const r=new Date(e.date),s=new Date;s.setHours(0,0,0,0),r<s&&n.push("Non è possibile prenotare per una data passata")}return e.time?this.validateTime(e.time)||n.push("Formato orario non valido (usa HH:MM)"):n.push("Orario prenotazione obbligatorio"),e.notes&&e.notes.length>500&&n.push("Le note non possono superare i 500 caratteri"),n}static validateRating(e){const n=parseFloat(e);return!isNaN(n)&&n>=1&&n<=5}static validateTime(e){return/^([01]?[0-9]|2[0-3]):[0-5][0-9]$/.test(e)}static validateId(e){return Number.isInteger(e)}}class $3{constructor(){Fe(this,"db");Fe(this,"restaurantsRef");Fe(this,"bookingsRef");try{this.db=U3(),this.restaurantsRef=Op(this.db,"restaurants"),this.bookingsRef=Op(this.db,"bookings")}catch(e){throw e instanceof Ne?e:new Ne("Errore nell'inizializzazione del servizio","SERVICE_INIT_ERROR",e)}}async getAllRestaurants(){try{return(await Yn(this.restaurantsRef)).docs.map(n=>{const r=n.data();return{id:r.id||parseInt(n.id),...r,createdAt:Kt(r.createdAt)}})}catch(e){throw new Ne("Errore nel recupero dei ristoranti","FETCH_ERROR",e)}}async getRestaurant(e){if(!Gt.validateId(e))throw new Ne("ID ristorante non valido","INVALID_RESTAURANT_ID");try{const n=Cr(this.restaurantsRef,xs("id","==",e)),r=await Yn(n);if(r.empty)return;const i=r.docs[0].data();return{id:e,...i,createdAt:Kt(i.createdAt)}}catch(n){throw new Ne(`Errore nel recupero del ristorante ${e}`,"FETCH_ERROR",n)}}async createRestaurant(e){const n=Gt.validateRestaurantData(e);if(n.length>0)throw new Ne(`Dati non validi: ${n.join(", ")}`,"VALIDATION_ERROR");try{const r=Ui.generateId(),s={...e,id:r,isApproved:!0,createdAt:Ge.now()},i=Object.fromEntries(Object.entries(s).filter(([o,a])=>a!==void 0));return await dw(this.restaurantsRef,i),{...i,createdAt:Kt(i.createdAt)}}catch(r){throw new Ne("Errore nella creazione del ristorante","CREATE_ERROR",r)}}async updateRestaurant(e,n){if(!Gt.validateId(e))throw new Ne("ID ristorante non valido","INVALID_RESTAURANT_ID");try{const r=Cr(this.restaurantsRef,xs("id","==",e)),s=await Yn(r);if(s.empty)return;const i=s.docs[0],o=Ri(this.db,"restaurants",i.id);await cw(o,n);const u=(await Fp(o)).data();return{id:e,...u,createdAt:Kt(u==null?void 0:u.createdAt)}}catch(r){throw new Ne(`Errore nell'aggiornamento del ristorante ${e}`,"UPDATE_ERROR",r)}}async deleteRestaurant(e){if(!Gt.validateId(e))throw new Ne("ID ristorante non valido","INVALID_RESTAURANT_ID");try{const n=Cr(this.restaurantsRef,xs("id","==",e)),r=await Yn(n);if(r.empty)return!1;const s=r.docs[0],i=Ri(this.db,"restaurants",s.id);return await uw(i),!0}catch(n){throw new Ne(`Errore nell'eliminazione del ristorante ${e}`,"DELETE_ERROR",n)}}async extractRestaurantData(e){if(!Gt.validateTripAdvisorUrl(e))throw new Ne("URL TripAdvisor non valido","INVALID_URL");try{var n={url:e},r=await z3.scrapeRestaurant(n),s={extracted:r};return s}catch(i){throw console.error("❌ Errore nell'estrazione:",i),new Ne("Impossibile estrarre i dati del ristorante. Verifica l'URL.","EXTRACTION_ERROR",i)}}async getAllBookings(){try{return(await Yn(this.bookingsRef)).docs.map(n=>{const r=n.data();return{id:r.id||parseInt(n.id),...r,date:Kt(r.date),createdAt:Kt(r.createdAt)}})}catch(e){throw new Ne("Errore nel recupero delle prenotazioni","FETCH_ERROR",e)}}async getBookingsByRestaurant(e){if(!Gt.validateId(e))throw new Ne("ID ristorante non valido","INVALID_RESTAURANT_ID");try{const n=Cr(this.bookingsRef,xs("restaurantId","==",e));return(await Yn(n)).docs.map(s=>{const i=s.data();return{id:i.id||parseInt(s.id),...i,date:Kt(i.date),createdAt:Kt(i.createdAt)}})}catch(n){throw new Ne(`Errore nel recupero delle prenotazioni per il ristorante ${e}`,"FETCH_ERROR",n)}}async getBooking(e){if(!Gt.validateId(e))throw new Ne("ID prenotazione non valido","INVALID_BOOKING_ID");try{const n=Cr(this.bookingsRef,xs("id","==",e)),r=await Yn(n);if(r.empty)throw new Ne(`Prenotazione ${e} non trovata`,"NOT_FOUND");const i=r.docs[0].data();return{id:e,...i,date:Kt(i.date),createdAt:Kt(i.createdAt)}}catch(n){throw n instanceof Ne?n:new Ne(`Errore nel recupero della prenotazione ${e}`,"FETCH_ERROR",n)}}async createBooking(e){const n=Gt.validateBookingData(e);if(n.length>0)throw new Ne(`Dati prenotazione non validi: ${n.join(", ")}`,"VALIDATION_ERROR");try{const r=Ui.generateId(),s={...e,id:r,createdAt:Ge.now()},i=Object.fromEntries(Object.entries(s).filter(([o,a])=>a!==void 0));return await dw(this.bookingsRef,i),{...i,createdAt:Kt(i.createdAt)}}catch(r){throw new Ne("Errore nella creazione della prenotazione","CREATE_ERROR",r)}}async updateBooking(e,n){if(!Gt.validateId(e))throw new Ne("ID prenotazione non valido","INVALID_BOOKING_ID");try{const r=Cr(this.bookingsRef,xs("id","==",e)),s=await Yn(r);if(s.empty)throw new Ne(`Prenotazione ${e} non trovata`,"NOT_FOUND");const i=s.docs[0],o=Ri(this.db,"bookings",i.id);await cw(o,n);const u=(await Fp(o)).data();return{id:e,...u,date:Kt(u.date),createdAt:Kt(u.createdAt)}}catch(r){throw r instanceof Ne?r:new Ne(`Errore nell'aggiornamento della prenotazione ${e}`,"UPDATE_ERROR",r)}}async deleteBooking(e){if(!Gt.validateId(e))throw new Ne("ID prenotazione non valido","INVALID_BOOKING_ID");try{const n=Cr(this.bookingsRef,xs("id","==",e)),r=await Yn(n);if(r.empty)return!1;const s=r.docs[0],i=Ri(this.db,"bookings",s.id);return await uw(i),!0}catch(n){throw new Ne(`Errore nell'eliminazione della prenotazione ${e}`,"DELETE_ERROR",n)}}}let ef=null;const B3=()=>(ef||(ef=new $3),ef),ni=()=>{const t=B3();return{getAllRestaurants:()=>t.getAllRestaurants(),getRestaurant:e=>t.getRestaurant(e),createRestaurant:e=>t.createRestaurant(e),updateRestaurant:(e,n)=>t.updateRestaurant(e,n),deleteRestaurant:e=>t.deleteRestaurant(e),extractRestaurantData:e=>t.extractRestaurantData(e),getAllBookings:()=>t.getAllBookings(),getBookingsByRestaurant:e=>t.getBookingsByRestaurant(e),getBooking:e=>t.getBooking(e),createBooking:e=>t.createBooking(e),updateBooking:(e,n)=>t.updateBooking(e,n),deleteBooking:e=>t.deleteBooking(e),validateRestaurantData:Gt.validateRestaurantData,validateBookingData:Gt.validateBookingData,validateTripAdvisorUrl:Gt.validateTripAdvisorUrl,service:t}},en=t=>t instanceof Ne?t.getUserFriendlyMessage():t instanceof Error?t.message:"Si è verificato un errore imprevisto. Riprova tra qualche minuto.",Lt=(t,e)=>{console.error(`[RestaurantService] ${t}:`,e),e instanceof Ne&&(console.error(`- Code: ${e.code}`),console.error("- Original Error:",e.originalError))},jd=()=>{const[t,e]=m.useState([]),[n,r]=m.useState(!1),[s,i]=m.useState(null),{getAllRestaurants:o,updateRestaurant:a}=ni();m.useEffect(()=>{(async()=>{try{r(!0),i(null);const x=await o();if(x){const T=x.filter(_=>_.favorite===!0).map(_=>_.id);e(T)}}catch(x){const T=en(x);i(T),Lt("Caricamento favoriti",x)}finally{r(!1)}})()},[]);const u=m.useCallback(async(C,x)=>{try{r(!0),i(null),await a(C,{favorite:x}),e(T=>x?T.includes(C)?T:[...T,C]:T.filter(_=>_!==C))}catch(T){const _=en(T);throw i(_),Lt("Aggiornamento favorito",T),T}finally{r(!1)}},[a]),d=m.useCallback(async C=>{t.includes(C)||await u(C,!0)},[t,u]),h=m.useCallback(async C=>{t.includes(C)&&await u(C,!1)},[t,u]),p=m.useCallback(async C=>{const x=t.includes(C);await u(C,!x)},[t,u]),g=m.useCallback(C=>t.includes(C),[t]),w=m.useCallback(async()=>{try{r(!0),i(null);const T=(await o()).filter(_=>_.favorite===!0).map(_=>a(_.id,{favorite:!1}));await Promise.all(T),e([])}catch(C){const x=en(C);throw i(x),Lt("Cancellazione favoriti",C),C}finally{r(!1)}},[o,a]);return{favorites:t,addFavorite:d,removeFavorite:h,toggleFavorite:p,isFavorite:g,clearFavorites:w,isLoading:n,error:s}},tC=[{value:"italiana",label:"Italiana"},{value:"mediterranea",label:"Mediterranea"},{value:"pesce",label:"Pesce"},{value:"barbecue",label:"Barbecue"},{value:"steakhouse",label:"Steakhouse"},{value:"pugliese",label:"Pugliese"}],nC=t=>{const e=tC.find(n=>n.value===t);return e?e.label:t.charAt(0).toUpperCase()+t.slice(1)},H3=t=>{if(!t)return[];if(Array.isArray(t))return t;if(typeof t=="string")try{const e=JSON.parse(t);return Array.isArray(e)?e:[t]}catch{return[t]}return[]};function W3(t){if(!t)return!1;try{const e=new URL(t),n=["tripadvisor.com","unsplash.com","images.unsplash.com"],r=[".jpg",".jpeg",".png",".webp"],s=n.some(o=>e.hostname.includes(o)),i=r.some(o=>e.pathname.toLowerCase().includes(o));return s&&(i||e.hostname.includes("tripadvisor.com"))}catch{return!1}}function q3(t){const e={pugliese:"https://images.unsplash.com/photo-1551218808-94e220e084d2?ixlib=rb-4.0.3&auto=format&fit=crop&w=600&h=300",italiana:"https://images.unsplash.com/photo-1414235077428-338989a2e8c0?ixlib=rb-4.0.3&auto=format&fit=crop&w=600&h=300",pesce:"https://images.unsplash.com/photo-1544943151-6e4ed999de46?ixlib=rb-4.0.3&auto=format&fit=crop&w=600&h=300",mediterranea:"https://images.unsplash.com/photo-1540189549336-e6e99c3679fe?ixlib=rb-4.0.3&auto=format&fit=crop&w=600&h=300",barbecue:"https://images.unsplash.com/photo-1551218808-94e220e084d2?ixlib=rb-4.0.3&auto=format&fit=crop&w=600&h=300",steakhouse:"https://images.unsplash.com/photo-1546833999-b9f581a1996d?ixlib=rb-4.0.3&auto=format&fit=crop&w=600&h=300"};return e[t]||e.italiana}function Iu(t){var n={pugliese:"bg-[hsl(var(--forest-green))]/10 text-[hsl(var(--forest-green))]",italiana:"bg-[hsl(var(--olive-drab))]/10 text-[hsl(var(--olive-drab))]",pesce:"bg-blue-100 text-blue-700",barbecue:"bg-red-100 text-red-700",steakhouse:"bg-gray-100 text-gray-700",mediterranea:"bg-[hsl(var(--terracotta))]/10 text-[hsl(var(--terracotta))]"}[t];return n}const rC=({restaurant:t,onViewDetails:e})=>{const{isFavorite:n,toggleFavorite:r}=jd(),s=m.useCallback(async g=>{g.stopPropagation();try{await r(t.id)}catch(w){console.error("Errore nel toggle favorito:",w)}},[t.id,r]),i=n(t.id),[o,a]=m.useState(t.imageUrl&&W3(t.imageUrl)?t.imageUrl:q3(t.cuisines[0])),[u,d]=m.useState(!1),h=g=>{const w=parseFloat(g),C=Math.floor(w),x=w%1>=.5;return l.jsx("div",{className:"flex text-[hsl(var(--goldenrod))]",children:[...Array(5)].map((T,_)=>l.jsx(Xt,{className:`w-4 h-4 ${_<C?"fill-current":_===C&&x?"fill-current opacity-50":""}`},_))})},p=Array.isArray(t.cuisines)?t.cuisines:[t.cuisines];return l.jsxs(Ue,{className:"bg-white rounded-xl shadow-lg overflow-hidden hover:shadow-xl transition-shadow duration-300 cursor-pointer",children:[l.jsxs("div",{className:"relative",children:[l.jsx("img",{src:t.imageUrl||void 0,alt:t.name,className:"w-full h-48 object-cover"}),l.jsx(oe,{variant:"ghost",size:"icon",className:`absolute top-2 right-2 ${i?"text-[hsl(var(--tomato))] hover:text-red-600":"text-gray-400 hover:text-[hsl(var(--tomato))]"} bg-white/80 hover:bg-white/90`,onClick:s,children:l.jsx(ks,{className:`w-5 h-5 ${i?"fill-current":""}`})})]}),l.jsxs($e,{className:"p-6",children:[l.jsx("div",{className:"flex justify-between items-start mb-2",children:l.jsx("h3",{className:"text-xl font-display font-semibold text-[hsl(var(--dark-slate))]",children:t.name})}),l.jsxs("div",{className:"flex items-center mb-3",children:[h(t.rating),l.jsx("span",{className:"text-[hsl(var(--dark-slate))] font-medium ml-2",children:t.rating}),l.jsx("span",{className:"text-[hsl(var(--dark-slate))]/50 mx-2",children:"•"}),l.jsx("span",{className:"text-[hsl(var(--terracotta))] font-medium",children:t.priceRange})]}),l.jsx("p",{className:"text-[hsl(var(--dark-slate))]/70 mb-3 line-clamp-2",children:t.description}),l.jsxs("div",{className:"flex flex-wrap gap-2 mb-4",children:[p.slice(0,3).map((g,w)=>l.jsx(js,{className:Iu(g),children:nC(g)},w)),p.length>3&&l.jsxs(js,{className:"bg-gray-100 text-gray-700",children:["+",p.length-3]})]}),l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsxs("div",{className:"flex items-center text-[hsl(var(--dark-slate))]/60 text-sm",children:[l.jsx(Us,{className:"w-4 h-4 mr-1"}),l.jsx("span",{children:t.location})]}),l.jsx(oe,{className:"bg-[hsl(var(--terracotta))] text-white hover:bg-[hsl(var(--saddle))] transition-colors text-sm font-medium",onClick:()=>e(t),children:"Dettagli"})]})]})]})},Ru=ag,K3=NT,G3=lg,sC=m.forwardRef(({className:t,...e},n)=>l.jsx(hl,{ref:n,className:ce("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...e}));sC.displayName=hl.displayName;const Ja=m.forwardRef(({className:t,children:e,...n},r)=>l.jsxs(G3,{children:[l.jsx(sC,{}),l.jsxs(fl,{ref:r,className:ce("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",t),...n,children:[e,l.jsxs(IT,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[l.jsx(ul,{className:"h-4 w-4"}),l.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));Ja.displayName=fl.displayName;const Za=({className:t,...e})=>l.jsx("div",{className:ce("flex flex-col space-y-1.5 text-center sm:text-left",t),...e});Za.displayName="DialogHeader";const el=m.forwardRef(({className:t,...e},n)=>l.jsx(ad,{ref:n,className:ce("text-lg font-semibold leading-none tracking-tight",t),...e}));el.displayName=ad.displayName;const Q3=m.forwardRef(({className:t,...e},n)=>l.jsx(ld,{ref:n,className:ce("text-sm text-muted-foreground",t),...e}));Q3.displayName=ld.displayName;var Y3="Label",iC=m.forwardRef((t,e)=>l.jsx(de.label,{...t,ref:e,onMouseDown:n=>{var s;n.target.closest("button, input, select, textarea")||((s=t.onMouseDown)==null||s.call(t,n),!n.defaultPrevented&&n.detail>1&&n.preventDefault())}}));iC.displayName=Y3;var oC=iC;const X3=po("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),Je=m.forwardRef(({className:t,...e},n)=>l.jsx(oC,{ref:n,className:ce(X3(),t),...e}));Je.displayName=oC.displayName;const Dd=m.forwardRef(({className:t,...e},n)=>l.jsx("textarea",{className:ce("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t),ref:n,...e}));Dd.displayName="Textarea";var tf;const J3=({restaurant:t,isOpen:e,onClose:n})=>{const[r,s]=m.useState({date:"",time:"",notes:""}),{toast:i}=Ku(),o=()=>{s({date:"",time:"",notes:""})},{createBooking:a}=ni(),u=async p=>{var T;if(tf=!0,p.preventDefault(),!t||!r.date||!r.time){i({title:"Informazioni Mancanti",description:"Per favore compila tutti i campi obbligatori.",variant:"destructive"});return}const g=new Date(r.date),w=new Date;if(w.setHours(0,0,0,0),g<w){i({title:"Data Non Valida",description:"Non puoi prenotare per una data passata.",variant:"destructive"});return}const C={restaurantId:Number(t.id),date:new Date(r.date+"T00:00:00.000Z"),time:r.time.trim(),notes:((T=r.notes)==null?void 0:T.trim())||void 0};try{var x=await a(C);x&&(i({title:"Prenotazione Aggiunta",description:"La prenotazione è stata aggiunta"}),d())}catch{}finally{tf=!1}},d=()=>{n(),o()};if(!t)return null;const h=["12:00","12:30","13:00","13:30","14:00","14:30","19:00","19:30","20:00","20:30","21:00","21:30"];return l.jsx(Ru,{open:e,onOpenChange:d,children:l.jsxs(Ja,{className:"max-w-md",children:[l.jsx(Za,{children:l.jsxs(el,{className:"text-xl font-display font-bold text-[hsl(var(--dark-slate))] flex items-center",children:[l.jsx(An,{className:"w-5 h-5 text-[hsl(var(--terracotta))] mr-2"}),"Marca prenotazione per ",t.name]})}),l.jsxs("form",{onSubmit:u,className:"space-y-4",children:[l.jsxs("div",{className:"bg-[hsl(var(--warm-beige))] p-3 rounded-lg",children:[l.jsx("h4",{className:"font-semibold text-[hsl(var(--dark-slate))]",children:t.name}),l.jsx("p",{className:"text-sm text-[hsl(var(--dark-slate))]/70",children:t.location}),l.jsxs("p",{className:"text-sm text-[hsl(var(--terracotta))]",children:[t.priceRange," • ",t.cuisines.join(", ")]})]}),l.jsxs("div",{children:[l.jsx(Je,{htmlFor:"booking-date",className:"text-[hsl(var(--dark-slate))] font-medium",children:"Data della Prenotazione *"}),l.jsx(At,{id:"booking-date",type:"date",value:r.date,onChange:p=>s(g=>({...g,date:p.target.value})),min:new Date().toISOString().split("T")[0],required:!0,className:"mt-1"})]}),l.jsxs("div",{children:[l.jsx(Je,{htmlFor:"booking-time",className:"text-[hsl(var(--dark-slate))] font-medium",children:"Orario *"}),l.jsxs("div",{className:"mt-1 space-y-2",children:[l.jsx(At,{id:"booking-time",type:"time",value:r.time,onChange:p=>s(g=>({...g,time:p.target.value})),required:!0}),l.jsxs("div",{children:[l.jsx("p",{className:"text-xs text-[hsl(var(--dark-slate))]/60 mb-1",children:"Orari suggeriti:"}),l.jsx("div",{className:"flex flex-wrap gap-1",children:h.map(p=>l.jsx(oe,{type:"button",variant:"outline",size:"sm",onClick:()=>s(g=>({...g,time:p})),className:"text-xs h-7 px-2 text-[hsl(var(--terracotta))] hover:bg-[hsl(var(--terracotta))]/10",children:p},p))})]})]})]}),l.jsxs("div",{children:[l.jsx(Je,{htmlFor:"booking-notes",className:"text-[hsl(var(--dark-slate))] font-medium",children:"Note Aggiuntive"}),l.jsx(Dd,{id:"booking-notes",placeholder:"Numero di persone, richieste speciali, allergie, etc...",value:r.notes,onChange:p=>s(g=>({...g,notes:p.target.value})),className:"mt-1 min-h-[80px]"})]}),l.jsx("div",{className:"bg-blue-50 p-3 rounded-lg",children:l.jsxs("div",{className:"flex items-start",children:[l.jsx(cl,{className:"w-4 h-4 text-blue-600 mr-2 mt-0.5 flex-shrink-0"}),l.jsxs("div",{className:"text-sm text-blue-800",children:[l.jsx("p",{className:"font-medium",children:"Nota Importante"}),l.jsx("p",{children:"Questa è una prenotazione indicativa. Ti consigliamo di contattare il ristorante per confermare la disponibilità."}),t.phone&&l.jsxs("p",{className:"mt-1",children:["Tel: ",l.jsx("span",{className:"font-medium",children:t.phone})]})]})]})}),l.jsxs("div",{className:"flex gap-3 pt-2",children:[l.jsx(oe,{type:"button",variant:"outline",onClick:d,className:"flex-1",children:"Annulla"}),l.jsx(oe,{type:"submit",className:"flex-1 bg-[hsl(var(--terracotta))] text-white hover:bg-[hsl(var(--saddle))]",children:tf?l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Prenotando..."]}):l.jsxs(l.Fragment,{children:[l.jsx(Fa,{className:"w-4 h-4 mr-2"}),"Marca come Prenotata"]})})]})]})]})})},ev=({restaurant:t,isOpen:e,onClose:n,onBookVisit:r,onDelete:s,allowDelete:i=!0})=>{var M;const{favorites:o,toggleFavorite:a}=jd(),[u,d]=m.useState(!1),[h,p]=m.useState(!1),g=()=>{d(!0)},w=()=>{d(!1),n()},C=m.useCallback(async()=>{if(t&&window.confirm(`Sei sicuro di voler eliminare "${t.name}"?`)){p(!0);try{s&&s(t.id),n()}catch(D){console.error("Errore nell'eliminazione del ristorante:",D)}finally{p(!1)}}},[t,s,n]);if(!t)return null;const x=o.includes(t.id),T=()=>{a(t.id)},_=()=>{if(t.latitude&&t.longitude){const D=`https://www.google.com/maps/dir/?api=1&destination=${t.latitude},${t.longitude}`;window.open(D,"_blank")}},y=D=>{const b=parseFloat(D),S=Math.floor(b),I=b%1>=.5;return l.jsx("div",{className:"flex text-[hsl(var(--goldenrod))]",children:[...Array(5)].map((R,P)=>l.jsx(Xt,{className:`w-4 h-4 ${P<S?"fill-current":P===S&&I?"fill-current opacity-50":""}`},P))})},E=D=>{if(!D)return null;const b=Math.floor(D),S=D%1>=.5;return l.jsx("div",{className:"flex text-[hsl(var(--terracotta))]",children:[...Array(5)].map((I,R)=>l.jsx(Xt,{className:`w-4 h-4 ${R<b?"fill-current":R===b&&S?"fill-current opacity-50":"text-gray-300"}`},R))})},k=t.locationUser||t.qualitàPrezzoUser||t.mediaPrezzo;return l.jsxs(l.Fragment,{children:[l.jsx(Ru,{open:e,onOpenChange:n,children:l.jsxs(Ja,{className:"max-w-4xl max-h-[90vh] overflow-y-auto",children:[l.jsx(Za,{children:l.jsxs("div",{className:"flex justify-between items-start",children:[l.jsxs("div",{className:"flex-1",children:[l.jsx(el,{className:"text-2xl font-display font-bold text-[hsl(var(--dark-slate))] mb-2",children:t.name}),k&&l.jsxs(js,{className:"bg-[hsl(var(--terracotta))]/10 text-[hsl(var(--terracotta))] border-[hsl(var(--terracotta))]/20",children:[l.jsx(Sx,{className:"w-3 h-3 mr-1"}),"Valutato dalla community"]})]}),i&&l.jsx(oe,{variant:"ghost",size:"icon",className:"text-gray-400 hover:text-red-600 hover:bg-red-50",onClick:C,disabled:h,title:"Elimina ristorante",children:l.jsx(Yu,{className:`w-5 h-5 ${h?"animate-pulse":""}`})})]})}),l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[l.jsx("img",{src:t.imageUrl||"https://images.unsplash.com/photo-1414235077428-338989a2e8c0?ixlib=rb-4.0.3&auto=format&fit=crop&w=600&h=400",alt:t.name,className:"w-full h-64 object-cover rounded-lg"}),l.jsx("img",{src:"https://images.unsplash.com/photo-1556909114-f6e7ad7d3136?ixlib=rb-4.0.3&auto=format&fit=crop&w=600&h=400",alt:"Chef preparing food",className:"w-full h-64 object-cover rounded-lg"})]}),k&&l.jsxs("div",{className:"bg-gradient-to-r from-[hsl(var(--terracotta))]/5 to-[hsl(var(--saddle))]/5 rounded-lg p-6 border border-[hsl(var(--terracotta))]/20",children:[l.jsxs("div",{className:"flex items-center mb-4",children:[l.jsx(iu,{className:"w-5 h-5 text-[hsl(var(--terracotta))] mr-2"}),l.jsx("h4",{className:"text-lg font-semibold text-[hsl(var(--dark-slate))]",children:"Valutazioni della Community"})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[t.locationUser&&l.jsxs("div",{className:"text-center",children:[l.jsxs("div",{className:"flex items-center justify-center mb-2",children:[l.jsx(Us,{className:"w-5 h-5 text-[hsl(var(--terracotta))] mr-2"}),l.jsx("span",{className:"font-medium text-[hsl(var(--dark-slate))]",children:"Posizione"})]}),l.jsx("div",{className:"flex justify-center mb-1",children:E(t.locationUser)}),l.jsx("div",{className:"text-2xl font-bold text-[hsl(var(--terracotta))] mb-1",children:t.locationUser.toFixed(1)}),l.jsx("div",{className:"text-xs text-gray-600",children:"Accessibilità, parcheggio, zona"})]}),t.qualitàPrezzoUser&&l.jsxs("div",{className:"text-center",children:[l.jsxs("div",{className:"flex items-center justify-center mb-2",children:[l.jsx(Xt,{className:"w-5 h-5 text-[hsl(var(--terracotta))] mr-2"}),l.jsx("span",{className:"font-medium text-[hsl(var(--dark-slate))]",children:"Qualità/Prezzo"})]}),l.jsx("div",{className:"flex justify-center mb-1",children:E(t.qualitàPrezzoUser)}),l.jsx("div",{className:"text-2xl font-bold text-[hsl(var(--terracotta))] mb-1",children:t.qualitàPrezzoUser.toFixed(1)}),l.jsx("div",{className:"text-xs text-gray-600",children:"Rapporto qualità vs prezzo"})]}),t.mediaPrezzo&&l.jsxs("div",{className:"text-center",children:[l.jsxs("div",{className:"flex items-center justify-center mb-2",children:[l.jsx(np,{className:"w-5 h-5 text-[hsl(var(--terracotta))] mr-2"}),l.jsx("span",{className:"font-medium text-[hsl(var(--dark-slate))]",children:"Prezzo Medio"})]}),l.jsxs("div",{className:"text-2xl font-bold text-[hsl(var(--terracotta))] mb-1",children:["€",t.mediaPrezzo.toFixed(2)]}),l.jsx("div",{className:"text-xs text-gray-600",children:"Per persona (secondo la community)"})]})]}),l.jsx("div",{className:"mt-4 text-center",children:l.jsx("p",{className:"text-xs text-gray-600 italic",children:"Valutazioni basate sull'esperienza della community di utenti"})})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[l.jsxs("div",{children:[l.jsx("h4",{className:"text-lg font-semibold text-[hsl(var(--dark-slate))] mb-4",children:"Dettaglio"}),l.jsx("p",{className:"text-[hsl(var(--dark-slate))]/70 mb-4",children:t.description||"Experience authentic cuisine in a warm, family-friendly atmosphere. Our restaurant has been serving traditional recipes using only the finest local ingredients."}),l.jsxs("div",{className:"space-y-3",children:[l.jsxs("div",{className:"flex items-center",children:[l.jsx(Us,{className:"w-5 h-5 text-[hsl(var(--terracotta))] mr-3"}),l.jsx("span",{className:"text-[hsl(var(--dark-slate))]",children:t.address||t.location})]}),t.phone&&l.jsxs("div",{className:"flex items-center",children:[l.jsx(Pk,{className:"w-5 h-5 text-[hsl(var(--terracotta))] mr-3"}),l.jsx("span",{className:"text-[hsl(var(--dark-slate))]",children:t.phone})]}),t.hours&&l.jsxs("div",{className:"flex items-center",children:[l.jsx(cl,{className:"w-5 h-5 text-[hsl(var(--terracotta))] mr-3"}),l.jsx("span",{className:"text-[hsl(var(--dark-slate))]",children:t.hours})]}),l.jsxs("div",{className:"flex items-center",children:[l.jsx(Tk,{className:"w-5 h-5 text-[hsl(var(--terracotta))] mr-3"}),l.jsx("span",{className:"text-[hsl(var(--dark-slate))]",children:t.priceRange}),t.mediaPrezzo&&l.jsxs("span",{className:"text-[hsl(var(--dark-slate))]/60 ml-2",children:["(Media: €",t.mediaPrezzo.toFixed(2),")"]})]}),l.jsxs("div",{className:"flex items-center",children:[y(t.rating),l.jsx("span",{className:"ml-2 text-[hsl(var(--dark-slate))] font-medium",children:t.rating}),l.jsx("span",{className:"text-[hsl(var(--dark-slate))]/50 ml-2",children:"TripAdvisor"})]})]})]}),l.jsxs("div",{children:[l.jsx("h4",{className:"text-lg font-semibold text-[hsl(var(--dark-slate))] mb-4",children:"Cucine e Specialità"}),l.jsx("div",{className:"flex flex-wrap gap-2 mb-6",children:((M=t.cuisines)==null?void 0:M.map((D,b)=>l.jsx(js,{className:Iu(D),children:D.charAt(0).toUpperCase()+D.slice(1)},`${D}-${b}`)))||l.jsx(js,{className:"bg-gray-100 text-gray-600",children:"Cucina non specificata"})}),k&&l.jsxs("div",{className:"bg-white border border-[hsl(var(--terracotta))]/20 rounded-lg p-4",children:[l.jsxs("h5",{className:"font-medium text-[hsl(var(--dark-slate))] mb-3 flex items-center",children:[l.jsx(Sx,{className:"w-4 h-4 mr-2 text-[hsl(var(--terracotta))]"}),"Highlights Community"]}),l.jsxs("div",{className:"space-y-2 text-sm",children:[t.locationUser&&l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsx("span",{className:"text-[hsl(var(--dark-slate))]/70",children:"Posizione"}),l.jsxs("div",{className:"flex items-center",children:[l.jsx("span",{className:"font-medium text-[hsl(var(--terracotta))] mr-1",children:t.locationUser.toFixed(1)}),l.jsx(Xt,{className:"w-3 h-3 text-[hsl(var(--terracotta))]"})]})]}),t.qualitàPrezzoUser&&l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsx("span",{className:"text-[hsl(var(--dark-slate))]/70",children:"Qualità/Prezzo"}),l.jsxs("div",{className:"flex items-center",children:[l.jsx("span",{className:"font-medium text-[hsl(var(--terracotta))] mr-1",children:t.qualitàPrezzoUser.toFixed(1)}),l.jsx(Xt,{className:"w-3 h-3 text-[hsl(var(--terracotta))]"})]})]}),t.mediaPrezzo&&l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsx("span",{className:"text-[hsl(var(--dark-slate))]/70",children:"Prezzo Tipico"}),l.jsxs("div",{className:"flex items-center",children:[l.jsx(np,{className:"w-3 h-3 text-[hsl(var(--terracotta))] mr-1"}),l.jsx("span",{className:"font-medium text-[hsl(var(--terracotta))]",children:t.mediaPrezzo.toFixed(2)})]})]})]})]})]})]}),l.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 pt-6 border-t",children:[l.jsxs(oe,{className:"flex-1 bg-[hsl(var(--terracotta))] text-white hover:bg-[hsl(var(--saddle))] transition-colors font-medium",onClick:g,children:[l.jsx(An,{className:"w-4 h-4 mr-2"}),"Prenota"]}),l.jsxs(oe,{variant:"outline",className:"flex-1 border-[hsl(var(--terracotta))] text-[hsl(var(--terracotta))] hover:bg-[hsl(var(--terracotta))]/10 transition-colors font-medium",onClick:_,children:[l.jsx(gE,{className:"w-4 h-4 mr-2"}),"Ottieni Indicazioni"]}),l.jsx(oe,{variant:"outline",className:`border-gray-300 hover:bg-gray-50 transition-colors font-medium ${x?"text-[hsl(var(--tomato))]":"text-[hsl(var(--dark-slate))]"}`,onClick:T,children:l.jsx(ks,{className:`w-4 h-4 mr-2 ${x?"fill-current":""}`})})]})]})]})}),l.jsx(J3,{restaurant:t,isOpen:u,onClose:w})]})},Z3=({restaurants:t,onRestaurantClick:e,className:n=""})=>{const r=m.useRef(null),s=m.useRef(null),i=m.useRef([]);m.useEffect(()=>{if(window.L)o();else{const u=document.createElement("link");u.rel="stylesheet",u.href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css",document.head.appendChild(u);const d=document.createElement("script");d.src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js",d.onload=o,document.head.appendChild(d)}return()=>{s.current&&(s.current.remove(),s.current=null)}},[]),m.useEffect(()=>{s.current&&a()},[t]);const o=()=>{!r.current||s.current||(s.current=window.L.map(r.current).setView([40.2,18.2],10),window.L.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:"© OpenStreetMap contributors"}).addTo(s.current),a())},a=()=>{!s.current||!window.L||(i.current.forEach(u=>{s.current.removeLayer(u)}),i.current=[],t.forEach(u=>{if(u.latitude&&u.longitude){const d=parseFloat(u.latitude),h=parseFloat(u.longitude),p=window.L.marker([d,h]).addTo(s.current),g=`
          <div class="p-2">
            <h3 class="font-semibold text-lg mb-1">${u.name}</h3>
            <p class="text-sm text-gray-600 mb-2">${u.location}</p>
            <div class="flex items-center mb-2">
              <span class="text-yellow-500 mr-1">★</span>
              <span class="mr-2">${u.rating}</span>
              <span class="text-orange-600 font-medium">${u.priceRange}</span>
            </div>
            <button 
              onclick="window.openRestaurantFromMap?.(${u.id})"
              class="bg-orange-600 text-white px-3 py-1 rounded text-sm hover:bg-orange-700 transition-colors"
            >
              Dettagli
            </button>
          </div>
        `;p.bindPopup(g),i.current.push(p),p.on("click",()=>{e==null||e(u)})}}),window.openRestaurantFromMap=u=>{const d=t.find(h=>h.id===u);d&&e&&e(d)})};return l.jsx("div",{ref:r,className:`h-96 rounded-xl ${n}`})};var Md="Popover",[aC,y6]=os(Md,[yo]),xl=yo(),[eL,ds]=aC(Md),lC=t=>{const{__scopePopover:e,children:n,open:r,defaultOpen:s,onOpenChange:i,modal:o=!1}=t,a=xl(e),u=m.useRef(null),[d,h]=m.useState(!1),[p,g]=Yi({prop:r,defaultProp:s??!1,onChange:i,caller:Md});return l.jsx(KE,{...a,children:l.jsx(eL,{scope:e,contentId:Bt(),triggerRef:u,open:p,onOpenChange:g,onOpenToggle:m.useCallback(()=>g(w=>!w),[g]),hasCustomAnchor:d,onCustomAnchorAdd:m.useCallback(()=>h(!0),[]),onCustomAnchorRemove:m.useCallback(()=>h(!1),[]),modal:o,children:n})})};lC.displayName=Md;var cC="PopoverAnchor",tL=m.forwardRef((t,e)=>{const{__scopePopover:n,...r}=t,s=ds(cC,n),i=xl(n),{onCustomAnchorAdd:o,onCustomAnchorRemove:a}=s;return m.useEffect(()=>(o(),()=>a()),[o,a]),l.jsx(ed,{...i,...r,ref:e})});tL.displayName=cC;var uC="PopoverTrigger",dC=m.forwardRef((t,e)=>{const{__scopePopover:n,...r}=t,s=ds(uC,n),i=xl(n),o=Ae(e,s.triggerRef),a=l.jsx(de.button,{type:"button","aria-haspopup":"dialog","aria-expanded":s.open,"aria-controls":s.contentId,"data-state":gC(s.open),...r,ref:o,onClick:ue(t.onClick,s.onOpenToggle)});return s.hasCustomAnchor?a:l.jsx(ed,{asChild:!0,...i,children:a})});dC.displayName=uC;var tv="PopoverPortal",[nL,rL]=aC(tv,{forceMount:void 0}),hC=t=>{const{__scopePopover:e,forceMount:n,children:r,container:s}=t,i=ds(tv,e);return l.jsx(nL,{scope:e,forceMount:n,children:l.jsx(mr,{present:n||i.open,children:l.jsx(al,{asChild:!0,container:s,children:r})})})};hC.displayName=tv;var lo="PopoverContent",fC=m.forwardRef((t,e)=>{const n=rL(lo,t.__scopePopover),{forceMount:r=n.forceMount,...s}=t,i=ds(lo,t.__scopePopover);return l.jsx(mr,{present:r||i.open,children:i.modal?l.jsx(iL,{...s,ref:e}):l.jsx(oL,{...s,ref:e})})});fC.displayName=lo;var sL=zs("PopoverContent.RemoveScroll"),iL=m.forwardRef((t,e)=>{const n=ds(lo,t.__scopePopover),r=m.useRef(null),s=Ae(e,r),i=m.useRef(!1);return m.useEffect(()=>{const o=r.current;if(o)return rg(o)},[]),l.jsx(id,{as:sL,allowPinchZoom:!0,children:l.jsx(pC,{...t,ref:s,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:ue(t.onCloseAutoFocus,o=>{var a;o.preventDefault(),i.current||(a=n.triggerRef.current)==null||a.focus()}),onPointerDownOutside:ue(t.onPointerDownOutside,o=>{const a=o.detail.originalEvent,u=a.button===0&&a.ctrlKey===!0,d=a.button===2||u;i.current=d},{checkForDefaultPrevented:!1}),onFocusOutside:ue(t.onFocusOutside,o=>o.preventDefault(),{checkForDefaultPrevented:!1})})})}),oL=m.forwardRef((t,e)=>{const n=ds(lo,t.__scopePopover),r=m.useRef(!1),s=m.useRef(!1);return l.jsx(pC,{...t,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:i=>{var o,a;(o=t.onCloseAutoFocus)==null||o.call(t,i),i.defaultPrevented||(r.current||(a=n.triggerRef.current)==null||a.focus(),i.preventDefault()),r.current=!1,s.current=!1},onInteractOutside:i=>{var u,d;(u=t.onInteractOutside)==null||u.call(t,i),i.defaultPrevented||(r.current=!0,i.detail.originalEvent.type==="pointerdown"&&(s.current=!0));const o=i.target;((d=n.triggerRef.current)==null?void 0:d.contains(o))&&i.preventDefault(),i.detail.originalEvent.type==="focusin"&&s.current&&i.preventDefault()}})}),pC=m.forwardRef((t,e)=>{const{__scopePopover:n,trapFocus:r,onOpenAutoFocus:s,onCloseAutoFocus:i,disableOutsidePointerEvents:o,onEscapeKeyDown:a,onPointerDownOutside:u,onFocusOutside:d,onInteractOutside:h,...p}=t,g=ds(lo,n),w=xl(n);return ng(),l.jsx(rd,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:s,onUnmountAutoFocus:i,children:l.jsx(fo,{asChild:!0,disableOutsidePointerEvents:o,onInteractOutside:h,onEscapeKeyDown:a,onPointerDownOutside:u,onFocusOutside:d,onDismiss:()=>g.onOpenChange(!1),children:l.jsx(Zm,{"data-state":gC(g.open),role:"dialog",id:g.contentId,...w,...p,ref:e,style:{...p.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}})})})}),mC="PopoverClose",aL=m.forwardRef((t,e)=>{const{__scopePopover:n,...r}=t,s=ds(mC,n);return l.jsx(de.button,{type:"button",...r,ref:e,onClick:ue(t.onClick,()=>s.onOpenChange(!1))})});aL.displayName=mC;var lL="PopoverArrow",cL=m.forwardRef((t,e)=>{const{__scopePopover:n,...r}=t,s=xl(n);return l.jsx(eg,{...s,...r,ref:e})});cL.displayName=lL;function gC(t){return t?"open":"closed"}var uL=lC,dL=dC,hL=hC,vC=fC;const fL=uL,pL=dL,yC=m.forwardRef(({className:t,align:e="center",sideOffset:n=4,...r},s)=>l.jsx(hL,{children:l.jsx(vC,{ref:s,align:e,sideOffset:n,className:ce("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-popover-content-transform-origin]",t),...r})}));yC.displayName=vC.displayName;var hw=1,mL=.9,gL=.8,vL=.17,nf=.1,rf=.999,yL=.9999,xL=.99,wL=/[\\\/_+.#"@\[\(\{&]/,_L=/[\\\/_+.#"@\[\(\{&]/g,EL=/[\s-]/,xC=/[\s-]/g;function zp(t,e,n,r,s,i,o){if(i===e.length)return s===t.length?hw:xL;var a=`${s},${i}`;if(o[a]!==void 0)return o[a];for(var u=r.charAt(i),d=n.indexOf(u,s),h=0,p,g,w,C;d>=0;)p=zp(t,e,n,r,d+1,i+1,o),p>h&&(d===s?p*=hw:wL.test(t.charAt(d-1))?(p*=gL,w=t.slice(s,d-1).match(_L),w&&s>0&&(p*=Math.pow(rf,w.length))):EL.test(t.charAt(d-1))?(p*=mL,C=t.slice(s,d-1).match(xC),C&&s>0&&(p*=Math.pow(rf,C.length))):(p*=vL,s>0&&(p*=Math.pow(rf,d-s))),t.charAt(d)!==e.charAt(i)&&(p*=yL)),(p<nf&&n.charAt(d-1)===r.charAt(i+1)||r.charAt(i+1)===r.charAt(i)&&n.charAt(d-1)!==r.charAt(i))&&(g=zp(t,e,n,r,d+1,i+2,o),g*nf>p&&(p=g*nf)),p>h&&(h=p),d=n.indexOf(u,d+1);return o[a]=h,h}function fw(t){return t.toLowerCase().replace(xC," ")}function TL(t,e,n){return t=n&&n.length>0?`${t+" "+n.join(" ")}`:t,zp(t,e,fw(t),fw(e),0,0,{})}var Qo='[cmdk-group=""]',sf='[cmdk-group-items=""]',SL='[cmdk-group-heading=""]',wC='[cmdk-item=""]',pw=`${wC}:not([aria-disabled="true"])`,Up="cmdk-item-select",mi="data-value",bL=(t,e,n)=>TL(t,e,n),_C=m.createContext(void 0),wl=()=>m.useContext(_C),EC=m.createContext(void 0),nv=()=>m.useContext(EC),TC=m.createContext(void 0),SC=m.forwardRef((t,e)=>{let n=gi(()=>{var U,J;return{search:"",value:(J=(U=t.value)!=null?U:t.defaultValue)!=null?J:"",selectedItemId:void 0,filtered:{count:0,items:new Map,groups:new Set}}}),r=gi(()=>new Set),s=gi(()=>new Map),i=gi(()=>new Map),o=gi(()=>new Set),a=bC(t),{label:u,children:d,value:h,onValueChange:p,filter:g,shouldFilter:w,loop:C,disablePointerSelection:x=!1,vimBindings:T=!0,..._}=t,y=Bt(),E=Bt(),k=Bt(),M=m.useRef(null),D=OL();Ys(()=>{if(h!==void 0){let U=h.trim();n.current.value=U,b.emit()}},[h]),Ys(()=>{D(6,A)},[]);let b=m.useMemo(()=>({subscribe:U=>(o.current.add(U),()=>o.current.delete(U)),snapshot:()=>n.current,setState:(U,J,W)=>{var B,ee,Y,pe;if(!Object.is(n.current[U],J)){if(n.current[U]=J,U==="search")j(),R(),D(1,P);else if(U==="value"){if(document.activeElement.hasAttribute("cmdk-input")||document.activeElement.hasAttribute("cmdk-root")){let we=document.getElementById(k);we?we.focus():(B=document.getElementById(y))==null||B.focus()}if(D(7,()=>{var we;n.current.selectedItemId=(we=L())==null?void 0:we.id,b.emit()}),W||D(5,A),((ee=a.current)==null?void 0:ee.value)!==void 0){let we=J??"";(pe=(Y=a.current).onValueChange)==null||pe.call(Y,we);return}}b.emit()}},emit:()=>{o.current.forEach(U=>U())}}),[]),S=m.useMemo(()=>({value:(U,J,W)=>{var B;J!==((B=i.current.get(U))==null?void 0:B.value)&&(i.current.set(U,{value:J,keywords:W}),n.current.filtered.items.set(U,I(J,W)),D(2,()=>{R(),b.emit()}))},item:(U,J)=>(r.current.add(U),J&&(s.current.has(J)?s.current.get(J).add(U):s.current.set(J,new Set([U]))),D(3,()=>{j(),R(),n.current.value||P(),b.emit()}),()=>{i.current.delete(U),r.current.delete(U),n.current.filtered.items.delete(U);let W=L();D(4,()=>{j(),(W==null?void 0:W.getAttribute("id"))===U&&P(),b.emit()})}),group:U=>(s.current.has(U)||s.current.set(U,new Set),()=>{i.current.delete(U),s.current.delete(U)}),filter:()=>a.current.shouldFilter,label:u||t["aria-label"],getDisablePointerSelection:()=>a.current.disablePointerSelection,listId:y,inputId:k,labelId:E,listInnerRef:M}),[]);function I(U,J){var W,B;let ee=(B=(W=a.current)==null?void 0:W.filter)!=null?B:bL;return U?ee(U,n.current.search,J):0}function R(){if(!n.current.search||a.current.shouldFilter===!1)return;let U=n.current.filtered.items,J=[];n.current.filtered.groups.forEach(B=>{let ee=s.current.get(B),Y=0;ee.forEach(pe=>{let we=U.get(pe);Y=Math.max(we,Y)}),J.push([B,Y])});let W=M.current;G().sort((B,ee)=>{var Y,pe;let we=B.getAttribute("id"),ye=ee.getAttribute("id");return((Y=U.get(ye))!=null?Y:0)-((pe=U.get(we))!=null?pe:0)}).forEach(B=>{let ee=B.closest(sf);ee?ee.appendChild(B.parentElement===ee?B:B.closest(`${sf} > *`)):W.appendChild(B.parentElement===W?B:B.closest(`${sf} > *`))}),J.sort((B,ee)=>ee[1]-B[1]).forEach(B=>{var ee;let Y=(ee=M.current)==null?void 0:ee.querySelector(`${Qo}[${mi}="${encodeURIComponent(B[0])}"]`);Y==null||Y.parentElement.appendChild(Y)})}function P(){let U=G().find(W=>W.getAttribute("aria-disabled")!=="true"),J=U==null?void 0:U.getAttribute(mi);b.setState("value",J||void 0)}function j(){var U,J,W,B;if(!n.current.search||a.current.shouldFilter===!1){n.current.filtered.count=r.current.size;return}n.current.filtered.groups=new Set;let ee=0;for(let Y of r.current){let pe=(J=(U=i.current.get(Y))==null?void 0:U.value)!=null?J:"",we=(B=(W=i.current.get(Y))==null?void 0:W.keywords)!=null?B:[],ye=I(pe,we);n.current.filtered.items.set(Y,ye),ye>0&&ee++}for(let[Y,pe]of s.current)for(let we of pe)if(n.current.filtered.items.get(we)>0){n.current.filtered.groups.add(Y);break}n.current.filtered.count=ee}function A(){var U,J,W;let B=L();B&&(((U=B.parentElement)==null?void 0:U.firstChild)===B&&((W=(J=B.closest(Qo))==null?void 0:J.querySelector(SL))==null||W.scrollIntoView({block:"nearest"})),B.scrollIntoView({block:"nearest"}))}function L(){var U;return(U=M.current)==null?void 0:U.querySelector(`${wC}[aria-selected="true"]`)}function G(){var U;return Array.from(((U=M.current)==null?void 0:U.querySelectorAll(pw))||[])}function Q(U){let J=G()[U];J&&b.setState("value",J.getAttribute(mi))}function z(U){var J;let W=L(),B=G(),ee=B.findIndex(pe=>pe===W),Y=B[ee+U];(J=a.current)!=null&&J.loop&&(Y=ee+U<0?B[B.length-1]:ee+U===B.length?B[0]:B[ee+U]),Y&&b.setState("value",Y.getAttribute(mi))}function O(U){let J=L(),W=J==null?void 0:J.closest(Qo),B;for(;W&&!B;)W=U>0?DL(W,Qo):ML(W,Qo),B=W==null?void 0:W.querySelector(pw);B?b.setState("value",B.getAttribute(mi)):z(U)}let $=()=>Q(G().length-1),Z=U=>{U.preventDefault(),U.metaKey?$():U.altKey?O(1):z(1)},se=U=>{U.preventDefault(),U.metaKey?Q(0):U.altKey?O(-1):z(-1)};return m.createElement(de.div,{ref:e,tabIndex:-1,..._,"cmdk-root":"",onKeyDown:U=>{var J;(J=_.onKeyDown)==null||J.call(_,U);let W=U.nativeEvent.isComposing||U.keyCode===229;if(!(U.defaultPrevented||W))switch(U.key){case"n":case"j":{T&&U.ctrlKey&&Z(U);break}case"ArrowDown":{Z(U);break}case"p":case"k":{T&&U.ctrlKey&&se(U);break}case"ArrowUp":{se(U);break}case"Home":{U.preventDefault(),Q(0);break}case"End":{U.preventDefault(),$();break}case"Enter":{U.preventDefault();let B=L();if(B){let ee=new Event(Up);B.dispatchEvent(ee)}}}}},m.createElement("label",{"cmdk-label":"",htmlFor:S.inputId,id:S.labelId,style:LL},u),Od(t,U=>m.createElement(EC.Provider,{value:b},m.createElement(_C.Provider,{value:S},U))))}),CL=m.forwardRef((t,e)=>{var n,r;let s=Bt(),i=m.useRef(null),o=m.useContext(TC),a=wl(),u=bC(t),d=(r=(n=u.current)==null?void 0:n.forceMount)!=null?r:o==null?void 0:o.forceMount;Ys(()=>{if(!d)return a.item(s,o==null?void 0:o.id)},[d]);let h=CC(s,i,[t.value,t.children,i],t.keywords),p=nv(),g=ns(D=>D.value&&D.value===h.current),w=ns(D=>d||a.filter()===!1?!0:D.search?D.filtered.items.get(s)>0:!0);m.useEffect(()=>{let D=i.current;if(!(!D||t.disabled))return D.addEventListener(Up,C),()=>D.removeEventListener(Up,C)},[w,t.onSelect,t.disabled]);function C(){var D,b;x(),(b=(D=u.current).onSelect)==null||b.call(D,h.current)}function x(){p.setState("value",h.current,!0)}if(!w)return null;let{disabled:T,value:_,onSelect:y,forceMount:E,keywords:k,...M}=t;return m.createElement(de.div,{ref:Fs(i,e),...M,id:s,"cmdk-item":"",role:"option","aria-disabled":!!T,"aria-selected":!!g,"data-disabled":!!T,"data-selected":!!g,onPointerMove:T||a.getDisablePointerSelection()?void 0:x,onClick:T?void 0:C},t.children)}),NL=m.forwardRef((t,e)=>{let{heading:n,children:r,forceMount:s,...i}=t,o=Bt(),a=m.useRef(null),u=m.useRef(null),d=Bt(),h=wl(),p=ns(w=>s||h.filter()===!1?!0:w.search?w.filtered.groups.has(o):!0);Ys(()=>h.group(o),[]),CC(o,a,[t.value,t.heading,u]);let g=m.useMemo(()=>({id:o,forceMount:s}),[s]);return m.createElement(de.div,{ref:Fs(a,e),...i,"cmdk-group":"",role:"presentation",hidden:p?void 0:!0},n&&m.createElement("div",{ref:u,"cmdk-group-heading":"","aria-hidden":!0,id:d},n),Od(t,w=>m.createElement("div",{"cmdk-group-items":"",role:"group","aria-labelledby":n?d:void 0},m.createElement(TC.Provider,{value:g},w))))}),IL=m.forwardRef((t,e)=>{let{alwaysRender:n,...r}=t,s=m.useRef(null),i=ns(o=>!o.search);return!n&&!i?null:m.createElement(de.div,{ref:Fs(s,e),...r,"cmdk-separator":"",role:"separator"})}),RL=m.forwardRef((t,e)=>{let{onValueChange:n,...r}=t,s=t.value!=null,i=nv(),o=ns(d=>d.search),a=ns(d=>d.selectedItemId),u=wl();return m.useEffect(()=>{t.value!=null&&i.setState("search",t.value)},[t.value]),m.createElement(de.input,{ref:e,...r,"cmdk-input":"",autoComplete:"off",autoCorrect:"off",spellCheck:!1,"aria-autocomplete":"list",role:"combobox","aria-expanded":!0,"aria-controls":u.listId,"aria-labelledby":u.labelId,"aria-activedescendant":a,id:u.inputId,type:"text",value:s?t.value:o,onChange:d=>{s||i.setState("search",d.target.value),n==null||n(d.target.value)}})}),AL=m.forwardRef((t,e)=>{let{children:n,label:r="Suggestions",...s}=t,i=m.useRef(null),o=m.useRef(null),a=ns(d=>d.selectedItemId),u=wl();return m.useEffect(()=>{if(o.current&&i.current){let d=o.current,h=i.current,p,g=new ResizeObserver(()=>{p=requestAnimationFrame(()=>{let w=d.offsetHeight;h.style.setProperty("--cmdk-list-height",w.toFixed(1)+"px")})});return g.observe(d),()=>{cancelAnimationFrame(p),g.unobserve(d)}}},[]),m.createElement(de.div,{ref:Fs(i,e),...s,"cmdk-list":"",role:"listbox",tabIndex:-1,"aria-activedescendant":a,"aria-label":r,id:u.listId},Od(t,d=>m.createElement("div",{ref:Fs(o,u.listInnerRef),"cmdk-list-sizer":""},d)))}),kL=m.forwardRef((t,e)=>{let{open:n,onOpenChange:r,overlayClassName:s,contentClassName:i,container:o,...a}=t;return m.createElement(ag,{open:n,onOpenChange:r},m.createElement(lg,{container:o},m.createElement(hl,{"cmdk-overlay":"",className:s}),m.createElement(fl,{"aria-label":t.label,"cmdk-dialog":"",className:i},m.createElement(SC,{ref:e,...a}))))}),PL=m.forwardRef((t,e)=>ns(n=>n.filtered.count===0)?m.createElement(de.div,{ref:e,...t,"cmdk-empty":"",role:"presentation"}):null),jL=m.forwardRef((t,e)=>{let{progress:n,children:r,label:s="Loading...",...i}=t;return m.createElement(de.div,{ref:e,...i,"cmdk-loading":"",role:"progressbar","aria-valuenow":n,"aria-valuemin":0,"aria-valuemax":100,"aria-label":s},Od(t,o=>m.createElement("div",{"aria-hidden":!0},o)))}),Wt=Object.assign(SC,{List:AL,Item:CL,Input:RL,Group:NL,Separator:IL,Dialog:kL,Empty:PL,Loading:jL});function DL(t,e){let n=t.nextElementSibling;for(;n;){if(n.matches(e))return n;n=n.nextElementSibling}}function ML(t,e){let n=t.previousElementSibling;for(;n;){if(n.matches(e))return n;n=n.previousElementSibling}}function bC(t){let e=m.useRef(t);return Ys(()=>{e.current=t}),e}var Ys=typeof window>"u"?m.useEffect:m.useLayoutEffect;function gi(t){let e=m.useRef();return e.current===void 0&&(e.current=t()),e}function ns(t){let e=nv(),n=()=>t(e.snapshot());return m.useSyncExternalStore(e.subscribe,n,n)}function CC(t,e,n,r=[]){let s=m.useRef(),i=wl();return Ys(()=>{var o;let a=(()=>{var d;for(let h of n){if(typeof h=="string")return h.trim();if(typeof h=="object"&&"current"in h)return h.current?(d=h.current.textContent)==null?void 0:d.trim():s.current}})(),u=r.map(d=>d.trim());i.value(t,a,u),(o=e.current)==null||o.setAttribute(mi,a),s.current=a}),s}var OL=()=>{let[t,e]=m.useState(),n=gi(()=>new Map);return Ys(()=>{n.current.forEach(r=>r()),n.current=new Map},[t]),(r,s)=>{n.current.set(r,s),e({})}};function VL(t){let e=t.type;return typeof e=="function"?e(t.props):"render"in e?e.render(t.props):t}function Od({asChild:t,children:e},n){return t&&m.isValidElement(e)?m.cloneElement(VL(e),{ref:e.ref},n(e.props.children)):n(e)}var LL={position:"absolute",width:"1px",height:"1px",padding:"0",margin:"-1px",overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0"};const NC=m.forwardRef(({className:t,...e},n)=>l.jsx(Wt,{ref:n,className:ce("flex h-full w-full flex-col overflow-hidden rounded-md bg-popover text-popover-foreground",t),...e}));NC.displayName=Wt.displayName;const IC=m.forwardRef(({className:t,...e},n)=>l.jsxs("div",{className:"flex items-center border-b px-3","cmdk-input-wrapper":"",children:[l.jsx(ga,{className:"mr-2 h-4 w-4 shrink-0 opacity-50"}),l.jsx(Wt.Input,{ref:n,className:ce("flex h-11 w-full rounded-md bg-transparent py-3 text-sm outline-none placeholder:text-muted-foreground disabled:cursor-not-allowed disabled:opacity-50",t),...e})]}));IC.displayName=Wt.Input.displayName;const FL=m.forwardRef(({className:t,...e},n)=>l.jsx(Wt.List,{ref:n,className:ce("max-h-[300px] overflow-y-auto overflow-x-hidden",t),...e}));FL.displayName=Wt.List.displayName;const RC=m.forwardRef((t,e)=>l.jsx(Wt.Empty,{ref:e,className:"py-6 text-center text-sm",...t}));RC.displayName=Wt.Empty.displayName;const AC=m.forwardRef(({className:t,...e},n)=>l.jsx(Wt.Group,{ref:n,className:ce("overflow-hidden p-1 text-foreground [&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:py-1.5 [&_[cmdk-group-heading]]:text-xs [&_[cmdk-group-heading]]:font-medium [&_[cmdk-group-heading]]:text-muted-foreground",t),...e}));AC.displayName=Wt.Group.displayName;const zL=m.forwardRef(({className:t,...e},n)=>l.jsx(Wt.Separator,{ref:n,className:ce("-mx-1 h-px bg-border",t),...e}));zL.displayName=Wt.Separator.displayName;const kC=m.forwardRef(({className:t,...e},n)=>l.jsx(Wt.Item,{ref:n,className:ce("relative flex cursor-default gap-2 select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none data-[disabled=true]:pointer-events-none data-[selected='true']:bg-accent data-[selected=true]:text-accent-foreground data-[disabled=true]:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",t),...e}));kC.displayName=Wt.Item.displayName;const PC=({selectedCuisines:t,onCuisinesChange:e,placeholder:n="Seleziona tipi di cucina...",className:r})=>{const[s,i]=m.useState(!1),o=d=>{t.includes(d)||e([...t,d]),i(!1)},a=d=>{e(t.filter(h=>h!==d))},u=tC.filter(d=>!t.includes(d.value));return l.jsxs("div",{className:ce("space-y-2",r),children:[l.jsx("div",{className:"flex flex-wrap gap-2",children:t.map(d=>l.jsxs(js,{variant:"outline",className:ce("px-3 py-1 text-sm font-medium border cursor-pointer hover:opacity-80 transition-opacity",Iu(d)),onClick:()=>a(d),children:[nC(d),l.jsx(ul,{className:"w-3 h-3 ml-2"})]},d))}),l.jsxs(fL,{open:s,onOpenChange:i,children:[l.jsx(pL,{asChild:!0,children:l.jsxs(oe,{variant:"outline",role:"combobox","aria-expanded":s,className:"justify-start text-left font-normal",disabled:u.length===0,children:[l.jsx(Ps,{className:"w-4 h-4 mr-2"}),u.length===0?"Tutti i tipi di cucina selezionati":n]})}),l.jsx(yC,{className:"w-full p-0",align:"start",children:l.jsxs(NC,{children:[l.jsx(IC,{placeholder:"Cerca tipo di cucina..."}),l.jsx(RC,{children:"Nessun tipo di cucina trovato."}),l.jsx(AC,{children:u.map(d=>l.jsxs(kC,{value:d.value,onSelect:()=>o(d.value),className:"cursor-pointer",children:[l.jsx(Fa,{className:"w-4 h-4 mr-2 opacity-0"}),l.jsx("span",{className:ce("px-2 py-1 rounded text-xs font-medium",Iu(d.value)),children:d.label})]},d.value))})]})})]}),t.length===0&&l.jsx("p",{className:"text-sm text-muted-foreground",children:"Seleziona almeno un tipo di cucina"})]})},UL=()=>{const[t,e]=m.useState(""),[n,r]=m.useState([]),[s,i]=m.useState("all"),[o,a]=m.useState("all"),[u,d]=m.useState("grid"),[h,p]=m.useState(null),[g,w]=m.useState(!1),[C,x]=m.useState([]),[T,_]=m.useState(!0),[y,E]=m.useState(null),{getAllRestaurants:k,deleteRestaurant:M}=ni();m.useEffect(()=>{(async()=>{try{_(!0),E(null);const j=await k();x(j)}catch(j){const A=en(j);E(A),Lt("Caricamento ristoranti in Home",j)}finally{_(!1)}})()},[]);const D=m.useMemo(()=>C.filter(P=>{var z;const j=P.name.toLowerCase().includes(t.toLowerCase())||((z=P.description)==null?void 0:z.toLowerCase().includes(t.toLowerCase())),A=H3(P.cuisines),L=n.length===0||n.some(O=>A.includes(O)),G=s==="all"||P.priceRange===s,Q=o==="all"||parseFloat(P.rating)>=parseFloat(o);return j&&L&&G&&Q}),[C,t,n,s,o]),b=P=>{p(P),w(!0)},S=()=>{e(""),r([]),i("all"),a("all")},I=[{value:"€",label:"€ - Budget"},{value:"€€",label:"€€ - Moderate"},{value:"€€€",label:"€€€ - Expensive"},{value:"€€€€",label:"€€€€ - Fine Dining"}],R=[{value:"4.5",label:"4.5+ Stars"},{value:"4.0",label:"4.0+ Stars"},{value:"3.5",label:"3.5+ Stars"},{value:"3.0",label:"3.0+ Stars"}];return T?l.jsx("div",{className:"min-h-screen flex items-center justify-center",children:l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-[hsl(var(--terracotta))] mx-auto mb-4"}),l.jsx("p",{className:"text-[hsl(var(--dark-slate))]/70",children:"Caricamento ristoranti..."})]})}):y?l.jsx("div",{className:"min-h-screen flex items-center justify-center",children:l.jsx("div",{className:"text-center max-w-md mx-auto px-4",children:l.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-8",children:[l.jsx("div",{className:"text-red-500 mb-4",children:l.jsx(ga,{className:"w-16 h-16 mx-auto mb-4 opacity-50"})}),l.jsx("h3",{className:"text-2xl font-display font-semibold text-[hsl(var(--dark-slate))] mb-2",children:"Errore nel caricamento"}),l.jsx("p",{className:"text-[hsl(var(--dark-slate))]/70 mb-6",children:y}),l.jsx(oe,{onClick:()=>window.location.reload(),className:"bg-[hsl(var(--terracotta))] text-white hover:bg-[hsl(var(--saddle))]",children:"Riprova"})]})})}):l.jsx("main",{className:"min-h-screen",children:l.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:[l.jsxs("div",{className:"text-center mb-8",children:[l.jsx("h2",{className:"text-4xl md:text-5xl font-display font-bold text-[hsl(var(--dark-slate))] mb-4",children:"Lu mare, lu sole, lu spinning"}),l.jsx("p",{className:"text-lg text-[hsl(var(--dark-slate))]/70 max-w-2xl mx-auto",children:"Esplora i ristoranti autentici nel cuore della Puglia, dalle trattorie tradizionali alle esperienze culinarie moderne."})]}),l.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6 mb-6",children:[l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{className:"relative",children:[l.jsx(ga,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-[hsl(var(--dark-slate))]/50 w-5 h-5"}),l.jsx(At,{type:"text",placeholder:"Search restaurants...",value:t,onChange:P=>e(P.target.value),className:"pl-10 py-3 border-gray-200 focus:ring-2 focus:ring-[hsl(var(--terracotta))] focus:border-transparent"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-[hsl(var(--dark-slate))] mb-2",children:"Tipi di Cucina"}),l.jsx(PC,{selectedCuisines:n,onCuisinesChange:r,placeholder:"Filtra per tipo di cucina..."})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-[hsl(var(--dark-slate))] mb-2",children:"Fascia di Prezzo"}),l.jsxs(Zi,{value:s,onValueChange:i,children:[l.jsx(qs,{className:"py-3 border-gray-200 focus:ring-2 focus:ring-[hsl(var(--terracotta))]",children:l.jsx(eo,{placeholder:"Tutte le fasce"})}),l.jsxs(Ks,{children:[l.jsx(tr,{value:"all",children:"Tutte le fasce"}),I.map(P=>l.jsx(tr,{value:P.value,children:P.label},P.value))]})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-[hsl(var(--dark-slate))] mb-2",children:"Rating Minimo"}),l.jsxs(Zi,{value:o,onValueChange:a,children:[l.jsx(qs,{className:"py-3 border-gray-200 focus:ring-2 focus:ring-[hsl(var(--terracotta))]",children:l.jsx(eo,{placeholder:"Tutti i rating"})}),l.jsxs(Ks,{children:[l.jsx(tr,{value:"all",children:"Tutti i rating"}),R.map(P=>l.jsx(tr,{value:P.value,children:P.label},P.value))]})]})]})]})]}),l.jsxs("div",{className:"flex justify-between items-center mt-6 pt-4 border-t",children:[l.jsxs("div",{className:"flex space-x-2",children:[l.jsxs(oe,{variant:u==="grid"?"default":"outline",onClick:()=>d("grid"),className:u==="grid"?"bg-[hsl(var(--terracotta))] text-white":"",children:[l.jsx(Nk,{className:"w-4 h-4 mr-2"}),"Grid"]}),l.jsxs(oe,{variant:u==="map"?"default":"outline",onClick:()=>d("map"),className:u==="map"?"bg-[hsl(var(--terracotta))] text-white":"",children:[l.jsx(Ak,{className:"w-4 h-4 mr-2"}),"Map"]})]}),l.jsxs("div",{className:"flex items-center space-x-4",children:[l.jsxs("span",{className:"text-[hsl(var(--dark-slate))]/70",children:[D.length," ristorante",D.length!==1?"i":""," trovato",D.length!==1?"i":""]}),(t||n.length>0||s!=="all"||o!=="all")&&l.jsx(oe,{variant:"outline",onClick:S,className:"text-[hsl(var(--terracotta))] border-[hsl(var(--terracotta))] hover:bg-[hsl(var(--terracotta))] hover:text-white",children:"Cancella Filtri"})]})]})]}),u==="map"&&l.jsx("div",{className:"bg-white rounded-xl shadow-lg mb-6 overflow-hidden",children:l.jsx(Z3,{restaurants:D,onRestaurantClick:b})}),u==="grid"&&l.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:D.map(P=>l.jsx(rC,{restaurant:P,onViewDetails:b},P.id))}),l.jsx(ev,{restaurant:h,isOpen:g,onClose:()=>{w(!1),p(null)},allowDelete:!0,onDelete:async P=>{try{await M(P),x(j=>j.filter(A=>A.id!==P))}catch{}}}),D.length===0&&l.jsx("div",{className:"text-center py-12",children:l.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-12",children:[l.jsx(ga,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),l.jsx("h3",{className:"text-2xl font-display font-semibold text-[hsl(var(--dark-slate))] mb-2",children:"Nessun ristorante trovato"}),l.jsx("p",{className:"text-[hsl(var(--dark-slate))]/70 mb-6",children:"Prova a modificare i criteri di ricerca o i filtri"}),l.jsx(oe,{onClick:S,className:"bg-[hsl(var(--terracotta))] text-white hover:bg-[hsl(var(--saddle))]",children:"Cancella Filtri"})]})}),(t||n.length>0||s!=="all"||o!=="all")&&l.jsxs("div",{className:"mt-6 bg-blue-50 border border-blue-200 rounded-lg p-4",children:[l.jsx("h4",{className:"font-medium text-blue-800 mb-2",children:"Filtri Attivi:"}),l.jsxs("div",{className:"flex flex-wrap gap-2 text-sm",children:[t&&l.jsxs("span",{className:"bg-blue-100 text-blue-800 px-2 py-1 rounded",children:['Ricerca: "',t,'"']}),n.length>0&&l.jsxs("span",{className:"bg-blue-100 text-blue-800 px-2 py-1 rounded",children:["Cucine: ",n.join(", ")]}),s!=="all"&&l.jsxs("span",{className:"bg-blue-100 text-blue-800 px-2 py-1 rounded",children:["Prezzo: ",s]}),o!=="all"&&l.jsxs("span",{className:"bg-blue-100 text-blue-800 px-2 py-1 rounded",children:["Rating: ",o,"+ stelle"]})]})]})]})})},$L=()=>{const[t,e]=m.useState(null),[n,r]=m.useState(!1),[s,i]=m.useState(null),o=m.useCallback(()=>{i(null)},[]),a=m.useCallback(()=>{if(!navigator.geolocation){i({code:0,message:"Geolocation is not supported by this browser"});return}r(!0),i(null);const u={enableHighAccuracy:!0,timeout:1e4,maximumAge:3e5};navigator.geolocation.getCurrentPosition(d=>{e({latitude:d.coords.latitude,longitude:d.coords.longitude}),r(!1)},d=>{let h;switch(d.code){case d.PERMISSION_DENIED:h="Location access denied by user";break;case d.POSITION_UNAVAILABLE:h="Location information is unavailable";break;case d.TIMEOUT:h="Location request timed out";break;default:h="An unknown error occurred while retrieving location";break}i({code:d.code,message:h}),r(!1)},u)},[]);return{location:t,isLoading:n,error:s,getCurrentLocation:a,clearError:o}},BL=()=>{const[t,e]=m.useState([]),[n,r]=m.useState(!0),[s,i]=m.useState(null),[o,a]=m.useState("pugliese"),[u,d]=m.useState("€€"),[h,p]=m.useState(null),[g,w]=m.useState(!1),{location:C,isLoading:x,error:T,getCurrentLocation:_}=$L(),{favorites:y}=jd(),{getAllRestaurants:E,deleteRestaurant:k}=ni(),M=(L,G,Q,z)=>{const $=(Q-L)*Math.PI/180,Z=(z-G)*Math.PI/180,se=Math.sin($/2)*Math.sin($/2)+Math.cos(L*Math.PI/180)*Math.cos(Q*Math.PI/180)*Math.sin(Z/2)*Math.sin(Z/2);return 6371*(2*Math.atan2(Math.sqrt(se),Math.sqrt(1-se)))};m.useEffect(()=>{(async()=>{try{r(!0),i(null);const G=await E();e(G)}catch(G){const Q=en(G);i(Q),Lt("Caricamento ristoranti in Recommended",G)}finally{r(!1)}})()},[]);const b=t.length?t.map(G=>{let Q=0;G.cuisines.find($=>$===o)&&(Q+=35),G.priceRange===u&&(Q+=20);const z=parseFloat(G.rating)/5*25;Q+=z,y.includes(G.id)&&(Q+=10);let O=null;if(C&&G.latitude&&G.longitude){O=M(C.latitude,C.longitude,parseFloat(G.latitude),parseFloat(G.longitude));const $=Math.max(0,10-O/2);Q+=$}return{...G,score:Q,distance:O}}).sort((G,Q)=>Q.score-G.score):[],S=b[0],I=b.slice(1,4),R=L=>L?L<1?`${Math.round(L*1e3)}m`:`${L.toFixed(1)}km`:null,P=L=>L?`${Math.round(L/5*60)} min a piedi`:null,j=[{value:"pugliese",label:"Pugliese"},{value:"italiana",label:"Italiana"},{value:"mediterranea",label:"Mediterranea"},{value:"pesce",label:"Pesce"},{value:"barbecue",label:"Barbecue"},{value:"steakhouse",label:"Steakhouse"}],A=[{value:"€",label:"€ - Economico"},{value:"€€",label:"€€ - Moderato"},{value:"€€€",label:"€€€ - Costoso"},{value:"€€€€",label:"€€€€ - Fine Dining"}];return n?l.jsx("main",{className:"min-h-screen",children:l.jsxs("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[l.jsxs("div",{className:"text-center mb-8",children:[l.jsx("h2",{className:"text-3xl font-display font-bold text-[hsl(var(--dark-slate))] mb-4",children:"Consigliati per te"}),l.jsx("p",{className:"text-lg text-[hsl(var(--dark-slate))]/70",children:"Basato sulla tua posizione e preferenze"})]}),l.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-[hsl(var(--terracotta))] mx-auto mb-4"}),l.jsx("p",{className:"text-[hsl(var(--dark-slate))]/70",children:"Caricamento dei consigli personalizzati..."})]})})]})}):s?l.jsx("main",{className:"min-h-screen",children:l.jsxs("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[l.jsx("div",{className:"text-center mb-8",children:l.jsx("h2",{className:"text-3xl font-display font-bold text-[hsl(var(--dark-slate))] mb-4",children:"Consigliati per te"})}),l.jsx(Ue,{children:l.jsxs($e,{className:"p-12 text-center",children:[l.jsx("div",{className:"text-red-500 mb-4",children:l.jsx(iu,{className:"w-16 h-16 mx-auto mb-4 opacity-50"})}),l.jsx("h3",{className:"text-2xl font-display font-semibold text-[hsl(var(--dark-slate))] mb-2",children:"Errore nel caricamento"}),l.jsx("p",{className:"text-[hsl(var(--dark-slate))]/70 mb-6",children:s}),l.jsx(oe,{onClick:()=>window.location.reload(),className:"bg-[hsl(var(--terracotta))] text-white hover:bg-[hsl(var(--saddle))]",children:"Riprova"})]})})]})}):l.jsxs("main",{className:"min-h-screen",children:[l.jsxs("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[l.jsxs("div",{className:"text-center mb-8",children:[l.jsx("h2",{className:"text-3xl font-display font-bold text-[hsl(var(--dark-slate))] mb-4",children:"Consigliati per te"}),l.jsx("p",{className:"text-lg text-[hsl(var(--dark-slate))]/70",children:"Basato sulla tua posizione e preferenze"})]}),l.jsx(Ue,{className:"mb-6",children:l.jsx($e,{className:"pt-6",children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center",children:[l.jsx(Us,{className:"w-6 h-6 text-[hsl(var(--terracotta))] mr-3"}),l.jsxs("div",{children:[l.jsx("h3",{className:"font-semibold text-[hsl(var(--dark-slate))]",children:"La tua posizione"}),l.jsx("p",{className:"text-[hsl(var(--dark-slate))]/70",children:x?"Rilevamento posizione...":C?`Lat: ${C.latitude.toFixed(4)}, Lng: ${C.longitude.toFixed(4)}`:T?"Impossibile rilevare la posizione":"Clicca per rilevare la tua posizione"})]})]}),l.jsxs(oe,{onClick:_,disabled:x,className:"bg-[hsl(var(--terracotta))] text-white hover:bg-[hsl(var(--saddle))]",children:[l.jsx(Vk,{className:"w-4 h-4 mr-2"}),x?"Rilevamento...":"Rileva posizione"]})]})})}),l.jsxs(Ue,{className:"mb-6",children:[l.jsx(Dn,{children:l.jsx(Mn,{className:"text-xl font-display font-semibold text-[hsl(var(--dark-slate))]",children:"Le tue preferenze"})}),l.jsxs($e,{children:[l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-[hsl(var(--dark-slate))] mb-2",children:"Cucina preferita"}),l.jsxs(Zi,{value:o,onValueChange:a,children:[l.jsx(qs,{children:l.jsx(eo,{})}),l.jsx(Ks,{children:j.map(L=>l.jsx(tr,{value:L.value,children:L.label},L.value))})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-[hsl(var(--dark-slate))] mb-2",children:"Fascia di prezzo"}),l.jsxs(Zi,{value:u,onValueChange:d,children:[l.jsx(qs,{children:l.jsx(eo,{})}),l.jsx(Ks,{children:A.map(L=>l.jsx(tr,{value:L.value,children:L.label},L.value))})]})]})]}),l.jsx("div",{className:"mt-4 p-3 bg-[hsl(var(--terracotta))]/5 rounded-lg",children:l.jsxs("div",{className:"flex items-center text-sm",children:[l.jsx(iu,{className:"w-4 h-4 text-[hsl(var(--terracotta))] mr-2"}),l.jsxs("span",{className:"text-[hsl(var(--dark-slate))]/70",children:["Consigli basati su: cucina ",o,", fascia ",u,C&&", distanza dalla tua posizione",y.length>0&&`, ${y.length} preferiti`]})]})})]})]}),l.jsxs("div",{className:"space-y-6",children:[S&&l.jsxs("div",{className:"bg-gradient-to-r from-[hsl(var(--terracotta))] to-[hsl(var(--saddle))] rounded-xl text-white p-6 relative overflow-hidden",children:[l.jsx("div",{className:"absolute top-0 right-0 bg-[hsl(var(--goldenrod))] text-[hsl(var(--dark-slate))] px-3 py-1 rounded-bl-lg font-bold text-sm",children:"#1 SCELTA"}),l.jsxs("div",{className:"flex flex-col md:flex-row items-center",children:[l.jsx("img",{src:S.imageUrl||"https://images.unsplash.com/photo-1414235077428-338989a2e8c0?ixlib=rb-4.0.3&auto=format&fit=crop&w=200&h=150",alt:S.name,className:"w-full md:w-48 h-32 object-cover rounded-lg mb-4 md:mb-0 md:mr-6"}),l.jsxs("div",{className:"flex-1 text-center md:text-left",children:[l.jsx("h3",{className:"text-2xl font-display font-bold mb-2",children:S.name}),l.jsxs("p",{className:"mb-3 opacity-90",children:["Perfetta corrispondenza per gli amanti della cucina ",o,S.distance&&` • Solo ${R(S.distance)} di distanza`,y.includes(S.id)&&" • ❤️ Nei tuoi preferiti"]}),l.jsxs("div",{className:"flex items-center justify-center md:justify-start space-x-4 mb-4",children:[l.jsxs("div",{className:"flex items-center",children:[l.jsx(Xt,{className:"w-4 h-4 text-[hsl(var(--goldenrod))] mr-1 fill-current"}),l.jsx("span",{children:S.rating})]}),l.jsx("span",{children:S.priceRange}),S.distance&&l.jsxs("span",{className:"flex items-center",children:[l.jsx(cl,{className:"w-4 h-4 mr-1"}),P(S.distance)]})]}),l.jsx(oe,{onClick:()=>{p(S),w(!0)},className:"bg-white text-[hsl(var(--terracotta))] hover:bg-[hsl(var(--warm-beige))] font-semibold",children:"Visualizza ristorante"})]})]})]}),l.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:I.map((L,G)=>l.jsx(Ue,{className:"bg-white shadow-lg",children:l.jsxs($e,{className:"p-6",children:[l.jsxs("div",{className:"flex justify-between items-start mb-4",children:[l.jsxs("span",{className:"bg-[hsl(var(--terracotta))]/10 text-[hsl(var(--terracotta))] px-2 py-1 rounded-full text-sm font-medium",children:["#",G+2]}),l.jsxs("div",{className:"text-right text-sm text-[hsl(var(--dark-slate))]/60",children:[L.distance&&l.jsxs("div",{children:[R(L.distance)," di distanza"]}),y.includes(L.id)&&l.jsx("div",{className:"text-[hsl(var(--tomato))]",children:"❤️ Preferito"})]})]}),l.jsx("img",{src:L.imageUrl||"https://images.unsplash.com/photo-1555396273-367ea4eb4db5?ixlib=rb-4.0.3&auto=format&fit=crop&w=400&h=200",alt:L.name,className:"w-full h-32 object-cover rounded-lg mb-4"}),l.jsx("h4",{className:"text-xl font-display font-semibold text-[hsl(var(--dark-slate))] mb-2",children:L.name}),l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsxs("div",{className:"flex items-center text-[hsl(var(--goldenrod))]",children:[l.jsx(Xt,{className:"w-4 h-4 mr-1 fill-current"}),l.jsx("span",{children:L.rating})]}),l.jsx("span",{className:"text-[hsl(var(--terracotta))]",children:L.priceRange})]}),l.jsx(oe,{variant:"outline",onClick:()=>{p(L),w(!0)},className:"text-[hsl(var(--terracotta))] hover:text-[hsl(var(--saddle))]",children:"Dettagli"})]}),l.jsx("div",{className:"mt-3 text-xs text-[hsl(var(--dark-slate))]/50",children:L.cuisines.find(Q=>Q===o)&&L.priceRange===u?"✨ Corrisponde perfettamente alle tue preferenze":L.cuisines.find(Q=>Q===o)?"🍽️ Cucina preferita":L.priceRange===u?"💰 Fascia di prezzo preferita":"⭐ Alto rating"})]})},L.id))})]}),b.length===0&&l.jsx("div",{className:"text-center py-12",children:l.jsx(Ue,{children:l.jsxs($e,{className:"p-12",children:[l.jsx(Xt,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),l.jsx("h3",{className:"text-2xl font-display font-semibold text-[hsl(var(--dark-slate))] mb-2",children:"Nessun consiglio disponibile"}),l.jsx("p",{className:"text-[hsl(var(--dark-slate))]/70",children:"Prova ad aggiustare le tue preferenze o controlla più tardi"})]})})})]}),l.jsx(ev,{restaurant:h,isOpen:g,onClose:()=>{w(!1),p(null)},allowDelete:!0,onDelete:async L=>{try{await k(L),e(G=>G.filter(Q=>Q.id!==L))}catch{}}})]})},HL=({events:t=[],onDateClick:e,onEventClick:n,onDayClick:r})=>{const[s,i]=m.useState(new Date),o=["January","February","March","April","May","June","July","August","September","October","November","December"],a=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],u=new Date(s.getFullYear(),s.getMonth(),1),d=new Date(s.getFullYear(),s.getMonth()+1,0),h=u.getDay(),p=d.getDate(),g=()=>{i(new Date(s.getFullYear(),s.getMonth()-1))},w=()=>{i(new Date(s.getFullYear(),s.getMonth()+1))},C=_=>{const y=new Date(s.getFullYear(),s.getMonth(),_);return t.filter(E=>E.date.toDateString()===y.toDateString())},x=_=>{const y=new Date(s.getFullYear(),s.getMonth(),_);e==null||e(y),r==null||r(y)},T=()=>{const _=[];for(let k=0;k<h;k++){const M=new Date(s.getFullYear(),s.getMonth(),-(h-1-k));_.push(l.jsx("div",{className:"h-24 p-2 text-gray-400 cursor-pointer hover:bg-gray-50",onClick:()=>{r==null||r(M)},children:l.jsx("span",{children:M.getDate()})},`prev-${k}`))}for(let k=1;k<=p;k++){const M=C(k),D=new Date().toDateString()===new Date(s.getFullYear(),s.getMonth(),k).toDateString();_.push(l.jsxs("div",{className:`h-24 p-2 hover:bg-gray-50 cursor-pointer relative border-r border-b border-gray-200 transition-colors ${D?"bg-[hsl(var(--terracotta))]/10 font-semibold":""}`,onClick:()=>x(k),children:[l.jsx("span",{className:`text-[hsl(var(--dark-slate))] ${D?"text-[hsl(var(--terracotta))]":""}`,children:k}),M.length>0&&l.jsxs("div",{className:"mt-1 space-y-1",children:[M.slice(0,2).map((b,S)=>l.jsx("div",{className:`text-xs px-1 py-0.5 rounded truncate cursor-pointer ${b.color} hover:opacity-80`,onClick:I=>{I.stopPropagation(),n==null||n(b)},children:b.title},b.id)),M.length>2&&l.jsxs("div",{className:"text-xs text-gray-500 cursor-pointer hover:text-[hsl(var(--terracotta))]",children:["+",M.length-2," more"]})]}),l.jsx("div",{className:"absolute bottom-1 right-1 opacity-0 group-hover:opacity-100 transition-opacity",children:l.jsx("div",{className:"w-2 h-2 rounded-full bg-[hsl(var(--terracotta))]/30"})})]},k))}const E=Math.ceil((h+p)/7)*7-(h+p);for(let k=1;k<=E;k++){const M=new Date(s.getFullYear(),s.getMonth()+1,k);_.push(l.jsx("div",{className:"h-24 p-2 text-gray-400 cursor-pointer hover:bg-gray-50",onClick:()=>{r==null||r(M)},children:l.jsx("span",{children:k})},`next-${k}`))}return _};return l.jsxs("div",{className:"bg-white rounded-xl shadow-lg overflow-hidden group",children:[l.jsx("div",{className:"bg-[hsl(var(--terracotta))] text-white p-4",children:l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsx(oe,{variant:"ghost",size:"icon",onClick:g,className:"text-white hover:bg-white/20 transition-colors",children:l.jsx(gk,{className:"w-5 h-5"})}),l.jsxs("h3",{className:"text-xl font-display font-semibold",children:[o[s.getMonth()]," ",s.getFullYear()]}),l.jsx(oe,{variant:"ghost",size:"icon",onClick:w,className:"text-white hover:bg-white/20 transition-colors",children:l.jsx(vk,{className:"w-5 h-5"})})]})}),l.jsx("div",{className:"grid grid-cols-7 bg-[hsl(var(--terracotta))] text-white",children:a.map(_=>l.jsx("div",{className:"p-4 text-center font-medium border-r border-white/20 last:border-r-0",children:_},_))}),l.jsx("div",{className:"grid grid-cols-7",children:T()}),l.jsx("div",{className:"bg-gray-50 px-4 py-2 text-center",children:l.jsx("p",{className:"text-xs text-gray-600",children:"Clicca su un giorno per vedere i dettagli delle prenotazioni"})})]})},WL=()=>{const[t,e]=m.useState([]),[n,r]=m.useState(!0),[s,i]=m.useState(null),[o,a]=m.useState([]),[u,d]=m.useState(!0),[h,p]=m.useState(null),[g,w]=m.useState(!1),[C,x]=m.useState(null),[T,_]=m.useState(null),[y,E]=m.useState(!1),[k,M]=m.useState(null),[D,b]=m.useState({restaurantId:"",date:"",time:"",notes:""}),{toast:S}=Ku(),{getAllRestaurants:I,getAllBookings:R,createBooking:P,deleteBooking:j}=ni();m.useEffect(()=>{(async()=>{try{r(!0),i(null);const B=await I();e(B)}catch(B){const ee=en(B);i(ee),Lt("Caricamento ristoranti in Calendar",B)}finally{r(!1)}})()},[]),m.useEffect(()=>{(async()=>{try{d(!0),p(null);const B=await R();a(B)}catch(B){const ee=en(B);p(ee),Lt("Caricamento prenotazioni in Calendar",B)}finally{d(!1)}})()},[]);const A=()=>{b({restaurantId:"",date:"",time:"",notes:""}),x(null)},L=async()=>{try{const W=await R();a(W)}catch(W){Lt("Ricaricamento prenotazioni",W)}},G=W=>{_(W),E(!0)},Q=W=>o.filter(B=>new Date(B.date).toDateString()===W.toDateString()).sort((B,ee)=>B.time.localeCompare(ee.time)),z=async W=>{if(W.preventDefault(),!D.restaurantId||!D.date||!D.time){S({title:"Informazioni mancanti",description:"Compila tutti i campi obbligatori.",variant:"destructive"});return}try{await P({restaurantId:parseInt(D.restaurantId),date:new Date(D.date+"T00:00:00"),time:D.time,notes:D.notes}),w(!1),A(),await L(),S({title:"Prenotazione creata",description:"La tua prenotazione al ristorante è stata creata con successo."})}catch(B){const ee=en(B);Lt("Creazione prenotazione",B),S({title:"Errore",description:ee,variant:"destructive"})}},O=async W=>{M(W);try{await j(W),await L(),S({title:"Prenotazione eliminata",description:"La prenotazione è stata eliminata con successo.",variant:"default"})}catch(B){const ee=en(B);Lt("Eliminazione prenotazione",B),S({title:"Errore",description:ee,variant:"destructive"})}finally{M(null)}},$=o.map(W=>{const B=t.find(ee=>ee.id===W.restaurantId);return{id:W.id,title:`${(B==null?void 0:B.name)||"Ristorante"} ${W.time}`,date:new Date(W.date),color:"bg-[hsl(var(--terracotta))] text-white",onClick:()=>G(new Date(W.date))}}),Z=o.filter(W=>new Date(W.date)>=new Date).sort((W,B)=>new Date(W.date).getTime()-new Date(B.date).getTime()).slice(0,5),se=T?Q(T):[],U=W=>W.toLocaleDateString("it-IT",{weekday:"long",year:"numeric",month:"long",day:"numeric"}),J=()=>{if(T){const W=T.toISOString().split("T")[0];b(B=>({...B,date:W}))}E(!1),w(!0)};return u||n?l.jsx("main",{className:"min-h-screen",children:l.jsxs("div",{className:"max-w-6xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[l.jsxs("div",{className:"text-center mb-8",children:[l.jsx("h2",{className:"text-3xl font-display font-bold text-[hsl(var(--dark-slate))] mb-4",children:"Calendario Ristoranti"}),l.jsx("p",{className:"text-lg text-[hsl(var(--dark-slate))]/70",children:"Pianifica le tue avventure culinarie"})]}),l.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-[hsl(var(--terracotta))] mx-auto mb-4"}),l.jsx("p",{className:"text-[hsl(var(--dark-slate))]/70",children:"Caricamento calendario e prenotazioni..."})]})})]})}):h||s?l.jsx("main",{className:"min-h-screen",children:l.jsxs("div",{className:"max-w-6xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[l.jsx("div",{className:"text-center mb-8",children:l.jsx("h2",{className:"text-3xl font-display font-bold text-[hsl(var(--dark-slate))] mb-4",children:"Calendario Ristoranti"})}),l.jsx(Ue,{children:l.jsxs($e,{className:"p-12 text-center",children:[l.jsx("div",{className:"text-red-500 mb-4",children:l.jsx(An,{className:"w-16 h-16 mx-auto mb-4 opacity-50"})}),l.jsx("h3",{className:"text-2xl font-display font-semibold text-[hsl(var(--dark-slate))] mb-2",children:"Errore nel caricamento"}),l.jsx("p",{className:"text-[hsl(var(--dark-slate))]/70 mb-6",children:h||s}),l.jsx(oe,{onClick:()=>window.location.reload(),className:"bg-[hsl(var(--terracotta))] text-white hover:bg-[hsl(var(--saddle))]",children:"Riprova"})]})})]})}):l.jsx("main",{className:"min-h-screen",children:l.jsxs("div",{className:"max-w-6xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[l.jsxs("div",{className:"text-center mb-8",children:[l.jsx("h2",{className:"text-3xl font-display font-bold text-[hsl(var(--dark-slate))] mb-4",children:"Calendario Ristoranti"}),l.jsx("p",{className:"text-lg text-[hsl(var(--dark-slate))]/70",children:"Pianifica le tue avventure culinarie"})]}),l.jsx(Ue,{className:"mb-6",children:l.jsx($e,{className:"pt-6",children:l.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-center",children:[l.jsxs("div",{className:"flex items-center space-x-4 mb-4 md:mb-0",children:[l.jsx(An,{className:"w-6 h-6 text-[hsl(var(--terracotta))]"}),l.jsx("h3",{className:"text-xl font-display font-semibold text-[hsl(var(--dark-slate))]",children:"Le tue prenotazioni"})]}),l.jsxs(Ru,{open:g,onOpenChange:w,children:[l.jsx(K3,{asChild:!0,children:l.jsxs(oe,{className:"bg-[hsl(var(--terracotta))] text-white hover:bg-[hsl(var(--saddle))]",children:[l.jsx(Ps,{className:"w-4 h-4 mr-2"}),"Aggiungi prenotazione"]})}),l.jsxs(Ja,{children:[l.jsx(Za,{children:l.jsx(el,{children:"Nuova prenotazione"})}),l.jsxs("form",{onSubmit:z,className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx(Je,{htmlFor:"restaurant",children:"Ristorante *"}),l.jsxs(Zi,{value:D.restaurantId,onValueChange:W=>b(B=>({...B,restaurantId:W})),required:!0,children:[l.jsx(qs,{children:l.jsx(eo,{placeholder:"Seleziona un ristorante"})}),l.jsx(Ks,{children:t.map(W=>l.jsxs(tr,{value:W.id.toString(),children:[W.name," - ",W.location]},W.id))})]})]}),l.jsxs("div",{children:[l.jsx(Je,{htmlFor:"date",children:"Data *"}),l.jsx(At,{id:"date",type:"date",value:D.date,onChange:W=>b(B=>({...B,date:W.target.value})),min:new Date().toISOString().split("T")[0],required:!0})]}),l.jsxs("div",{children:[l.jsx(Je,{htmlFor:"time",children:"Orario *"}),l.jsx(At,{id:"time",type:"time",value:D.time,onChange:W=>b(B=>({...B,time:W.target.value})),required:!0})]}),l.jsxs("div",{children:[l.jsx(Je,{htmlFor:"notes",children:"Note"}),l.jsx(Dd,{id:"notes",placeholder:"Richieste speciali, numero di ospiti, ecc.",value:D.notes,onChange:W=>b(B=>({...B,notes:W.target.value}))})]}),l.jsxs("div",{className:"flex justify-end space-x-2",children:[l.jsx(oe,{type:"button",variant:"outline",onClick:()=>{w(!1),A()},children:"Annulla"}),l.jsx(oe,{type:"submit",className:"bg-[hsl(var(--terracotta))] text-white hover:bg-[hsl(var(--saddle))]",children:"Crea prenotazione"})]})]})]})]})]})})}),l.jsx("div",{className:"mb-8",children:l.jsx(HL,{events:$,onDayClick:G})}),l.jsx(Ru,{open:y,onOpenChange:E,children:l.jsxs(Ja,{className:"max-w-2xl max-h-[80vh] overflow-y-auto",children:[l.jsx(Za,{children:l.jsxs("div",{className:"flex justify-between items-start",children:[l.jsxs("div",{children:[l.jsx(el,{className:"text-2xl font-display font-bold text-[hsl(var(--dark-slate))] mb-2",children:T?U(T):""}),l.jsxs("p",{className:"text-[hsl(var(--dark-slate))]/60",children:[se.length," prenotazion",se.length!==1?"i":"e"," in programma"]})]}),l.jsx(oe,{variant:"ghost",size:"icon",onClick:()=>E(!1),className:"text-gray-400 hover:text-gray-600",children:l.jsx(ul,{className:"w-5 h-5"})})]})}),l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"flex justify-between items-center pb-4 border-b",children:[l.jsxs("div",{className:"flex items-center text-[hsl(var(--terracotta))]",children:[l.jsx(An,{className:"w-5 h-5 mr-2"}),l.jsx("span",{className:"font-medium",children:"Prenotazioni del giorno"})]}),l.jsxs(oe,{onClick:J,size:"sm",className:"bg-[hsl(var(--terracotta))] text-white hover:bg-[hsl(var(--saddle))]",children:[l.jsx(Ps,{className:"w-4 h-4 mr-2"}),"Nuova prenotazione"]})]}),se.length===0?l.jsxs("div",{className:"text-center py-12",children:[l.jsx("div",{className:"bg-gray-50 rounded-full w-16 h-16 flex items-center justify-center mx-auto mb-4",children:l.jsx(An,{className:"w-8 h-8 text-gray-300"})}),l.jsx("h3",{className:"text-lg font-semibold text-[hsl(var(--dark-slate))] mb-2",children:"Nessuna prenotazione"}),l.jsx("p",{className:"text-[hsl(var(--dark-slate))]/60 mb-6",children:"Non hai ancora prenotazioni per questo giorno."}),l.jsxs(oe,{onClick:J,className:"bg-[hsl(var(--terracotta))] text-white hover:bg-[hsl(var(--saddle))]",children:[l.jsx(Ps,{className:"w-4 h-4 mr-2"}),"Aggiungi prenotazione"]})]}):l.jsx("div",{className:"space-y-4",children:se.map((W,B)=>{const ee=t.find(pe=>pe.id===W.restaurantId),Y=k===W.id;return l.jsxs("div",{className:"group relative bg-gradient-to-r from-white to-gray-50 border border-gray-200 rounded-xl p-6 hover:shadow-md transition-all duration-200",children:[l.jsx("div",{className:"absolute -top-2 left-6",children:l.jsxs("div",{className:"bg-[hsl(var(--terracotta))] text-white px-3 py-1 rounded-full text-sm font-medium flex items-center",children:[l.jsx(cl,{className:"w-3 h-3 mr-1"}),W.time]})}),l.jsx("div",{className:"pt-3",children:l.jsxs("div",{className:"flex justify-between items-start",children:[l.jsxs("div",{className:"flex-1",children:[l.jsx("h4",{className:"text-xl font-display font-semibold text-[hsl(var(--dark-slate))] mb-2",children:(ee==null?void 0:ee.name)||"Ristorante sconosciuto"}),l.jsxs("div",{className:"space-y-2",children:[l.jsxs("div",{className:"flex items-center text-[hsl(var(--dark-slate))]/70",children:[l.jsx(Us,{className:"w-4 h-4 mr-2 text-[hsl(var(--terracotta))]"}),l.jsx("span",{className:"text-sm",children:ee==null?void 0:ee.location}),(ee==null?void 0:ee.priceRange)&&l.jsxs(l.Fragment,{children:[l.jsx("span",{className:"mx-2",children:"•"}),l.jsx("span",{className:"text-sm font-medium",children:ee.priceRange})]})]}),W.notes&&l.jsxs("div",{className:"flex items-start text-[hsl(var(--dark-slate))]/60",children:[l.jsx(Lk,{className:"w-4 h-4 mr-2 mt-0.5 text-[hsl(var(--terracotta))] flex-shrink-0"}),l.jsx("span",{className:"text-sm italic",children:W.notes})]})]})]}),l.jsxs("div",{className:"flex space-x-2 opacity-0 group-hover:opacity-100 transition-opacity",children:[l.jsx(oe,{variant:"outline",size:"icon",className:"text-[hsl(var(--terracotta))] hover:text-[hsl(var(--saddle))] hover:bg-[hsl(var(--terracotta))]/10",onClick:()=>{S({title:"Funzionalità in arrivo",description:"La modifica delle prenotazioni sarà disponibile presto."})},children:l.jsx(Ok,{className:"w-4 h-4"})}),l.jsx(oe,{variant:"outline",size:"icon",className:"text-red-500 hover:text-red-700 hover:bg-red-50",disabled:Y,onClick:()=>{window.confirm(`Sei sicuro di voler eliminare la prenotazione da ${(ee==null?void 0:ee.name)||"questo ristorante"}?`)&&O(W.id)},children:Y?l.jsx("div",{className:"w-4 h-4 border-2 border-red-500 border-t-transparent rounded-full animate-spin"}):l.jsx(Yu,{className:"w-4 h-4"})})]})]})}),l.jsx("div",{className:"absolute right-4 bottom-4 opacity-5",children:l.jsx(An,{className:"w-8 h-8"})})]},W.id)})}),se.length>0&&l.jsx("div",{className:"pt-4 border-t bg-gray-50 rounded-lg p-4",children:l.jsxs("div",{className:"flex items-center justify-between text-sm text-[hsl(var(--dark-slate))]/60",children:[l.jsx("span",{children:"Giornata culinaria completa!"}),l.jsxs("span",{children:[se.length," ristorante",se.length!==1?"i":""," da visitare"]})]})})]})]})}),l.jsxs(Ue,{children:[l.jsx(Dn,{children:l.jsx(Mn,{className:"text-2xl font-display font-semibold text-[hsl(var(--dark-slate))]",children:"Prossime prenotazioni"})}),l.jsx($e,{children:Z.length===0?l.jsxs("div",{className:"text-center py-8",children:[l.jsx(An,{className:"w-12 h-12 text-gray-300 mx-auto mb-4"}),l.jsx("h3",{className:"text-lg font-semibold text-[hsl(var(--dark-slate))] mb-2",children:"Nessuna prenotazione futura"}),l.jsx("p",{className:"text-[hsl(var(--dark-slate))]/70 mb-4",children:"Inizia a pianificare la tua prossima avventura culinaria!"}),l.jsx(oe,{onClick:()=>w(!0),className:"bg-[hsl(var(--terracotta))] text-white hover:bg-[hsl(var(--saddle))]",children:"Aggiungi la tua prima prenotazione"})]}):l.jsx("div",{className:"space-y-4",children:Z.map(W=>{const B=t.find(Y=>Y.id===W.restaurantId),ee=new Date(W.date);return l.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg hover:bg-gray-50 cursor-pointer",onClick:()=>G(ee),children:[l.jsxs("div",{className:"flex items-center",children:[l.jsx("div",{className:"bg-[hsl(var(--terracotta))] text-white rounded-lg p-3 mr-4",children:l.jsx(An,{className:"w-5 h-5"})}),l.jsxs("div",{children:[l.jsx("h4",{className:"font-semibold text-[hsl(var(--dark-slate))]",children:(B==null?void 0:B.name)||"Ristorante sconosciuto"}),l.jsxs("p",{className:"text-[hsl(var(--dark-slate))]/70",children:[ee.toLocaleDateString("it-IT",{weekday:"long",year:"numeric",month:"long",day:"numeric"})," alle ",W.time]}),l.jsxs("p",{className:"text-[hsl(var(--dark-slate))]/60 text-sm",children:[B==null?void 0:B.location," • ",B==null?void 0:B.priceRange]}),W.notes&&l.jsxs("p",{className:"text-[hsl(var(--dark-slate))]/60 text-sm mt-1",children:["Note: ",W.notes]})]})]}),l.jsx("div",{className:"text-[hsl(var(--dark-slate))]/40",children:l.jsx("span",{className:"text-sm",children:"Clicca per dettagli"})})]},W.id)})})})]})]})})},qL=()=>{const{favorites:t}=jd(),[e,n]=m.useState(null),[r,s]=m.useState(!1),[i,o]=m.useState([]),[a,u]=m.useState(!0),[d,h]=m.useState(null),{getAllRestaurants:p,deleteRestaurant:g}=ni();m.useEffect(()=>{(async()=>{try{u(!0),h(null);const T=await p();o(T)}catch(T){const _=en(T);h(_),Lt("Caricamento ristoranti in Favorites",T)}finally{u(!1)}})()},[]);const w=i.filter(x=>t.includes(x.id)),C=x=>{n(x),s(!0)};return a?l.jsx("main",{className:"min-h-screen",children:l.jsxs("div",{className:"max-w-6xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[l.jsxs("div",{className:"text-center mb-8",children:[l.jsx("h2",{className:"text-3xl font-display font-bold text-[hsl(var(--dark-slate))] mb-4",children:"I tuoi ristoranti preferiti"}),l.jsx("p",{className:"text-lg text-[hsl(var(--dark-slate))]/70",children:"La tua lista curata di luoghi imperdibili"})]}),l.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-[hsl(var(--terracotta))] mx-auto mb-4"}),l.jsx("p",{className:"text-[hsl(var(--dark-slate))]/70",children:"Caricamento dei tuoi ristoranti preferiti..."})]})})]})}):d?l.jsx("main",{className:"min-h-screen",children:l.jsxs("div",{className:"max-w-6xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[l.jsx("div",{className:"text-center mb-8",children:l.jsx("h2",{className:"text-3xl font-display font-bold text-[hsl(var(--dark-slate))] mb-4",children:"I tuoi ristoranti preferiti"})}),l.jsx(Ue,{children:l.jsxs($e,{className:"p-12 text-center",children:[l.jsx("div",{className:"text-red-500 mb-4",children:l.jsx(ks,{className:"w-16 h-16 mx-auto mb-4 opacity-50"})}),l.jsx("h3",{className:"text-2xl font-display font-semibold text-[hsl(var(--dark-slate))] mb-2",children:"Errore nel caricamento"}),l.jsx("p",{className:"text-[hsl(var(--dark-slate))]/70 mb-6",children:d}),l.jsx(oe,{onClick:()=>window.location.reload(),className:"bg-[hsl(var(--terracotta))] text-white hover:bg-[hsl(var(--saddle))]",children:"Riprova"})]})})]})}):l.jsxs("main",{className:"min-h-screen",children:[l.jsxs("div",{className:"max-w-6xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[l.jsxs("div",{className:"text-center mb-8",children:[l.jsx("h2",{className:"text-3xl font-display font-bold text-[hsl(var(--dark-slate))] mb-4",children:"I tuoi ristoranti preferiti"}),l.jsx("p",{className:"text-lg text-[hsl(var(--dark-slate))]/70",children:"La tua lista curata di luoghi imperdibili"})]}),w.length===0?l.jsx("div",{className:"text-center py-12",children:l.jsx(Ue,{children:l.jsxs($e,{className:"p-12",children:[l.jsx(ks,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),l.jsx("h3",{className:"text-2xl font-display font-semibold text-[hsl(var(--dark-slate))] mb-2",children:"Nessun preferito ancora"}),l.jsx("p",{className:"text-[hsl(var(--dark-slate))]/70 mb-6",children:"Inizia a esplorare i ristoranti e aggiungili ai tuoi preferiti!"}),l.jsx(pa,{href:"/",children:l.jsx(oe,{className:"bg-[hsl(var(--terracotta))] text-white hover:bg-[hsl(var(--saddle))]",children:"Esplora ristoranti"})})]})})}):l.jsxs("div",{children:[l.jsx("div",{className:"mb-6",children:l.jsxs("p",{className:"text-[hsl(var(--dark-slate))]/70",children:[w.length," ristorante",w.length!==1?"s":""," preferit",w.length!==1?"i":"o"]})}),l.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:w.map(x=>l.jsx(rC,{restaurant:x,onViewDetails:C},x.id))}),l.jsx(Ue,{className:"mt-8 bg-[hsl(var(--terracotta))]/5 border-[hsl(var(--terracotta))]/20",children:l.jsx($e,{className:"p-6",children:l.jsxs("div",{className:"flex items-start",children:[l.jsx(ks,{className:"w-6 h-6 text-[hsl(var(--terracotta))] mr-3 mt-1 flex-shrink-0"}),l.jsxs("div",{children:[l.jsx("h3",{className:"font-semibold text-[hsl(var(--dark-slate))] mb-2",children:"Consigli per i tuoi preferiti"}),l.jsxs("ul",{className:"text-[hsl(var(--dark-slate))]/70 space-y-1 text-sm",children:[l.jsx("li",{children:"• Clicca sull'icona del cuore su qualsiasi scheda ristorante per aggiungerlo ai preferiti"}),l.jsx("li",{children:"• I tuoi preferiti vengono salvati localmente e rimarranno tra le visite"}),l.jsx("li",{children:"• Usa il calendario per pianificare visite ai tuoi ristoranti preferiti"}),l.jsx("li",{children:"• Condividi i tuoi ristoranti preferiti con amici e famiglia"}),l.jsx("li",{children:"• Controlla regolarmente i consigli personalizzati basati sui tuoi preferiti"})]})]})]})})}),w.length>0&&l.jsx(Ue,{className:"mt-6 bg-[hsl(var(--forest-green))]/5 border-[hsl(var(--forest-green))]/20",children:l.jsxs($e,{className:"p-6",children:[l.jsx("h3",{className:"font-semibold text-[hsl(var(--dark-slate))] mb-4",children:"Le tue preferenze culinarie"}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[l.jsxs("div",{children:[l.jsx("h4",{className:"font-medium text-[hsl(var(--dark-slate))] mb-2",children:"Cucine preferite"}),l.jsx("div",{className:"space-y-1",children:(()=>{const T=w.flatMap(_=>_.cuisines||[]).reduce((_,y)=>(_[y]=(_[y]||0)+1,_),{});return Object.entries(T).sort(([,_],[,y])=>y-_).slice(0,3).map(([_,y])=>l.jsxs("div",{className:"flex justify-between text-sm",children:[l.jsx("span",{className:"capitalize",children:_}),l.jsx("span",{className:"text-[hsl(var(--forest-green))] font-medium",children:y})]},_))})()})]}),l.jsxs("div",{children:[l.jsx("h4",{className:"font-medium text-[hsl(var(--dark-slate))] mb-2",children:"Fasce di prezzo"}),l.jsx("div",{className:"space-y-1",children:Array.from(new Set(w.map(x=>x.priceRange))).slice(0,3).map(x=>{const T=w.filter(_=>_.priceRange===x).length;return l.jsxs("div",{className:"flex justify-between text-sm",children:[l.jsx("span",{children:x}),l.jsx("span",{className:"text-[hsl(var(--forest-green))] font-medium",children:T})]},x)})})]}),l.jsxs("div",{children:[l.jsx("h4",{className:"font-medium text-[hsl(var(--dark-slate))] mb-2",children:"Rating medio"}),l.jsxs("div",{className:"text-2xl font-bold text-[hsl(var(--forest-green))]",children:[(w.reduce((x,T)=>x+parseFloat(T.rating),0)/w.length).toFixed(1),l.jsx("span",{className:"text-sm font-normal text-[hsl(var(--dark-slate))]/70 ml-1",children:"/ 5.0"})]}),l.jsx("p",{className:"text-xs text-[hsl(var(--dark-slate))]/60 mt-1",children:"Hai ottimi gusti!"})]})]})]})}),w.length>0&&l.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row gap-4",children:[l.jsx(pa,{href:"/recommended",className:"flex-1",children:l.jsx(oe,{variant:"outline",className:"w-full border-[hsl(var(--terracotta))] text-[hsl(var(--terracotta))] hover:bg-[hsl(var(--terracotta))]/10",children:"Scopri ristoranti simili"})}),l.jsx(pa,{href:"/calendar",className:"flex-1",children:l.jsx(oe,{className:"w-full bg-[hsl(var(--forest-green))] text-white hover:bg-[hsl(var(--forest-green))]/90",children:"Pianifica una visita"})})]})]})]}),l.jsx(ev,{restaurant:e,isOpen:r,onClose:()=>{s(!1),n(null)},allowDelete:!0,onDelete:async x=>{try{await g(x),o(T=>T.filter(_=>_.id!==x))}catch{}}})]})},KL=po("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),Ts=m.forwardRef(({className:t,variant:e,...n},r)=>l.jsx("div",{ref:r,role:"alert",className:ce(KL({variant:e}),t),...n}));Ts.displayName="Alert";const GL=m.forwardRef(({className:t,...e},n)=>l.jsx("h5",{ref:n,className:ce("mb-1 font-medium leading-none tracking-tight",t),...e}));GL.displayName="AlertTitle";const Ss=m.forwardRef(({className:t,...e},n)=>l.jsx("div",{ref:n,className:ce("text-sm [&_p]:leading-relaxed",t),...e}));Ss.displayName="AlertDescription";var Vd="Collapsible",[QL,x6]=os(Vd),[YL,rv]=QL(Vd),jC=m.forwardRef((t,e)=>{const{__scopeCollapsible:n,open:r,defaultOpen:s,disabled:i,onOpenChange:o,...a}=t,[u,d]=Yi({prop:r,defaultProp:s??!1,onChange:o,caller:Vd});return l.jsx(YL,{scope:n,disabled:i,contentId:Bt(),open:u,onOpenToggle:m.useCallback(()=>d(h=>!h),[d]),children:l.jsx(de.div,{"data-state":iv(u),"data-disabled":i?"":void 0,...a,ref:e})})});jC.displayName=Vd;var DC="CollapsibleTrigger",MC=m.forwardRef((t,e)=>{const{__scopeCollapsible:n,...r}=t,s=rv(DC,n);return l.jsx(de.button,{type:"button","aria-controls":s.contentId,"aria-expanded":s.open||!1,"data-state":iv(s.open),"data-disabled":s.disabled?"":void 0,disabled:s.disabled,...r,ref:e,onClick:ue(t.onClick,s.onOpenToggle)})});MC.displayName=DC;var sv="CollapsibleContent",OC=m.forwardRef((t,e)=>{const{forceMount:n,...r}=t,s=rv(sv,t.__scopeCollapsible);return l.jsx(mr,{present:n||s.open,children:({present:i})=>l.jsx(XL,{...r,ref:e,present:i})})});OC.displayName=sv;var XL=m.forwardRef((t,e)=>{const{__scopeCollapsible:n,present:r,children:s,...i}=t,o=rv(sv,n),[a,u]=m.useState(r),d=m.useRef(null),h=Ae(e,d),p=m.useRef(0),g=p.current,w=m.useRef(0),C=w.current,x=o.open||a,T=m.useRef(x),_=m.useRef(void 0);return m.useEffect(()=>{const y=requestAnimationFrame(()=>T.current=!1);return()=>cancelAnimationFrame(y)},[]),at(()=>{const y=d.current;if(y){_.current=_.current||{transitionDuration:y.style.transitionDuration,animationName:y.style.animationName},y.style.transitionDuration="0s",y.style.animationName="none";const E=y.getBoundingClientRect();p.current=E.height,w.current=E.width,T.current||(y.style.transitionDuration=_.current.transitionDuration,y.style.animationName=_.current.animationName),u(r)}},[o.open,r]),l.jsx(de.div,{"data-state":iv(o.open),"data-disabled":o.disabled?"":void 0,id:o.contentId,hidden:!x,...i,ref:h,style:{"--radix-collapsible-content-height":g?`${g}px`:void 0,"--radix-collapsible-content-width":C?`${C}px`:void 0,...t.style},children:x&&s})});function iv(t){return t?"open":"closed"}var JL=jC;const ZL=JL,e6=MC,t6=OC,n6=()=>{var Q;const[t,e]=m.useState([""]),[n,r]=m.useState({name:"",cuisines:[],priceRange:"",location:"",description:"",phone:"",address:"",rating:"",locationUser:"",qualitàPrezzoUser:"",mediaPrezzo:""}),[s,i]=m.useState(null),[o,a]=m.useState(!1),[u,d]=m.useState(!1),[h,p]=m.useState(!1),[g,w]=m.useState(!1),[C,x]=m.useState([]),[T,_]=m.useState(!0),[y,E]=m.useState(null),{extractRestaurantData:k,createRestaurant:M,getAllRestaurants:D}=ni(),{toast:b}=Ku();m.useEffect(()=>{(async()=>{try{_(!0),E(null);const $=(await D()).sort((Z,se)=>se.id-Z.id).slice(0,5);x($)}catch(O){const $=en(O);E($),Lt("Caricamento ristoranti recenti",O)}finally{_(!1)}})()},[u]);const S=async()=>{const z=t[0];if(!z||!z.toLowerCase().includes("tripadvisor")){b({title:"URL Non Valido",description:"Inserisci un URL valido di TripAdvisor.",variant:"destructive"});return}try{a(!0),i(null);const O=await k(z);i(O.extracted),b({title:"Estrazione Completata",description:"I dati del ristorante sono stati estratti con successo."})}catch(O){const $=en(O);Lt("Estrazione dati ristorante",O),b({title:"Estrazione Fallita",description:$,variant:"destructive"})}finally{a(!1)}},I=()=>{const z=[];return n.locationUser&&(parseFloat(n.locationUser)<0||parseFloat(n.locationUser)>5)&&z.push("Il rating location deve essere tra 0 e 5"),n.qualitàPrezzoUser&&(parseFloat(n.qualitàPrezzoUser)<0||parseFloat(n.qualitàPrezzoUser)>5)&&z.push("Il rating qualità/prezzo deve essere tra 0 e 5"),n.mediaPrezzo&&(parseFloat(n.mediaPrezzo)<0||parseFloat(n.mediaPrezzo)>1e3)&&z.push("Il prezzo medio deve essere tra 0 e 1000 euro"),z},R=async z=>{z.preventDefault();const O=t[0];if(!O){b({title:"URL Mancante",description:"Inserisci almeno un URL di TripAdvisor.",variant:"destructive"});return}const $=s||n;if(!$.cuisines||$.cuisines.length===0){b({title:"Tipi di Cucina Mancanti",description:"Seleziona almeno un tipo di cucina.",variant:"destructive"});return}if(!$.name||!$.priceRange){b({title:"Campi Obbligatori",description:"Compila tutti i campi obbligatori (Nome, Tipi di Cucina, Fascia di Prezzo).",variant:"destructive"});return}const Z=I();if(Z.length>0){b({title:"Valutazioni Non Valide",description:Z.join(". "),variant:"destructive"});return}const se={id:void 0,tripadvisorUrl:O,name:$.name,cuisines:$.cuisines,priceRange:$.priceRange,rating:$.rating||"4.0",location:$.location||"Salento",description:$.description||"Delizioso ristorante con cucina locale",phone:$.phone||void 0,address:$.address||void 0,latitude:$.latitude||"40.3515",longitude:$.longitude||"18.1750",imageUrl:$.imageUrl||void 0,locationUser:n.locationUser?parseFloat(n.locationUser):void 0,qualitàPrezzoUser:n.qualitàPrezzoUser?parseFloat(n.qualitàPrezzoUser):void 0,mediaPrezzo:n.mediaPrezzo?parseFloat(n.mediaPrezzo):void 0};try{p(!0),await M(se),d(!0),P(),setTimeout(()=>d(!1),5e3),b({title:"Ristorante Aggiunto",description:"Il ristorante è stato aggiunto con successo ed è in attesa di approvazione."})}catch(U){const J=en(U);Lt("Creazione ristorante",U),b({title:"Errore",description:J,variant:"destructive"})}finally{p(!1)}},P=()=>{e([""]),r({name:"",cuisines:[],priceRange:"",location:"",description:"",phone:"",address:"",rating:"",locationUser:"",qualitàPrezzoUser:"",mediaPrezzo:""}),i(null),w(!1)},j=()=>{e([...t,""])},A=z=>{e(t.filter((O,$)=>$!==z))},L=(z,O)=>{const $=[...t];$[z]=O,e($)},G=[{value:"€",label:"€ - Budget"},{value:"€€",label:"€€ - Moderato"},{value:"€€€",label:"€€€ - Costoso"},{value:"€€€€",label:"€€€€ - Fine Dining"}];return l.jsx("main",{className:"min-h-screen",children:l.jsxs("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[l.jsxs("div",{className:"text-center mb-8",children:[l.jsx("h2",{className:"text-3xl font-display font-bold text-[hsl(var(--dark-slate))] mb-4",children:"Aggiungi Nuovo Ristorante"}),l.jsx("p",{className:"text-lg text-[hsl(var(--dark-slate))]/70",children:"Aiuta ad espandere il nostro database con le tue scoperte preferite"})]}),u&&l.jsxs(Ts,{className:"mb-6 bg-[hsl(var(--forest-green))]/10 border-[hsl(var(--forest-green))]/20",children:[l.jsx(Fa,{className:"w-4 h-4 text-[hsl(var(--forest-green))]"}),l.jsx(Ss,{className:"text-[hsl(var(--forest-green))]",children:"Ristorante aggiunto con successo! Apparirà nei risultati di ricerca dopo l'approvazione."})]}),l.jsxs(Ue,{className:"mb-8",children:[l.jsx(Dn,{children:l.jsx(Mn,{className:"text-xl font-display font-semibold text-[hsl(var(--dark-slate))]",children:"Informazioni Ristorante"})}),l.jsx($e,{children:l.jsxs("form",{onSubmit:R,className:"space-y-6",children:[l.jsxs("div",{children:[l.jsxs(Je,{className:"text-base font-medium text-[hsl(var(--dark-slate))] mb-3 block",children:[l.jsx(rp,{className:"w-4 h-4 inline mr-2 text-[hsl(var(--terracotta))]"}),"URL TripAdvisor *"]}),t.map((z,O)=>l.jsxs("div",{className:"flex gap-2 mb-3",children:[l.jsx(At,{type:"url",placeholder:"https://www.tripadvisor.com/Restaurant_Review-...",value:z,onChange:$=>L(O,$.target.value),className:"flex-1",required:O===0}),O>0&&l.jsx(oe,{type:"button",variant:"outline",size:"icon",onClick:()=>A(O),className:"text-red-500 hover:text-red-700",children:l.jsx(Yu,{className:"w-4 h-4"})})]},O)),l.jsxs(oe,{type:"button",variant:"outline",onClick:j,className:"text-[hsl(var(--terracotta))] hover:text-[hsl(var(--saddle))]",disabled:t.length>=3,children:[l.jsx(Ps,{className:"w-4 h-4 mr-2"}),"Aggiungi Altro URL"]}),l.jsx("p",{className:"text-sm text-[hsl(var(--dark-slate))]/60 mt-2",children:"Copia e incolla l'URL di TripAdvisor del ristorante che vuoi aggiungere"})]}),l.jsx("div",{className:"flex justify-center",children:l.jsxs(oe,{type:"button",onClick:S,disabled:o||!t[0],className:"bg-[hsl(var(--terracotta))] text-white hover:bg-[hsl(var(--saddle))]",children:[l.jsx(bk,{className:"w-4 h-4 mr-2"}),o?"Estraendo...":"Estrai Dati"]})}),o&&l.jsxs("div",{className:"flex items-center justify-center p-4 bg-blue-50 rounded-lg",children:[l.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-[hsl(var(--terracotta))] mr-3"}),l.jsx("span",{className:"text-[hsl(var(--dark-slate))]",children:"Estrazione dati in corso da TripAdvisor..."})]}),s&&l.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:[l.jsx("h3",{className:"font-semibold text-green-800 mb-3",children:"Informazioni Estratte:"}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3 text-sm",children:[l.jsxs("div",{children:[l.jsx("strong",{children:"Nome:"})," ",s.name]}),l.jsxs("div",{children:[l.jsx("strong",{children:"Cucine:"})," ",(Q=s.cuisines)==null?void 0:Q.join(", ")]}),l.jsxs("div",{children:[l.jsx("strong",{children:"Prezzo:"})," ",s.priceRange]}),l.jsxs("div",{children:[l.jsx("strong",{children:"Rating:"})," ",s.rating]}),l.jsxs("div",{children:[l.jsx("strong",{children:"Località:"})," ",s.location]}),l.jsxs("div",{children:[l.jsx("strong",{children:"Telefono:"})," ",s.phone||"Non disponibile"]})]}),s.description&&l.jsxs("div",{className:"mt-3",children:[l.jsx("strong",{children:"Descrizione:"})," ",s.description]})]}),l.jsxs("div",{className:"border-t pt-6",children:[l.jsxs("h3",{className:"text-lg font-display font-semibold text-[hsl(var(--dark-slate))] mb-4",children:["Dettagli Ristorante",s&&l.jsx("span",{className:"text-sm font-normal text-green-600 ml-2",children:"(Modifica i dati estratti se necessario)"})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[l.jsxs("div",{children:[l.jsx(Je,{htmlFor:"restaurant-name",children:"Nome Ristorante *"}),l.jsx(At,{id:"restaurant-name",placeholder:"Nome del ristorante",value:s?s.name:n.name,onChange:z=>{s?i({...s,name:z.target.value}):r(O=>({...O,name:z.target.value}))},required:!0})]}),l.jsxs("div",{children:[l.jsx(Je,{htmlFor:"rating",children:"Rating *"}),l.jsx(At,{id:"rating",type:"number",min:"1",max:"5",step:"0.1",placeholder:"4.5",value:s?s.rating:n.rating,onChange:z=>{s?i({...s,rating:z.target.value}):r(O=>({...O,rating:z.target.value}))},required:!0})]}),l.jsxs("div",{className:"md:col-span-2",children:[l.jsx(Je,{htmlFor:"cuisine-types",children:"Tipi di Cucina *"}),l.jsx(PC,{selectedCuisines:s?s.cuisines||[]:n.cuisines,onCuisinesChange:z=>{s?i({...s,cuisines:z}):r(O=>({...O,cuisines:z}))},placeholder:"Aggiungi tipo di cucina...",className:"mt-2"})]}),l.jsxs("div",{children:[l.jsx(Je,{htmlFor:"price-range",children:"Fascia di Prezzo *"}),l.jsxs(Zi,{value:s?s.priceRange:n.priceRange,onValueChange:z=>{s?i({...s,priceRange:z}):r(O=>({...O,priceRange:z}))},required:!0,children:[l.jsx(qs,{children:l.jsx(eo,{placeholder:"Seleziona fascia di prezzo"})}),l.jsx(Ks,{children:G.map(z=>l.jsx(tr,{value:z.value,children:z.label},z.value))})]})]}),l.jsxs("div",{children:[l.jsx(Je,{htmlFor:"location",children:"Località *"}),l.jsx(At,{id:"location",placeholder:"es. Lecce Centro, Gallipoli",value:s?s.location:n.location,onChange:z=>{s?i({...s,location:z.target.value}):r(O=>({...O,location:z.target.value}))},required:!0})]}),l.jsxs("div",{children:[l.jsx(Je,{htmlFor:"phone",children:"Telefono"}),l.jsx(At,{id:"phone",placeholder:"+39 0832 123456",value:s?s.phone||"":n.phone,onChange:z=>{s?i({...s,phone:z.target.value}):r(O=>({...O,phone:z.target.value}))}})]}),l.jsxs("div",{className:"md:col-span-2",children:[l.jsx(Je,{htmlFor:"address",children:"Indirizzo"}),l.jsx(At,{id:"address",placeholder:"Via Roma 123, Lecce",value:s?s.address||"":n.address,onChange:z=>{s?i({...s,address:z.target.value}):r(O=>({...O,address:z.target.value}))}})]}),l.jsxs("div",{className:"md:col-span-2",children:[l.jsx(Je,{htmlFor:"description",children:"Descrizione"}),l.jsx(Dd,{id:"description",placeholder:"Breve descrizione del ristorante",value:s?s.description||"":n.description,onChange:z=>{s?i({...s,description:z.target.value}):r(O=>({...O,description:z.target.value}))},rows:3})]})]})]}),l.jsx("div",{className:"border-t pt-6",children:l.jsxs(ZL,{open:g,onOpenChange:w,children:[l.jsx(e6,{asChild:!0,children:l.jsxs(oe,{type:"button",variant:"outline",className:"w-full justify-between text-[hsl(var(--dark-slate))] hover:bg-[hsl(var(--terracotta))]/5",children:[l.jsxs("div",{className:"flex items-center",children:[l.jsx(Xt,{className:"w-4 h-4 mr-2 text-[hsl(var(--terracotta))]"}),l.jsx("span",{className:"text-lg font-display font-semibold",children:"Valutazioni Utente (Opzionale)"})]}),l.jsx($m,{className:`w-5 h-5 transition-transform ${g?"rotate-180":""}`})]})}),l.jsxs(t6,{className:"mt-4 space-y-4 p-4 bg-gray-50 rounded-lg",children:[l.jsx("p",{className:"text-sm text-[hsl(var(--dark-slate))]/70 mb-4",children:"Aggiungi le tue valutazioni personali per aiutare altri utenti nella scelta"}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[l.jsxs("div",{children:[l.jsxs(Je,{htmlFor:"location-rating",className:"flex items-center",children:[l.jsx(Us,{className:"w-4 h-4 mr-2 text-[hsl(var(--terracotta))]"}),"Rating Location (0-5)"]}),l.jsx(At,{id:"location-rating",type:"number",min:"0",max:"5",step:"0.1",placeholder:"4.2",value:n.locationUser,onChange:z=>r(O=>({...O,locationUser:z.target.value}))}),l.jsx("p",{className:"text-xs text-gray-600 mt-1",children:"Valuta posizione, accessibilità, parcheggio"})]}),l.jsxs("div",{children:[l.jsxs(Je,{htmlFor:"quality-price-rating",className:"flex items-center",children:[l.jsx(Xt,{className:"w-4 h-4 mr-2 text-[hsl(var(--terracotta))]"}),"Qualità/Prezzo (0-5)"]}),l.jsx(At,{id:"quality-price-rating",type:"number",min:"0",max:"5",step:"0.1",placeholder:"4.0",value:n.qualitàPrezzoUser,onChange:z=>r(O=>({...O,qualitàPrezzoUser:z.target.value}))}),l.jsx("p",{className:"text-xs text-gray-600 mt-1",children:"Rapporto qualità vs prezzo pagato"})]}),l.jsxs("div",{children:[l.jsxs(Je,{htmlFor:"average-price",className:"flex items-center",children:[l.jsx(np,{className:"w-4 h-4 mr-2 text-[hsl(var(--terracotta))]"}),"Prezzo Medio (€)"]}),l.jsx(At,{id:"average-price",type:"number",min:"0",max:"1000",step:"0.50",placeholder:"25.00",value:n.mediaPrezzo,onChange:z=>r(O=>({...O,mediaPrezzo:z.target.value}))}),l.jsx("p",{className:"text-xs text-gray-600 mt-1",children:"Prezzo medio per persona"})]})]}),l.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3 mt-4",children:l.jsxs("div",{className:"flex items-start",children:[l.jsx(Xt,{className:"w-5 h-5 text-blue-500 mr-2 mt-0.5 flex-shrink-0"}),l.jsxs("div",{className:"text-sm text-blue-800",children:[l.jsx("strong",{children:"Suggerimento:"})," Le tue valutazioni aiuteranno altri utenti a scegliere il ristorante più adatto alle loro esigenze. Sii onesto e considera la tua esperienza complessiva."]})]})})]})]})}),l.jsxs("div",{className:"flex justify-end space-x-4 pt-6 border-t",children:[l.jsx(oe,{type:"button",variant:"outline",onClick:P,className:"border-gray-300 text-gray-700 hover:bg-gray-50",children:"Resetta Form"}),l.jsxs(oe,{type:"submit",disabled:h||!t[0],className:"bg-[hsl(var(--terracotta))] text-white hover:bg-[hsl(var(--saddle))]",children:[l.jsx(Ps,{className:"w-4 h-4 mr-2"}),h?"Aggiungendo...":"Aggiungi Ristorante"]})]})]})})]}),l.jsxs(Ue,{children:[l.jsx(Dn,{children:l.jsx(Mn,{className:"text-2xl font-display font-semibold text-[hsl(var(--dark-slate))]",children:"Aggiunte Recenti"})}),l.jsx($e,{children:T?l.jsxs("div",{className:"flex items-center justify-center py-8",children:[l.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-[hsl(var(--terracotta))] mr-3"}),l.jsx("span",{className:"text-[hsl(var(--dark-slate))]/70",children:"Caricamento..."})]}):y?l.jsxs("p",{className:"text-red-500 text-center py-8",children:["Errore nel caricamento: ",y]}):C.length===0?l.jsx("p",{className:"text-[hsl(var(--dark-slate))]/70 text-center py-8",children:"Nessuna aggiunta recente. Sii il primo ad aggiungere un ristorante!"}):l.jsx("div",{className:"space-y-4",children:C.map(z=>{const O=Array.isArray(z.cuisines)?z.cuisines:[z.cuisines];return l.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg hover:bg-gray-50 transition-colors",children:[l.jsxs("div",{className:"flex items-center",children:[l.jsx("div",{className:"bg-[hsl(var(--terracotta))]/10 text-[hsl(var(--terracotta))] rounded-lg p-3 mr-4",children:l.jsx(Ps,{className:"w-5 h-5"})}),l.jsxs("div",{children:[l.jsx("h4",{className:"font-semibold text-[hsl(var(--dark-slate))]",children:z.name}),l.jsxs("p",{className:"text-[hsl(var(--dark-slate))]/70",children:["Aggiunto di recente • ",O.join(", ")," • ",z.priceRange]}),l.jsxs("p",{className:"text-[hsl(var(--dark-slate))]/60 text-sm",children:[z.location,(z.locationUser||z.qualitàPrezzoUser||z.mediaPrezzo)&&l.jsx("span",{className:"ml-2 text-[hsl(var(--terracotta))]",children:"• Valutazioni utente aggiunte"})]})]})]}),l.jsxs("div",{className:"text-right",children:[l.jsx("span",{className:`text-sm font-medium inline-flex items-center ${z.isApproved?"text-[hsl(var(--forest-green))]":"text-[hsl(var(--goldenrod))]"}`,children:z.isApproved?l.jsxs(l.Fragment,{children:[l.jsx(Fa,{className:"w-4 h-4 mr-1"}),"Approvato"]}):l.jsxs(l.Fragment,{children:[l.jsx(cl,{className:"w-4 h-4 mr-1"}),"In Revisione"]})}),l.jsxs("div",{className:"text-xs text-[hsl(var(--dark-slate))]/50 mt-1",children:["Rating: ",z.rating,z.locationUser&&l.jsxs("span",{className:"ml-2",children:["• Pos: ",z.locationUser.toFixed(1)]}),z.mediaPrezzo&&l.jsxs("span",{className:"ml-2",children:["• €",z.mediaPrezzo.toFixed(2)]})]})]})]},z.id)})})})]}),l.jsx(Ue,{className:"mt-8 bg-[hsl(var(--terracotta))]/5 border-[hsl(var(--terracotta))]/20",children:l.jsx($e,{className:"p-6",children:l.jsxs("div",{className:"flex items-start",children:[l.jsx(rp,{className:"w-6 h-6 text-[hsl(var(--terracotta))] mr-3 mt-1 flex-shrink-0"}),l.jsxs("div",{children:[l.jsx("h3",{className:"font-semibold text-[hsl(var(--dark-slate))] mb-2",children:"Come Aggiungere un Ristorante"}),l.jsxs("ul",{className:"text-[hsl(var(--dark-slate))]/70 space-y-1 text-sm",children:[l.jsx("li",{children:"• Trova il ristorante su TripAdvisor"}),l.jsx("li",{children:"• Copia l'URL della pagina del ristorante"}),l.jsx("li",{children:`• Incolla l'URL nel campo sopra e clicca "Estrai Dati"`}),l.jsx("li",{children:"• Controlla e modifica le informazioni se necessario"}),l.jsx("li",{children:"• Seleziona i tipi di cucina appropriati"}),l.jsxs("li",{children:["• ",l.jsx("strong",{children:"Opzionale:"})," Aggiungi le tue valutazioni personali"]}),l.jsx("li",{children:'• Clicca "Aggiungi Ristorante" per salvare'})]}),l.jsx("p",{className:"text-[hsl(var(--dark-slate))]/60 text-xs mt-3",children:"Tutti i ristoranti aggiunti vengono revisionati prima di apparire nel database pubblico. Le valutazioni utente aiutano la community a fare scelte più informate."})]})]})})})]})})};function r6(){return l.jsx("div",{className:"min-h-screen w-full flex items-center justify-center bg-gray-50",children:l.jsx(Ue,{className:"w-full max-w-md mx-4",children:l.jsxs($e,{className:"pt-6",children:[l.jsxs("div",{className:"flex mb-4 gap-2",children:[l.jsx(wk,{className:"h-8 w-8 text-red-500"}),l.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"404 Page Not Found"})]}),l.jsx("p",{className:"mt-4 text-sm text-gray-600",children:"Did you forget to add the page to the router?"})]})})})}const s6={apiKey:"AIzaSyAFbqkAtEvQroMp1zGYvfjIPOYXWTZSBmg",authDomain:"rotiniel-35c5b.firebaseapp.com",projectId:"rotiniel-35c5b",storageBucket:"rotiniel-35c5b.firebasestorage.app",messagingSenderId:"546264380520",appId:"1:546264380520:web:7034e18e1211898418f7dd"};class i6{constructor(){Fe(this,"db");Fe(this,"unsubscribeFirestore");Fe(this,"state");Fe(this,"stateKey","notificationState");Fe(this,"deviceId");Fe(this,"isInitialized",!1);Fe(this,"retryCount",0);Fe(this,"maxRetries",3);Fe(this,"serviceWorkerRegistration");Fe(this,"isAndroid");Fe(this,"isMobile");this.isAndroid=/Android/i.test(navigator.userAgent),this.isMobile=/Android|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent),console.log("📱 Dispositivo rilevato:",{isAndroid:this.isAndroid,isMobile:this.isMobile,userAgent:navigator.userAgent.substring(0,50)}),this.deviceId=this.getOrCreateDeviceId();try{this.db=Vp()}catch{fg(s6),this.db=Vp()}this.state=this.loadState(),this.initializeAsync()}async initializeAsync(){try{if(this.isMobile){console.log("📱 Inizializzazione Service Worker per mobile...");var e=await this.initServiceWorker();e&&(this.serviceWorkerRegistration=e),this.serviceWorkerRegistration?console.log("✅ Service Worker registrato su mobile"):console.warn("⚠️ Service Worker registration fallita su mobile")}await this.syncStateWithFirestore(),this.isInitialized=!0,this.state.isActive&&(console.log("🔄 Ripristino listener notifiche..."),setTimeout(()=>this.startNotificationListener(),1e3)),console.log("✅ Servizio notifiche inizializzato")}catch(n){if(console.error("❌ Inizializzazione fallita:",n),this.retryCount<this.maxRetries){this.retryCount++;const r=Math.pow(2,this.retryCount)*1e3;console.log(`🔄 Retry inizializzazione tra ${r}ms...`),setTimeout(()=>this.initializeAsync(),r)}else console.error("💀 Inizializzazione fallita definitivamente")}}getOrCreateDeviceId(){let e=localStorage.getItem("triptaste_device_id");return e||(e="device_"+Date.now()+"_"+Math.random().toString(36).substr(2,9),localStorage.setItem("triptaste_device_id",e)),e}loadState(){try{const e=localStorage.getItem(this.stateKey);if(e){const n=JSON.parse(e);return{lastProcessedId:n.lastProcessedId||null,lastProcessedTimestamp:n.lastProcessedTimestamp||Date.now(),totalNotificationsShown:n.totalNotificationsShown||0,isActive:n.isActive||!1,processedIds:new Set(n.processedIds||[])}}}catch(e){console.warn("⚠️ Errore caricamento stato:",e)}return{lastProcessedId:null,lastProcessedTimestamp:Date.now(),totalNotificationsShown:0,isActive:!1,processedIds:new Set}}saveState(){try{const e={...this.state,processedIds:Array.from(this.state.processedIds)};localStorage.setItem(this.stateKey,JSON.stringify(e))}catch(e){console.error("❌ Errore salvataggio stato:",e)}}async syncStateWithFirestore(){try{const e=Ri(this.db,"notificationStates",this.deviceId),n=await Fp(e);if(n.exists()){const s=n.data();if(s.lastProcessedTimestamp>this.state.lastProcessedTimestamp){const i=new Set(s.processedIds||[]),o=new Set([...this.state.processedIds,...i]);this.state={...s,processedIds:o},this.saveState(),console.log("📥 Stato sincronizzato da Firestore con merge")}}const r={...this.state,processedIds:Array.from(this.state.processedIds)};await V3(e,r)}catch(e){console.warn("⚠️ Sincronizzazione stato fallita:",e)}}async initServiceWorker(){if(!("serviceWorker"in navigator))return console.warn("⚠️ Service Worker non supportato"),null;try{const e="/TripTaste/",n=`${e}sw.js`.replace("//","/");console.log("🔧 Registrando Service Worker:",n);const r=await navigator.serviceWorker.register(n,{scope:e});return await navigator.serviceWorker.ready,r.active||(console.log("⏳ Attendo attivazione Service Worker..."),await new Promise(s=>{const i=()=>{r.active?s(!0):setTimeout(i,100)};i()})),console.log("✅ Service Worker attivo e pronto"),r}catch(e){return console.error("❌ Service Worker registration fallita:",e),null}}async requestPermission(){if(!("Notification"in window))return console.warn("⚠️ Notification API non supportata"),"denied";if(Notification.permission==="granted")return"granted";if(Notification.permission==="denied")return console.warn("⚠️ Permessi notifiche negati dall'utente"),"denied";try{const e=await Notification.requestPermission();return console.log(`🔐 Permesso notifiche: ${e}`),e}catch(e){return console.error("❌ Errore richiesta permesso:",e),"denied"}}async showBrowserNotification(e){if(!("Notification"in window)||Notification.permission!=="granted")return console.warn("⚠️ Impossibile mostrare notifica: permessi mancanti"),!1;try{let n=!1;if(this.serviceWorkerRegistration&&this.serviceWorkerRegistration.active)try{console.log("📱 Tentativo notifica via Service Worker..."),await this.serviceWorkerRegistration.showNotification(e.title,{body:e.body,icon:e.icon||"/icon-192.png",badge:e.badge||"/badge-72.png",tag:e.tag||`triptaste-${Date.now()}`,data:e.data,requireInteraction:!1,silent:!1}),console.log("✅ Notifica Service Worker mostrata"),n=!0}catch(r){console.warn("⚠️ Notifica Service Worker fallita:",r)}if(!n){console.log("🖥️ Tentativo notifica standard...");const r=new Notification(e.title,{body:e.body,icon:e.icon||"/icon-192.png",badge:e.badge||"/badge-72.png",tag:e.tag||`triptaste-${Date.now()}`,data:e.data,requireInteraction:e.requireInteraction||!1,silent:e.silent||!1});r.onclick=()=>{var s;window.focus(),r.close(),(s=e.data)!=null&&s.restaurantId&&(window.location.href=`/restaurant/${e.data.restaurantId}`)},setTimeout(()=>r.close(),8e3),console.log("✅ Notifica standard mostrata"),n=!0}return n}catch(n){return console.error("❌ Errore notifica completo:",n),!1}}startNotificationListener(){if(!this.isInitialized)return console.warn("⚠️ Servizio non ancora inizializzato"),()=>{};this.unsubscribeFirestore&&this.unsubscribeFirestore(),console.log("🎧 Avvio listener notifiche...");const e=Cr(Op(this.db,"restaurants"),j3("createdAt","desc"),D3(50));return this.unsubscribeFirestore=L3(e,n=>this.handleSnapshotUpdate(n),n=>this.handleSnapshotError(n)),this.state.isActive=!0,this.saveState(),this.syncStateWithFirestore(),()=>this.stopNotificationListener()}async handleSnapshotUpdate(e){console.log("📡 Snapshot ricevuto:",{size:e.size,changes:e.docChanges().length,processedIds:this.state.processedIds.size});const n=[];e.docChanges().forEach(s=>{if(s.type==="added"){const i={id:s.doc.id,...s.doc.data()};this.state.processedIds.has(i.id)?console.log("⏭️ Ristorante già processato:",i.name):(console.log("🆕 Nuovo ristorante rilevato:",i.name),n.push(i))}});const r=n.sort((s,i)=>this.getTimestamp(s)-this.getTimestamp(i));for(const s of r)await this.processNewRestaurant(s)}handleSnapshotError(e){console.error("❌ Errore listener:",e),setTimeout(()=>{this.state.isActive&&(console.log("🔄 Riavvio listener dopo errore..."),this.startNotificationListener())},5e3)}getTimestamp(e){try{if(e.createdAt instanceof Date)return e.createdAt.getTime();if(e.createdAt&&typeof e.createdAt=="object"&&"toDate"in e.createdAt)return e.createdAt.toDate().getTime()}catch(n){console.warn("⚠️ Errore parsing timestamp:",n)}return Date.now()}async processNewRestaurant(e){const n=this.getTimestamp(e),r=e.id;console.log("🍽️ Processando ristorante:",{name:e.name,id:e.id,timestamp:new Date(n).toISOString()}),await this.showBrowserNotification({title:"🍽️ Nuovo Ristorante Scoperto!",body:`${e.name} è stato aggiunto a TripTaste`,icon:"/icon-192.png",badge:"/badge-72.png",tag:`new-restaurant-${e.id}-${n}`,data:{restaurantId:e.id,restaurantName:e.name,location:e.location}})&&(this.state.processedIds.add(r),this.state.lastProcessedId=e.id,this.state.lastProcessedTimestamp=Math.max(this.state.lastProcessedTimestamp,n),this.state.totalNotificationsShown++,this.saveState(),this.syncStateWithFirestore(),console.log("✅ Notifica mostrata e stato aggiornato:",{totalShown:this.state.totalNotificationsShown,processedCount:this.state.processedIds.size}))}async testNotification(){if(await this.requestPermission()!=="granted")return console.warn("⚠️ Test fallito: permessi mancanti"),!1;console.log("🧪 Test notifica per dispositivo:",{isAndroid:this.isAndroid,isMobile:this.isMobile,hasServiceWorker:!!this.serviceWorkerRegistration});const n=await this.showBrowserNotification({title:"🧪 Test TripTaste",body:this.isAndroid?"Test Android funzionante! 📱":this.isMobile?"Test mobile funzionante! 📱":"Test desktop funzionante! 🖥️",tag:`test-notification-${Date.now()}`,icon:"/icon-192.png"});return console.log(`🧪 Test notifica: ${n?"SUCCESS":"FAILED"}`),n}stopNotificationListener(){this.unsubscribeFirestore&&(this.unsubscribeFirestore(),this.unsubscribeFirestore=void 0),this.state.isActive=!1,this.saveState(),this.syncStateWithFirestore(),console.log("🛑 Listener notifiche fermato")}getSystemStatus(){const e="Notification"in window,n=e?Notification.permission:"denied";return{supported:e,permission:n,canRequest:e&&n==="default",isListening:this.state.isActive,isInitialized:this.isInitialized,deviceId:this.deviceId,stats:{totalShown:this.state.totalNotificationsShown,lastProcessedId:this.state.lastProcessedId,lastProcessedTimestamp:new Date(this.state.lastProcessedTimestamp).toISOString(),processedCount:this.state.processedIds.size},deviceInfo:{isAndroid:this.isAndroid,isMobile:this.isMobile,hasServiceWorker:!!this.serviceWorkerRegistration}}}resetState(){this.state={lastProcessedId:null,lastProcessedTimestamp:Date.now(),totalNotificationsShown:0,isActive:!1,processedIds:new Set},this.saveState(),this.syncStateWithFirestore(),console.log("🔄 Stato notifiche resettato completamente")}destroy(){this.stopNotificationListener(),console.log("🧹 Servizio notifiche distrutto")}}const o6=()=>{const[t]=m.useState(new i6),[e,n]=m.useState(t.getSystemStatus()),[r,s]=m.useState(!1),[i,o]=m.useState(new Date);m.useEffect(()=>{const E=setInterval(()=>{const k=t.getSystemStatus();n(k),o(new Date)},3e3);return()=>{clearInterval(E)}},[t]);const a=()=>{const E=t.getSystemStatus();n(E),o(new Date)},u=async()=>{s(!0);try{const E=await t.requestPermission();a(),E==="granted"?console.log("✅ Permessi notifiche concessi"):E==="denied"&&console.log("❌ Permessi notifiche negati")}catch(E){console.error("❌ Errore richiesta permessi:",E)}finally{s(!1)}},d=()=>{s(!0);try{const E=t.startNotificationListener();window.triptasteNotificationCleanup=E,a(),console.log("🎧 Listener notifiche avviato")}catch(E){console.error("❌ Errore avvio listener:",E)}finally{s(!1)}},h=()=>{s(!0);try{t.stopNotificationListener(),window.triptasteNotificationCleanup&&(window.triptasteNotificationCleanup=void 0),a(),console.log("🛑 Listener notifiche fermato")}catch(E){console.error("❌ Errore stop listener:",E)}finally{s(!1)}},p=async()=>{if(e.permission!=="granted"){console.warn("⚠️ Test saltato: permessi mancanti");return}s(!0);try{await t.testNotification()?console.log("✅ Test notifica riuscito"):console.error("❌ Test notifica fallito")}catch(E){console.error("❌ Errore test notifica:",E)}finally{s(!1)}},g=()=>{s(!0);try{t.resetState(),a(),console.log("🔄 Stato notifiche resettato")}catch(E){console.error("❌ Errore reset:",E)}finally{s(!1)}},w=()=>{switch(e.permission){case"granted":return"text-green-600";case"denied":return"text-red-600";default:return"text-yellow-600"}},C=()=>{switch(e.permission){case"granted":return"✅ Concessi";case"denied":return"❌ Negati";default:return"⏳ Non richiesti"}},x=()=>e.isInitialized?"text-green-600":"text-orange-600",T=[{icon:l.jsx(ga,{className:"w-6 h-6 text-[hsl(var(--terracotta))]"}),title:"Scraping Intelligente",description:"Sistema di estrazione dati da TripAdvisor con algoritmi avanzati, retry automatico e load balancing su múltipli endpoint per garantire affidabilità."},{icon:l.jsx(Us,{className:"w-6 h-6 text-[hsl(var(--terracotta))]"}),title:"Mappe Interactive",description:"Visualizza tutti i ristoranti su mappe interattive con marker personalizzati, popup informativi e geolocalizzazione precisa."},{icon:l.jsx(Xt,{className:"w-6 h-6 text-[hsl(var(--terracotta))]"}),title:"Valutazioni Personalizzate",description:"Aggiungi le tue valutazioni per posizione, rapporto qualità/prezzo e prezzo medio per aiutare altri utenti."},{icon:l.jsx(Ck,{className:"w-6 h-6 text-[hsl(var(--terracotta))]"}),title:"Filtri Avanzati",description:"Filtra per tipo di cucina, fascia di prezzo, rating minimo e distanza con ricerca intelligente."},{icon:l.jsx(ks,{className:"w-6 h-6 text-[hsl(var(--terracotta))]"}),title:"Sistema Preferiti",description:"Salva i tuoi ristoranti preferiti con sincronizzazione cloud e accesso multi-dispositivo."},{icon:l.jsx(Cx,{className:"w-6 h-6 text-[hsl(var(--terracotta))]"}),title:"Design Responsivo",description:"Interfaccia ottimizzata per desktop, tablet e smartphone con design moderno."}],_=[{name:"React + TypeScript",category:"Frontend"},{name:"Tailwind CSS + Shadcn/ui",category:"Styling"},{name:"Serverless API (Vercel)",category:"Backend"},{name:"Node.js + Cheerio + Axios",category:"Scraping"},{name:"Firestore",category:"Database"},{name:"Leaflet.js",category:"Mappe"}],y=[{title:"URL Validation",description:"Verifica che l'URL sia valido e appartenga a TripAdvisor"},{title:"Load Balancing",description:"Selezione intelligente dell'endpoint disponibile tra múltipli server"},{title:"Request Masking",description:"Utilizzo di user agents realistici e headers per simulare navigazione umana"},{title:"Data Extraction",description:"Parsing HTML con Cheerio per estrarre nome, rating, prezzo, posizione e cucine"},{title:"Validation & Storage",description:"Validazione dati estratti e salvataggio nel database con timestamp"}];return l.jsxs("div",{className:"max-w-6xl mx-auto p-6 space-y-8",children:[l.jsx("div",{className:"text-center space-y-4",children:l.jsx("h1",{className:"text-4xl font-bold text-[hsl(var(--dark-slate))] font-display",children:"Come Funziona TripTaste"})}),l.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-6",children:T.map((E,k)=>l.jsxs(Ue,{className:"hover:shadow-lg transition-shadow duration-300",children:[l.jsx(Dn,{className:"pb-4",children:l.jsxs("div",{className:"flex items-center space-x-3",children:[E.icon,l.jsx(Mn,{className:"text-lg font-semibold text-[hsl(var(--dark-slate))]",children:E.title})]})}),l.jsx($e,{children:l.jsx("p",{className:"text-[hsl(var(--dark-slate))]/70 text-sm leading-relaxed",children:E.description})})]},k))}),l.jsxs(Ue,{className:"bg-gradient-to-r from-blue-50 via-purple-50 to-indigo-50 border-blue-200",children:[l.jsx(Dn,{children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs(Mn,{className:"text-2xl font-bold text-[hsl(var(--dark-slate))] flex items-center",children:[l.jsx(bx,{className:"w-6 h-6 mr-3 text-blue-600"}),"Sistema Notifiche Avanzato"]}),l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsx(oe,{onClick:a,variant:"outline",size:"sm",disabled:r,children:l.jsx(jk,{className:`w-4 h-4 ${r?"animate-spin":""}`})}),l.jsxs("span",{className:"text-xs text-gray-500",children:["Aggiornato: ",i.toLocaleTimeString()]})]})]})}),l.jsxs($e,{className:"space-y-6",children:[l.jsx("p",{className:"text-[hsl(var(--dark-slate))]/70",children:"Sistema di notifiche real-time completamente rinnovato con persistenza multi-dispositivo, recupero automatico e gestione robusta degli errori."}),l.jsxs("div",{className:"grid md:grid-cols-2 lg:grid-cols-4 gap-4",children:[l.jsxs("div",{className:"p-4 bg-white rounded-lg border shadow-sm",children:[l.jsxs("div",{className:"flex items-center justify-between mb-2",children:[l.jsxs("span",{className:"text-sm font-medium flex items-center",children:[l.jsx(gE,{className:"w-4 h-4 mr-2 text-blue-500"}),"Browser"]}),l.jsx("span",{className:e.supported?"text-green-600":"text-red-600",children:e.supported?"✅":"❌"})]}),l.jsx("p",{className:"text-xs text-gray-600",children:e.supported?"Compatibile":"Non supportato"})]}),l.jsxs("div",{className:"p-4 bg-white rounded-lg border shadow-sm",children:[l.jsxs("div",{className:"flex items-center justify-between mb-2",children:[l.jsxs("span",{className:"text-sm font-medium flex items-center",children:[l.jsx(Dk,{className:"w-4 h-4 mr-2 text-orange-500"}),"Permessi"]}),l.jsx("span",{className:w(),children:C()})]}),l.jsx("p",{className:"text-xs text-gray-600",children:"Autorizzazioni browser"})]}),l.jsxs("div",{className:"p-4 bg-white rounded-lg border shadow-sm",children:[l.jsxs("div",{className:"flex items-center justify-between mb-2",children:[l.jsxs("span",{className:"text-sm font-medium flex items-center",children:[l.jsx(Mk,{className:"w-4 h-4 mr-2 text-purple-500"}),"Sistema"]}),l.jsx("span",{className:x(),children:e.isInitialized?"🟢 Pronto":"🟡 Caricamento"})]}),l.jsx("p",{className:"text-xs text-gray-600",children:"Stato inizializzazione"})]}),l.jsxs("div",{className:"p-4 bg-white rounded-lg border shadow-sm",children:[l.jsxs("div",{className:"flex items-center justify-between mb-2",children:[l.jsxs("span",{className:"text-sm font-medium flex items-center",children:[e.isListening?l.jsx(Ix,{className:"w-4 h-4 mr-2 text-green-500"}):l.jsx(Fk,{className:"w-4 h-4 mr-2 text-gray-500"}),"Listener"]}),l.jsx("span",{className:e.isListening?"text-green-600":"text-gray-500",children:e.isListening?"🎧 Attivo":"⏸️ Inattivo"})]}),l.jsx("p",{className:"text-xs text-gray-600",children:"Ascolto real-time"})]})]}),e.stats.totalShown>0&&l.jsxs("div",{className:"p-5 bg-white rounded-lg border shadow-sm",children:[l.jsxs("h4",{className:"font-semibold text-gray-800 mb-3 flex items-center",children:[l.jsx(mk,{className:"w-5 h-5 mr-2 text-blue-600"}),"Statistiche Sistema"]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 text-sm",children:[l.jsxs("div",{children:[l.jsx("span",{className:"text-gray-600",children:"Notifiche mostrate:"}),l.jsx("p",{className:"font-semibold text-blue-600 text-lg",children:e.stats.totalShown})]}),l.jsxs("div",{children:[l.jsx("span",{className:"text-gray-600",children:"Ultimo ID processato:"}),l.jsx("p",{className:"font-mono text-xs text-gray-800",children:e.stats.lastProcessedId||"Nessuno"})]}),l.jsxs("div",{children:[l.jsx("span",{className:"text-gray-600",children:"Ultimo aggiornamento:"}),l.jsx("p",{className:"font-semibold text-green-600",children:new Date(e.stats.lastProcessedTimestamp).toLocaleString("it-IT")})]})]}),l.jsxs("div",{className:"mt-3 pt-3 border-t border-gray-100",children:[l.jsx("span",{className:"text-xs text-gray-500",children:"Device ID: "}),l.jsx("code",{className:"text-xs font-mono bg-gray-100 px-2 py-1 rounded",children:e.deviceId})]})]}),l.jsx("div",{className:"space-y-3",children:e.supported?e.isInitialized?l.jsxs(l.Fragment,{children:[e.canRequest&&l.jsxs(oe,{onClick:u,disabled:r,className:"w-full bg-blue-500 hover:bg-blue-600 text-white",size:"lg",children:[l.jsx(bx,{className:"w-5 h-5 mr-2"}),r?"Richiedendo...":"Richiedi Permessi Notifiche"]}),e.permission==="granted"&&l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[e.isListening?l.jsxs(oe,{onClick:h,disabled:r,variant:"destructive",size:"lg",children:[l.jsx(pk,{className:"w-5 h-5 mr-2"}),r?"Fermando...":"Ferma Notifiche"]}):l.jsxs(oe,{onClick:d,disabled:r,className:"bg-green-500 hover:bg-green-600 text-white",size:"lg",children:[l.jsx(Ix,{className:"w-5 h-5 mr-2"}),r?"Avviando...":"Attiva Notifiche"]}),l.jsxs(oe,{onClick:p,disabled:r||e.permission!=="granted",variant:"outline",className:"border-purple-300 text-purple-700 hover:bg-purple-50",size:"lg",children:["🧪 ",r?"Testando...":"Test Notifica"]})]}),e.stats.totalShown>0&&l.jsxs(oe,{onClick:g,disabled:r,variant:"outline",className:"w-full border-red-300 text-red-700 hover:bg-red-50",children:[l.jsx(Yu,{className:"w-4 h-4 mr-2"}),r?"Resettando...":"Reset Stato Sistema"]}),e.permission==="denied"&&l.jsxs(Ts,{className:"border-yellow-200 bg-yellow-50",children:[l.jsx(Dh,{className:"h-4 w-4 text-yellow-600"}),l.jsxs(Ss,{className:"text-yellow-800",children:[l.jsx("strong",{children:"Permessi negati."})," Per abilitare le notifiche:",l.jsxs("ol",{className:"list-decimal list-inside mt-2 text-sm space-y-1",children:[l.jsx("li",{children:"Clicca sull'icona del lucchetto nella barra degli indirizzi"}),l.jsx("li",{children:'Seleziona "Consenti" per le notifiche'}),l.jsx("li",{children:"Ricarica la pagina"}),l.jsx("li",{children:'Clicca "Richiedi Permessi Notifiche"'})]})]})]})]}):l.jsxs(Ts,{className:"border-orange-200 bg-orange-50",children:[l.jsx(zk,{className:"h-4 w-4 text-orange-600"}),l.jsx(Ss,{className:"text-orange-800",children:"Sistema in inizializzazione... Attendi qualche secondo."})]}):l.jsxs(Ts,{className:"border-red-200 bg-red-50",children:[l.jsx(Dh,{className:"h-4 w-4 text-red-600"}),l.jsx(Ss,{className:"text-red-800",children:"Il tuo browser non supporta le notifiche. Prova Chrome, Firefox o Safari aggiornato."})]})}),l.jsxs(Ts,{className:"border-blue-200 bg-blue-50",children:[l.jsx(Cx,{className:"h-4 w-4 text-blue-600"}),l.jsxs(Ss,{className:"text-blue-800 text-sm",children:[l.jsx("strong",{children:"📱 Compatibilità Enhanced:"}),l.jsxs("ul",{className:"mt-2 list-disc list-inside space-y-1",children:[l.jsxs("li",{children:[l.jsx("strong",{children:"Desktop:"})," Chrome, Firefox, Edge, Safari - Supporto completo"]}),l.jsxs("li",{children:[l.jsx("strong",{children:"Android:"})," Chrome, Firefox - Notifiche persistenti + vibrazione"]}),l.jsxs("li",{children:[l.jsx("strong",{children:"iOS:"})," Safari con PWA - Supporto limitato (richiede aggiunta a Home Screen)"]}),l.jsxs("li",{children:[l.jsx("strong",{children:"Sincronizzazione:"})," Stato condiviso tra tutti i dispositivi"]})]})]})]})]})]}),l.jsxs(Ue,{children:[l.jsx(Dn,{children:l.jsxs(Mn,{className:"text-2xl font-bold text-[hsl(var(--dark-slate))] flex items-center",children:[l.jsx(Uk,{className:"w-6 h-6 mr-3 text-[hsl(var(--terracotta))]"}),"Stack Tecnologico"]})}),l.jsx($e,{children:l.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-4",children:_.map((E,k)=>l.jsxs("div",{className:"flex items-center space-x-3 p-3 bg-gray-50 rounded-lg",children:[l.jsx(js,{variant:"outline",className:"text-[hsl(var(--terracotta))]",children:E.category}),l.jsx("span",{className:"font-medium text-[hsl(var(--dark-slate))]",children:E.name})]},k))})})]}),l.jsxs(Ue,{children:[l.jsx(Dn,{children:l.jsxs(Mn,{className:"text-2xl font-bold text-[hsl(var(--dark-slate))] flex items-center",children:[l.jsx(Ek,{className:"w-6 h-6 mr-3 text-[hsl(var(--terracotta))]"}),"Processo di Estrazione Dati"]})}),l.jsx($e,{children:l.jsx("div",{className:"space-y-4",children:y.map((E,k)=>l.jsxs("div",{className:"flex items-start space-x-4 p-4 border-l-4 border-[hsl(var(--terracotta))] bg-gray-50 rounded-r-lg",children:[l.jsx("div",{className:"flex-shrink-0 w-8 h-8 bg-[hsl(var(--terracotta))] text-white rounded-full flex items-center justify-center font-bold text-sm",children:k+1}),l.jsxs("div",{children:[l.jsx("h4",{className:"font-semibold text-[hsl(var(--dark-slate))] mb-1",children:E.title}),l.jsx("p",{className:"text-[hsl(var(--dark-slate))]/70 text-sm",children:E.description})]})]},k))})})]}),l.jsxs(Ue,{className:"bg-gradient-to-r from-blue-50 to-indigo-50 border-blue-200",children:[l.jsx(Dn,{children:l.jsxs(Mn,{className:"text-2xl font-bold text-[hsl(var(--dark-slate))] flex items-center",children:[l.jsx(xk,{className:"w-6 h-6 mr-3 text-blue-600"}),"Estensione Chrome TripTaste"]})}),l.jsxs($e,{className:"space-y-4",children:[l.jsx("p",{className:"text-[hsl(var(--dark-slate))]/70",children:"Scarica la nostra estensione Chrome per aggiungere ristoranti direttamente dal browser mentre navighi su TripAdvisor."}),l.jsxs(Ts,{className:"border-amber-200 bg-amber-50",children:[l.jsx(Dh,{className:"h-4 w-4 text-amber-600"}),l.jsxs(Ss,{className:"text-amber-800",children:[l.jsx("strong",{children:"Attenzione:"})," Questa estensione effettua web scraping di TripAdvisor. Utilizza solo per uso personale e rispetta i termini di servizio di TripAdvisor."]})]}),l.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 items-center",children:[l.jsxs(oe,{size:"lg",className:"bg-blue-600 hover:bg-blue-700 text-white w-full sm:w-auto",onClick:()=>window.open("https://github.com/FabiodAgostino/TripTasteExtension/archive/refs/heads/main.zip","_blank"),children:[l.jsx(Sk,{className:"w-5 h-5 mr-2"}),"Scarica Estensione Chrome"]}),l.jsxs(oe,{variant:"outline",size:"lg",className:"w-full sm:w-auto",onClick:()=>window.open("https://github.com/FabiodAgostino/TripTasteExtension","_blank"),children:[l.jsx(rp,{className:"w-5 h-5 mr-2"}),"Codice Sorgente"]})]}),l.jsxs("div",{className:"text-sm text-[hsl(var(--dark-slate))]/60 space-y-2",children:[l.jsx("p",{children:l.jsx("strong",{children:"Installazione:"})}),l.jsxs("ol",{className:"list-decimal list-inside space-y-1 pl-4",children:[l.jsx("li",{children:"Scarica il file ZIP e estrailo"}),l.jsx("li",{children:"Vai su chrome://extensions/ nel tuo browser"}),l.jsx("li",{children:'Attiva "Modalità sviluppatore"'}),l.jsx("li",{children:'Clicca "Carica estensione non pacchettizzata"'}),l.jsx("li",{children:"Seleziona la cartella estratta"})]})]})]})]})]})};function a6(){return l.jsxs(X2,{children:[l.jsxs("div",{className:"min-h-screen bg-[hsl(var(--warm-beige))]",children:[l.jsx(a4,{}),l.jsxs(pA,{children:[l.jsx(ys,{path:"/",component:UL}),l.jsx(ys,{path:"/recommended",component:BL}),l.jsx(ys,{path:"/calendar",component:WL}),l.jsx(ys,{path:"/favorites",component:qL}),l.jsx(ys,{path:"/add-restaurant",component:n6}),l.jsx(ys,{path:"/info",component:o6}),l.jsx(ys,{component:r6})]})]}),l.jsx(TP,{})]})}const l6=()=>{const t=()=>window.location.hash.substring(1)||"/",[e,n]=m.useState(t());return m.useEffect(()=>{const s=()=>{const i=t();n(i)};return window.location.hash||(window.location.hash="#/"),window.addEventListener("hashchange",s),()=>{window.removeEventListener("hashchange",s)}},[]),[e,s=>{window.location.hash="#"+s}]};I1(document.getElementById("root")).render(l.jsx(F1,{hook:l6,children:l.jsx(a6,{})}));
