var Qb=Object.defineProperty;var Yb=(t,e,n)=>e in t?Qb(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var rn=(t,e,n)=>Yb(t,typeof e!="symbol"?e+"":e,n);function Xb(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in t)){const i=Object.getOwnPropertyDescriptor(r,s);i&&Object.defineProperty(t,s,i.get?i:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();function Xw(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Jw={exports:{}},Cu={},Zw={exports:{}},ge={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ya=Symbol.for("react.element"),Jb=Symbol.for("react.portal"),Zb=Symbol.for("react.fragment"),eR=Symbol.for("react.strict_mode"),tR=Symbol.for("react.profiler"),nR=Symbol.for("react.provider"),rR=Symbol.for("react.context"),sR=Symbol.for("react.forward_ref"),iR=Symbol.for("react.suspense"),oR=Symbol.for("react.memo"),aR=Symbol.for("react.lazy"),zv=Symbol.iterator;function lR(t){return t===null||typeof t!="object"?null:(t=zv&&t[zv]||t["@@iterator"],typeof t=="function"?t:null)}var e0={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},t0=Object.assign,n0={};function no(t,e,n){this.props=t,this.context=e,this.refs=n0,this.updater=n||e0}no.prototype.isReactComponent={};no.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};no.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function r0(){}r0.prototype=no.prototype;function Rp(t,e,n){this.props=t,this.context=e,this.refs=n0,this.updater=n||e0}var Ip=Rp.prototype=new r0;Ip.constructor=Rp;t0(Ip,no.prototype);Ip.isPureReactComponent=!0;var Uv=Array.isArray,s0=Object.prototype.hasOwnProperty,Ap={current:null},i0={key:!0,ref:!0,__self:!0,__source:!0};function o0(t,e,n){var r,s={},i=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(i=""+e.key),e)s0.call(e,r)&&!i0.hasOwnProperty(r)&&(s[r]=e[r]);var a=arguments.length-2;if(a===1)s.children=n;else if(1<a){for(var u=Array(a),d=0;d<a;d++)u[d]=arguments[d+2];s.children=u}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)s[r]===void 0&&(s[r]=a[r]);return{$$typeof:Ya,type:t,key:i,ref:o,props:s,_owner:Ap.current}}function cR(t,e){return{$$typeof:Ya,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Np(t){return typeof t=="object"&&t!==null&&t.$$typeof===Ya}function uR(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var $v=/\/+/g;function Kd(t,e){return typeof t=="object"&&t!==null&&t.key!=null?uR(""+t.key):e.toString(36)}function ac(t,e,n,r,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case Ya:case Jb:o=!0}}if(o)return o=t,s=s(o),t=r===""?"."+Kd(o,0):r,Uv(s)?(n="",t!=null&&(n=t.replace($v,"$&/")+"/"),ac(s,e,n,"",function(d){return d})):s!=null&&(Np(s)&&(s=cR(s,n+(!s.key||o&&o.key===s.key?"":(""+s.key).replace($v,"$&/")+"/")+t)),e.push(s)),1;if(o=0,r=r===""?".":r+":",Uv(t))for(var a=0;a<t.length;a++){i=t[a];var u=r+Kd(i,a);o+=ac(i,e,n,u,s)}else if(u=lR(t),typeof u=="function")for(t=u.call(t),a=0;!(i=t.next()).done;)i=i.value,u=r+Kd(i,a++),o+=ac(i,e,n,u,s);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function kl(t,e,n){if(t==null)return t;var r=[],s=0;return ac(t,r,"","",function(i){return e.call(n,i,s++)}),r}function dR(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Nt={current:null},lc={transition:null},hR={ReactCurrentDispatcher:Nt,ReactCurrentBatchConfig:lc,ReactCurrentOwner:Ap};function a0(){throw Error("act(...) is not supported in production builds of React.")}ge.Children={map:kl,forEach:function(t,e,n){kl(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return kl(t,function(){e++}),e},toArray:function(t){return kl(t,function(e){return e})||[]},only:function(t){if(!Np(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};ge.Component=no;ge.Fragment=Zb;ge.Profiler=tR;ge.PureComponent=Rp;ge.StrictMode=eR;ge.Suspense=iR;ge.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=hR;ge.act=a0;ge.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=t0({},t.props),s=t.key,i=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,o=Ap.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(u in e)s0.call(e,u)&&!i0.hasOwnProperty(u)&&(r[u]=e[u]===void 0&&a!==void 0?a[u]:e[u])}var u=arguments.length-2;if(u===1)r.children=n;else if(1<u){a=Array(u);for(var d=0;d<u;d++)a[d]=arguments[d+2];r.children=a}return{$$typeof:Ya,type:t.type,key:s,ref:i,props:r,_owner:o}};ge.createContext=function(t){return t={$$typeof:rR,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:nR,_context:t},t.Consumer=t};ge.createElement=o0;ge.createFactory=function(t){var e=o0.bind(null,t);return e.type=t,e};ge.createRef=function(){return{current:null}};ge.forwardRef=function(t){return{$$typeof:sR,render:t}};ge.isValidElement=Np;ge.lazy=function(t){return{$$typeof:aR,_payload:{_status:-1,_result:t},_init:dR}};ge.memo=function(t,e){return{$$typeof:oR,type:t,compare:e===void 0?null:e}};ge.startTransition=function(t){var e=lc.transition;lc.transition={};try{t()}finally{lc.transition=e}};ge.unstable_act=a0;ge.useCallback=function(t,e){return Nt.current.useCallback(t,e)};ge.useContext=function(t){return Nt.current.useContext(t)};ge.useDebugValue=function(){};ge.useDeferredValue=function(t){return Nt.current.useDeferredValue(t)};ge.useEffect=function(t,e){return Nt.current.useEffect(t,e)};ge.useId=function(){return Nt.current.useId()};ge.useImperativeHandle=function(t,e,n){return Nt.current.useImperativeHandle(t,e,n)};ge.useInsertionEffect=function(t,e){return Nt.current.useInsertionEffect(t,e)};ge.useLayoutEffect=function(t,e){return Nt.current.useLayoutEffect(t,e)};ge.useMemo=function(t,e){return Nt.current.useMemo(t,e)};ge.useReducer=function(t,e,n){return Nt.current.useReducer(t,e,n)};ge.useRef=function(t){return Nt.current.useRef(t)};ge.useState=function(t){return Nt.current.useState(t)};ge.useSyncExternalStore=function(t,e,n){return Nt.current.useSyncExternalStore(t,e,n)};ge.useTransition=function(){return Nt.current.useTransition()};ge.version="18.3.1";Zw.exports=ge;var m=Zw.exports;const wr=Xw(m),Pp=Xb({__proto__:null,default:wr},[m]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var fR=m,pR=Symbol.for("react.element"),mR=Symbol.for("react.fragment"),gR=Object.prototype.hasOwnProperty,vR=fR.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,yR={key:!0,ref:!0,__self:!0,__source:!0};function l0(t,e,n){var r,s={},i=null,o=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)gR.call(e,r)&&!yR.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:pR,type:t,key:i,ref:o,props:s,_owner:vR.current}}Cu.Fragment=mR;Cu.jsx=l0;Cu.jsxs=l0;Jw.exports=Cu;var c=Jw.exports,c0={exports:{}},tn={},u0={exports:{}},d0={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(V,$){var Z=V.length;V.push($);e:for(;0<Z;){var se=Z-1>>>1,U=V[se];if(0<s(U,$))V[se]=$,V[Z]=U,Z=se;else break e}}function n(V){return V.length===0?null:V[0]}function r(V){if(V.length===0)return null;var $=V[0],Z=V.pop();if(Z!==$){V[0]=Z;e:for(var se=0,U=V.length,J=U>>>1;se<J;){var H=2*(se+1)-1,B=V[H],ee=H+1,Y=V[ee];if(0>s(B,Z))ee<U&&0>s(Y,B)?(V[se]=Y,V[ee]=Z,se=ee):(V[se]=B,V[H]=Z,se=H);else if(ee<U&&0>s(Y,Z))V[se]=Y,V[ee]=Z,se=ee;else break e}}return $}function s(V,$){var Z=V.sortIndex-$.sortIndex;return Z!==0?Z:V.id-$.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var u=[],d=[],h=1,p=null,g=3,w=!1,b=!1,x=!1,E=typeof setTimeout=="function"?setTimeout:null,_=typeof clearTimeout=="function"?clearTimeout:null,y=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function C(V){for(var $=n(d);$!==null;){if($.callback===null)r(d);else if($.startTime<=V)r(d),$.sortIndex=$.expirationTime,e(u,$);else break;$=n(d)}}function k(V){if(x=!1,C(V),!b)if(n(u)!==null)b=!0,Q(O);else{var $=n(d);$!==null&&z(k,$.startTime-V)}}function O(V,$){b=!1,x&&(x=!1,_(T),T=-1),w=!0;var Z=g;try{for(C($),p=n(u);p!==null&&(!(p.expirationTime>$)||V&&!P());){var se=p.callback;if(typeof se=="function"){p.callback=null,g=p.priorityLevel;var U=se(p.expirationTime<=$);$=t.unstable_now(),typeof U=="function"?p.callback=U:p===n(u)&&r(u),C($)}else r(u);p=n(u)}if(p!==null)var J=!0;else{var H=n(d);H!==null&&z(k,H.startTime-$),J=!1}return J}finally{p=null,g=Z,w=!1}}var D=!1,S=null,T=-1,I=5,A=-1;function P(){return!(t.unstable_now()-A<I)}function j(){if(S!==null){var V=t.unstable_now();A=V;var $=!0;try{$=S(!0,V)}finally{$?N():(D=!1,S=null)}}else D=!1}var N;if(typeof y=="function")N=function(){y(j)};else if(typeof MessageChannel<"u"){var L=new MessageChannel,G=L.port2;L.port1.onmessage=j,N=function(){G.postMessage(null)}}else N=function(){E(j,0)};function Q(V){S=V,D||(D=!0,N())}function z(V,$){T=E(function(){V(t.unstable_now())},$)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(V){V.callback=null},t.unstable_continueExecution=function(){b||w||(b=!0,Q(O))},t.unstable_forceFrameRate=function(V){0>V||125<V?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):I=0<V?Math.floor(1e3/V):5},t.unstable_getCurrentPriorityLevel=function(){return g},t.unstable_getFirstCallbackNode=function(){return n(u)},t.unstable_next=function(V){switch(g){case 1:case 2:case 3:var $=3;break;default:$=g}var Z=g;g=$;try{return V()}finally{g=Z}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(V,$){switch(V){case 1:case 2:case 3:case 4:case 5:break;default:V=3}var Z=g;g=V;try{return $()}finally{g=Z}},t.unstable_scheduleCallback=function(V,$,Z){var se=t.unstable_now();switch(typeof Z=="object"&&Z!==null?(Z=Z.delay,Z=typeof Z=="number"&&0<Z?se+Z:se):Z=se,V){case 1:var U=-1;break;case 2:U=250;break;case 5:U=1073741823;break;case 4:U=1e4;break;default:U=5e3}return U=Z+U,V={id:h++,callback:$,priorityLevel:V,startTime:Z,expirationTime:U,sortIndex:-1},Z>se?(V.sortIndex=Z,e(d,V),n(u)===null&&V===n(d)&&(x?(_(T),T=-1):x=!0,z(k,Z-se))):(V.sortIndex=U,e(u,V),b||w||(b=!0,Q(O))),V},t.unstable_shouldYield=P,t.unstable_wrapCallback=function(V){var $=g;return function(){var Z=g;g=$;try{return V.apply(this,arguments)}finally{g=Z}}}})(d0);u0.exports=d0;var xR=u0.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var wR=m,en=xR;function K(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var h0=new Set,ga={};function Us(t,e){Di(t,e),Di(t+"Capture",e)}function Di(t,e){for(ga[t]=e,t=0;t<e.length;t++)h0.add(e[t])}var er=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Kh=Object.prototype.hasOwnProperty,_R=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Bv={},Hv={};function ER(t){return Kh.call(Hv,t)?!0:Kh.call(Bv,t)?!1:_R.test(t)?Hv[t]=!0:(Bv[t]=!0,!1)}function TR(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function SR(t,e,n,r){if(e===null||typeof e>"u"||TR(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Pt(t,e,n,r,s,i,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=o}var ft={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){ft[t]=new Pt(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];ft[e]=new Pt(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){ft[t]=new Pt(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){ft[t]=new Pt(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){ft[t]=new Pt(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){ft[t]=new Pt(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){ft[t]=new Pt(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){ft[t]=new Pt(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){ft[t]=new Pt(t,5,!1,t.toLowerCase(),null,!1,!1)});var kp=/[\-:]([a-z])/g;function jp(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(kp,jp);ft[e]=new Pt(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(kp,jp);ft[e]=new Pt(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(kp,jp);ft[e]=new Pt(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){ft[t]=new Pt(t,1,!1,t.toLowerCase(),null,!1,!1)});ft.xlinkHref=new Pt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){ft[t]=new Pt(t,1,!1,t.toLowerCase(),null,!0,!0)});function Dp(t,e,n,r){var s=ft.hasOwnProperty(e)?ft[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(SR(e,n,s,r)&&(n=null),r||s===null?ER(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var dr=wR.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,jl=Symbol.for("react.element"),li=Symbol.for("react.portal"),ci=Symbol.for("react.fragment"),Op=Symbol.for("react.strict_mode"),Gh=Symbol.for("react.profiler"),f0=Symbol.for("react.provider"),p0=Symbol.for("react.context"),Vp=Symbol.for("react.forward_ref"),Qh=Symbol.for("react.suspense"),Yh=Symbol.for("react.suspense_list"),Mp=Symbol.for("react.memo"),Er=Symbol.for("react.lazy"),m0=Symbol.for("react.offscreen"),Wv=Symbol.iterator;function jo(t){return t===null||typeof t!="object"?null:(t=Wv&&t[Wv]||t["@@iterator"],typeof t=="function"?t:null)}var Ue=Object.assign,Gd;function Ho(t){if(Gd===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Gd=e&&e[1]||""}return`
`+Gd+t}var Qd=!1;function Yd(t,e){if(!t||Qd)return"";Qd=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(d){var r=d}Reflect.construct(t,[],e)}else{try{e.call()}catch(d){r=d}t.call(e.prototype)}else{try{throw Error()}catch(d){r=d}t()}}catch(d){if(d&&r&&typeof d.stack=="string"){for(var s=d.stack.split(`
`),i=r.stack.split(`
`),o=s.length-1,a=i.length-1;1<=o&&0<=a&&s[o]!==i[a];)a--;for(;1<=o&&0<=a;o--,a--)if(s[o]!==i[a]){if(o!==1||a!==1)do if(o--,a--,0>a||s[o]!==i[a]){var u=`
`+s[o].replace(" at new "," at ");return t.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",t.displayName)),u}while(1<=o&&0<=a);break}}}finally{Qd=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Ho(t):""}function CR(t){switch(t.tag){case 5:return Ho(t.type);case 16:return Ho("Lazy");case 13:return Ho("Suspense");case 19:return Ho("SuspenseList");case 0:case 2:case 15:return t=Yd(t.type,!1),t;case 11:return t=Yd(t.type.render,!1),t;case 1:return t=Yd(t.type,!0),t;default:return""}}function Xh(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case ci:return"Fragment";case li:return"Portal";case Gh:return"Profiler";case Op:return"StrictMode";case Qh:return"Suspense";case Yh:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case p0:return(t.displayName||"Context")+".Consumer";case f0:return(t._context.displayName||"Context")+".Provider";case Vp:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Mp:return e=t.displayName||null,e!==null?e:Xh(t.type)||"Memo";case Er:e=t._payload,t=t._init;try{return Xh(t(e))}catch{}}return null}function bR(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Xh(e);case 8:return e===Op?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Ur(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function g0(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function RR(t){var e=g0(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(o){r=""+o,i.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Dl(t){t._valueTracker||(t._valueTracker=RR(t))}function v0(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=g0(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function Pc(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Jh(t,e){var n=e.checked;return Ue({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function qv(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Ur(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function y0(t,e){e=e.checked,e!=null&&Dp(t,"checked",e,!1)}function Zh(t,e){y0(t,e);var n=Ur(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?ef(t,e.type,n):e.hasOwnProperty("defaultValue")&&ef(t,e.type,Ur(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Kv(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function ef(t,e,n){(e!=="number"||Pc(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Wo=Array.isArray;function wi(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Ur(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function tf(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(K(91));return Ue({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Gv(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(K(92));if(Wo(n)){if(1<n.length)throw Error(K(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Ur(n)}}function x0(t,e){var n=Ur(e.value),r=Ur(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function Qv(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function w0(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function nf(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?w0(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Ol,_0=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Ol=Ol||document.createElement("div"),Ol.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Ol.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function va(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var ea={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},IR=["Webkit","ms","Moz","O"];Object.keys(ea).forEach(function(t){IR.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),ea[e]=ea[t]})});function E0(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||ea.hasOwnProperty(t)&&ea[t]?(""+e).trim():e+"px"}function T0(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=E0(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var AR=Ue({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function rf(t,e){if(e){if(AR[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(K(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(K(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(K(61))}if(e.style!=null&&typeof e.style!="object")throw Error(K(62))}}function sf(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var of=null;function Lp(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var af=null,_i=null,Ei=null;function Yv(t){if(t=Za(t)){if(typeof af!="function")throw Error(K(280));var e=t.stateNode;e&&(e=Nu(e),af(t.stateNode,t.type,e))}}function S0(t){_i?Ei?Ei.push(t):Ei=[t]:_i=t}function C0(){if(_i){var t=_i,e=Ei;if(Ei=_i=null,Yv(t),e)for(t=0;t<e.length;t++)Yv(e[t])}}function b0(t,e){return t(e)}function R0(){}var Xd=!1;function I0(t,e,n){if(Xd)return t(e,n);Xd=!0;try{return b0(t,e,n)}finally{Xd=!1,(_i!==null||Ei!==null)&&(R0(),C0())}}function ya(t,e){var n=t.stateNode;if(n===null)return null;var r=Nu(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(K(231,e,typeof n));return n}var lf=!1;if(er)try{var Do={};Object.defineProperty(Do,"passive",{get:function(){lf=!0}}),window.addEventListener("test",Do,Do),window.removeEventListener("test",Do,Do)}catch{lf=!1}function NR(t,e,n,r,s,i,o,a,u){var d=Array.prototype.slice.call(arguments,3);try{e.apply(n,d)}catch(h){this.onError(h)}}var ta=!1,kc=null,jc=!1,cf=null,PR={onError:function(t){ta=!0,kc=t}};function kR(t,e,n,r,s,i,o,a,u){ta=!1,kc=null,NR.apply(PR,arguments)}function jR(t,e,n,r,s,i,o,a,u){if(kR.apply(this,arguments),ta){if(ta){var d=kc;ta=!1,kc=null}else throw Error(K(198));jc||(jc=!0,cf=d)}}function $s(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function A0(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Xv(t){if($s(t)!==t)throw Error(K(188))}function DR(t){var e=t.alternate;if(!e){if(e=$s(t),e===null)throw Error(K(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return Xv(s),t;if(i===r)return Xv(s),e;i=i.sibling}throw Error(K(188))}if(n.return!==r.return)n=s,r=i;else{for(var o=!1,a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o){for(a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o)throw Error(K(189))}}if(n.alternate!==r)throw Error(K(190))}if(n.tag!==3)throw Error(K(188));return n.stateNode.current===n?t:e}function N0(t){return t=DR(t),t!==null?P0(t):null}function P0(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=P0(t);if(e!==null)return e;t=t.sibling}return null}var k0=en.unstable_scheduleCallback,Jv=en.unstable_cancelCallback,OR=en.unstable_shouldYield,VR=en.unstable_requestPaint,Ke=en.unstable_now,MR=en.unstable_getCurrentPriorityLevel,Fp=en.unstable_ImmediatePriority,j0=en.unstable_UserBlockingPriority,Dc=en.unstable_NormalPriority,LR=en.unstable_LowPriority,D0=en.unstable_IdlePriority,bu=null,Dn=null;function FR(t){if(Dn&&typeof Dn.onCommitFiberRoot=="function")try{Dn.onCommitFiberRoot(bu,t,void 0,(t.current.flags&128)===128)}catch{}}var yn=Math.clz32?Math.clz32:$R,zR=Math.log,UR=Math.LN2;function $R(t){return t>>>=0,t===0?32:31-(zR(t)/UR|0)|0}var Vl=64,Ml=4194304;function qo(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Oc(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,i=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~s;a!==0?r=qo(a):(i&=o,i!==0&&(r=qo(i)))}else o=n&~s,o!==0?r=qo(o):i!==0&&(r=qo(i));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-yn(e),s=1<<n,r|=t[n],e&=~s;return r}function BR(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function HR(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var o=31-yn(i),a=1<<o,u=s[o];u===-1?(!(a&n)||a&r)&&(s[o]=BR(a,e)):u<=e&&(t.expiredLanes|=a),i&=~a}}function uf(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function O0(){var t=Vl;return Vl<<=1,!(Vl&4194240)&&(Vl=64),t}function Jd(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Xa(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-yn(e),t[e]=n}function WR(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-yn(n),i=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~i}}function zp(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-yn(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var Ae=0;function V0(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var M0,Up,L0,F0,z0,df=!1,Ll=[],Ar=null,Nr=null,Pr=null,xa=new Map,wa=new Map,Sr=[],qR="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Zv(t,e){switch(t){case"focusin":case"focusout":Ar=null;break;case"dragenter":case"dragleave":Nr=null;break;case"mouseover":case"mouseout":Pr=null;break;case"pointerover":case"pointerout":xa.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":wa.delete(e.pointerId)}}function Oo(t,e,n,r,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},e!==null&&(e=Za(e),e!==null&&Up(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function KR(t,e,n,r,s){switch(e){case"focusin":return Ar=Oo(Ar,t,e,n,r,s),!0;case"dragenter":return Nr=Oo(Nr,t,e,n,r,s),!0;case"mouseover":return Pr=Oo(Pr,t,e,n,r,s),!0;case"pointerover":var i=s.pointerId;return xa.set(i,Oo(xa.get(i)||null,t,e,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,wa.set(i,Oo(wa.get(i)||null,t,e,n,r,s)),!0}return!1}function U0(t){var e=ys(t.target);if(e!==null){var n=$s(e);if(n!==null){if(e=n.tag,e===13){if(e=A0(n),e!==null){t.blockedOn=e,z0(t.priority,function(){L0(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function cc(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=hf(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);of=r,n.target.dispatchEvent(r),of=null}else return e=Za(n),e!==null&&Up(e),t.blockedOn=n,!1;e.shift()}return!0}function ey(t,e,n){cc(t)&&n.delete(e)}function GR(){df=!1,Ar!==null&&cc(Ar)&&(Ar=null),Nr!==null&&cc(Nr)&&(Nr=null),Pr!==null&&cc(Pr)&&(Pr=null),xa.forEach(ey),wa.forEach(ey)}function Vo(t,e){t.blockedOn===e&&(t.blockedOn=null,df||(df=!0,en.unstable_scheduleCallback(en.unstable_NormalPriority,GR)))}function _a(t){function e(s){return Vo(s,t)}if(0<Ll.length){Vo(Ll[0],t);for(var n=1;n<Ll.length;n++){var r=Ll[n];r.blockedOn===t&&(r.blockedOn=null)}}for(Ar!==null&&Vo(Ar,t),Nr!==null&&Vo(Nr,t),Pr!==null&&Vo(Pr,t),xa.forEach(e),wa.forEach(e),n=0;n<Sr.length;n++)r=Sr[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Sr.length&&(n=Sr[0],n.blockedOn===null);)U0(n),n.blockedOn===null&&Sr.shift()}var Ti=dr.ReactCurrentBatchConfig,Vc=!0;function QR(t,e,n,r){var s=Ae,i=Ti.transition;Ti.transition=null;try{Ae=1,$p(t,e,n,r)}finally{Ae=s,Ti.transition=i}}function YR(t,e,n,r){var s=Ae,i=Ti.transition;Ti.transition=null;try{Ae=4,$p(t,e,n,r)}finally{Ae=s,Ti.transition=i}}function $p(t,e,n,r){if(Vc){var s=hf(t,e,n,r);if(s===null)lh(t,e,r,Mc,n),Zv(t,r);else if(KR(s,t,e,n,r))r.stopPropagation();else if(Zv(t,r),e&4&&-1<qR.indexOf(t)){for(;s!==null;){var i=Za(s);if(i!==null&&M0(i),i=hf(t,e,n,r),i===null&&lh(t,e,r,Mc,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else lh(t,e,r,null,n)}}var Mc=null;function hf(t,e,n,r){if(Mc=null,t=Lp(r),t=ys(t),t!==null)if(e=$s(t),e===null)t=null;else if(n=e.tag,n===13){if(t=A0(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Mc=t,null}function $0(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(MR()){case Fp:return 1;case j0:return 4;case Dc:case LR:return 16;case D0:return 536870912;default:return 16}default:return 16}}var br=null,Bp=null,uc=null;function B0(){if(uc)return uc;var t,e=Bp,n=e.length,r,s="value"in br?br.value:br.textContent,i=s.length;for(t=0;t<n&&e[t]===s[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===s[i-r];r++);return uc=s.slice(t,1<r?1-r:void 0)}function dc(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Fl(){return!0}function ty(){return!1}function nn(t){function e(n,r,s,i,o){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(i):i[a]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?Fl:ty,this.isPropagationStopped=ty,this}return Ue(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Fl)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Fl)},persist:function(){},isPersistent:Fl}),e}var ro={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Hp=nn(ro),Ja=Ue({},ro,{view:0,detail:0}),XR=nn(Ja),Zd,eh,Mo,Ru=Ue({},Ja,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Wp,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Mo&&(Mo&&t.type==="mousemove"?(Zd=t.screenX-Mo.screenX,eh=t.screenY-Mo.screenY):eh=Zd=0,Mo=t),Zd)},movementY:function(t){return"movementY"in t?t.movementY:eh}}),ny=nn(Ru),JR=Ue({},Ru,{dataTransfer:0}),ZR=nn(JR),eI=Ue({},Ja,{relatedTarget:0}),th=nn(eI),tI=Ue({},ro,{animationName:0,elapsedTime:0,pseudoElement:0}),nI=nn(tI),rI=Ue({},ro,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),sI=nn(rI),iI=Ue({},ro,{data:0}),ry=nn(iI),oI={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},aI={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},lI={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function cI(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=lI[t])?!!e[t]:!1}function Wp(){return cI}var uI=Ue({},Ja,{key:function(t){if(t.key){var e=oI[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=dc(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?aI[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Wp,charCode:function(t){return t.type==="keypress"?dc(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?dc(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),dI=nn(uI),hI=Ue({},Ru,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),sy=nn(hI),fI=Ue({},Ja,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Wp}),pI=nn(fI),mI=Ue({},ro,{propertyName:0,elapsedTime:0,pseudoElement:0}),gI=nn(mI),vI=Ue({},Ru,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),yI=nn(vI),xI=[9,13,27,32],qp=er&&"CompositionEvent"in window,na=null;er&&"documentMode"in document&&(na=document.documentMode);var wI=er&&"TextEvent"in window&&!na,H0=er&&(!qp||na&&8<na&&11>=na),iy=" ",oy=!1;function W0(t,e){switch(t){case"keyup":return xI.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function q0(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var ui=!1;function _I(t,e){switch(t){case"compositionend":return q0(e);case"keypress":return e.which!==32?null:(oy=!0,iy);case"textInput":return t=e.data,t===iy&&oy?null:t;default:return null}}function EI(t,e){if(ui)return t==="compositionend"||!qp&&W0(t,e)?(t=B0(),uc=Bp=br=null,ui=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return H0&&e.locale!=="ko"?null:e.data;default:return null}}var TI={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function ay(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!TI[t.type]:e==="textarea"}function K0(t,e,n,r){S0(r),e=Lc(e,"onChange"),0<e.length&&(n=new Hp("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var ra=null,Ea=null;function SI(t){s_(t,0)}function Iu(t){var e=fi(t);if(v0(e))return t}function CI(t,e){if(t==="change")return e}var G0=!1;if(er){var nh;if(er){var rh="oninput"in document;if(!rh){var ly=document.createElement("div");ly.setAttribute("oninput","return;"),rh=typeof ly.oninput=="function"}nh=rh}else nh=!1;G0=nh&&(!document.documentMode||9<document.documentMode)}function cy(){ra&&(ra.detachEvent("onpropertychange",Q0),Ea=ra=null)}function Q0(t){if(t.propertyName==="value"&&Iu(Ea)){var e=[];K0(e,Ea,t,Lp(t)),I0(SI,e)}}function bI(t,e,n){t==="focusin"?(cy(),ra=e,Ea=n,ra.attachEvent("onpropertychange",Q0)):t==="focusout"&&cy()}function RI(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Iu(Ea)}function II(t,e){if(t==="click")return Iu(e)}function AI(t,e){if(t==="input"||t==="change")return Iu(e)}function NI(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var _n=typeof Object.is=="function"?Object.is:NI;function Ta(t,e){if(_n(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!Kh.call(e,s)||!_n(t[s],e[s]))return!1}return!0}function uy(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function dy(t,e){var n=uy(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=uy(n)}}function Y0(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?Y0(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function X0(){for(var t=window,e=Pc();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Pc(t.document)}return e}function Kp(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function PI(t){var e=X0(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&Y0(n.ownerDocument.documentElement,n)){if(r!==null&&Kp(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!t.extend&&i>r&&(s=r,r=i,i=s),s=dy(n,i);var o=dy(n,r);s&&o&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),i>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var kI=er&&"documentMode"in document&&11>=document.documentMode,di=null,ff=null,sa=null,pf=!1;function hy(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;pf||di==null||di!==Pc(r)||(r=di,"selectionStart"in r&&Kp(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),sa&&Ta(sa,r)||(sa=r,r=Lc(ff,"onSelect"),0<r.length&&(e=new Hp("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=di)))}function zl(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var hi={animationend:zl("Animation","AnimationEnd"),animationiteration:zl("Animation","AnimationIteration"),animationstart:zl("Animation","AnimationStart"),transitionend:zl("Transition","TransitionEnd")},sh={},J0={};er&&(J0=document.createElement("div").style,"AnimationEvent"in window||(delete hi.animationend.animation,delete hi.animationiteration.animation,delete hi.animationstart.animation),"TransitionEvent"in window||delete hi.transitionend.transition);function Au(t){if(sh[t])return sh[t];if(!hi[t])return t;var e=hi[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in J0)return sh[t]=e[n];return t}var Z0=Au("animationend"),e_=Au("animationiteration"),t_=Au("animationstart"),n_=Au("transitionend"),r_=new Map,fy="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Jr(t,e){r_.set(t,e),Us(e,[t])}for(var ih=0;ih<fy.length;ih++){var oh=fy[ih],jI=oh.toLowerCase(),DI=oh[0].toUpperCase()+oh.slice(1);Jr(jI,"on"+DI)}Jr(Z0,"onAnimationEnd");Jr(e_,"onAnimationIteration");Jr(t_,"onAnimationStart");Jr("dblclick","onDoubleClick");Jr("focusin","onFocus");Jr("focusout","onBlur");Jr(n_,"onTransitionEnd");Di("onMouseEnter",["mouseout","mouseover"]);Di("onMouseLeave",["mouseout","mouseover"]);Di("onPointerEnter",["pointerout","pointerover"]);Di("onPointerLeave",["pointerout","pointerover"]);Us("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Us("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Us("onBeforeInput",["compositionend","keypress","textInput","paste"]);Us("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Us("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Us("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ko="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),OI=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ko));function py(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,jR(r,e,void 0,t),t.currentTarget=null}function s_(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var i=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],u=a.instance,d=a.currentTarget;if(a=a.listener,u!==i&&s.isPropagationStopped())break e;py(s,a,d),i=u}else for(o=0;o<r.length;o++){if(a=r[o],u=a.instance,d=a.currentTarget,a=a.listener,u!==i&&s.isPropagationStopped())break e;py(s,a,d),i=u}}}if(jc)throw t=cf,jc=!1,cf=null,t}function Oe(t,e){var n=e[xf];n===void 0&&(n=e[xf]=new Set);var r=t+"__bubble";n.has(r)||(i_(e,t,2,!1),n.add(r))}function ah(t,e,n){var r=0;e&&(r|=4),i_(n,t,r,e)}var Ul="_reactListening"+Math.random().toString(36).slice(2);function Sa(t){if(!t[Ul]){t[Ul]=!0,h0.forEach(function(n){n!=="selectionchange"&&(OI.has(n)||ah(n,!1,t),ah(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Ul]||(e[Ul]=!0,ah("selectionchange",!1,e))}}function i_(t,e,n,r){switch($0(e)){case 1:var s=QR;break;case 4:s=YR;break;default:s=$p}n=s.bind(null,e,n,t),s=void 0,!lf||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function lh(t,e,n,r,s){var i=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===s||a.nodeType===8&&a.parentNode===s)break;if(o===4)for(o=r.return;o!==null;){var u=o.tag;if((u===3||u===4)&&(u=o.stateNode.containerInfo,u===s||u.nodeType===8&&u.parentNode===s))return;o=o.return}for(;a!==null;){if(o=ys(a),o===null)return;if(u=o.tag,u===5||u===6){r=i=o;continue e}a=a.parentNode}}r=r.return}I0(function(){var d=i,h=Lp(n),p=[];e:{var g=r_.get(t);if(g!==void 0){var w=Hp,b=t;switch(t){case"keypress":if(dc(n)===0)break e;case"keydown":case"keyup":w=dI;break;case"focusin":b="focus",w=th;break;case"focusout":b="blur",w=th;break;case"beforeblur":case"afterblur":w=th;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":w=ny;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":w=ZR;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":w=pI;break;case Z0:case e_:case t_:w=nI;break;case n_:w=gI;break;case"scroll":w=XR;break;case"wheel":w=yI;break;case"copy":case"cut":case"paste":w=sI;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":w=sy}var x=(e&4)!==0,E=!x&&t==="scroll",_=x?g!==null?g+"Capture":null:g;x=[];for(var y=d,C;y!==null;){C=y;var k=C.stateNode;if(C.tag===5&&k!==null&&(C=k,_!==null&&(k=ya(y,_),k!=null&&x.push(Ca(y,k,C)))),E)break;y=y.return}0<x.length&&(g=new w(g,b,null,n,h),p.push({event:g,listeners:x}))}}if(!(e&7)){e:{if(g=t==="mouseover"||t==="pointerover",w=t==="mouseout"||t==="pointerout",g&&n!==of&&(b=n.relatedTarget||n.fromElement)&&(ys(b)||b[tr]))break e;if((w||g)&&(g=h.window===h?h:(g=h.ownerDocument)?g.defaultView||g.parentWindow:window,w?(b=n.relatedTarget||n.toElement,w=d,b=b?ys(b):null,b!==null&&(E=$s(b),b!==E||b.tag!==5&&b.tag!==6)&&(b=null)):(w=null,b=d),w!==b)){if(x=ny,k="onMouseLeave",_="onMouseEnter",y="mouse",(t==="pointerout"||t==="pointerover")&&(x=sy,k="onPointerLeave",_="onPointerEnter",y="pointer"),E=w==null?g:fi(w),C=b==null?g:fi(b),g=new x(k,y+"leave",w,n,h),g.target=E,g.relatedTarget=C,k=null,ys(h)===d&&(x=new x(_,y+"enter",b,n,h),x.target=C,x.relatedTarget=E,k=x),E=k,w&&b)t:{for(x=w,_=b,y=0,C=x;C;C=Xs(C))y++;for(C=0,k=_;k;k=Xs(k))C++;for(;0<y-C;)x=Xs(x),y--;for(;0<C-y;)_=Xs(_),C--;for(;y--;){if(x===_||_!==null&&x===_.alternate)break t;x=Xs(x),_=Xs(_)}x=null}else x=null;w!==null&&my(p,g,w,x,!1),b!==null&&E!==null&&my(p,E,b,x,!0)}}e:{if(g=d?fi(d):window,w=g.nodeName&&g.nodeName.toLowerCase(),w==="select"||w==="input"&&g.type==="file")var O=CI;else if(ay(g))if(G0)O=AI;else{O=RI;var D=bI}else(w=g.nodeName)&&w.toLowerCase()==="input"&&(g.type==="checkbox"||g.type==="radio")&&(O=II);if(O&&(O=O(t,d))){K0(p,O,n,h);break e}D&&D(t,g,d),t==="focusout"&&(D=g._wrapperState)&&D.controlled&&g.type==="number"&&ef(g,"number",g.value)}switch(D=d?fi(d):window,t){case"focusin":(ay(D)||D.contentEditable==="true")&&(di=D,ff=d,sa=null);break;case"focusout":sa=ff=di=null;break;case"mousedown":pf=!0;break;case"contextmenu":case"mouseup":case"dragend":pf=!1,hy(p,n,h);break;case"selectionchange":if(kI)break;case"keydown":case"keyup":hy(p,n,h)}var S;if(qp)e:{switch(t){case"compositionstart":var T="onCompositionStart";break e;case"compositionend":T="onCompositionEnd";break e;case"compositionupdate":T="onCompositionUpdate";break e}T=void 0}else ui?W0(t,n)&&(T="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(T="onCompositionStart");T&&(H0&&n.locale!=="ko"&&(ui||T!=="onCompositionStart"?T==="onCompositionEnd"&&ui&&(S=B0()):(br=h,Bp="value"in br?br.value:br.textContent,ui=!0)),D=Lc(d,T),0<D.length&&(T=new ry(T,t,null,n,h),p.push({event:T,listeners:D}),S?T.data=S:(S=q0(n),S!==null&&(T.data=S)))),(S=wI?_I(t,n):EI(t,n))&&(d=Lc(d,"onBeforeInput"),0<d.length&&(h=new ry("onBeforeInput","beforeinput",null,n,h),p.push({event:h,listeners:d}),h.data=S))}s_(p,e)})}function Ca(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Lc(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=ya(t,n),i!=null&&r.unshift(Ca(t,i,s)),i=ya(t,e),i!=null&&r.push(Ca(t,i,s))),t=t.return}return r}function Xs(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function my(t,e,n,r,s){for(var i=e._reactName,o=[];n!==null&&n!==r;){var a=n,u=a.alternate,d=a.stateNode;if(u!==null&&u===r)break;a.tag===5&&d!==null&&(a=d,s?(u=ya(n,i),u!=null&&o.unshift(Ca(n,u,a))):s||(u=ya(n,i),u!=null&&o.push(Ca(n,u,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var VI=/\r\n?/g,MI=/\u0000|\uFFFD/g;function gy(t){return(typeof t=="string"?t:""+t).replace(VI,`
`).replace(MI,"")}function $l(t,e,n){if(e=gy(e),gy(t)!==e&&n)throw Error(K(425))}function Fc(){}var mf=null,gf=null;function vf(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var yf=typeof setTimeout=="function"?setTimeout:void 0,LI=typeof clearTimeout=="function"?clearTimeout:void 0,vy=typeof Promise=="function"?Promise:void 0,FI=typeof queueMicrotask=="function"?queueMicrotask:typeof vy<"u"?function(t){return vy.resolve(null).then(t).catch(zI)}:yf;function zI(t){setTimeout(function(){throw t})}function ch(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),_a(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);_a(e)}function kr(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function yy(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var so=Math.random().toString(36).slice(2),Pn="__reactFiber$"+so,ba="__reactProps$"+so,tr="__reactContainer$"+so,xf="__reactEvents$"+so,UI="__reactListeners$"+so,$I="__reactHandles$"+so;function ys(t){var e=t[Pn];if(e)return e;for(var n=t.parentNode;n;){if(e=n[tr]||n[Pn]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=yy(t);t!==null;){if(n=t[Pn])return n;t=yy(t)}return e}t=n,n=t.parentNode}return null}function Za(t){return t=t[Pn]||t[tr],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function fi(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(K(33))}function Nu(t){return t[ba]||null}var wf=[],pi=-1;function Zr(t){return{current:t}}function Me(t){0>pi||(t.current=wf[pi],wf[pi]=null,pi--)}function ke(t,e){pi++,wf[pi]=t.current,t.current=e}var $r={},St=Zr($r),Lt=Zr(!1),Cs=$r;function Oi(t,e){var n=t.type.contextTypes;if(!n)return $r;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=e[i];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function Ft(t){return t=t.childContextTypes,t!=null}function zc(){Me(Lt),Me(St)}function xy(t,e,n){if(St.current!==$r)throw Error(K(168));ke(St,e),ke(Lt,n)}function o_(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error(K(108,bR(t)||"Unknown",s));return Ue({},n,r)}function Uc(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||$r,Cs=St.current,ke(St,t),ke(Lt,Lt.current),!0}function wy(t,e,n){var r=t.stateNode;if(!r)throw Error(K(169));n?(t=o_(t,e,Cs),r.__reactInternalMemoizedMergedChildContext=t,Me(Lt),Me(St),ke(St,t)):Me(Lt),ke(Lt,n)}var Gn=null,Pu=!1,uh=!1;function a_(t){Gn===null?Gn=[t]:Gn.push(t)}function BI(t){Pu=!0,a_(t)}function es(){if(!uh&&Gn!==null){uh=!0;var t=0,e=Ae;try{var n=Gn;for(Ae=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Gn=null,Pu=!1}catch(s){throw Gn!==null&&(Gn=Gn.slice(t+1)),k0(Fp,es),s}finally{Ae=e,uh=!1}}return null}var mi=[],gi=0,$c=null,Bc=0,sn=[],on=0,bs=null,Qn=1,Yn="";function ms(t,e){mi[gi++]=Bc,mi[gi++]=$c,$c=t,Bc=e}function l_(t,e,n){sn[on++]=Qn,sn[on++]=Yn,sn[on++]=bs,bs=t;var r=Qn;t=Yn;var s=32-yn(r)-1;r&=~(1<<s),n+=1;var i=32-yn(e)+s;if(30<i){var o=s-s%5;i=(r&(1<<o)-1).toString(32),r>>=o,s-=o,Qn=1<<32-yn(e)+s|n<<s|r,Yn=i+t}else Qn=1<<i|n<<s|r,Yn=t}function Gp(t){t.return!==null&&(ms(t,1),l_(t,1,0))}function Qp(t){for(;t===$c;)$c=mi[--gi],mi[gi]=null,Bc=mi[--gi],mi[gi]=null;for(;t===bs;)bs=sn[--on],sn[on]=null,Yn=sn[--on],sn[on]=null,Qn=sn[--on],sn[on]=null}var Jt=null,Qt=null,Le=!1,vn=null;function c_(t,e){var n=ln(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function _y(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Jt=t,Qt=kr(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Jt=t,Qt=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=bs!==null?{id:Qn,overflow:Yn}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=ln(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Jt=t,Qt=null,!0):!1;default:return!1}}function _f(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Ef(t){if(Le){var e=Qt;if(e){var n=e;if(!_y(t,e)){if(_f(t))throw Error(K(418));e=kr(n.nextSibling);var r=Jt;e&&_y(t,e)?c_(r,n):(t.flags=t.flags&-4097|2,Le=!1,Jt=t)}}else{if(_f(t))throw Error(K(418));t.flags=t.flags&-4097|2,Le=!1,Jt=t}}}function Ey(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Jt=t}function Bl(t){if(t!==Jt)return!1;if(!Le)return Ey(t),Le=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!vf(t.type,t.memoizedProps)),e&&(e=Qt)){if(_f(t))throw u_(),Error(K(418));for(;e;)c_(t,e),e=kr(e.nextSibling)}if(Ey(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(K(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Qt=kr(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Qt=null}}else Qt=Jt?kr(t.stateNode.nextSibling):null;return!0}function u_(){for(var t=Qt;t;)t=kr(t.nextSibling)}function Vi(){Qt=Jt=null,Le=!1}function Yp(t){vn===null?vn=[t]:vn.push(t)}var HI=dr.ReactCurrentBatchConfig;function Lo(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(K(309));var r=n.stateNode}if(!r)throw Error(K(147,t));var s=r,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(o){var a=s.refs;o===null?delete a[i]:a[i]=o},e._stringRef=i,e)}if(typeof t!="string")throw Error(K(284));if(!n._owner)throw Error(K(290,t))}return t}function Hl(t,e){throw t=Object.prototype.toString.call(e),Error(K(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Ty(t){var e=t._init;return e(t._payload)}function d_(t){function e(_,y){if(t){var C=_.deletions;C===null?(_.deletions=[y],_.flags|=16):C.push(y)}}function n(_,y){if(!t)return null;for(;y!==null;)e(_,y),y=y.sibling;return null}function r(_,y){for(_=new Map;y!==null;)y.key!==null?_.set(y.key,y):_.set(y.index,y),y=y.sibling;return _}function s(_,y){return _=Vr(_,y),_.index=0,_.sibling=null,_}function i(_,y,C){return _.index=C,t?(C=_.alternate,C!==null?(C=C.index,C<y?(_.flags|=2,y):C):(_.flags|=2,y)):(_.flags|=1048576,y)}function o(_){return t&&_.alternate===null&&(_.flags|=2),_}function a(_,y,C,k){return y===null||y.tag!==6?(y=vh(C,_.mode,k),y.return=_,y):(y=s(y,C),y.return=_,y)}function u(_,y,C,k){var O=C.type;return O===ci?h(_,y,C.props.children,k,C.key):y!==null&&(y.elementType===O||typeof O=="object"&&O!==null&&O.$$typeof===Er&&Ty(O)===y.type)?(k=s(y,C.props),k.ref=Lo(_,y,C),k.return=_,k):(k=yc(C.type,C.key,C.props,null,_.mode,k),k.ref=Lo(_,y,C),k.return=_,k)}function d(_,y,C,k){return y===null||y.tag!==4||y.stateNode.containerInfo!==C.containerInfo||y.stateNode.implementation!==C.implementation?(y=yh(C,_.mode,k),y.return=_,y):(y=s(y,C.children||[]),y.return=_,y)}function h(_,y,C,k,O){return y===null||y.tag!==7?(y=Ts(C,_.mode,k,O),y.return=_,y):(y=s(y,C),y.return=_,y)}function p(_,y,C){if(typeof y=="string"&&y!==""||typeof y=="number")return y=vh(""+y,_.mode,C),y.return=_,y;if(typeof y=="object"&&y!==null){switch(y.$$typeof){case jl:return C=yc(y.type,y.key,y.props,null,_.mode,C),C.ref=Lo(_,null,y),C.return=_,C;case li:return y=yh(y,_.mode,C),y.return=_,y;case Er:var k=y._init;return p(_,k(y._payload),C)}if(Wo(y)||jo(y))return y=Ts(y,_.mode,C,null),y.return=_,y;Hl(_,y)}return null}function g(_,y,C,k){var O=y!==null?y.key:null;if(typeof C=="string"&&C!==""||typeof C=="number")return O!==null?null:a(_,y,""+C,k);if(typeof C=="object"&&C!==null){switch(C.$$typeof){case jl:return C.key===O?u(_,y,C,k):null;case li:return C.key===O?d(_,y,C,k):null;case Er:return O=C._init,g(_,y,O(C._payload),k)}if(Wo(C)||jo(C))return O!==null?null:h(_,y,C,k,null);Hl(_,C)}return null}function w(_,y,C,k,O){if(typeof k=="string"&&k!==""||typeof k=="number")return _=_.get(C)||null,a(y,_,""+k,O);if(typeof k=="object"&&k!==null){switch(k.$$typeof){case jl:return _=_.get(k.key===null?C:k.key)||null,u(y,_,k,O);case li:return _=_.get(k.key===null?C:k.key)||null,d(y,_,k,O);case Er:var D=k._init;return w(_,y,C,D(k._payload),O)}if(Wo(k)||jo(k))return _=_.get(C)||null,h(y,_,k,O,null);Hl(y,k)}return null}function b(_,y,C,k){for(var O=null,D=null,S=y,T=y=0,I=null;S!==null&&T<C.length;T++){S.index>T?(I=S,S=null):I=S.sibling;var A=g(_,S,C[T],k);if(A===null){S===null&&(S=I);break}t&&S&&A.alternate===null&&e(_,S),y=i(A,y,T),D===null?O=A:D.sibling=A,D=A,S=I}if(T===C.length)return n(_,S),Le&&ms(_,T),O;if(S===null){for(;T<C.length;T++)S=p(_,C[T],k),S!==null&&(y=i(S,y,T),D===null?O=S:D.sibling=S,D=S);return Le&&ms(_,T),O}for(S=r(_,S);T<C.length;T++)I=w(S,_,T,C[T],k),I!==null&&(t&&I.alternate!==null&&S.delete(I.key===null?T:I.key),y=i(I,y,T),D===null?O=I:D.sibling=I,D=I);return t&&S.forEach(function(P){return e(_,P)}),Le&&ms(_,T),O}function x(_,y,C,k){var O=jo(C);if(typeof O!="function")throw Error(K(150));if(C=O.call(C),C==null)throw Error(K(151));for(var D=O=null,S=y,T=y=0,I=null,A=C.next();S!==null&&!A.done;T++,A=C.next()){S.index>T?(I=S,S=null):I=S.sibling;var P=g(_,S,A.value,k);if(P===null){S===null&&(S=I);break}t&&S&&P.alternate===null&&e(_,S),y=i(P,y,T),D===null?O=P:D.sibling=P,D=P,S=I}if(A.done)return n(_,S),Le&&ms(_,T),O;if(S===null){for(;!A.done;T++,A=C.next())A=p(_,A.value,k),A!==null&&(y=i(A,y,T),D===null?O=A:D.sibling=A,D=A);return Le&&ms(_,T),O}for(S=r(_,S);!A.done;T++,A=C.next())A=w(S,_,T,A.value,k),A!==null&&(t&&A.alternate!==null&&S.delete(A.key===null?T:A.key),y=i(A,y,T),D===null?O=A:D.sibling=A,D=A);return t&&S.forEach(function(j){return e(_,j)}),Le&&ms(_,T),O}function E(_,y,C,k){if(typeof C=="object"&&C!==null&&C.type===ci&&C.key===null&&(C=C.props.children),typeof C=="object"&&C!==null){switch(C.$$typeof){case jl:e:{for(var O=C.key,D=y;D!==null;){if(D.key===O){if(O=C.type,O===ci){if(D.tag===7){n(_,D.sibling),y=s(D,C.props.children),y.return=_,_=y;break e}}else if(D.elementType===O||typeof O=="object"&&O!==null&&O.$$typeof===Er&&Ty(O)===D.type){n(_,D.sibling),y=s(D,C.props),y.ref=Lo(_,D,C),y.return=_,_=y;break e}n(_,D);break}else e(_,D);D=D.sibling}C.type===ci?(y=Ts(C.props.children,_.mode,k,C.key),y.return=_,_=y):(k=yc(C.type,C.key,C.props,null,_.mode,k),k.ref=Lo(_,y,C),k.return=_,_=k)}return o(_);case li:e:{for(D=C.key;y!==null;){if(y.key===D)if(y.tag===4&&y.stateNode.containerInfo===C.containerInfo&&y.stateNode.implementation===C.implementation){n(_,y.sibling),y=s(y,C.children||[]),y.return=_,_=y;break e}else{n(_,y);break}else e(_,y);y=y.sibling}y=yh(C,_.mode,k),y.return=_,_=y}return o(_);case Er:return D=C._init,E(_,y,D(C._payload),k)}if(Wo(C))return b(_,y,C,k);if(jo(C))return x(_,y,C,k);Hl(_,C)}return typeof C=="string"&&C!==""||typeof C=="number"?(C=""+C,y!==null&&y.tag===6?(n(_,y.sibling),y=s(y,C),y.return=_,_=y):(n(_,y),y=vh(C,_.mode,k),y.return=_,_=y),o(_)):n(_,y)}return E}var Mi=d_(!0),h_=d_(!1),Hc=Zr(null),Wc=null,vi=null,Xp=null;function Jp(){Xp=vi=Wc=null}function Zp(t){var e=Hc.current;Me(Hc),t._currentValue=e}function Tf(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Si(t,e){Wc=t,Xp=vi=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Mt=!0),t.firstContext=null)}function un(t){var e=t._currentValue;if(Xp!==t)if(t={context:t,memoizedValue:e,next:null},vi===null){if(Wc===null)throw Error(K(308));vi=t,Wc.dependencies={lanes:0,firstContext:t}}else vi=vi.next=t;return e}var xs=null;function em(t){xs===null?xs=[t]:xs.push(t)}function f_(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,em(e)):(n.next=s.next,s.next=n),e.interleaved=n,nr(t,r)}function nr(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Tr=!1;function tm(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function p_(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Jn(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function jr(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,Te&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,nr(t,n)}return s=r.interleaved,s===null?(e.next=e,em(r)):(e.next=s.next,s.next=e),r.interleaved=e,nr(t,n)}function hc(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,zp(t,n)}}function Sy(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=o:i=i.next=o,n=n.next}while(n!==null);i===null?s=i=e:i=i.next=e}else s=i=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function qc(t,e,n,r){var s=t.updateQueue;Tr=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,a=s.shared.pending;if(a!==null){s.shared.pending=null;var u=a,d=u.next;u.next=null,o===null?i=d:o.next=d,o=u;var h=t.alternate;h!==null&&(h=h.updateQueue,a=h.lastBaseUpdate,a!==o&&(a===null?h.firstBaseUpdate=d:a.next=d,h.lastBaseUpdate=u))}if(i!==null){var p=s.baseState;o=0,h=d=u=null,a=i;do{var g=a.lane,w=a.eventTime;if((r&g)===g){h!==null&&(h=h.next={eventTime:w,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var b=t,x=a;switch(g=e,w=n,x.tag){case 1:if(b=x.payload,typeof b=="function"){p=b.call(w,p,g);break e}p=b;break e;case 3:b.flags=b.flags&-65537|128;case 0:if(b=x.payload,g=typeof b=="function"?b.call(w,p,g):b,g==null)break e;p=Ue({},p,g);break e;case 2:Tr=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,g=s.effects,g===null?s.effects=[a]:g.push(a))}else w={eventTime:w,lane:g,tag:a.tag,payload:a.payload,callback:a.callback,next:null},h===null?(d=h=w,u=p):h=h.next=w,o|=g;if(a=a.next,a===null){if(a=s.shared.pending,a===null)break;g=a,a=g.next,g.next=null,s.lastBaseUpdate=g,s.shared.pending=null}}while(!0);if(h===null&&(u=p),s.baseState=u,s.firstBaseUpdate=d,s.lastBaseUpdate=h,e=s.shared.interleaved,e!==null){s=e;do o|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);Is|=o,t.lanes=o,t.memoizedState=p}}function Cy(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(K(191,s));s.call(r)}}}var el={},On=Zr(el),Ra=Zr(el),Ia=Zr(el);function ws(t){if(t===el)throw Error(K(174));return t}function nm(t,e){switch(ke(Ia,e),ke(Ra,t),ke(On,el),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:nf(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=nf(e,t)}Me(On),ke(On,e)}function Li(){Me(On),Me(Ra),Me(Ia)}function m_(t){ws(Ia.current);var e=ws(On.current),n=nf(e,t.type);e!==n&&(ke(Ra,t),ke(On,n))}function rm(t){Ra.current===t&&(Me(On),Me(Ra))}var Fe=Zr(0);function Kc(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var dh=[];function sm(){for(var t=0;t<dh.length;t++)dh[t]._workInProgressVersionPrimary=null;dh.length=0}var fc=dr.ReactCurrentDispatcher,hh=dr.ReactCurrentBatchConfig,Rs=0,ze=null,Je=null,nt=null,Gc=!1,ia=!1,Aa=0,WI=0;function yt(){throw Error(K(321))}function im(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!_n(t[n],e[n]))return!1;return!0}function om(t,e,n,r,s,i){if(Rs=i,ze=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,fc.current=t===null||t.memoizedState===null?QI:YI,t=n(r,s),ia){i=0;do{if(ia=!1,Aa=0,25<=i)throw Error(K(301));i+=1,nt=Je=null,e.updateQueue=null,fc.current=XI,t=n(r,s)}while(ia)}if(fc.current=Qc,e=Je!==null&&Je.next!==null,Rs=0,nt=Je=ze=null,Gc=!1,e)throw Error(K(300));return t}function am(){var t=Aa!==0;return Aa=0,t}function In(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return nt===null?ze.memoizedState=nt=t:nt=nt.next=t,nt}function dn(){if(Je===null){var t=ze.alternate;t=t!==null?t.memoizedState:null}else t=Je.next;var e=nt===null?ze.memoizedState:nt.next;if(e!==null)nt=e,Je=t;else{if(t===null)throw Error(K(310));Je=t,t={memoizedState:Je.memoizedState,baseState:Je.baseState,baseQueue:Je.baseQueue,queue:Je.queue,next:null},nt===null?ze.memoizedState=nt=t:nt=nt.next=t}return nt}function Na(t,e){return typeof e=="function"?e(t):e}function fh(t){var e=dn(),n=e.queue;if(n===null)throw Error(K(311));n.lastRenderedReducer=t;var r=Je,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var a=o=null,u=null,d=i;do{var h=d.lane;if((Rs&h)===h)u!==null&&(u=u.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),r=d.hasEagerState?d.eagerState:t(r,d.action);else{var p={lane:h,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};u===null?(a=u=p,o=r):u=u.next=p,ze.lanes|=h,Is|=h}d=d.next}while(d!==null&&d!==i);u===null?o=r:u.next=a,_n(r,e.memoizedState)||(Mt=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=u,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do i=s.lane,ze.lanes|=i,Is|=i,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function ph(t){var e=dn(),n=e.queue;if(n===null)throw Error(K(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,i=e.memoizedState;if(s!==null){n.pending=null;var o=s=s.next;do i=t(i,o.action),o=o.next;while(o!==s);_n(i,e.memoizedState)||(Mt=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,r]}function g_(){}function v_(t,e){var n=ze,r=dn(),s=e(),i=!_n(r.memoizedState,s);if(i&&(r.memoizedState=s,Mt=!0),r=r.queue,lm(w_.bind(null,n,r,t),[t]),r.getSnapshot!==e||i||nt!==null&&nt.memoizedState.tag&1){if(n.flags|=2048,Pa(9,x_.bind(null,n,r,s,e),void 0,null),it===null)throw Error(K(349));Rs&30||y_(n,e,s)}return s}function y_(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=ze.updateQueue,e===null?(e={lastEffect:null,stores:null},ze.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function x_(t,e,n,r){e.value=n,e.getSnapshot=r,__(e)&&E_(t)}function w_(t,e,n){return n(function(){__(e)&&E_(t)})}function __(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!_n(t,n)}catch{return!0}}function E_(t){var e=nr(t,1);e!==null&&xn(e,t,1,-1)}function by(t){var e=In();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Na,lastRenderedState:t},e.queue=t,t=t.dispatch=GI.bind(null,ze,t),[e.memoizedState,t]}function Pa(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=ze.updateQueue,e===null?(e={lastEffect:null,stores:null},ze.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function T_(){return dn().memoizedState}function pc(t,e,n,r){var s=In();ze.flags|=t,s.memoizedState=Pa(1|e,n,void 0,r===void 0?null:r)}function ku(t,e,n,r){var s=dn();r=r===void 0?null:r;var i=void 0;if(Je!==null){var o=Je.memoizedState;if(i=o.destroy,r!==null&&im(r,o.deps)){s.memoizedState=Pa(e,n,i,r);return}}ze.flags|=t,s.memoizedState=Pa(1|e,n,i,r)}function Ry(t,e){return pc(8390656,8,t,e)}function lm(t,e){return ku(2048,8,t,e)}function S_(t,e){return ku(4,2,t,e)}function C_(t,e){return ku(4,4,t,e)}function b_(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function R_(t,e,n){return n=n!=null?n.concat([t]):null,ku(4,4,b_.bind(null,e,t),n)}function cm(){}function I_(t,e){var n=dn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&im(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function A_(t,e){var n=dn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&im(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function N_(t,e,n){return Rs&21?(_n(n,e)||(n=O0(),ze.lanes|=n,Is|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Mt=!0),t.memoizedState=n)}function qI(t,e){var n=Ae;Ae=n!==0&&4>n?n:4,t(!0);var r=hh.transition;hh.transition={};try{t(!1),e()}finally{Ae=n,hh.transition=r}}function P_(){return dn().memoizedState}function KI(t,e,n){var r=Or(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},k_(t))j_(e,n);else if(n=f_(t,e,n,r),n!==null){var s=At();xn(n,t,r,s),D_(n,e,r)}}function GI(t,e,n){var r=Or(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(k_(t))j_(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var o=e.lastRenderedState,a=i(o,n);if(s.hasEagerState=!0,s.eagerState=a,_n(a,o)){var u=e.interleaved;u===null?(s.next=s,em(e)):(s.next=u.next,u.next=s),e.interleaved=s;return}}catch{}finally{}n=f_(t,e,s,r),n!==null&&(s=At(),xn(n,t,r,s),D_(n,e,r))}}function k_(t){var e=t.alternate;return t===ze||e!==null&&e===ze}function j_(t,e){ia=Gc=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function D_(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,zp(t,n)}}var Qc={readContext:un,useCallback:yt,useContext:yt,useEffect:yt,useImperativeHandle:yt,useInsertionEffect:yt,useLayoutEffect:yt,useMemo:yt,useReducer:yt,useRef:yt,useState:yt,useDebugValue:yt,useDeferredValue:yt,useTransition:yt,useMutableSource:yt,useSyncExternalStore:yt,useId:yt,unstable_isNewReconciler:!1},QI={readContext:un,useCallback:function(t,e){return In().memoizedState=[t,e===void 0?null:e],t},useContext:un,useEffect:Ry,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,pc(4194308,4,b_.bind(null,e,t),n)},useLayoutEffect:function(t,e){return pc(4194308,4,t,e)},useInsertionEffect:function(t,e){return pc(4,2,t,e)},useMemo:function(t,e){var n=In();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=In();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=KI.bind(null,ze,t),[r.memoizedState,t]},useRef:function(t){var e=In();return t={current:t},e.memoizedState=t},useState:by,useDebugValue:cm,useDeferredValue:function(t){return In().memoizedState=t},useTransition:function(){var t=by(!1),e=t[0];return t=qI.bind(null,t[1]),In().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=ze,s=In();if(Le){if(n===void 0)throw Error(K(407));n=n()}else{if(n=e(),it===null)throw Error(K(349));Rs&30||y_(r,e,n)}s.memoizedState=n;var i={value:n,getSnapshot:e};return s.queue=i,Ry(w_.bind(null,r,i,t),[t]),r.flags|=2048,Pa(9,x_.bind(null,r,i,n,e),void 0,null),n},useId:function(){var t=In(),e=it.identifierPrefix;if(Le){var n=Yn,r=Qn;n=(r&~(1<<32-yn(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Aa++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=WI++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},YI={readContext:un,useCallback:I_,useContext:un,useEffect:lm,useImperativeHandle:R_,useInsertionEffect:S_,useLayoutEffect:C_,useMemo:A_,useReducer:fh,useRef:T_,useState:function(){return fh(Na)},useDebugValue:cm,useDeferredValue:function(t){var e=dn();return N_(e,Je.memoizedState,t)},useTransition:function(){var t=fh(Na)[0],e=dn().memoizedState;return[t,e]},useMutableSource:g_,useSyncExternalStore:v_,useId:P_,unstable_isNewReconciler:!1},XI={readContext:un,useCallback:I_,useContext:un,useEffect:lm,useImperativeHandle:R_,useInsertionEffect:S_,useLayoutEffect:C_,useMemo:A_,useReducer:ph,useRef:T_,useState:function(){return ph(Na)},useDebugValue:cm,useDeferredValue:function(t){var e=dn();return Je===null?e.memoizedState=t:N_(e,Je.memoizedState,t)},useTransition:function(){var t=ph(Na)[0],e=dn().memoizedState;return[t,e]},useMutableSource:g_,useSyncExternalStore:v_,useId:P_,unstable_isNewReconciler:!1};function mn(t,e){if(t&&t.defaultProps){e=Ue({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function Sf(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Ue({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var ju={isMounted:function(t){return(t=t._reactInternals)?$s(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=At(),s=Or(t),i=Jn(r,s);i.payload=e,n!=null&&(i.callback=n),e=jr(t,i,s),e!==null&&(xn(e,t,s,r),hc(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=At(),s=Or(t),i=Jn(r,s);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=jr(t,i,s),e!==null&&(xn(e,t,s,r),hc(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=At(),r=Or(t),s=Jn(n,r);s.tag=2,e!=null&&(s.callback=e),e=jr(t,s,r),e!==null&&(xn(e,t,r,n),hc(e,t,r))}};function Iy(t,e,n,r,s,i,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,i,o):e.prototype&&e.prototype.isPureReactComponent?!Ta(n,r)||!Ta(s,i):!0}function O_(t,e,n){var r=!1,s=$r,i=e.contextType;return typeof i=="object"&&i!==null?i=un(i):(s=Ft(e)?Cs:St.current,r=e.contextTypes,i=(r=r!=null)?Oi(t,s):$r),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=ju,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function Ay(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&ju.enqueueReplaceState(e,e.state,null)}function Cf(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},tm(t);var i=e.contextType;typeof i=="object"&&i!==null?s.context=un(i):(i=Ft(e)?Cs:St.current,s.context=Oi(t,i)),s.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(Sf(t,e,i,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&ju.enqueueReplaceState(s,s.state,null),qc(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function Fi(t,e){try{var n="",r=e;do n+=CR(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:s,digest:null}}function mh(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function bf(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var JI=typeof WeakMap=="function"?WeakMap:Map;function V_(t,e,n){n=Jn(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Xc||(Xc=!0,Vf=r),bf(t,e)},n}function M_(t,e,n){n=Jn(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){bf(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){bf(t,e),typeof r!="function"&&(Dr===null?Dr=new Set([this]):Dr.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function Ny(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new JI;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=hA.bind(null,t,e,n),e.then(t,t))}function Py(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function ky(t,e,n,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Jn(-1,1),e.tag=2,jr(n,e,1))),n.lanes|=1),t)}var ZI=dr.ReactCurrentOwner,Mt=!1;function Rt(t,e,n,r){e.child=t===null?h_(e,null,n,r):Mi(e,t.child,n,r)}function jy(t,e,n,r,s){n=n.render;var i=e.ref;return Si(e,s),r=om(t,e,n,r,i,s),n=am(),t!==null&&!Mt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,rr(t,e,s)):(Le&&n&&Gp(e),e.flags|=1,Rt(t,e,r,s),e.child)}function Dy(t,e,n,r,s){if(t===null){var i=n.type;return typeof i=="function"&&!vm(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,L_(t,e,i,r,s)):(t=yc(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&s)){var o=i.memoizedProps;if(n=n.compare,n=n!==null?n:Ta,n(o,r)&&t.ref===e.ref)return rr(t,e,s)}return e.flags|=1,t=Vr(i,r),t.ref=e.ref,t.return=e,e.child=t}function L_(t,e,n,r,s){if(t!==null){var i=t.memoizedProps;if(Ta(i,r)&&t.ref===e.ref)if(Mt=!1,e.pendingProps=r=i,(t.lanes&s)!==0)t.flags&131072&&(Mt=!0);else return e.lanes=t.lanes,rr(t,e,s)}return Rf(t,e,n,r,s)}function F_(t,e,n){var r=e.pendingProps,s=r.children,i=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},ke(xi,Kt),Kt|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,ke(xi,Kt),Kt|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,ke(xi,Kt),Kt|=r}else i!==null?(r=i.baseLanes|n,e.memoizedState=null):r=n,ke(xi,Kt),Kt|=r;return Rt(t,e,s,n),e.child}function z_(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Rf(t,e,n,r,s){var i=Ft(n)?Cs:St.current;return i=Oi(e,i),Si(e,s),n=om(t,e,n,r,i,s),r=am(),t!==null&&!Mt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,rr(t,e,s)):(Le&&r&&Gp(e),e.flags|=1,Rt(t,e,n,s),e.child)}function Oy(t,e,n,r,s){if(Ft(n)){var i=!0;Uc(e)}else i=!1;if(Si(e,s),e.stateNode===null)mc(t,e),O_(e,n,r),Cf(e,n,r,s),r=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var u=o.context,d=n.contextType;typeof d=="object"&&d!==null?d=un(d):(d=Ft(n)?Cs:St.current,d=Oi(e,d));var h=n.getDerivedStateFromProps,p=typeof h=="function"||typeof o.getSnapshotBeforeUpdate=="function";p||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||u!==d)&&Ay(e,o,r,d),Tr=!1;var g=e.memoizedState;o.state=g,qc(e,r,o,s),u=e.memoizedState,a!==r||g!==u||Lt.current||Tr?(typeof h=="function"&&(Sf(e,n,h,r),u=e.memoizedState),(a=Tr||Iy(e,n,a,r,g,u,d))?(p||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=u),o.props=r,o.state=u,o.context=d,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,p_(t,e),a=e.memoizedProps,d=e.type===e.elementType?a:mn(e.type,a),o.props=d,p=e.pendingProps,g=o.context,u=n.contextType,typeof u=="object"&&u!==null?u=un(u):(u=Ft(n)?Cs:St.current,u=Oi(e,u));var w=n.getDerivedStateFromProps;(h=typeof w=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==p||g!==u)&&Ay(e,o,r,u),Tr=!1,g=e.memoizedState,o.state=g,qc(e,r,o,s);var b=e.memoizedState;a!==p||g!==b||Lt.current||Tr?(typeof w=="function"&&(Sf(e,n,w,r),b=e.memoizedState),(d=Tr||Iy(e,n,d,r,g,b,u)||!1)?(h||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,b,u),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,b,u)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&g===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&g===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=b),o.props=r,o.state=b,o.context=u,r=d):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&g===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&g===t.memoizedState||(e.flags|=1024),r=!1)}return If(t,e,n,r,i,s)}function If(t,e,n,r,s,i){z_(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return s&&wy(e,n,!1),rr(t,e,i);r=e.stateNode,ZI.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=Mi(e,t.child,null,i),e.child=Mi(e,null,a,i)):Rt(t,e,a,i),e.memoizedState=r.state,s&&wy(e,n,!0),e.child}function U_(t){var e=t.stateNode;e.pendingContext?xy(t,e.pendingContext,e.pendingContext!==e.context):e.context&&xy(t,e.context,!1),nm(t,e.containerInfo)}function Vy(t,e,n,r,s){return Vi(),Yp(s),e.flags|=256,Rt(t,e,n,r),e.child}var Af={dehydrated:null,treeContext:null,retryLane:0};function Nf(t){return{baseLanes:t,cachePool:null,transitions:null}}function $_(t,e,n){var r=e.pendingProps,s=Fe.current,i=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(s&2)!==0),a?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),ke(Fe,s&1),t===null)return Ef(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,i?(r=e.mode,i=e.child,o={mode:"hidden",children:o},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=Vu(o,r,0,null),t=Ts(t,r,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=Nf(n),e.memoizedState=Af,t):um(e,o));if(s=t.memoizedState,s!==null&&(a=s.dehydrated,a!==null))return eA(t,e,o,r,a,s,n);if(i){i=r.fallback,o=e.mode,s=t.child,a=s.sibling;var u={mode:"hidden",children:r.children};return!(o&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=u,e.deletions=null):(r=Vr(s,u),r.subtreeFlags=s.subtreeFlags&14680064),a!==null?i=Vr(a,i):(i=Ts(i,o,n,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,o=t.child.memoizedState,o=o===null?Nf(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=t.childLanes&~n,e.memoizedState=Af,r}return i=t.child,t=i.sibling,r=Vr(i,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function um(t,e){return e=Vu({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Wl(t,e,n,r){return r!==null&&Yp(r),Mi(e,t.child,null,n),t=um(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function eA(t,e,n,r,s,i,o){if(n)return e.flags&256?(e.flags&=-257,r=mh(Error(K(422))),Wl(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=r.fallback,s=e.mode,r=Vu({mode:"visible",children:r.children},s,0,null),i=Ts(i,s,o,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,e.mode&1&&Mi(e,t.child,null,o),e.child.memoizedState=Nf(o),e.memoizedState=Af,i);if(!(e.mode&1))return Wl(t,e,o,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var a=r.dgst;return r=a,i=Error(K(419)),r=mh(i,r,void 0),Wl(t,e,o,r)}if(a=(o&t.childLanes)!==0,Mt||a){if(r=it,r!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,nr(t,s),xn(r,t,s,-1))}return gm(),r=mh(Error(K(421))),Wl(t,e,o,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=fA.bind(null,t),s._reactRetry=e,null):(t=i.treeContext,Qt=kr(s.nextSibling),Jt=e,Le=!0,vn=null,t!==null&&(sn[on++]=Qn,sn[on++]=Yn,sn[on++]=bs,Qn=t.id,Yn=t.overflow,bs=e),e=um(e,r.children),e.flags|=4096,e)}function My(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),Tf(t.return,e,n)}function gh(t,e,n,r,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function B_(t,e,n){var r=e.pendingProps,s=r.revealOrder,i=r.tail;if(Rt(t,e,r.children,n),r=Fe.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&My(t,n,e);else if(t.tag===19)My(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(ke(Fe,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&Kc(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),gh(e,!1,s,n,i);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&Kc(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}gh(e,!0,n,null,i);break;case"together":gh(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function mc(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function rr(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Is|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(K(153));if(e.child!==null){for(t=e.child,n=Vr(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Vr(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function tA(t,e,n){switch(e.tag){case 3:U_(e),Vi();break;case 5:m_(e);break;case 1:Ft(e.type)&&Uc(e);break;case 4:nm(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;ke(Hc,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(ke(Fe,Fe.current&1),e.flags|=128,null):n&e.child.childLanes?$_(t,e,n):(ke(Fe,Fe.current&1),t=rr(t,e,n),t!==null?t.sibling:null);ke(Fe,Fe.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return B_(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),ke(Fe,Fe.current),r)break;return null;case 22:case 23:return e.lanes=0,F_(t,e,n)}return rr(t,e,n)}var H_,Pf,W_,q_;H_=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Pf=function(){};W_=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,ws(On.current);var i=null;switch(n){case"input":s=Jh(t,s),r=Jh(t,r),i=[];break;case"select":s=Ue({},s,{value:void 0}),r=Ue({},r,{value:void 0}),i=[];break;case"textarea":s=tf(t,s),r=tf(t,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Fc)}rf(n,r);var o;n=null;for(d in s)if(!r.hasOwnProperty(d)&&s.hasOwnProperty(d)&&s[d]!=null)if(d==="style"){var a=s[d];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(ga.hasOwnProperty(d)?i||(i=[]):(i=i||[]).push(d,null));for(d in r){var u=r[d];if(a=s!=null?s[d]:void 0,r.hasOwnProperty(d)&&u!==a&&(u!=null||a!=null))if(d==="style")if(a){for(o in a)!a.hasOwnProperty(o)||u&&u.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in u)u.hasOwnProperty(o)&&a[o]!==u[o]&&(n||(n={}),n[o]=u[o])}else n||(i||(i=[]),i.push(d,n)),n=u;else d==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,a=a?a.__html:void 0,u!=null&&a!==u&&(i=i||[]).push(d,u)):d==="children"?typeof u!="string"&&typeof u!="number"||(i=i||[]).push(d,""+u):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(ga.hasOwnProperty(d)?(u!=null&&d==="onScroll"&&Oe("scroll",t),i||a===u||(i=[])):(i=i||[]).push(d,u))}n&&(i=i||[]).push("style",n);var d=i;(e.updateQueue=d)&&(e.flags|=4)}};q_=function(t,e,n,r){n!==r&&(e.flags|=4)};function Fo(t,e){if(!Le)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function xt(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function nA(t,e,n){var r=e.pendingProps;switch(Qp(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return xt(e),null;case 1:return Ft(e.type)&&zc(),xt(e),null;case 3:return r=e.stateNode,Li(),Me(Lt),Me(St),sm(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Bl(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,vn!==null&&(Ff(vn),vn=null))),Pf(t,e),xt(e),null;case 5:rm(e);var s=ws(Ia.current);if(n=e.type,t!==null&&e.stateNode!=null)W_(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(K(166));return xt(e),null}if(t=ws(On.current),Bl(e)){r=e.stateNode,n=e.type;var i=e.memoizedProps;switch(r[Pn]=e,r[ba]=i,t=(e.mode&1)!==0,n){case"dialog":Oe("cancel",r),Oe("close",r);break;case"iframe":case"object":case"embed":Oe("load",r);break;case"video":case"audio":for(s=0;s<Ko.length;s++)Oe(Ko[s],r);break;case"source":Oe("error",r);break;case"img":case"image":case"link":Oe("error",r),Oe("load",r);break;case"details":Oe("toggle",r);break;case"input":qv(r,i),Oe("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},Oe("invalid",r);break;case"textarea":Gv(r,i),Oe("invalid",r)}rf(n,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var a=i[o];o==="children"?typeof a=="string"?r.textContent!==a&&(i.suppressHydrationWarning!==!0&&$l(r.textContent,a,t),s=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(i.suppressHydrationWarning!==!0&&$l(r.textContent,a,t),s=["children",""+a]):ga.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&Oe("scroll",r)}switch(n){case"input":Dl(r),Kv(r,i,!0);break;case"textarea":Dl(r),Qv(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=Fc)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=w0(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[Pn]=e,t[ba]=r,H_(t,e,!1,!1),e.stateNode=t;e:{switch(o=sf(n,r),n){case"dialog":Oe("cancel",t),Oe("close",t),s=r;break;case"iframe":case"object":case"embed":Oe("load",t),s=r;break;case"video":case"audio":for(s=0;s<Ko.length;s++)Oe(Ko[s],t);s=r;break;case"source":Oe("error",t),s=r;break;case"img":case"image":case"link":Oe("error",t),Oe("load",t),s=r;break;case"details":Oe("toggle",t),s=r;break;case"input":qv(t,r),s=Jh(t,r),Oe("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=Ue({},r,{value:void 0}),Oe("invalid",t);break;case"textarea":Gv(t,r),s=tf(t,r),Oe("invalid",t);break;default:s=r}rf(n,s),a=s;for(i in a)if(a.hasOwnProperty(i)){var u=a[i];i==="style"?T0(t,u):i==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&_0(t,u)):i==="children"?typeof u=="string"?(n!=="textarea"||u!=="")&&va(t,u):typeof u=="number"&&va(t,""+u):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(ga.hasOwnProperty(i)?u!=null&&i==="onScroll"&&Oe("scroll",t):u!=null&&Dp(t,i,u,o))}switch(n){case"input":Dl(t),Kv(t,r,!1);break;case"textarea":Dl(t),Qv(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Ur(r.value));break;case"select":t.multiple=!!r.multiple,i=r.value,i!=null?wi(t,!!r.multiple,i,!1):r.defaultValue!=null&&wi(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=Fc)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return xt(e),null;case 6:if(t&&e.stateNode!=null)q_(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(K(166));if(n=ws(Ia.current),ws(On.current),Bl(e)){if(r=e.stateNode,n=e.memoizedProps,r[Pn]=e,(i=r.nodeValue!==n)&&(t=Jt,t!==null))switch(t.tag){case 3:$l(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&$l(r.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Pn]=e,e.stateNode=r}return xt(e),null;case 13:if(Me(Fe),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Le&&Qt!==null&&e.mode&1&&!(e.flags&128))u_(),Vi(),e.flags|=98560,i=!1;else if(i=Bl(e),r!==null&&r.dehydrated!==null){if(t===null){if(!i)throw Error(K(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(K(317));i[Pn]=e}else Vi(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;xt(e),i=!1}else vn!==null&&(Ff(vn),vn=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Fe.current&1?Ze===0&&(Ze=3):gm())),e.updateQueue!==null&&(e.flags|=4),xt(e),null);case 4:return Li(),Pf(t,e),t===null&&Sa(e.stateNode.containerInfo),xt(e),null;case 10:return Zp(e.type._context),xt(e),null;case 17:return Ft(e.type)&&zc(),xt(e),null;case 19:if(Me(Fe),i=e.memoizedState,i===null)return xt(e),null;if(r=(e.flags&128)!==0,o=i.rendering,o===null)if(r)Fo(i,!1);else{if(Ze!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=Kc(t),o!==null){for(e.flags|=128,Fo(i,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)i=n,t=r,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,t=o.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return ke(Fe,Fe.current&1|2),e.child}t=t.sibling}i.tail!==null&&Ke()>zi&&(e.flags|=128,r=!0,Fo(i,!1),e.lanes=4194304)}else{if(!r)if(t=Kc(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Fo(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!Le)return xt(e),null}else 2*Ke()-i.renderingStartTime>zi&&n!==1073741824&&(e.flags|=128,r=!0,Fo(i,!1),e.lanes=4194304);i.isBackwards?(o.sibling=e.child,e.child=o):(n=i.last,n!==null?n.sibling=o:e.child=o,i.last=o)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=Ke(),e.sibling=null,n=Fe.current,ke(Fe,r?n&1|2:n&1),e):(xt(e),null);case 22:case 23:return mm(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Kt&1073741824&&(xt(e),e.subtreeFlags&6&&(e.flags|=8192)):xt(e),null;case 24:return null;case 25:return null}throw Error(K(156,e.tag))}function rA(t,e){switch(Qp(e),e.tag){case 1:return Ft(e.type)&&zc(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Li(),Me(Lt),Me(St),sm(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return rm(e),null;case 13:if(Me(Fe),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(K(340));Vi()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Me(Fe),null;case 4:return Li(),null;case 10:return Zp(e.type._context),null;case 22:case 23:return mm(),null;case 24:return null;default:return null}}var ql=!1,Et=!1,sA=typeof WeakSet=="function"?WeakSet:Set,ne=null;function yi(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){He(t,e,r)}else n.current=null}function kf(t,e,n){try{n()}catch(r){He(t,e,r)}}var Ly=!1;function iA(t,e){if(mf=Vc,t=X0(),Kp(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var o=0,a=-1,u=-1,d=0,h=0,p=t,g=null;t:for(;;){for(var w;p!==n||s!==0&&p.nodeType!==3||(a=o+s),p!==i||r!==0&&p.nodeType!==3||(u=o+r),p.nodeType===3&&(o+=p.nodeValue.length),(w=p.firstChild)!==null;)g=p,p=w;for(;;){if(p===t)break t;if(g===n&&++d===s&&(a=o),g===i&&++h===r&&(u=o),(w=p.nextSibling)!==null)break;p=g,g=p.parentNode}p=w}n=a===-1||u===-1?null:{start:a,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(gf={focusedElem:t,selectionRange:n},Vc=!1,ne=e;ne!==null;)if(e=ne,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,ne=t;else for(;ne!==null;){e=ne;try{var b=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(b!==null){var x=b.memoizedProps,E=b.memoizedState,_=e.stateNode,y=_.getSnapshotBeforeUpdate(e.elementType===e.type?x:mn(e.type,x),E);_.__reactInternalSnapshotBeforeUpdate=y}break;case 3:var C=e.stateNode.containerInfo;C.nodeType===1?C.textContent="":C.nodeType===9&&C.documentElement&&C.removeChild(C.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(K(163))}}catch(k){He(e,e.return,k)}if(t=e.sibling,t!==null){t.return=e.return,ne=t;break}ne=e.return}return b=Ly,Ly=!1,b}function oa(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,i!==void 0&&kf(e,n,i)}s=s.next}while(s!==r)}}function Du(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function jf(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function K_(t){var e=t.alternate;e!==null&&(t.alternate=null,K_(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Pn],delete e[ba],delete e[xf],delete e[UI],delete e[$I])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function G_(t){return t.tag===5||t.tag===3||t.tag===4}function Fy(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||G_(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Df(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Fc));else if(r!==4&&(t=t.child,t!==null))for(Df(t,e,n),t=t.sibling;t!==null;)Df(t,e,n),t=t.sibling}function Of(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(Of(t,e,n),t=t.sibling;t!==null;)Of(t,e,n),t=t.sibling}var ct=null,gn=!1;function vr(t,e,n){for(n=n.child;n!==null;)Q_(t,e,n),n=n.sibling}function Q_(t,e,n){if(Dn&&typeof Dn.onCommitFiberUnmount=="function")try{Dn.onCommitFiberUnmount(bu,n)}catch{}switch(n.tag){case 5:Et||yi(n,e);case 6:var r=ct,s=gn;ct=null,vr(t,e,n),ct=r,gn=s,ct!==null&&(gn?(t=ct,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):ct.removeChild(n.stateNode));break;case 18:ct!==null&&(gn?(t=ct,n=n.stateNode,t.nodeType===8?ch(t.parentNode,n):t.nodeType===1&&ch(t,n),_a(t)):ch(ct,n.stateNode));break;case 4:r=ct,s=gn,ct=n.stateNode.containerInfo,gn=!0,vr(t,e,n),ct=r,gn=s;break;case 0:case 11:case 14:case 15:if(!Et&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&kf(n,e,o),s=s.next}while(s!==r)}vr(t,e,n);break;case 1:if(!Et&&(yi(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){He(n,e,a)}vr(t,e,n);break;case 21:vr(t,e,n);break;case 22:n.mode&1?(Et=(r=Et)||n.memoizedState!==null,vr(t,e,n),Et=r):vr(t,e,n);break;default:vr(t,e,n)}}function zy(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new sA),e.forEach(function(r){var s=pA.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function fn(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:ct=a.stateNode,gn=!1;break e;case 3:ct=a.stateNode.containerInfo,gn=!0;break e;case 4:ct=a.stateNode.containerInfo,gn=!0;break e}a=a.return}if(ct===null)throw Error(K(160));Q_(i,o,s),ct=null,gn=!1;var u=s.alternate;u!==null&&(u.return=null),s.return=null}catch(d){He(s,e,d)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)Y_(e,t),e=e.sibling}function Y_(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(fn(e,t),Rn(t),r&4){try{oa(3,t,t.return),Du(3,t)}catch(x){He(t,t.return,x)}try{oa(5,t,t.return)}catch(x){He(t,t.return,x)}}break;case 1:fn(e,t),Rn(t),r&512&&n!==null&&yi(n,n.return);break;case 5:if(fn(e,t),Rn(t),r&512&&n!==null&&yi(n,n.return),t.flags&32){var s=t.stateNode;try{va(s,"")}catch(x){He(t,t.return,x)}}if(r&4&&(s=t.stateNode,s!=null)){var i=t.memoizedProps,o=n!==null?n.memoizedProps:i,a=t.type,u=t.updateQueue;if(t.updateQueue=null,u!==null)try{a==="input"&&i.type==="radio"&&i.name!=null&&y0(s,i),sf(a,o);var d=sf(a,i);for(o=0;o<u.length;o+=2){var h=u[o],p=u[o+1];h==="style"?T0(s,p):h==="dangerouslySetInnerHTML"?_0(s,p):h==="children"?va(s,p):Dp(s,h,p,d)}switch(a){case"input":Zh(s,i);break;case"textarea":x0(s,i);break;case"select":var g=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var w=i.value;w!=null?wi(s,!!i.multiple,w,!1):g!==!!i.multiple&&(i.defaultValue!=null?wi(s,!!i.multiple,i.defaultValue,!0):wi(s,!!i.multiple,i.multiple?[]:"",!1))}s[ba]=i}catch(x){He(t,t.return,x)}}break;case 6:if(fn(e,t),Rn(t),r&4){if(t.stateNode===null)throw Error(K(162));s=t.stateNode,i=t.memoizedProps;try{s.nodeValue=i}catch(x){He(t,t.return,x)}}break;case 3:if(fn(e,t),Rn(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{_a(e.containerInfo)}catch(x){He(t,t.return,x)}break;case 4:fn(e,t),Rn(t);break;case 13:fn(e,t),Rn(t),s=t.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(fm=Ke())),r&4&&zy(t);break;case 22:if(h=n!==null&&n.memoizedState!==null,t.mode&1?(Et=(d=Et)||h,fn(e,t),Et=d):fn(e,t),Rn(t),r&8192){if(d=t.memoizedState!==null,(t.stateNode.isHidden=d)&&!h&&t.mode&1)for(ne=t,h=t.child;h!==null;){for(p=ne=h;ne!==null;){switch(g=ne,w=g.child,g.tag){case 0:case 11:case 14:case 15:oa(4,g,g.return);break;case 1:yi(g,g.return);var b=g.stateNode;if(typeof b.componentWillUnmount=="function"){r=g,n=g.return;try{e=r,b.props=e.memoizedProps,b.state=e.memoizedState,b.componentWillUnmount()}catch(x){He(r,n,x)}}break;case 5:yi(g,g.return);break;case 22:if(g.memoizedState!==null){$y(p);continue}}w!==null?(w.return=g,ne=w):$y(p)}h=h.sibling}e:for(h=null,p=t;;){if(p.tag===5){if(h===null){h=p;try{s=p.stateNode,d?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(a=p.stateNode,u=p.memoizedProps.style,o=u!=null&&u.hasOwnProperty("display")?u.display:null,a.style.display=E0("display",o))}catch(x){He(t,t.return,x)}}}else if(p.tag===6){if(h===null)try{p.stateNode.nodeValue=d?"":p.memoizedProps}catch(x){He(t,t.return,x)}}else if((p.tag!==22&&p.tag!==23||p.memoizedState===null||p===t)&&p.child!==null){p.child.return=p,p=p.child;continue}if(p===t)break e;for(;p.sibling===null;){if(p.return===null||p.return===t)break e;h===p&&(h=null),p=p.return}h===p&&(h=null),p.sibling.return=p.return,p=p.sibling}}break;case 19:fn(e,t),Rn(t),r&4&&zy(t);break;case 21:break;default:fn(e,t),Rn(t)}}function Rn(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(G_(n)){var r=n;break e}n=n.return}throw Error(K(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(va(s,""),r.flags&=-33);var i=Fy(t);Of(t,i,s);break;case 3:case 4:var o=r.stateNode.containerInfo,a=Fy(t);Df(t,a,o);break;default:throw Error(K(161))}}catch(u){He(t,t.return,u)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function oA(t,e,n){ne=t,X_(t)}function X_(t,e,n){for(var r=(t.mode&1)!==0;ne!==null;){var s=ne,i=s.child;if(s.tag===22&&r){var o=s.memoizedState!==null||ql;if(!o){var a=s.alternate,u=a!==null&&a.memoizedState!==null||Et;a=ql;var d=Et;if(ql=o,(Et=u)&&!d)for(ne=s;ne!==null;)o=ne,u=o.child,o.tag===22&&o.memoizedState!==null?By(s):u!==null?(u.return=o,ne=u):By(s);for(;i!==null;)ne=i,X_(i),i=i.sibling;ne=s,ql=a,Et=d}Uy(t)}else s.subtreeFlags&8772&&i!==null?(i.return=s,ne=i):Uy(t)}}function Uy(t){for(;ne!==null;){var e=ne;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Et||Du(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Et)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:mn(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&Cy(e,i,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}Cy(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var u=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var d=e.alternate;if(d!==null){var h=d.memoizedState;if(h!==null){var p=h.dehydrated;p!==null&&_a(p)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(K(163))}Et||e.flags&512&&jf(e)}catch(g){He(e,e.return,g)}}if(e===t){ne=null;break}if(n=e.sibling,n!==null){n.return=e.return,ne=n;break}ne=e.return}}function $y(t){for(;ne!==null;){var e=ne;if(e===t){ne=null;break}var n=e.sibling;if(n!==null){n.return=e.return,ne=n;break}ne=e.return}}function By(t){for(;ne!==null;){var e=ne;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Du(4,e)}catch(u){He(e,n,u)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(u){He(e,s,u)}}var i=e.return;try{jf(e)}catch(u){He(e,i,u)}break;case 5:var o=e.return;try{jf(e)}catch(u){He(e,o,u)}}}catch(u){He(e,e.return,u)}if(e===t){ne=null;break}var a=e.sibling;if(a!==null){a.return=e.return,ne=a;break}ne=e.return}}var aA=Math.ceil,Yc=dr.ReactCurrentDispatcher,dm=dr.ReactCurrentOwner,cn=dr.ReactCurrentBatchConfig,Te=0,it=null,Ye=null,ht=0,Kt=0,xi=Zr(0),Ze=0,ka=null,Is=0,Ou=0,hm=0,aa=null,Dt=null,fm=0,zi=1/0,Kn=null,Xc=!1,Vf=null,Dr=null,Kl=!1,Rr=null,Jc=0,la=0,Mf=null,gc=-1,vc=0;function At(){return Te&6?Ke():gc!==-1?gc:gc=Ke()}function Or(t){return t.mode&1?Te&2&&ht!==0?ht&-ht:HI.transition!==null?(vc===0&&(vc=O0()),vc):(t=Ae,t!==0||(t=window.event,t=t===void 0?16:$0(t.type)),t):1}function xn(t,e,n,r){if(50<la)throw la=0,Mf=null,Error(K(185));Xa(t,n,r),(!(Te&2)||t!==it)&&(t===it&&(!(Te&2)&&(Ou|=n),Ze===4&&Cr(t,ht)),zt(t,r),n===1&&Te===0&&!(e.mode&1)&&(zi=Ke()+500,Pu&&es()))}function zt(t,e){var n=t.callbackNode;HR(t,e);var r=Oc(t,t===it?ht:0);if(r===0)n!==null&&Jv(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&Jv(n),e===1)t.tag===0?BI(Hy.bind(null,t)):a_(Hy.bind(null,t)),FI(function(){!(Te&6)&&es()}),n=null;else{switch(V0(r)){case 1:n=Fp;break;case 4:n=j0;break;case 16:n=Dc;break;case 536870912:n=D0;break;default:n=Dc}n=iE(n,J_.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function J_(t,e){if(gc=-1,vc=0,Te&6)throw Error(K(327));var n=t.callbackNode;if(Ci()&&t.callbackNode!==n)return null;var r=Oc(t,t===it?ht:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Zc(t,r);else{e=r;var s=Te;Te|=2;var i=eE();(it!==t||ht!==e)&&(Kn=null,zi=Ke()+500,Es(t,e));do try{uA();break}catch(a){Z_(t,a)}while(!0);Jp(),Yc.current=i,Te=s,Ye!==null?e=0:(it=null,ht=0,e=Ze)}if(e!==0){if(e===2&&(s=uf(t),s!==0&&(r=s,e=Lf(t,s))),e===1)throw n=ka,Es(t,0),Cr(t,r),zt(t,Ke()),n;if(e===6)Cr(t,r);else{if(s=t.current.alternate,!(r&30)&&!lA(s)&&(e=Zc(t,r),e===2&&(i=uf(t),i!==0&&(r=i,e=Lf(t,i))),e===1))throw n=ka,Es(t,0),Cr(t,r),zt(t,Ke()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error(K(345));case 2:gs(t,Dt,Kn);break;case 3:if(Cr(t,r),(r&130023424)===r&&(e=fm+500-Ke(),10<e)){if(Oc(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){At(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=yf(gs.bind(null,t,Dt,Kn),e);break}gs(t,Dt,Kn);break;case 4:if(Cr(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var o=31-yn(r);i=1<<o,o=e[o],o>s&&(s=o),r&=~i}if(r=s,r=Ke()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*aA(r/1960))-r,10<r){t.timeoutHandle=yf(gs.bind(null,t,Dt,Kn),r);break}gs(t,Dt,Kn);break;case 5:gs(t,Dt,Kn);break;default:throw Error(K(329))}}}return zt(t,Ke()),t.callbackNode===n?J_.bind(null,t):null}function Lf(t,e){var n=aa;return t.current.memoizedState.isDehydrated&&(Es(t,e).flags|=256),t=Zc(t,e),t!==2&&(e=Dt,Dt=n,e!==null&&Ff(e)),t}function Ff(t){Dt===null?Dt=t:Dt.push.apply(Dt,t)}function lA(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!_n(i(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Cr(t,e){for(e&=~hm,e&=~Ou,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-yn(e),r=1<<n;t[n]=-1,e&=~r}}function Hy(t){if(Te&6)throw Error(K(327));Ci();var e=Oc(t,0);if(!(e&1))return zt(t,Ke()),null;var n=Zc(t,e);if(t.tag!==0&&n===2){var r=uf(t);r!==0&&(e=r,n=Lf(t,r))}if(n===1)throw n=ka,Es(t,0),Cr(t,e),zt(t,Ke()),n;if(n===6)throw Error(K(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,gs(t,Dt,Kn),zt(t,Ke()),null}function pm(t,e){var n=Te;Te|=1;try{return t(e)}finally{Te=n,Te===0&&(zi=Ke()+500,Pu&&es())}}function As(t){Rr!==null&&Rr.tag===0&&!(Te&6)&&Ci();var e=Te;Te|=1;var n=cn.transition,r=Ae;try{if(cn.transition=null,Ae=1,t)return t()}finally{Ae=r,cn.transition=n,Te=e,!(Te&6)&&es()}}function mm(){Kt=xi.current,Me(xi)}function Es(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,LI(n)),Ye!==null)for(n=Ye.return;n!==null;){var r=n;switch(Qp(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&zc();break;case 3:Li(),Me(Lt),Me(St),sm();break;case 5:rm(r);break;case 4:Li();break;case 13:Me(Fe);break;case 19:Me(Fe);break;case 10:Zp(r.type._context);break;case 22:case 23:mm()}n=n.return}if(it=t,Ye=t=Vr(t.current,null),ht=Kt=e,Ze=0,ka=null,hm=Ou=Is=0,Dt=aa=null,xs!==null){for(e=0;e<xs.length;e++)if(n=xs[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var o=i.next;i.next=s,r.next=o}n.pending=r}xs=null}return t}function Z_(t,e){do{var n=Ye;try{if(Jp(),fc.current=Qc,Gc){for(var r=ze.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}Gc=!1}if(Rs=0,nt=Je=ze=null,ia=!1,Aa=0,dm.current=null,n===null||n.return===null){Ze=1,ka=e,Ye=null;break}e:{var i=t,o=n.return,a=n,u=e;if(e=ht,a.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var d=u,h=a,p=h.tag;if(!(h.mode&1)&&(p===0||p===11||p===15)){var g=h.alternate;g?(h.updateQueue=g.updateQueue,h.memoizedState=g.memoizedState,h.lanes=g.lanes):(h.updateQueue=null,h.memoizedState=null)}var w=Py(o);if(w!==null){w.flags&=-257,ky(w,o,a,i,e),w.mode&1&&Ny(i,d,e),e=w,u=d;var b=e.updateQueue;if(b===null){var x=new Set;x.add(u),e.updateQueue=x}else b.add(u);break e}else{if(!(e&1)){Ny(i,d,e),gm();break e}u=Error(K(426))}}else if(Le&&a.mode&1){var E=Py(o);if(E!==null){!(E.flags&65536)&&(E.flags|=256),ky(E,o,a,i,e),Yp(Fi(u,a));break e}}i=u=Fi(u,a),Ze!==4&&(Ze=2),aa===null?aa=[i]:aa.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var _=V_(i,u,e);Sy(i,_);break e;case 1:a=u;var y=i.type,C=i.stateNode;if(!(i.flags&128)&&(typeof y.getDerivedStateFromError=="function"||C!==null&&typeof C.componentDidCatch=="function"&&(Dr===null||!Dr.has(C)))){i.flags|=65536,e&=-e,i.lanes|=e;var k=M_(i,a,e);Sy(i,k);break e}}i=i.return}while(i!==null)}nE(n)}catch(O){e=O,Ye===n&&n!==null&&(Ye=n=n.return);continue}break}while(!0)}function eE(){var t=Yc.current;return Yc.current=Qc,t===null?Qc:t}function gm(){(Ze===0||Ze===3||Ze===2)&&(Ze=4),it===null||!(Is&268435455)&&!(Ou&268435455)||Cr(it,ht)}function Zc(t,e){var n=Te;Te|=2;var r=eE();(it!==t||ht!==e)&&(Kn=null,Es(t,e));do try{cA();break}catch(s){Z_(t,s)}while(!0);if(Jp(),Te=n,Yc.current=r,Ye!==null)throw Error(K(261));return it=null,ht=0,Ze}function cA(){for(;Ye!==null;)tE(Ye)}function uA(){for(;Ye!==null&&!OR();)tE(Ye)}function tE(t){var e=sE(t.alternate,t,Kt);t.memoizedProps=t.pendingProps,e===null?nE(t):Ye=e,dm.current=null}function nE(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=rA(n,e),n!==null){n.flags&=32767,Ye=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Ze=6,Ye=null;return}}else if(n=nA(n,e,Kt),n!==null){Ye=n;return}if(e=e.sibling,e!==null){Ye=e;return}Ye=e=t}while(e!==null);Ze===0&&(Ze=5)}function gs(t,e,n){var r=Ae,s=cn.transition;try{cn.transition=null,Ae=1,dA(t,e,n,r)}finally{cn.transition=s,Ae=r}return null}function dA(t,e,n,r){do Ci();while(Rr!==null);if(Te&6)throw Error(K(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(K(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if(WR(t,i),t===it&&(Ye=it=null,ht=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Kl||(Kl=!0,iE(Dc,function(){return Ci(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=cn.transition,cn.transition=null;var o=Ae;Ae=1;var a=Te;Te|=4,dm.current=null,iA(t,n),Y_(n,t),PI(gf),Vc=!!mf,gf=mf=null,t.current=n,oA(n),VR(),Te=a,Ae=o,cn.transition=i}else t.current=n;if(Kl&&(Kl=!1,Rr=t,Jc=s),i=t.pendingLanes,i===0&&(Dr=null),FR(n.stateNode),zt(t,Ke()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(Xc)throw Xc=!1,t=Vf,Vf=null,t;return Jc&1&&t.tag!==0&&Ci(),i=t.pendingLanes,i&1?t===Mf?la++:(la=0,Mf=t):la=0,es(),null}function Ci(){if(Rr!==null){var t=V0(Jc),e=cn.transition,n=Ae;try{if(cn.transition=null,Ae=16>t?16:t,Rr===null)var r=!1;else{if(t=Rr,Rr=null,Jc=0,Te&6)throw Error(K(331));var s=Te;for(Te|=4,ne=t.current;ne!==null;){var i=ne,o=i.child;if(ne.flags&16){var a=i.deletions;if(a!==null){for(var u=0;u<a.length;u++){var d=a[u];for(ne=d;ne!==null;){var h=ne;switch(h.tag){case 0:case 11:case 15:oa(8,h,i)}var p=h.child;if(p!==null)p.return=h,ne=p;else for(;ne!==null;){h=ne;var g=h.sibling,w=h.return;if(K_(h),h===d){ne=null;break}if(g!==null){g.return=w,ne=g;break}ne=w}}}var b=i.alternate;if(b!==null){var x=b.child;if(x!==null){b.child=null;do{var E=x.sibling;x.sibling=null,x=E}while(x!==null)}}ne=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,ne=o;else e:for(;ne!==null;){if(i=ne,i.flags&2048)switch(i.tag){case 0:case 11:case 15:oa(9,i,i.return)}var _=i.sibling;if(_!==null){_.return=i.return,ne=_;break e}ne=i.return}}var y=t.current;for(ne=y;ne!==null;){o=ne;var C=o.child;if(o.subtreeFlags&2064&&C!==null)C.return=o,ne=C;else e:for(o=y;ne!==null;){if(a=ne,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:Du(9,a)}}catch(O){He(a,a.return,O)}if(a===o){ne=null;break e}var k=a.sibling;if(k!==null){k.return=a.return,ne=k;break e}ne=a.return}}if(Te=s,es(),Dn&&typeof Dn.onPostCommitFiberRoot=="function")try{Dn.onPostCommitFiberRoot(bu,t)}catch{}r=!0}return r}finally{Ae=n,cn.transition=e}}return!1}function Wy(t,e,n){e=Fi(n,e),e=V_(t,e,1),t=jr(t,e,1),e=At(),t!==null&&(Xa(t,1,e),zt(t,e))}function He(t,e,n){if(t.tag===3)Wy(t,t,n);else for(;e!==null;){if(e.tag===3){Wy(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Dr===null||!Dr.has(r))){t=Fi(n,t),t=M_(e,t,1),e=jr(e,t,1),t=At(),e!==null&&(Xa(e,1,t),zt(e,t));break}}e=e.return}}function hA(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=At(),t.pingedLanes|=t.suspendedLanes&n,it===t&&(ht&n)===n&&(Ze===4||Ze===3&&(ht&130023424)===ht&&500>Ke()-fm?Es(t,0):hm|=n),zt(t,e)}function rE(t,e){e===0&&(t.mode&1?(e=Ml,Ml<<=1,!(Ml&130023424)&&(Ml=4194304)):e=1);var n=At();t=nr(t,e),t!==null&&(Xa(t,e,n),zt(t,n))}function fA(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),rE(t,n)}function pA(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(K(314))}r!==null&&r.delete(e),rE(t,n)}var sE;sE=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Lt.current)Mt=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Mt=!1,tA(t,e,n);Mt=!!(t.flags&131072)}else Mt=!1,Le&&e.flags&1048576&&l_(e,Bc,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;mc(t,e),t=e.pendingProps;var s=Oi(e,St.current);Si(e,n),s=om(null,e,r,t,s,n);var i=am();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Ft(r)?(i=!0,Uc(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,tm(e),s.updater=ju,e.stateNode=s,s._reactInternals=e,Cf(e,r,t,n),e=If(null,e,r,!0,i,n)):(e.tag=0,Le&&i&&Gp(e),Rt(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch(mc(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=gA(r),t=mn(r,t),s){case 0:e=Rf(null,e,r,t,n);break e;case 1:e=Oy(null,e,r,t,n);break e;case 11:e=jy(null,e,r,t,n);break e;case 14:e=Dy(null,e,r,mn(r.type,t),n);break e}throw Error(K(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:mn(r,s),Rf(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:mn(r,s),Oy(t,e,r,s,n);case 3:e:{if(U_(e),t===null)throw Error(K(387));r=e.pendingProps,i=e.memoizedState,s=i.element,p_(t,e),qc(e,r,null,n);var o=e.memoizedState;if(r=o.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=Fi(Error(K(423)),e),e=Vy(t,e,r,n,s);break e}else if(r!==s){s=Fi(Error(K(424)),e),e=Vy(t,e,r,n,s);break e}else for(Qt=kr(e.stateNode.containerInfo.firstChild),Jt=e,Le=!0,vn=null,n=h_(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Vi(),r===s){e=rr(t,e,n);break e}Rt(t,e,r,n)}e=e.child}return e;case 5:return m_(e),t===null&&Ef(e),r=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,o=s.children,vf(r,s)?o=null:i!==null&&vf(r,i)&&(e.flags|=32),z_(t,e),Rt(t,e,o,n),e.child;case 6:return t===null&&Ef(e),null;case 13:return $_(t,e,n);case 4:return nm(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Mi(e,null,r,n):Rt(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:mn(r,s),jy(t,e,r,s,n);case 7:return Rt(t,e,e.pendingProps,n),e.child;case 8:return Rt(t,e,e.pendingProps.children,n),e.child;case 12:return Rt(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,i=e.memoizedProps,o=s.value,ke(Hc,r._currentValue),r._currentValue=o,i!==null)if(_n(i.value,o)){if(i.children===s.children&&!Lt.current){e=rr(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var a=i.dependencies;if(a!==null){o=i.child;for(var u=a.firstContext;u!==null;){if(u.context===r){if(i.tag===1){u=Jn(-1,n&-n),u.tag=2;var d=i.updateQueue;if(d!==null){d=d.shared;var h=d.pending;h===null?u.next=u:(u.next=h.next,h.next=u),d.pending=u}}i.lanes|=n,u=i.alternate,u!==null&&(u.lanes|=n),Tf(i.return,n,e),a.lanes|=n;break}u=u.next}}else if(i.tag===10)o=i.type===e.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(K(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),Tf(o,n,e),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===e){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}Rt(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,Si(e,n),s=un(s),r=r(s),e.flags|=1,Rt(t,e,r,n),e.child;case 14:return r=e.type,s=mn(r,e.pendingProps),s=mn(r.type,s),Dy(t,e,r,s,n);case 15:return L_(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:mn(r,s),mc(t,e),e.tag=1,Ft(r)?(t=!0,Uc(e)):t=!1,Si(e,n),O_(e,r,s),Cf(e,r,s,n),If(null,e,r,!0,t,n);case 19:return B_(t,e,n);case 22:return F_(t,e,n)}throw Error(K(156,e.tag))};function iE(t,e){return k0(t,e)}function mA(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ln(t,e,n,r){return new mA(t,e,n,r)}function vm(t){return t=t.prototype,!(!t||!t.isReactComponent)}function gA(t){if(typeof t=="function")return vm(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Vp)return 11;if(t===Mp)return 14}return 2}function Vr(t,e){var n=t.alternate;return n===null?(n=ln(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function yc(t,e,n,r,s,i){var o=2;if(r=t,typeof t=="function")vm(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case ci:return Ts(n.children,s,i,e);case Op:o=8,s|=8;break;case Gh:return t=ln(12,n,e,s|2),t.elementType=Gh,t.lanes=i,t;case Qh:return t=ln(13,n,e,s),t.elementType=Qh,t.lanes=i,t;case Yh:return t=ln(19,n,e,s),t.elementType=Yh,t.lanes=i,t;case m0:return Vu(n,s,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case f0:o=10;break e;case p0:o=9;break e;case Vp:o=11;break e;case Mp:o=14;break e;case Er:o=16,r=null;break e}throw Error(K(130,t==null?t:typeof t,""))}return e=ln(o,n,e,s),e.elementType=t,e.type=r,e.lanes=i,e}function Ts(t,e,n,r){return t=ln(7,t,r,e),t.lanes=n,t}function Vu(t,e,n,r){return t=ln(22,t,r,e),t.elementType=m0,t.lanes=n,t.stateNode={isHidden:!1},t}function vh(t,e,n){return t=ln(6,t,null,e),t.lanes=n,t}function yh(t,e,n){return e=ln(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function vA(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Jd(0),this.expirationTimes=Jd(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Jd(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function ym(t,e,n,r,s,i,o,a,u){return t=new vA(t,e,n,a,u),e===1?(e=1,i===!0&&(e|=8)):e=0,i=ln(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},tm(i),t}function yA(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:li,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function oE(t){if(!t)return $r;t=t._reactInternals;e:{if($s(t)!==t||t.tag!==1)throw Error(K(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Ft(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(K(171))}if(t.tag===1){var n=t.type;if(Ft(n))return o_(t,n,e)}return e}function aE(t,e,n,r,s,i,o,a,u){return t=ym(n,r,!0,t,s,i,o,a,u),t.context=oE(null),n=t.current,r=At(),s=Or(n),i=Jn(r,s),i.callback=e??null,jr(n,i,s),t.current.lanes=s,Xa(t,s,r),zt(t,r),t}function Mu(t,e,n,r){var s=e.current,i=At(),o=Or(s);return n=oE(n),e.context===null?e.context=n:e.pendingContext=n,e=Jn(i,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=jr(s,e,o),t!==null&&(xn(t,s,o,i),hc(t,s,o)),o}function eu(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function qy(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function xm(t,e){qy(t,e),(t=t.alternate)&&qy(t,e)}function xA(){return null}var lE=typeof reportError=="function"?reportError:function(t){console.error(t)};function wm(t){this._internalRoot=t}Lu.prototype.render=wm.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(K(409));Mu(t,e,null,null)};Lu.prototype.unmount=wm.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;As(function(){Mu(null,t,null,null)}),e[tr]=null}};function Lu(t){this._internalRoot=t}Lu.prototype.unstable_scheduleHydration=function(t){if(t){var e=F0();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Sr.length&&e!==0&&e<Sr[n].priority;n++);Sr.splice(n,0,t),n===0&&U0(t)}};function _m(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Fu(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Ky(){}function wA(t,e,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var d=eu(o);i.call(d)}}var o=aE(e,r,t,0,null,!1,!1,"",Ky);return t._reactRootContainer=o,t[tr]=o.current,Sa(t.nodeType===8?t.parentNode:t),As(),o}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var a=r;r=function(){var d=eu(u);a.call(d)}}var u=ym(t,0,!1,null,null,!1,!1,"",Ky);return t._reactRootContainer=u,t[tr]=u.current,Sa(t.nodeType===8?t.parentNode:t),As(function(){Mu(e,u,n,r)}),u}function zu(t,e,n,r,s){var i=n._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var a=s;s=function(){var u=eu(o);a.call(u)}}Mu(e,o,t,s)}else o=wA(n,e,t,s,r);return eu(o)}M0=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=qo(e.pendingLanes);n!==0&&(zp(e,n|1),zt(e,Ke()),!(Te&6)&&(zi=Ke()+500,es()))}break;case 13:As(function(){var r=nr(t,1);if(r!==null){var s=At();xn(r,t,1,s)}}),xm(t,1)}};Up=function(t){if(t.tag===13){var e=nr(t,134217728);if(e!==null){var n=At();xn(e,t,134217728,n)}xm(t,134217728)}};L0=function(t){if(t.tag===13){var e=Or(t),n=nr(t,e);if(n!==null){var r=At();xn(n,t,e,r)}xm(t,e)}};F0=function(){return Ae};z0=function(t,e){var n=Ae;try{return Ae=t,e()}finally{Ae=n}};af=function(t,e,n){switch(e){case"input":if(Zh(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=Nu(r);if(!s)throw Error(K(90));v0(r),Zh(r,s)}}}break;case"textarea":x0(t,n);break;case"select":e=n.value,e!=null&&wi(t,!!n.multiple,e,!1)}};b0=pm;R0=As;var _A={usingClientEntryPoint:!1,Events:[Za,fi,Nu,S0,C0,pm]},zo={findFiberByHostInstance:ys,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},EA={bundleType:zo.bundleType,version:zo.version,rendererPackageName:zo.rendererPackageName,rendererConfig:zo.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:dr.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=N0(t),t===null?null:t.stateNode},findFiberByHostInstance:zo.findFiberByHostInstance||xA,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Gl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Gl.isDisabled&&Gl.supportsFiber)try{bu=Gl.inject(EA),Dn=Gl}catch{}}tn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=_A;tn.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!_m(e))throw Error(K(200));return yA(t,e,null,n)};tn.createRoot=function(t,e){if(!_m(t))throw Error(K(299));var n=!1,r="",s=lE;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=ym(t,1,!1,null,null,n,!1,r,s),t[tr]=e.current,Sa(t.nodeType===8?t.parentNode:t),new wm(e)};tn.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(K(188)):(t=Object.keys(t).join(","),Error(K(268,t)));return t=N0(e),t=t===null?null:t.stateNode,t};tn.flushSync=function(t){return As(t)};tn.hydrate=function(t,e,n){if(!Fu(e))throw Error(K(200));return zu(null,t,e,!0,n)};tn.hydrateRoot=function(t,e,n){if(!_m(t))throw Error(K(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",o=lE;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=aE(e,null,t,1,n??null,s,!1,i,o),t[tr]=e.current,Sa(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new Lu(e)};tn.render=function(t,e,n){if(!Fu(e))throw Error(K(200));return zu(null,t,e,!1,n)};tn.unmountComponentAtNode=function(t){if(!Fu(t))throw Error(K(40));return t._reactRootContainer?(As(function(){zu(null,null,t,!1,function(){t._reactRootContainer=null,t[tr]=null})}),!0):!1};tn.unstable_batchedUpdates=pm;tn.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Fu(n))throw Error(K(200));if(t==null||t._reactInternals===void 0)throw Error(K(38));return zu(t,e,n,!1,r)};tn.version="18.3.1-next-f1338f8080-20240426";function cE(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(cE)}catch(t){console.error(t)}}cE(),c0.exports=tn;var Bs=c0.exports;const TA=Xw(Bs);var uE,Gy=Bs;uE=Gy.createRoot,Gy.hydrateRoot;function SA(t,e){if(t instanceof RegExp)return{keys:!1,pattern:t};var n,r,s,i,o=[],a="",u=t.split("/");for(u[0]||u.shift();s=u.shift();)n=s[0],n==="*"?(o.push(n),a+=s[1]==="?"?"(?:/(.*))?":"/(.*)"):n===":"?(r=s.indexOf("?",1),i=s.indexOf(".",1),o.push(s.substring(1,~r?r:~i?i:s.length)),a+=~r&&!~i?"(?:/([^/]+?))?":"/([^/]+?)",~i&&(a+=(~r?"?":"")+"\\"+s.substring(i))):a+="/"+s;return{keys:o,pattern:new RegExp("^"+a+(e?"(?=$|/)":"/?$"),"i")}}var dE={exports:{}},hE={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ui=m;function CA(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var bA=typeof Object.is=="function"?Object.is:CA,RA=Ui.useState,IA=Ui.useEffect,AA=Ui.useLayoutEffect,NA=Ui.useDebugValue;function PA(t,e){var n=e(),r=RA({inst:{value:n,getSnapshot:e}}),s=r[0].inst,i=r[1];return AA(function(){s.value=n,s.getSnapshot=e,xh(s)&&i({inst:s})},[t,n,e]),IA(function(){return xh(s)&&i({inst:s}),t(function(){xh(s)&&i({inst:s})})},[t]),NA(n),n}function xh(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!bA(t,n)}catch{return!0}}function kA(t,e){return e()}var jA=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?kA:PA;hE.useSyncExternalStore=Ui.useSyncExternalStore!==void 0?Ui.useSyncExternalStore:jA;dE.exports=hE;var DA=dE.exports;const OA=Pp.useInsertionEffect,VA=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",MA=VA?m.useLayoutEffect:m.useEffect,LA=OA||MA,fE=t=>{const e=m.useRef([t,(...n)=>e[0](...n)]).current;return LA(()=>{e[0]=t}),e[1]},FA="popstate",Em="pushState",Tm="replaceState",zA="hashchange",Qy=[FA,Em,Tm,zA],UA=t=>{for(const e of Qy)addEventListener(e,t);return()=>{for(const e of Qy)removeEventListener(e,t)}},pE=(t,e)=>DA.useSyncExternalStore(UA,t,e),$A=()=>location.search,BA=({ssrSearch:t=""}={})=>pE($A,()=>t),Yy=()=>location.pathname,HA=({ssrPath:t}={})=>pE(Yy,t?()=>t:Yy),WA=(t,{replace:e=!1,state:n=null}={})=>history[e?Tm:Em](n,"",t),qA=(t={})=>[HA(t),WA],Xy=Symbol.for("wouter_v3");if(typeof history<"u"&&typeof window[Xy]>"u"){for(const t of[Em,Tm]){const e=history[t];history[t]=function(){const n=e.apply(this,arguments),r=new Event(t);return r.arguments=arguments,dispatchEvent(r),n}}Object.defineProperty(window,Xy,{value:!0})}const KA=(t,e)=>e.toLowerCase().indexOf(t.toLowerCase())?"~"+e:e.slice(t.length)||"/",mE=(t="")=>t==="/"?"":t,GA=(t,e)=>t[0]==="~"?t.slice(1):mE(e)+t,QA=(t="",e)=>KA(Jy(mE(t)),Jy(e)),Jy=t=>{try{return decodeURI(t)}catch{return t}},gE={hook:qA,searchHook:BA,parser:SA,base:"",ssrPath:void 0,ssrSearch:void 0,ssrContext:void 0,hrefs:t=>t},vE=m.createContext(gE),Uu=()=>m.useContext(vE),yE={},xE=m.createContext(yE),YA=()=>m.useContext(xE),Sm=t=>{const[e,n]=t.hook(t);return[QA(t.base,e),fE((r,s)=>n(GA(r,t.base),s))]},wE=(t,e,n,r)=>{const{pattern:s,keys:i}=e instanceof RegExp?{keys:!1,pattern:e}:t(e||"*",r),o=s.exec(n)||[],[a,...u]=o;return a!==void 0?[!0,(()=>{const d=i!==!1?Object.fromEntries(i.map((p,g)=>[p,u[g]])):o.groups;let h={...u};return d&&Object.assign(h,d),h})(),...r?[a]:[]]:[!1,null]},_E=({children:t,...e})=>{var h,p;const n=Uu(),r=e.hook?gE:n;let s=r;const[i,o]=((h=e.ssrPath)==null?void 0:h.split("?"))??[];o&&(e.ssrSearch=o,e.ssrPath=i),e.hrefs=e.hrefs??((p=e.hook)==null?void 0:p.hrefs);let a=m.useRef({}),u=a.current,d=u;for(let g in r){const w=g==="base"?r[g]+(e[g]||""):e[g]||r[g];u===d&&w!==d[g]&&(a.current=d={...d}),d[g]=w,(w!==r[g]||w!==s[g])&&(s=d)}return m.createElement(vE.Provider,{value:s,children:t})},Zy=({children:t,component:e},n)=>e?m.createElement(e,{params:n}):typeof t=="function"?t(n):t,XA=t=>{let e=m.useRef(yE);const n=e.current;return e.current=Object.keys(t).length!==Object.keys(n).length||Object.entries(t).some(([r,s])=>s!==n[r])?t:n},Js=({path:t,nest:e,match:n,...r})=>{const s=Uu(),[i]=Sm(s),[o,a,u]=n??wE(s.parser,t,i,e),d=XA({...YA(),...a});if(!o)return null;const h=u?m.createElement(_E,{base:u},Zy(r,d)):Zy(r,d);return m.createElement(xE.Provider,{value:d,children:h})},ca=m.forwardRef((t,e)=>{const n=Uu(),[r,s]=Sm(n),{to:i="",href:o=i,onClick:a,asChild:u,children:d,className:h,replace:p,state:g,...w}=t,b=fE(E=>{E.ctrlKey||E.metaKey||E.altKey||E.shiftKey||E.button!==0||(a==null||a(E),E.defaultPrevented||(E.preventDefault(),s(o,t)))}),x=n.hrefs(o[0]==="~"?o.slice(1):n.base+o,n);return u&&m.isValidElement(d)?m.cloneElement(d,{onClick:b,href:x}):m.createElement("a",{...w,onClick:b,href:x,className:h!=null&&h.call?h(r===o):h,children:d,ref:e})}),EE=t=>Array.isArray(t)?t.flatMap(e=>EE(e&&e.type===m.Fragment?e.props.children:e)):[t],JA=({children:t,location:e})=>{const n=Uu(),[r]=Sm(n);for(const s of EE(t)){let i=0;if(m.isValidElement(s)&&(i=wE(n.parser,s.props.path,e||r,s.props.nest))[0])return m.cloneElement(s,{match:i})}return null},ZA=1,eN=1e6;let wh=0;function tN(){return wh=(wh+1)%Number.MAX_SAFE_INTEGER,wh.toString()}const _h=new Map,ex=t=>{if(_h.has(t))return;const e=setTimeout(()=>{_h.delete(t),ua({type:"REMOVE_TOAST",toastId:t})},eN);_h.set(t,e)},nN=(t,e)=>{switch(e.type){case"ADD_TOAST":return{...t,toasts:[e.toast,...t.toasts].slice(0,ZA)};case"UPDATE_TOAST":return{...t,toasts:t.toasts.map(n=>n.id===e.toast.id?{...n,...e.toast}:n)};case"DISMISS_TOAST":{const{toastId:n}=e;return n?ex(n):t.toasts.forEach(r=>{ex(r.id)}),{...t,toasts:t.toasts.map(r=>r.id===n||n===void 0?{...r,open:!1}:r)}}case"REMOVE_TOAST":return e.toastId===void 0?{...t,toasts:[]}:{...t,toasts:t.toasts.filter(n=>n.id!==e.toastId)}}},xc=[];let wc={toasts:[]};function ua(t){wc=nN(wc,t),xc.forEach(e=>{e(wc)})}function rN({...t}){const e=tN(),n=s=>ua({type:"UPDATE_TOAST",toast:{...s,id:e}}),r=()=>ua({type:"DISMISS_TOAST",toastId:e});return ua({type:"ADD_TOAST",toast:{...t,id:e,open:!0,onOpenChange:s=>{s||r()}}}),{id:e,dismiss:r,update:n}}function $u(){const[t,e]=m.useState(wc);return m.useEffect(()=>(xc.push(e),()=>{const n=xc.indexOf(e);n>-1&&xc.splice(n,1)}),[t]),{...t,toast:rN,dismiss:n=>ua({type:"DISMISS_TOAST",toastId:n})}}function le(t,e,{checkForDefaultPrevented:n=!0}={}){return function(s){if(t==null||t(s),n===!1||!s.defaultPrevented)return e==null?void 0:e(s)}}function tx(t,e){if(typeof t=="function")return t(e);t!=null&&(t.current=e)}function Ns(...t){return e=>{let n=!1;const r=t.map(s=>{const i=tx(s,e);return!n&&typeof i=="function"&&(n=!0),i});if(n)return()=>{for(let s=0;s<r.length;s++){const i=r[s];typeof i=="function"?i():tx(t[s],null)}}}}function Ne(...t){return m.useCallback(Ns(...t),t)}function sN(t,e){const n=m.createContext(e),r=i=>{const{children:o,...a}=i,u=m.useMemo(()=>a,Object.values(a));return c.jsx(n.Provider,{value:u,children:o})};r.displayName=t+"Provider";function s(i){const o=m.useContext(n);if(o)return o;if(e!==void 0)return e;throw new Error(`\`${i}\` must be used within \`${t}\``)}return[r,s]}function ts(t,e=[]){let n=[];function r(i,o){const a=m.createContext(o),u=n.length;n=[...n,o];const d=p=>{var _;const{scope:g,children:w,...b}=p,x=((_=g==null?void 0:g[t])==null?void 0:_[u])||a,E=m.useMemo(()=>b,Object.values(b));return c.jsx(x.Provider,{value:E,children:w})};d.displayName=i+"Provider";function h(p,g){var x;const w=((x=g==null?void 0:g[t])==null?void 0:x[u])||a,b=m.useContext(w);if(b)return b;if(o!==void 0)return o;throw new Error(`\`${p}\` must be used within \`${i}\``)}return[d,h]}const s=()=>{const i=n.map(o=>m.createContext(o));return function(a){const u=(a==null?void 0:a[t])||i;return m.useMemo(()=>({[`__scope${t}`]:{...a,[t]:u}}),[a,u])}};return s.scopeName=t,[r,iN(s,...e)]}function iN(...t){const e=t[0];if(t.length===1)return e;const n=()=>{const r=t.map(s=>({useScope:s(),scopeName:s.scopeName}));return function(i){const o=r.reduce((a,{useScope:u,scopeName:d})=>{const p=u(i)[`__scope${d}`];return{...a,...p}},{});return m.useMemo(()=>({[`__scope${e.scopeName}`]:o}),[o])}};return n.scopeName=e.scopeName,n}function Ps(t){const e=aN(t),n=m.forwardRef((r,s)=>{const{children:i,...o}=r,a=m.Children.toArray(i),u=a.find(cN);if(u){const d=u.props.children,h=a.map(p=>p===u?m.Children.count(d)>1?m.Children.only(null):m.isValidElement(d)?d.props.children:null:p);return c.jsx(e,{...o,ref:s,children:m.isValidElement(d)?m.cloneElement(d,void 0,h):null})}return c.jsx(e,{...o,ref:s,children:i})});return n.displayName=`${t}.Slot`,n}var oN=Ps("Slot");function aN(t){const e=m.forwardRef((n,r)=>{const{children:s,...i}=n;if(m.isValidElement(s)){const o=dN(s),a=uN(i,s.props);return s.type!==m.Fragment&&(a.ref=r?Ns(r,o):o),m.cloneElement(s,a)}return m.Children.count(s)>1?m.Children.only(null):null});return e.displayName=`${t}.SlotClone`,e}var TE=Symbol("radix.slottable");function lN(t){const e=({children:n})=>c.jsx(c.Fragment,{children:n});return e.displayName=`${t}.Slottable`,e.__radixId=TE,e}function cN(t){return m.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===TE}function uN(t,e){const n={...e};for(const r in e){const s=t[r],i=e[r];/^on[A-Z]/.test(r)?s&&i?n[r]=(...a)=>{const u=i(...a);return s(...a),u}:s&&(n[r]=s):r==="style"?n[r]={...s,...i}:r==="className"&&(n[r]=[s,i].filter(Boolean).join(" "))}return{...t,...n}}function dN(t){var r,s;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(s=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:s.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}function SE(t){const e=t+"CollectionProvider",[n,r]=ts(e),[s,i]=n(e,{collectionRef:{current:null},itemMap:new Map}),o=x=>{const{scope:E,children:_}=x,y=wr.useRef(null),C=wr.useRef(new Map).current;return c.jsx(s,{scope:E,itemMap:C,collectionRef:y,children:_})};o.displayName=e;const a=t+"CollectionSlot",u=Ps(a),d=wr.forwardRef((x,E)=>{const{scope:_,children:y}=x,C=i(a,_),k=Ne(E,C.collectionRef);return c.jsx(u,{ref:k,children:y})});d.displayName=a;const h=t+"CollectionItemSlot",p="data-radix-collection-item",g=Ps(h),w=wr.forwardRef((x,E)=>{const{scope:_,children:y,...C}=x,k=wr.useRef(null),O=Ne(E,k),D=i(h,_);return wr.useEffect(()=>(D.itemMap.set(k,{ref:k,...C}),()=>void D.itemMap.delete(k))),c.jsx(g,{[p]:"",ref:O,children:y})});w.displayName=h;function b(x){const E=i(t+"CollectionConsumer",x);return wr.useCallback(()=>{const y=E.collectionRef.current;if(!y)return[];const C=Array.from(y.querySelectorAll(`[${p}]`));return Array.from(E.itemMap.values()).sort((D,S)=>C.indexOf(D.ref.current)-C.indexOf(S.ref.current))},[E.collectionRef,E.itemMap])}return[{Provider:o,Slot:d,ItemSlot:w},b,r]}var hN=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],ce=hN.reduce((t,e)=>{const n=Ps(`Primitive.${e}`),r=m.forwardRef((s,i)=>{const{asChild:o,...a}=s,u=o?n:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),c.jsx(u,{...a,ref:i})});return r.displayName=`Primitive.${e}`,{...t,[e]:r}},{});function CE(t,e){t&&Bs.flushSync(()=>t.dispatchEvent(e))}function En(t){const e=m.useRef(t);return m.useEffect(()=>{e.current=t}),m.useMemo(()=>(...n)=>{var r;return(r=e.current)==null?void 0:r.call(e,...n)},[])}function fN(t,e=globalThis==null?void 0:globalThis.document){const n=En(t);m.useEffect(()=>{const r=s=>{s.key==="Escape"&&n(s)};return e.addEventListener("keydown",r,{capture:!0}),()=>e.removeEventListener("keydown",r,{capture:!0})},[n,e])}var pN="DismissableLayer",zf="dismissableLayer.update",mN="dismissableLayer.pointerDownOutside",gN="dismissableLayer.focusOutside",nx,bE=m.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),io=m.forwardRef((t,e)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:r,onPointerDownOutside:s,onFocusOutside:i,onInteractOutside:o,onDismiss:a,...u}=t,d=m.useContext(bE),[h,p]=m.useState(null),g=(h==null?void 0:h.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,w]=m.useState({}),b=Ne(e,S=>p(S)),x=Array.from(d.layers),[E]=[...d.layersWithOutsidePointerEventsDisabled].slice(-1),_=x.indexOf(E),y=h?x.indexOf(h):-1,C=d.layersWithOutsidePointerEventsDisabled.size>0,k=y>=_,O=yN(S=>{const T=S.target,I=[...d.branches].some(A=>A.contains(T));!k||I||(s==null||s(S),o==null||o(S),S.defaultPrevented||a==null||a())},g),D=xN(S=>{const T=S.target;[...d.branches].some(A=>A.contains(T))||(i==null||i(S),o==null||o(S),S.defaultPrevented||a==null||a())},g);return fN(S=>{y===d.layers.size-1&&(r==null||r(S),!S.defaultPrevented&&a&&(S.preventDefault(),a()))},g),m.useEffect(()=>{if(h)return n&&(d.layersWithOutsidePointerEventsDisabled.size===0&&(nx=g.body.style.pointerEvents,g.body.style.pointerEvents="none"),d.layersWithOutsidePointerEventsDisabled.add(h)),d.layers.add(h),rx(),()=>{n&&d.layersWithOutsidePointerEventsDisabled.size===1&&(g.body.style.pointerEvents=nx)}},[h,g,n,d]),m.useEffect(()=>()=>{h&&(d.layers.delete(h),d.layersWithOutsidePointerEventsDisabled.delete(h),rx())},[h,d]),m.useEffect(()=>{const S=()=>w({});return document.addEventListener(zf,S),()=>document.removeEventListener(zf,S)},[]),c.jsx(ce.div,{...u,ref:b,style:{pointerEvents:C?k?"auto":"none":void 0,...t.style},onFocusCapture:le(t.onFocusCapture,D.onFocusCapture),onBlurCapture:le(t.onBlurCapture,D.onBlurCapture),onPointerDownCapture:le(t.onPointerDownCapture,O.onPointerDownCapture)})});io.displayName=pN;var vN="DismissableLayerBranch",RE=m.forwardRef((t,e)=>{const n=m.useContext(bE),r=m.useRef(null),s=Ne(e,r);return m.useEffect(()=>{const i=r.current;if(i)return n.branches.add(i),()=>{n.branches.delete(i)}},[n.branches]),c.jsx(ce.div,{...t,ref:s})});RE.displayName=vN;function yN(t,e=globalThis==null?void 0:globalThis.document){const n=En(t),r=m.useRef(!1),s=m.useRef(()=>{});return m.useEffect(()=>{const i=a=>{if(a.target&&!r.current){let u=function(){IE(mN,n,d,{discrete:!0})};const d={originalEvent:a};a.pointerType==="touch"?(e.removeEventListener("click",s.current),s.current=u,e.addEventListener("click",s.current,{once:!0})):u()}else e.removeEventListener("click",s.current);r.current=!1},o=window.setTimeout(()=>{e.addEventListener("pointerdown",i)},0);return()=>{window.clearTimeout(o),e.removeEventListener("pointerdown",i),e.removeEventListener("click",s.current)}},[e,n]),{onPointerDownCapture:()=>r.current=!0}}function xN(t,e=globalThis==null?void 0:globalThis.document){const n=En(t),r=m.useRef(!1);return m.useEffect(()=>{const s=i=>{i.target&&!r.current&&IE(gN,n,{originalEvent:i},{discrete:!1})};return e.addEventListener("focusin",s),()=>e.removeEventListener("focusin",s)},[e,n]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function rx(){const t=new CustomEvent(zf);document.dispatchEvent(t)}function IE(t,e,n,{discrete:r}){const s=n.originalEvent.target,i=new CustomEvent(t,{bubbles:!1,cancelable:!0,detail:n});e&&s.addEventListener(t,e,{once:!0}),r?CE(s,i):s.dispatchEvent(i)}var wN=io,_N=RE,ot=globalThis!=null&&globalThis.document?m.useLayoutEffect:()=>{},EN="Portal",tl=m.forwardRef((t,e)=>{var a;const{container:n,...r}=t,[s,i]=m.useState(!1);ot(()=>i(!0),[]);const o=n||s&&((a=globalThis==null?void 0:globalThis.document)==null?void 0:a.body);return o?TA.createPortal(c.jsx(ce.div,{...r,ref:e}),o):null});tl.displayName=EN;function TN(t,e){return m.useReducer((n,r)=>e[n][r]??n,t)}var hr=t=>{const{present:e,children:n}=t,r=SN(e),s=typeof n=="function"?n({present:r.isPresent}):m.Children.only(n),i=Ne(r.ref,CN(s));return typeof n=="function"||r.isPresent?m.cloneElement(s,{ref:i}):null};hr.displayName="Presence";function SN(t){const[e,n]=m.useState(),r=m.useRef(null),s=m.useRef(t),i=m.useRef("none"),o=t?"mounted":"unmounted",[a,u]=TN(o,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return m.useEffect(()=>{const d=Ql(r.current);i.current=a==="mounted"?d:"none"},[a]),ot(()=>{const d=r.current,h=s.current;if(h!==t){const g=i.current,w=Ql(d);t?u("MOUNT"):w==="none"||(d==null?void 0:d.display)==="none"?u("UNMOUNT"):u(h&&g!==w?"ANIMATION_OUT":"UNMOUNT"),s.current=t}},[t,u]),ot(()=>{if(e){let d;const h=e.ownerDocument.defaultView??window,p=w=>{const x=Ql(r.current).includes(w.animationName);if(w.target===e&&x&&(u("ANIMATION_END"),!s.current)){const E=e.style.animationFillMode;e.style.animationFillMode="forwards",d=h.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=E)})}},g=w=>{w.target===e&&(i.current=Ql(r.current))};return e.addEventListener("animationstart",g),e.addEventListener("animationcancel",p),e.addEventListener("animationend",p),()=>{h.clearTimeout(d),e.removeEventListener("animationstart",g),e.removeEventListener("animationcancel",p),e.removeEventListener("animationend",p)}}else u("ANIMATION_END")},[e,u]),{isPresent:["mounted","unmountSuspended"].includes(a),ref:m.useCallback(d=>{r.current=d?getComputedStyle(d):null,n(d)},[])}}function Ql(t){return(t==null?void 0:t.animationName)||"none"}function CN(t){var r,s;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(s=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:s.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}var bN=Pp[" useInsertionEffect ".trim().toString()]||ot;function $i({prop:t,defaultProp:e,onChange:n=()=>{},caller:r}){const[s,i,o]=RN({defaultProp:e,onChange:n}),a=t!==void 0,u=a?t:s;{const h=m.useRef(t!==void 0);m.useEffect(()=>{const p=h.current;p!==a&&console.warn(`${r} is changing from ${p?"controlled":"uncontrolled"} to ${a?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),h.current=a},[a,r])}const d=m.useCallback(h=>{var p;if(a){const g=IN(h)?h(t):h;g!==t&&((p=o.current)==null||p.call(o,g))}else i(h)},[a,t,i,o]);return[u,d]}function RN({defaultProp:t,onChange:e}){const[n,r]=m.useState(t),s=m.useRef(n),i=m.useRef(e);return bN(()=>{i.current=e},[e]),m.useEffect(()=>{var o;s.current!==n&&((o=i.current)==null||o.call(i,n),s.current=n)},[n,s]),[n,r,i]}function IN(t){return typeof t=="function"}var AE=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),AN="VisuallyHidden",Bu=m.forwardRef((t,e)=>c.jsx(ce.span,{...t,ref:e,style:{...AE,...t.style}}));Bu.displayName=AN;var NN=Bu,Cm="ToastProvider",[bm,PN,kN]=SE("Toast"),[NE,V3]=ts("Toast",[kN]),[jN,Hu]=NE(Cm),PE=t=>{const{__scopeToast:e,label:n="Notification",duration:r=5e3,swipeDirection:s="right",swipeThreshold:i=50,children:o}=t,[a,u]=m.useState(null),[d,h]=m.useState(0),p=m.useRef(!1),g=m.useRef(!1);return n.trim()||console.error(`Invalid prop \`label\` supplied to \`${Cm}\`. Expected non-empty \`string\`.`),c.jsx(bm.Provider,{scope:e,children:c.jsx(jN,{scope:e,label:n,duration:r,swipeDirection:s,swipeThreshold:i,toastCount:d,viewport:a,onViewportChange:u,onToastAdd:m.useCallback(()=>h(w=>w+1),[]),onToastRemove:m.useCallback(()=>h(w=>w-1),[]),isFocusedToastEscapeKeyDownRef:p,isClosePausedRef:g,children:o})})};PE.displayName=Cm;var kE="ToastViewport",DN=["F8"],Uf="toast.viewportPause",$f="toast.viewportResume",jE=m.forwardRef((t,e)=>{const{__scopeToast:n,hotkey:r=DN,label:s="Notifications ({hotkey})",...i}=t,o=Hu(kE,n),a=PN(n),u=m.useRef(null),d=m.useRef(null),h=m.useRef(null),p=m.useRef(null),g=Ne(e,p,o.onViewportChange),w=r.join("+").replace(/Key/g,"").replace(/Digit/g,""),b=o.toastCount>0;m.useEffect(()=>{const E=_=>{var C;r.length!==0&&r.every(k=>_[k]||_.code===k)&&((C=p.current)==null||C.focus())};return document.addEventListener("keydown",E),()=>document.removeEventListener("keydown",E)},[r]),m.useEffect(()=>{const E=u.current,_=p.current;if(b&&E&&_){const y=()=>{if(!o.isClosePausedRef.current){const D=new CustomEvent(Uf);_.dispatchEvent(D),o.isClosePausedRef.current=!0}},C=()=>{if(o.isClosePausedRef.current){const D=new CustomEvent($f);_.dispatchEvent(D),o.isClosePausedRef.current=!1}},k=D=>{!E.contains(D.relatedTarget)&&C()},O=()=>{E.contains(document.activeElement)||C()};return E.addEventListener("focusin",y),E.addEventListener("focusout",k),E.addEventListener("pointermove",y),E.addEventListener("pointerleave",O),window.addEventListener("blur",y),window.addEventListener("focus",C),()=>{E.removeEventListener("focusin",y),E.removeEventListener("focusout",k),E.removeEventListener("pointermove",y),E.removeEventListener("pointerleave",O),window.removeEventListener("blur",y),window.removeEventListener("focus",C)}}},[b,o.isClosePausedRef]);const x=m.useCallback(({tabbingDirection:E})=>{const y=a().map(C=>{const k=C.ref.current,O=[k,...KN(k)];return E==="forwards"?O:O.reverse()});return(E==="forwards"?y.reverse():y).flat()},[a]);return m.useEffect(()=>{const E=p.current;if(E){const _=y=>{var O,D,S;const C=y.altKey||y.ctrlKey||y.metaKey;if(y.key==="Tab"&&!C){const T=document.activeElement,I=y.shiftKey;if(y.target===E&&I){(O=d.current)==null||O.focus();return}const j=x({tabbingDirection:I?"backwards":"forwards"}),N=j.findIndex(L=>L===T);Eh(j.slice(N+1))?y.preventDefault():I?(D=d.current)==null||D.focus():(S=h.current)==null||S.focus()}};return E.addEventListener("keydown",_),()=>E.removeEventListener("keydown",_)}},[a,x]),c.jsxs(_N,{ref:u,role:"region","aria-label":s.replace("{hotkey}",w),tabIndex:-1,style:{pointerEvents:b?void 0:"none"},children:[b&&c.jsx(Bf,{ref:d,onFocusFromOutsideViewport:()=>{const E=x({tabbingDirection:"forwards"});Eh(E)}}),c.jsx(bm.Slot,{scope:n,children:c.jsx(ce.ol,{tabIndex:-1,...i,ref:g})}),b&&c.jsx(Bf,{ref:h,onFocusFromOutsideViewport:()=>{const E=x({tabbingDirection:"backwards"});Eh(E)}})]})});jE.displayName=kE;var DE="ToastFocusProxy",Bf=m.forwardRef((t,e)=>{const{__scopeToast:n,onFocusFromOutsideViewport:r,...s}=t,i=Hu(DE,n);return c.jsx(Bu,{"aria-hidden":!0,tabIndex:0,...s,ref:e,style:{position:"fixed"},onFocus:o=>{var d;const a=o.relatedTarget;!((d=i.viewport)!=null&&d.contains(a))&&r()}})});Bf.displayName=DE;var nl="Toast",ON="toast.swipeStart",VN="toast.swipeMove",MN="toast.swipeCancel",LN="toast.swipeEnd",OE=m.forwardRef((t,e)=>{const{forceMount:n,open:r,defaultOpen:s,onOpenChange:i,...o}=t,[a,u]=$i({prop:r,defaultProp:s??!0,onChange:i,caller:nl});return c.jsx(hr,{present:n||a,children:c.jsx(UN,{open:a,...o,ref:e,onClose:()=>u(!1),onPause:En(t.onPause),onResume:En(t.onResume),onSwipeStart:le(t.onSwipeStart,d=>{d.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:le(t.onSwipeMove,d=>{const{x:h,y:p}=d.detail.delta;d.currentTarget.setAttribute("data-swipe","move"),d.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${h}px`),d.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${p}px`)}),onSwipeCancel:le(t.onSwipeCancel,d=>{d.currentTarget.setAttribute("data-swipe","cancel"),d.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),d.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),d.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),d.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:le(t.onSwipeEnd,d=>{const{x:h,y:p}=d.detail.delta;d.currentTarget.setAttribute("data-swipe","end"),d.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),d.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),d.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${h}px`),d.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${p}px`),u(!1)})})})});OE.displayName=nl;var[FN,zN]=NE(nl,{onClose(){}}),UN=m.forwardRef((t,e)=>{const{__scopeToast:n,type:r="foreground",duration:s,open:i,onClose:o,onEscapeKeyDown:a,onPause:u,onResume:d,onSwipeStart:h,onSwipeMove:p,onSwipeCancel:g,onSwipeEnd:w,...b}=t,x=Hu(nl,n),[E,_]=m.useState(null),y=Ne(e,L=>_(L)),C=m.useRef(null),k=m.useRef(null),O=s||x.duration,D=m.useRef(0),S=m.useRef(O),T=m.useRef(0),{onToastAdd:I,onToastRemove:A}=x,P=En(()=>{var G;(E==null?void 0:E.contains(document.activeElement))&&((G=x.viewport)==null||G.focus()),o()}),j=m.useCallback(L=>{!L||L===1/0||(window.clearTimeout(T.current),D.current=new Date().getTime(),T.current=window.setTimeout(P,L))},[P]);m.useEffect(()=>{const L=x.viewport;if(L){const G=()=>{j(S.current),d==null||d()},Q=()=>{const z=new Date().getTime()-D.current;S.current=S.current-z,window.clearTimeout(T.current),u==null||u()};return L.addEventListener(Uf,Q),L.addEventListener($f,G),()=>{L.removeEventListener(Uf,Q),L.removeEventListener($f,G)}}},[x.viewport,O,u,d,j]),m.useEffect(()=>{i&&!x.isClosePausedRef.current&&j(O)},[i,O,x.isClosePausedRef,j]),m.useEffect(()=>(I(),()=>A()),[I,A]);const N=m.useMemo(()=>E?$E(E):null,[E]);return x.viewport?c.jsxs(c.Fragment,{children:[N&&c.jsx($N,{__scopeToast:n,role:"status","aria-live":r==="foreground"?"assertive":"polite","aria-atomic":!0,children:N}),c.jsx(FN,{scope:n,onClose:P,children:Bs.createPortal(c.jsx(bm.ItemSlot,{scope:n,children:c.jsx(wN,{asChild:!0,onEscapeKeyDown:le(a,()=>{x.isFocusedToastEscapeKeyDownRef.current||P(),x.isFocusedToastEscapeKeyDownRef.current=!1}),children:c.jsx(ce.li,{role:"status","aria-live":"off","aria-atomic":!0,tabIndex:0,"data-state":i?"open":"closed","data-swipe-direction":x.swipeDirection,...b,ref:y,style:{userSelect:"none",touchAction:"none",...t.style},onKeyDown:le(t.onKeyDown,L=>{L.key==="Escape"&&(a==null||a(L.nativeEvent),L.nativeEvent.defaultPrevented||(x.isFocusedToastEscapeKeyDownRef.current=!0,P()))}),onPointerDown:le(t.onPointerDown,L=>{L.button===0&&(C.current={x:L.clientX,y:L.clientY})}),onPointerMove:le(t.onPointerMove,L=>{if(!C.current)return;const G=L.clientX-C.current.x,Q=L.clientY-C.current.y,z=!!k.current,V=["left","right"].includes(x.swipeDirection),$=["left","up"].includes(x.swipeDirection)?Math.min:Math.max,Z=V?$(0,G):0,se=V?0:$(0,Q),U=L.pointerType==="touch"?10:2,J={x:Z,y:se},H={originalEvent:L,delta:J};z?(k.current=J,Yl(VN,p,H,{discrete:!1})):sx(J,x.swipeDirection,U)?(k.current=J,Yl(ON,h,H,{discrete:!1}),L.target.setPointerCapture(L.pointerId)):(Math.abs(G)>U||Math.abs(Q)>U)&&(C.current=null)}),onPointerUp:le(t.onPointerUp,L=>{const G=k.current,Q=L.target;if(Q.hasPointerCapture(L.pointerId)&&Q.releasePointerCapture(L.pointerId),k.current=null,C.current=null,G){const z=L.currentTarget,V={originalEvent:L,delta:G};sx(G,x.swipeDirection,x.swipeThreshold)?Yl(LN,w,V,{discrete:!0}):Yl(MN,g,V,{discrete:!0}),z.addEventListener("click",$=>$.preventDefault(),{once:!0})}})})})}),x.viewport)})]}):null}),$N=t=>{const{__scopeToast:e,children:n,...r}=t,s=Hu(nl,e),[i,o]=m.useState(!1),[a,u]=m.useState(!1);return WN(()=>o(!0)),m.useEffect(()=>{const d=window.setTimeout(()=>u(!0),1e3);return()=>window.clearTimeout(d)},[]),a?null:c.jsx(tl,{asChild:!0,children:c.jsx(Bu,{...r,children:i&&c.jsxs(c.Fragment,{children:[s.label," ",n]})})})},BN="ToastTitle",VE=m.forwardRef((t,e)=>{const{__scopeToast:n,...r}=t;return c.jsx(ce.div,{...r,ref:e})});VE.displayName=BN;var HN="ToastDescription",ME=m.forwardRef((t,e)=>{const{__scopeToast:n,...r}=t;return c.jsx(ce.div,{...r,ref:e})});ME.displayName=HN;var LE="ToastAction",FE=m.forwardRef((t,e)=>{const{altText:n,...r}=t;return n.trim()?c.jsx(UE,{altText:n,asChild:!0,children:c.jsx(Rm,{...r,ref:e})}):(console.error(`Invalid prop \`altText\` supplied to \`${LE}\`. Expected non-empty \`string\`.`),null)});FE.displayName=LE;var zE="ToastClose",Rm=m.forwardRef((t,e)=>{const{__scopeToast:n,...r}=t,s=zN(zE,n);return c.jsx(UE,{asChild:!0,children:c.jsx(ce.button,{type:"button",...r,ref:e,onClick:le(t.onClick,s.onClose)})})});Rm.displayName=zE;var UE=m.forwardRef((t,e)=>{const{__scopeToast:n,altText:r,...s}=t;return c.jsx(ce.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":r||void 0,...s,ref:e})});function $E(t){const e=[];return Array.from(t.childNodes).forEach(r=>{if(r.nodeType===r.TEXT_NODE&&r.textContent&&e.push(r.textContent),qN(r)){const s=r.ariaHidden||r.hidden||r.style.display==="none",i=r.dataset.radixToastAnnounceExclude==="";if(!s)if(i){const o=r.dataset.radixToastAnnounceAlt;o&&e.push(o)}else e.push(...$E(r))}}),e}function Yl(t,e,n,{discrete:r}){const s=n.originalEvent.currentTarget,i=new CustomEvent(t,{bubbles:!0,cancelable:!0,detail:n});e&&s.addEventListener(t,e,{once:!0}),r?CE(s,i):s.dispatchEvent(i)}var sx=(t,e,n=0)=>{const r=Math.abs(t.x),s=Math.abs(t.y),i=r>s;return e==="left"||e==="right"?i&&r>n:!i&&s>n};function WN(t=()=>{}){const e=En(t);ot(()=>{let n=0,r=0;return n=window.requestAnimationFrame(()=>r=window.requestAnimationFrame(e)),()=>{window.cancelAnimationFrame(n),window.cancelAnimationFrame(r)}},[e])}function qN(t){return t.nodeType===t.ELEMENT_NODE}function KN(t){const e=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const s=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||s?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)e.push(n.currentNode);return e}function Eh(t){const e=document.activeElement;return t.some(n=>n===e?!0:(n.focus(),document.activeElement!==e))}var GN=PE,BE=jE,HE=OE,WE=VE,qE=ME,KE=FE,GE=Rm;function QE(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var s=t.length;for(e=0;e<s;e++)t[e]&&(n=QE(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function YE(){for(var t,e,n=0,r="",s=arguments.length;n<s;n++)(t=arguments[n])&&(e=QE(t))&&(r&&(r+=" "),r+=e);return r}const ix=t=>typeof t=="boolean"?`${t}`:t===0?"0":t,ox=YE,oo=(t,e)=>n=>{var r;if((e==null?void 0:e.variants)==null)return ox(t,n==null?void 0:n.class,n==null?void 0:n.className);const{variants:s,defaultVariants:i}=e,o=Object.keys(s).map(d=>{const h=n==null?void 0:n[d],p=i==null?void 0:i[d];if(h===null)return null;const g=ix(h)||ix(p);return s[d][g]}),a=n&&Object.entries(n).reduce((d,h)=>{let[p,g]=h;return g===void 0||(d[p]=g),d},{}),u=e==null||(r=e.compoundVariants)===null||r===void 0?void 0:r.reduce((d,h)=>{let{class:p,className:g,...w}=h;return Object.entries(w).every(b=>{let[x,E]=b;return Array.isArray(E)?E.includes({...i,...a}[x]):{...i,...a}[x]===E})?[...d,p,g]:d},[]);return ox(t,o,u,n==null?void 0:n.class,n==null?void 0:n.className)};/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QN=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),XE=(...t)=>t.filter((e,n,r)=>!!e&&r.indexOf(e)===n).join(" ");/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var YN={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XN=m.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:s="",children:i,iconNode:o,...a},u)=>m.createElement("svg",{ref:u,...YN,width:e,height:e,stroke:t,strokeWidth:r?Number(n)*24/Number(e):n,className:XE("lucide",s),...a},[...o.map(([d,h])=>m.createElement(d,h)),...Array.isArray(i)?i:[i]]));/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Re=(t,e)=>{const n=m.forwardRef(({className:r,...s},i)=>m.createElement(XN,{ref:i,iconNode:e,className:XE(`lucide-${QN(t)}`,r),...s}));return n.displayName=`${t}`,n};/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ax=Re("Award",[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const An=Re("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ja=Re("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Im=Re("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JN=Re("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZN=Re("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eP=Re("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tP=Re("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nP=Re("CirclePlus",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rl=Re("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rP=Re("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hf=Re("Euro",[["path",{d:"M4 10h12",key:"1y6xl8"}],["path",{d:"M4 14h9",key:"1loblj"}],["path",{d:"M19 6a7.7 7.7 0 0 0-5.2-2A7.9 7.9 0 0 0 6 12c0 4.4 3.5 8 7.8 8 2 0 3.8-.8 5.2-2",key:"1j6lzo"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lx=Re("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sP=Re("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iP=Re("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oP=Re("Grid3x3",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bi=Re("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aP=Re("House",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bi=Re("MapPin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lP=Re("Map",[["path",{d:"M14.106 5.553a2 2 0 0 0 1.788 0l3.659-1.83A1 1 0 0 1 21 4.619v12.764a1 1 0 0 1-.553.894l-4.553 2.277a2 2 0 0 1-1.788 0l-4.212-2.106a2 2 0 0 0-1.788 0l-3.659 1.83A1 1 0 0 1 3 19.381V6.618a1 1 0 0 1 .553-.894l4.553-2.277a2 2 0 0 1 1.788 0z",key:"169xi5"}],["path",{d:"M15 5.764v15",key:"1pn4in"}],["path",{d:"M9 3.236v15",key:"1uimfh"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cP=Re("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uP=Re("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ss=Re("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _c=Re("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dP=Re("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const an=Re("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hP=Re("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Am=Re("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tu=Re("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fP=Re("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cx=Re("Utensils",[["path",{d:"M3 2v7c0 1.1.9 2 2 2h4a2 2 0 0 0 2-2V2",key:"cjf0a3"}],["path",{d:"M7 2v20",key:"1473qp"}],["path",{d:"M21 15V2a5 5 0 0 0-5 5v6c0 1.1.9 2 2 2h3Zm0 0v7",key:"j28e5"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sl=Re("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),Nm="-",pP=t=>{const e=gP(t),{conflictingClassGroups:n,conflictingClassGroupModifiers:r}=t;return{getClassGroupId:o=>{const a=o.split(Nm);return a[0]===""&&a.length!==1&&a.shift(),JE(a,e)||mP(o)},getConflictingClassGroupIds:(o,a)=>{const u=n[o]||[];return a&&r[o]?[...u,...r[o]]:u}}},JE=(t,e)=>{var o;if(t.length===0)return e.classGroupId;const n=t[0],r=e.nextPart.get(n),s=r?JE(t.slice(1),r):void 0;if(s)return s;if(e.validators.length===0)return;const i=t.join(Nm);return(o=e.validators.find(({validator:a})=>a(i)))==null?void 0:o.classGroupId},ux=/^\[(.+)\]$/,mP=t=>{if(ux.test(t)){const e=ux.exec(t)[1],n=e==null?void 0:e.substring(0,e.indexOf(":"));if(n)return"arbitrary.."+n}},gP=t=>{const{theme:e,prefix:n}=t,r={nextPart:new Map,validators:[]};return yP(Object.entries(t.classGroups),n).forEach(([i,o])=>{Wf(o,r,i,e)}),r},Wf=(t,e,n,r)=>{t.forEach(s=>{if(typeof s=="string"){const i=s===""?e:dx(e,s);i.classGroupId=n;return}if(typeof s=="function"){if(vP(s)){Wf(s(r),e,n,r);return}e.validators.push({validator:s,classGroupId:n});return}Object.entries(s).forEach(([i,o])=>{Wf(o,dx(e,i),n,r)})})},dx=(t,e)=>{let n=t;return e.split(Nm).forEach(r=>{n.nextPart.has(r)||n.nextPart.set(r,{nextPart:new Map,validators:[]}),n=n.nextPart.get(r)}),n},vP=t=>t.isThemeGetter,yP=(t,e)=>e?t.map(([n,r])=>{const s=r.map(i=>typeof i=="string"?e+i:typeof i=="object"?Object.fromEntries(Object.entries(i).map(([o,a])=>[e+o,a])):i);return[n,s]}):t,xP=t=>{if(t<1)return{get:()=>{},set:()=>{}};let e=0,n=new Map,r=new Map;const s=(i,o)=>{n.set(i,o),e++,e>t&&(e=0,r=n,n=new Map)};return{get(i){let o=n.get(i);if(o!==void 0)return o;if((o=r.get(i))!==void 0)return s(i,o),o},set(i,o){n.has(i)?n.set(i,o):s(i,o)}}},ZE="!",wP=t=>{const{separator:e,experimentalParseClassName:n}=t,r=e.length===1,s=e[0],i=e.length,o=a=>{const u=[];let d=0,h=0,p;for(let E=0;E<a.length;E++){let _=a[E];if(d===0){if(_===s&&(r||a.slice(E,E+i)===e)){u.push(a.slice(h,E)),h=E+i;continue}if(_==="/"){p=E;continue}}_==="["?d++:_==="]"&&d--}const g=u.length===0?a:a.substring(h),w=g.startsWith(ZE),b=w?g.substring(1):g,x=p&&p>h?p-h:void 0;return{modifiers:u,hasImportantModifier:w,baseClassName:b,maybePostfixModifierPosition:x}};return n?a=>n({className:a,parseClassName:o}):o},_P=t=>{if(t.length<=1)return t;const e=[];let n=[];return t.forEach(r=>{r[0]==="["?(e.push(...n.sort(),r),n=[]):n.push(r)}),e.push(...n.sort()),e},EP=t=>({cache:xP(t.cacheSize),parseClassName:wP(t),...pP(t)}),TP=/\s+/,SP=(t,e)=>{const{parseClassName:n,getClassGroupId:r,getConflictingClassGroupIds:s}=e,i=[],o=t.trim().split(TP);let a="";for(let u=o.length-1;u>=0;u-=1){const d=o[u],{modifiers:h,hasImportantModifier:p,baseClassName:g,maybePostfixModifierPosition:w}=n(d);let b=!!w,x=r(b?g.substring(0,w):g);if(!x){if(!b){a=d+(a.length>0?" "+a:a);continue}if(x=r(g),!x){a=d+(a.length>0?" "+a:a);continue}b=!1}const E=_P(h).join(":"),_=p?E+ZE:E,y=_+x;if(i.includes(y))continue;i.push(y);const C=s(x,b);for(let k=0;k<C.length;++k){const O=C[k];i.push(_+O)}a=d+(a.length>0?" "+a:a)}return a};function CP(){let t=0,e,n,r="";for(;t<arguments.length;)(e=arguments[t++])&&(n=e1(e))&&(r&&(r+=" "),r+=n);return r}const e1=t=>{if(typeof t=="string")return t;let e,n="";for(let r=0;r<t.length;r++)t[r]&&(e=e1(t[r]))&&(n&&(n+=" "),n+=e);return n};function bP(t,...e){let n,r,s,i=o;function o(u){const d=e.reduce((h,p)=>p(h),t());return n=EP(d),r=n.cache.get,s=n.cache.set,i=a,a(u)}function a(u){const d=r(u);if(d)return d;const h=SP(u,n);return s(u,h),h}return function(){return i(CP.apply(null,arguments))}}const De=t=>{const e=n=>n[t]||[];return e.isThemeGetter=!0,e},t1=/^\[(?:([a-z-]+):)?(.+)\]$/i,RP=/^\d+\/\d+$/,IP=new Set(["px","full","screen"]),AP=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,NP=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,PP=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,kP=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,jP=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Wn=t=>Ri(t)||IP.has(t)||RP.test(t),yr=t=>ao(t,"length",UP),Ri=t=>!!t&&!Number.isNaN(Number(t)),Th=t=>ao(t,"number",Ri),Uo=t=>!!t&&Number.isInteger(Number(t)),DP=t=>t.endsWith("%")&&Ri(t.slice(0,-1)),pe=t=>t1.test(t),xr=t=>AP.test(t),OP=new Set(["length","size","percentage"]),VP=t=>ao(t,OP,n1),MP=t=>ao(t,"position",n1),LP=new Set(["image","url"]),FP=t=>ao(t,LP,BP),zP=t=>ao(t,"",$P),$o=()=>!0,ao=(t,e,n)=>{const r=t1.exec(t);return r?r[1]?typeof e=="string"?r[1]===e:e.has(r[1]):n(r[2]):!1},UP=t=>NP.test(t)&&!PP.test(t),n1=()=>!1,$P=t=>kP.test(t),BP=t=>jP.test(t),HP=()=>{const t=De("colors"),e=De("spacing"),n=De("blur"),r=De("brightness"),s=De("borderColor"),i=De("borderRadius"),o=De("borderSpacing"),a=De("borderWidth"),u=De("contrast"),d=De("grayscale"),h=De("hueRotate"),p=De("invert"),g=De("gap"),w=De("gradientColorStops"),b=De("gradientColorStopPositions"),x=De("inset"),E=De("margin"),_=De("opacity"),y=De("padding"),C=De("saturate"),k=De("scale"),O=De("sepia"),D=De("skew"),S=De("space"),T=De("translate"),I=()=>["auto","contain","none"],A=()=>["auto","hidden","clip","visible","scroll"],P=()=>["auto",pe,e],j=()=>[pe,e],N=()=>["",Wn,yr],L=()=>["auto",Ri,pe],G=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],Q=()=>["solid","dashed","dotted","double","none"],z=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],V=()=>["start","end","center","between","around","evenly","stretch"],$=()=>["","0",pe],Z=()=>["auto","avoid","all","avoid-page","page","left","right","column"],se=()=>[Ri,pe];return{cacheSize:500,separator:":",theme:{colors:[$o],spacing:[Wn,yr],blur:["none","",xr,pe],brightness:se(),borderColor:[t],borderRadius:["none","","full",xr,pe],borderSpacing:j(),borderWidth:N(),contrast:se(),grayscale:$(),hueRotate:se(),invert:$(),gap:j(),gradientColorStops:[t],gradientColorStopPositions:[DP,yr],inset:P(),margin:P(),opacity:se(),padding:j(),saturate:se(),scale:se(),sepia:$(),skew:se(),space:j(),translate:j()},classGroups:{aspect:[{aspect:["auto","square","video",pe]}],container:["container"],columns:[{columns:[xr]}],"break-after":[{"break-after":Z()}],"break-before":[{"break-before":Z()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...G(),pe]}],overflow:[{overflow:A()}],"overflow-x":[{"overflow-x":A()}],"overflow-y":[{"overflow-y":A()}],overscroll:[{overscroll:I()}],"overscroll-x":[{"overscroll-x":I()}],"overscroll-y":[{"overscroll-y":I()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[x]}],"inset-x":[{"inset-x":[x]}],"inset-y":[{"inset-y":[x]}],start:[{start:[x]}],end:[{end:[x]}],top:[{top:[x]}],right:[{right:[x]}],bottom:[{bottom:[x]}],left:[{left:[x]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",Uo,pe]}],basis:[{basis:P()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",pe]}],grow:[{grow:$()}],shrink:[{shrink:$()}],order:[{order:["first","last","none",Uo,pe]}],"grid-cols":[{"grid-cols":[$o]}],"col-start-end":[{col:["auto",{span:["full",Uo,pe]},pe]}],"col-start":[{"col-start":L()}],"col-end":[{"col-end":L()}],"grid-rows":[{"grid-rows":[$o]}],"row-start-end":[{row:["auto",{span:[Uo,pe]},pe]}],"row-start":[{"row-start":L()}],"row-end":[{"row-end":L()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",pe]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",pe]}],gap:[{gap:[g]}],"gap-x":[{"gap-x":[g]}],"gap-y":[{"gap-y":[g]}],"justify-content":[{justify:["normal",...V()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...V(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...V(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[y]}],px:[{px:[y]}],py:[{py:[y]}],ps:[{ps:[y]}],pe:[{pe:[y]}],pt:[{pt:[y]}],pr:[{pr:[y]}],pb:[{pb:[y]}],pl:[{pl:[y]}],m:[{m:[E]}],mx:[{mx:[E]}],my:[{my:[E]}],ms:[{ms:[E]}],me:[{me:[E]}],mt:[{mt:[E]}],mr:[{mr:[E]}],mb:[{mb:[E]}],ml:[{ml:[E]}],"space-x":[{"space-x":[S]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[S]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",pe,e]}],"min-w":[{"min-w":[pe,e,"min","max","fit"]}],"max-w":[{"max-w":[pe,e,"none","full","min","max","fit","prose",{screen:[xr]},xr]}],h:[{h:[pe,e,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[pe,e,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[pe,e,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[pe,e,"auto","min","max","fit"]}],"font-size":[{text:["base",xr,yr]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",Th]}],"font-family":[{font:[$o]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",pe]}],"line-clamp":[{"line-clamp":["none",Ri,Th]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",Wn,pe]}],"list-image":[{"list-image":["none",pe]}],"list-style-type":[{list:["none","disc","decimal",pe]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[t]}],"placeholder-opacity":[{"placeholder-opacity":[_]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[t]}],"text-opacity":[{"text-opacity":[_]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...Q(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",Wn,yr]}],"underline-offset":[{"underline-offset":["auto",Wn,pe]}],"text-decoration-color":[{decoration:[t]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:j()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",pe]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",pe]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[_]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...G(),MP]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",VP]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},FP]}],"bg-color":[{bg:[t]}],"gradient-from-pos":[{from:[b]}],"gradient-via-pos":[{via:[b]}],"gradient-to-pos":[{to:[b]}],"gradient-from":[{from:[w]}],"gradient-via":[{via:[w]}],"gradient-to":[{to:[w]}],rounded:[{rounded:[i]}],"rounded-s":[{"rounded-s":[i]}],"rounded-e":[{"rounded-e":[i]}],"rounded-t":[{"rounded-t":[i]}],"rounded-r":[{"rounded-r":[i]}],"rounded-b":[{"rounded-b":[i]}],"rounded-l":[{"rounded-l":[i]}],"rounded-ss":[{"rounded-ss":[i]}],"rounded-se":[{"rounded-se":[i]}],"rounded-ee":[{"rounded-ee":[i]}],"rounded-es":[{"rounded-es":[i]}],"rounded-tl":[{"rounded-tl":[i]}],"rounded-tr":[{"rounded-tr":[i]}],"rounded-br":[{"rounded-br":[i]}],"rounded-bl":[{"rounded-bl":[i]}],"border-w":[{border:[a]}],"border-w-x":[{"border-x":[a]}],"border-w-y":[{"border-y":[a]}],"border-w-s":[{"border-s":[a]}],"border-w-e":[{"border-e":[a]}],"border-w-t":[{"border-t":[a]}],"border-w-r":[{"border-r":[a]}],"border-w-b":[{"border-b":[a]}],"border-w-l":[{"border-l":[a]}],"border-opacity":[{"border-opacity":[_]}],"border-style":[{border:[...Q(),"hidden"]}],"divide-x":[{"divide-x":[a]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[a]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[_]}],"divide-style":[{divide:Q()}],"border-color":[{border:[s]}],"border-color-x":[{"border-x":[s]}],"border-color-y":[{"border-y":[s]}],"border-color-s":[{"border-s":[s]}],"border-color-e":[{"border-e":[s]}],"border-color-t":[{"border-t":[s]}],"border-color-r":[{"border-r":[s]}],"border-color-b":[{"border-b":[s]}],"border-color-l":[{"border-l":[s]}],"divide-color":[{divide:[s]}],"outline-style":[{outline:["",...Q()]}],"outline-offset":[{"outline-offset":[Wn,pe]}],"outline-w":[{outline:[Wn,yr]}],"outline-color":[{outline:[t]}],"ring-w":[{ring:N()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[t]}],"ring-opacity":[{"ring-opacity":[_]}],"ring-offset-w":[{"ring-offset":[Wn,yr]}],"ring-offset-color":[{"ring-offset":[t]}],shadow:[{shadow:["","inner","none",xr,zP]}],"shadow-color":[{shadow:[$o]}],opacity:[{opacity:[_]}],"mix-blend":[{"mix-blend":[...z(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":z()}],filter:[{filter:["","none"]}],blur:[{blur:[n]}],brightness:[{brightness:[r]}],contrast:[{contrast:[u]}],"drop-shadow":[{"drop-shadow":["","none",xr,pe]}],grayscale:[{grayscale:[d]}],"hue-rotate":[{"hue-rotate":[h]}],invert:[{invert:[p]}],saturate:[{saturate:[C]}],sepia:[{sepia:[O]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[n]}],"backdrop-brightness":[{"backdrop-brightness":[r]}],"backdrop-contrast":[{"backdrop-contrast":[u]}],"backdrop-grayscale":[{"backdrop-grayscale":[d]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[h]}],"backdrop-invert":[{"backdrop-invert":[p]}],"backdrop-opacity":[{"backdrop-opacity":[_]}],"backdrop-saturate":[{"backdrop-saturate":[C]}],"backdrop-sepia":[{"backdrop-sepia":[O]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[o]}],"border-spacing-x":[{"border-spacing-x":[o]}],"border-spacing-y":[{"border-spacing-y":[o]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",pe]}],duration:[{duration:se()}],ease:[{ease:["linear","in","out","in-out",pe]}],delay:[{delay:se()}],animate:[{animate:["none","spin","ping","pulse","bounce",pe]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[k]}],"scale-x":[{"scale-x":[k]}],"scale-y":[{"scale-y":[k]}],rotate:[{rotate:[Uo,pe]}],"translate-x":[{"translate-x":[T]}],"translate-y":[{"translate-y":[T]}],"skew-x":[{"skew-x":[D]}],"skew-y":[{"skew-y":[D]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",pe]}],accent:[{accent:["auto",t]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",pe]}],"caret-color":[{caret:[t]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":j()}],"scroll-mx":[{"scroll-mx":j()}],"scroll-my":[{"scroll-my":j()}],"scroll-ms":[{"scroll-ms":j()}],"scroll-me":[{"scroll-me":j()}],"scroll-mt":[{"scroll-mt":j()}],"scroll-mr":[{"scroll-mr":j()}],"scroll-mb":[{"scroll-mb":j()}],"scroll-ml":[{"scroll-ml":j()}],"scroll-p":[{"scroll-p":j()}],"scroll-px":[{"scroll-px":j()}],"scroll-py":[{"scroll-py":j()}],"scroll-ps":[{"scroll-ps":j()}],"scroll-pe":[{"scroll-pe":j()}],"scroll-pt":[{"scroll-pt":j()}],"scroll-pr":[{"scroll-pr":j()}],"scroll-pb":[{"scroll-pb":j()}],"scroll-pl":[{"scroll-pl":j()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",pe]}],fill:[{fill:[t,"none"]}],"stroke-w":[{stroke:[Wn,yr,Th]}],stroke:[{stroke:[t,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},WP=bP(HP);function ae(...t){return WP(YE(t))}const qP=GN,r1=m.forwardRef(({className:t,...e},n)=>c.jsx(BE,{ref:n,className:ae("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",t),...e}));r1.displayName=BE.displayName;const KP=oo("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),s1=m.forwardRef(({className:t,variant:e,...n},r)=>c.jsx(HE,{ref:r,className:ae(KP({variant:e}),t),...n}));s1.displayName=HE.displayName;const GP=m.forwardRef(({className:t,...e},n)=>c.jsx(KE,{ref:n,className:ae("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",t),...e}));GP.displayName=KE.displayName;const i1=m.forwardRef(({className:t,...e},n)=>c.jsx(GE,{ref:n,className:ae("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",t),"toast-close":"",...e,children:c.jsx(sl,{className:"h-4 w-4"})}));i1.displayName=GE.displayName;const o1=m.forwardRef(({className:t,...e},n)=>c.jsx(WE,{ref:n,className:ae("text-sm font-semibold",t),...e}));o1.displayName=WE.displayName;const a1=m.forwardRef(({className:t,...e},n)=>c.jsx(qE,{ref:n,className:ae("text-sm opacity-90",t),...e}));a1.displayName=qE.displayName;function QP(){const{toasts:t}=$u();return c.jsxs(qP,{children:[t.map(function({id:e,title:n,description:r,action:s,...i}){return c.jsxs(s1,{...i,children:[c.jsxs("div",{className:"grid gap-1",children:[n&&c.jsx(o1,{children:n}),r&&c.jsx(a1,{children:r})]}),s,c.jsx(i1,{})]},e)}),c.jsx(r1,{})]})}var YP=Pp[" useId ".trim().toString()]||(()=>{}),XP=0;function Ut(t){const[e,n]=m.useState(YP());return ot(()=>{n(r=>r??String(XP++))},[t]),e?`radix-${e}`:""}const JP=["top","right","bottom","left"],Br=Math.min,Gt=Math.max,nu=Math.round,Xl=Math.floor,Vn=t=>({x:t,y:t}),ZP={left:"right",right:"left",bottom:"top",top:"bottom"},ek={start:"end",end:"start"};function qf(t,e,n){return Gt(t,Br(e,n))}function sr(t,e){return typeof t=="function"?t(e):t}function ir(t){return t.split("-")[0]}function lo(t){return t.split("-")[1]}function Pm(t){return t==="x"?"y":"x"}function km(t){return t==="y"?"height":"width"}function jn(t){return["top","bottom"].includes(ir(t))?"y":"x"}function jm(t){return Pm(jn(t))}function tk(t,e,n){n===void 0&&(n=!1);const r=lo(t),s=jm(t),i=km(s);let o=s==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return e.reference[i]>e.floating[i]&&(o=ru(o)),[o,ru(o)]}function nk(t){const e=ru(t);return[Kf(t),e,Kf(e)]}function Kf(t){return t.replace(/start|end/g,e=>ek[e])}function rk(t,e,n){const r=["left","right"],s=["right","left"],i=["top","bottom"],o=["bottom","top"];switch(t){case"top":case"bottom":return n?e?s:r:e?r:s;case"left":case"right":return e?i:o;default:return[]}}function sk(t,e,n,r){const s=lo(t);let i=rk(ir(t),n==="start",r);return s&&(i=i.map(o=>o+"-"+s),e&&(i=i.concat(i.map(Kf)))),i}function ru(t){return t.replace(/left|right|bottom|top/g,e=>ZP[e])}function ik(t){return{top:0,right:0,bottom:0,left:0,...t}}function l1(t){return typeof t!="number"?ik(t):{top:t,right:t,bottom:t,left:t}}function su(t){const{x:e,y:n,width:r,height:s}=t;return{width:r,height:s,top:n,left:e,right:e+r,bottom:n+s,x:e,y:n}}function hx(t,e,n){let{reference:r,floating:s}=t;const i=jn(e),o=jm(e),a=km(o),u=ir(e),d=i==="y",h=r.x+r.width/2-s.width/2,p=r.y+r.height/2-s.height/2,g=r[a]/2-s[a]/2;let w;switch(u){case"top":w={x:h,y:r.y-s.height};break;case"bottom":w={x:h,y:r.y+r.height};break;case"right":w={x:r.x+r.width,y:p};break;case"left":w={x:r.x-s.width,y:p};break;default:w={x:r.x,y:r.y}}switch(lo(e)){case"start":w[o]-=g*(n&&d?-1:1);break;case"end":w[o]+=g*(n&&d?-1:1);break}return w}const ok=async(t,e,n)=>{const{placement:r="bottom",strategy:s="absolute",middleware:i=[],platform:o}=n,a=i.filter(Boolean),u=await(o.isRTL==null?void 0:o.isRTL(e));let d=await o.getElementRects({reference:t,floating:e,strategy:s}),{x:h,y:p}=hx(d,r,u),g=r,w={},b=0;for(let x=0;x<a.length;x++){const{name:E,fn:_}=a[x],{x:y,y:C,data:k,reset:O}=await _({x:h,y:p,initialPlacement:r,placement:g,strategy:s,middlewareData:w,rects:d,platform:o,elements:{reference:t,floating:e}});h=y??h,p=C??p,w={...w,[E]:{...w[E],...k}},O&&b<=50&&(b++,typeof O=="object"&&(O.placement&&(g=O.placement),O.rects&&(d=O.rects===!0?await o.getElementRects({reference:t,floating:e,strategy:s}):O.rects),{x:h,y:p}=hx(d,g,u)),x=-1)}return{x:h,y:p,placement:g,strategy:s,middlewareData:w}};async function Da(t,e){var n;e===void 0&&(e={});const{x:r,y:s,platform:i,rects:o,elements:a,strategy:u}=t,{boundary:d="clippingAncestors",rootBoundary:h="viewport",elementContext:p="floating",altBoundary:g=!1,padding:w=0}=sr(e,t),b=l1(w),E=a[g?p==="floating"?"reference":"floating":p],_=su(await i.getClippingRect({element:(n=await(i.isElement==null?void 0:i.isElement(E)))==null||n?E:E.contextElement||await(i.getDocumentElement==null?void 0:i.getDocumentElement(a.floating)),boundary:d,rootBoundary:h,strategy:u})),y=p==="floating"?{x:r,y:s,width:o.floating.width,height:o.floating.height}:o.reference,C=await(i.getOffsetParent==null?void 0:i.getOffsetParent(a.floating)),k=await(i.isElement==null?void 0:i.isElement(C))?await(i.getScale==null?void 0:i.getScale(C))||{x:1,y:1}:{x:1,y:1},O=su(i.convertOffsetParentRelativeRectToViewportRelativeRect?await i.convertOffsetParentRelativeRectToViewportRelativeRect({elements:a,rect:y,offsetParent:C,strategy:u}):y);return{top:(_.top-O.top+b.top)/k.y,bottom:(O.bottom-_.bottom+b.bottom)/k.y,left:(_.left-O.left+b.left)/k.x,right:(O.right-_.right+b.right)/k.x}}const ak=t=>({name:"arrow",options:t,async fn(e){const{x:n,y:r,placement:s,rects:i,platform:o,elements:a,middlewareData:u}=e,{element:d,padding:h=0}=sr(t,e)||{};if(d==null)return{};const p=l1(h),g={x:n,y:r},w=jm(s),b=km(w),x=await o.getDimensions(d),E=w==="y",_=E?"top":"left",y=E?"bottom":"right",C=E?"clientHeight":"clientWidth",k=i.reference[b]+i.reference[w]-g[w]-i.floating[b],O=g[w]-i.reference[w],D=await(o.getOffsetParent==null?void 0:o.getOffsetParent(d));let S=D?D[C]:0;(!S||!await(o.isElement==null?void 0:o.isElement(D)))&&(S=a.floating[C]||i.floating[b]);const T=k/2-O/2,I=S/2-x[b]/2-1,A=Br(p[_],I),P=Br(p[y],I),j=A,N=S-x[b]-P,L=S/2-x[b]/2+T,G=qf(j,L,N),Q=!u.arrow&&lo(s)!=null&&L!==G&&i.reference[b]/2-(L<j?A:P)-x[b]/2<0,z=Q?L<j?L-j:L-N:0;return{[w]:g[w]+z,data:{[w]:G,centerOffset:L-G-z,...Q&&{alignmentOffset:z}},reset:Q}}}),lk=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(e){var n,r;const{placement:s,middlewareData:i,rects:o,initialPlacement:a,platform:u,elements:d}=e,{mainAxis:h=!0,crossAxis:p=!0,fallbackPlacements:g,fallbackStrategy:w="bestFit",fallbackAxisSideDirection:b="none",flipAlignment:x=!0,...E}=sr(t,e);if((n=i.arrow)!=null&&n.alignmentOffset)return{};const _=ir(s),y=jn(a),C=ir(a)===a,k=await(u.isRTL==null?void 0:u.isRTL(d.floating)),O=g||(C||!x?[ru(a)]:nk(a)),D=b!=="none";!g&&D&&O.push(...sk(a,x,b,k));const S=[a,...O],T=await Da(e,E),I=[];let A=((r=i.flip)==null?void 0:r.overflows)||[];if(h&&I.push(T[_]),p){const L=tk(s,o,k);I.push(T[L[0]],T[L[1]])}if(A=[...A,{placement:s,overflows:I}],!I.every(L=>L<=0)){var P,j;const L=(((P=i.flip)==null?void 0:P.index)||0)+1,G=S[L];if(G&&(!(p==="alignment"?y!==jn(G):!1)||A.every(V=>V.overflows[0]>0&&jn(V.placement)===y)))return{data:{index:L,overflows:A},reset:{placement:G}};let Q=(j=A.filter(z=>z.overflows[0]<=0).sort((z,V)=>z.overflows[1]-V.overflows[1])[0])==null?void 0:j.placement;if(!Q)switch(w){case"bestFit":{var N;const z=(N=A.filter(V=>{if(D){const $=jn(V.placement);return $===y||$==="y"}return!0}).map(V=>[V.placement,V.overflows.filter($=>$>0).reduce(($,Z)=>$+Z,0)]).sort((V,$)=>V[1]-$[1])[0])==null?void 0:N[0];z&&(Q=z);break}case"initialPlacement":Q=a;break}if(s!==Q)return{reset:{placement:Q}}}return{}}}};function fx(t,e){return{top:t.top-e.height,right:t.right-e.width,bottom:t.bottom-e.height,left:t.left-e.width}}function px(t){return JP.some(e=>t[e]>=0)}const ck=function(t){return t===void 0&&(t={}),{name:"hide",options:t,async fn(e){const{rects:n}=e,{strategy:r="referenceHidden",...s}=sr(t,e);switch(r){case"referenceHidden":{const i=await Da(e,{...s,elementContext:"reference"}),o=fx(i,n.reference);return{data:{referenceHiddenOffsets:o,referenceHidden:px(o)}}}case"escaped":{const i=await Da(e,{...s,altBoundary:!0}),o=fx(i,n.floating);return{data:{escapedOffsets:o,escaped:px(o)}}}default:return{}}}}};async function uk(t,e){const{placement:n,platform:r,elements:s}=t,i=await(r.isRTL==null?void 0:r.isRTL(s.floating)),o=ir(n),a=lo(n),u=jn(n)==="y",d=["left","top"].includes(o)?-1:1,h=i&&u?-1:1,p=sr(e,t);let{mainAxis:g,crossAxis:w,alignmentAxis:b}=typeof p=="number"?{mainAxis:p,crossAxis:0,alignmentAxis:null}:{mainAxis:p.mainAxis||0,crossAxis:p.crossAxis||0,alignmentAxis:p.alignmentAxis};return a&&typeof b=="number"&&(w=a==="end"?b*-1:b),u?{x:w*h,y:g*d}:{x:g*d,y:w*h}}const dk=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(e){var n,r;const{x:s,y:i,placement:o,middlewareData:a}=e,u=await uk(e,t);return o===((n=a.offset)==null?void 0:n.placement)&&(r=a.arrow)!=null&&r.alignmentOffset?{}:{x:s+u.x,y:i+u.y,data:{...u,placement:o}}}}},hk=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(e){const{x:n,y:r,placement:s}=e,{mainAxis:i=!0,crossAxis:o=!1,limiter:a={fn:E=>{let{x:_,y}=E;return{x:_,y}}},...u}=sr(t,e),d={x:n,y:r},h=await Da(e,u),p=jn(ir(s)),g=Pm(p);let w=d[g],b=d[p];if(i){const E=g==="y"?"top":"left",_=g==="y"?"bottom":"right",y=w+h[E],C=w-h[_];w=qf(y,w,C)}if(o){const E=p==="y"?"top":"left",_=p==="y"?"bottom":"right",y=b+h[E],C=b-h[_];b=qf(y,b,C)}const x=a.fn({...e,[g]:w,[p]:b});return{...x,data:{x:x.x-n,y:x.y-r,enabled:{[g]:i,[p]:o}}}}}},fk=function(t){return t===void 0&&(t={}),{options:t,fn(e){const{x:n,y:r,placement:s,rects:i,middlewareData:o}=e,{offset:a=0,mainAxis:u=!0,crossAxis:d=!0}=sr(t,e),h={x:n,y:r},p=jn(s),g=Pm(p);let w=h[g],b=h[p];const x=sr(a,e),E=typeof x=="number"?{mainAxis:x,crossAxis:0}:{mainAxis:0,crossAxis:0,...x};if(u){const C=g==="y"?"height":"width",k=i.reference[g]-i.floating[C]+E.mainAxis,O=i.reference[g]+i.reference[C]-E.mainAxis;w<k?w=k:w>O&&(w=O)}if(d){var _,y;const C=g==="y"?"width":"height",k=["top","left"].includes(ir(s)),O=i.reference[p]-i.floating[C]+(k&&((_=o.offset)==null?void 0:_[p])||0)+(k?0:E.crossAxis),D=i.reference[p]+i.reference[C]+(k?0:((y=o.offset)==null?void 0:y[p])||0)-(k?E.crossAxis:0);b<O?b=O:b>D&&(b=D)}return{[g]:w,[p]:b}}}},pk=function(t){return t===void 0&&(t={}),{name:"size",options:t,async fn(e){var n,r;const{placement:s,rects:i,platform:o,elements:a}=e,{apply:u=()=>{},...d}=sr(t,e),h=await Da(e,d),p=ir(s),g=lo(s),w=jn(s)==="y",{width:b,height:x}=i.floating;let E,_;p==="top"||p==="bottom"?(E=p,_=g===(await(o.isRTL==null?void 0:o.isRTL(a.floating))?"start":"end")?"left":"right"):(_=p,E=g==="end"?"top":"bottom");const y=x-h.top-h.bottom,C=b-h.left-h.right,k=Br(x-h[E],y),O=Br(b-h[_],C),D=!e.middlewareData.shift;let S=k,T=O;if((n=e.middlewareData.shift)!=null&&n.enabled.x&&(T=C),(r=e.middlewareData.shift)!=null&&r.enabled.y&&(S=y),D&&!g){const A=Gt(h.left,0),P=Gt(h.right,0),j=Gt(h.top,0),N=Gt(h.bottom,0);w?T=b-2*(A!==0||P!==0?A+P:Gt(h.left,h.right)):S=x-2*(j!==0||N!==0?j+N:Gt(h.top,h.bottom))}await u({...e,availableWidth:T,availableHeight:S});const I=await o.getDimensions(a.floating);return b!==I.width||x!==I.height?{reset:{rects:!0}}:{}}}};function Wu(){return typeof window<"u"}function co(t){return c1(t)?(t.nodeName||"").toLowerCase():"#document"}function Zt(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function Un(t){var e;return(e=(c1(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function c1(t){return Wu()?t instanceof Node||t instanceof Zt(t).Node:!1}function Tn(t){return Wu()?t instanceof Element||t instanceof Zt(t).Element:!1}function Fn(t){return Wu()?t instanceof HTMLElement||t instanceof Zt(t).HTMLElement:!1}function mx(t){return!Wu()||typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof Zt(t).ShadowRoot}function il(t){const{overflow:e,overflowX:n,overflowY:r,display:s}=Sn(t);return/auto|scroll|overlay|hidden|clip/.test(e+r+n)&&!["inline","contents"].includes(s)}function mk(t){return["table","td","th"].includes(co(t))}function qu(t){return[":popover-open",":modal"].some(e=>{try{return t.matches(e)}catch{return!1}})}function Dm(t){const e=Om(),n=Tn(t)?Sn(t):t;return["transform","translate","scale","rotate","perspective"].some(r=>n[r]?n[r]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!e&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!e&&(n.filter?n.filter!=="none":!1)||["transform","translate","scale","rotate","perspective","filter"].some(r=>(n.willChange||"").includes(r))||["paint","layout","strict","content"].some(r=>(n.contain||"").includes(r))}function gk(t){let e=Hr(t);for(;Fn(e)&&!Hi(e);){if(Dm(e))return e;if(qu(e))return null;e=Hr(e)}return null}function Om(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function Hi(t){return["html","body","#document"].includes(co(t))}function Sn(t){return Zt(t).getComputedStyle(t)}function Ku(t){return Tn(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.scrollX,scrollTop:t.scrollY}}function Hr(t){if(co(t)==="html")return t;const e=t.assignedSlot||t.parentNode||mx(t)&&t.host||Un(t);return mx(e)?e.host:e}function u1(t){const e=Hr(t);return Hi(e)?t.ownerDocument?t.ownerDocument.body:t.body:Fn(e)&&il(e)?e:u1(e)}function Oa(t,e,n){var r;e===void 0&&(e=[]),n===void 0&&(n=!0);const s=u1(t),i=s===((r=t.ownerDocument)==null?void 0:r.body),o=Zt(s);if(i){const a=Gf(o);return e.concat(o,o.visualViewport||[],il(s)?s:[],a&&n?Oa(a):[])}return e.concat(s,Oa(s,[],n))}function Gf(t){return t.parent&&Object.getPrototypeOf(t.parent)?t.frameElement:null}function d1(t){const e=Sn(t);let n=parseFloat(e.width)||0,r=parseFloat(e.height)||0;const s=Fn(t),i=s?t.offsetWidth:n,o=s?t.offsetHeight:r,a=nu(n)!==i||nu(r)!==o;return a&&(n=i,r=o),{width:n,height:r,$:a}}function Vm(t){return Tn(t)?t:t.contextElement}function Ii(t){const e=Vm(t);if(!Fn(e))return Vn(1);const n=e.getBoundingClientRect(),{width:r,height:s,$:i}=d1(e);let o=(i?nu(n.width):n.width)/r,a=(i?nu(n.height):n.height)/s;return(!o||!Number.isFinite(o))&&(o=1),(!a||!Number.isFinite(a))&&(a=1),{x:o,y:a}}const vk=Vn(0);function h1(t){const e=Zt(t);return!Om()||!e.visualViewport?vk:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function yk(t,e,n){return e===void 0&&(e=!1),!n||e&&n!==Zt(t)?!1:e}function ks(t,e,n,r){e===void 0&&(e=!1),n===void 0&&(n=!1);const s=t.getBoundingClientRect(),i=Vm(t);let o=Vn(1);e&&(r?Tn(r)&&(o=Ii(r)):o=Ii(t));const a=yk(i,n,r)?h1(i):Vn(0);let u=(s.left+a.x)/o.x,d=(s.top+a.y)/o.y,h=s.width/o.x,p=s.height/o.y;if(i){const g=Zt(i),w=r&&Tn(r)?Zt(r):r;let b=g,x=Gf(b);for(;x&&r&&w!==b;){const E=Ii(x),_=x.getBoundingClientRect(),y=Sn(x),C=_.left+(x.clientLeft+parseFloat(y.paddingLeft))*E.x,k=_.top+(x.clientTop+parseFloat(y.paddingTop))*E.y;u*=E.x,d*=E.y,h*=E.x,p*=E.y,u+=C,d+=k,b=Zt(x),x=Gf(b)}}return su({width:h,height:p,x:u,y:d})}function Mm(t,e){const n=Ku(t).scrollLeft;return e?e.left+n:ks(Un(t)).left+n}function f1(t,e,n){n===void 0&&(n=!1);const r=t.getBoundingClientRect(),s=r.left+e.scrollLeft-(n?0:Mm(t,r)),i=r.top+e.scrollTop;return{x:s,y:i}}function xk(t){let{elements:e,rect:n,offsetParent:r,strategy:s}=t;const i=s==="fixed",o=Un(r),a=e?qu(e.floating):!1;if(r===o||a&&i)return n;let u={scrollLeft:0,scrollTop:0},d=Vn(1);const h=Vn(0),p=Fn(r);if((p||!p&&!i)&&((co(r)!=="body"||il(o))&&(u=Ku(r)),Fn(r))){const w=ks(r);d=Ii(r),h.x=w.x+r.clientLeft,h.y=w.y+r.clientTop}const g=o&&!p&&!i?f1(o,u,!0):Vn(0);return{width:n.width*d.x,height:n.height*d.y,x:n.x*d.x-u.scrollLeft*d.x+h.x+g.x,y:n.y*d.y-u.scrollTop*d.y+h.y+g.y}}function wk(t){return Array.from(t.getClientRects())}function _k(t){const e=Un(t),n=Ku(t),r=t.ownerDocument.body,s=Gt(e.scrollWidth,e.clientWidth,r.scrollWidth,r.clientWidth),i=Gt(e.scrollHeight,e.clientHeight,r.scrollHeight,r.clientHeight);let o=-n.scrollLeft+Mm(t);const a=-n.scrollTop;return Sn(r).direction==="rtl"&&(o+=Gt(e.clientWidth,r.clientWidth)-s),{width:s,height:i,x:o,y:a}}function Ek(t,e){const n=Zt(t),r=Un(t),s=n.visualViewport;let i=r.clientWidth,o=r.clientHeight,a=0,u=0;if(s){i=s.width,o=s.height;const d=Om();(!d||d&&e==="fixed")&&(a=s.offsetLeft,u=s.offsetTop)}return{width:i,height:o,x:a,y:u}}function Tk(t,e){const n=ks(t,!0,e==="fixed"),r=n.top+t.clientTop,s=n.left+t.clientLeft,i=Fn(t)?Ii(t):Vn(1),o=t.clientWidth*i.x,a=t.clientHeight*i.y,u=s*i.x,d=r*i.y;return{width:o,height:a,x:u,y:d}}function gx(t,e,n){let r;if(e==="viewport")r=Ek(t,n);else if(e==="document")r=_k(Un(t));else if(Tn(e))r=Tk(e,n);else{const s=h1(t);r={x:e.x-s.x,y:e.y-s.y,width:e.width,height:e.height}}return su(r)}function p1(t,e){const n=Hr(t);return n===e||!Tn(n)||Hi(n)?!1:Sn(n).position==="fixed"||p1(n,e)}function Sk(t,e){const n=e.get(t);if(n)return n;let r=Oa(t,[],!1).filter(a=>Tn(a)&&co(a)!=="body"),s=null;const i=Sn(t).position==="fixed";let o=i?Hr(t):t;for(;Tn(o)&&!Hi(o);){const a=Sn(o),u=Dm(o);!u&&a.position==="fixed"&&(s=null),(i?!u&&!s:!u&&a.position==="static"&&!!s&&["absolute","fixed"].includes(s.position)||il(o)&&!u&&p1(t,o))?r=r.filter(h=>h!==o):s=a,o=Hr(o)}return e.set(t,r),r}function Ck(t){let{element:e,boundary:n,rootBoundary:r,strategy:s}=t;const o=[...n==="clippingAncestors"?qu(e)?[]:Sk(e,this._c):[].concat(n),r],a=o[0],u=o.reduce((d,h)=>{const p=gx(e,h,s);return d.top=Gt(p.top,d.top),d.right=Br(p.right,d.right),d.bottom=Br(p.bottom,d.bottom),d.left=Gt(p.left,d.left),d},gx(e,a,s));return{width:u.right-u.left,height:u.bottom-u.top,x:u.left,y:u.top}}function bk(t){const{width:e,height:n}=d1(t);return{width:e,height:n}}function Rk(t,e,n){const r=Fn(e),s=Un(e),i=n==="fixed",o=ks(t,!0,i,e);let a={scrollLeft:0,scrollTop:0};const u=Vn(0);function d(){u.x=Mm(s)}if(r||!r&&!i)if((co(e)!=="body"||il(s))&&(a=Ku(e)),r){const w=ks(e,!0,i,e);u.x=w.x+e.clientLeft,u.y=w.y+e.clientTop}else s&&d();i&&!r&&s&&d();const h=s&&!r&&!i?f1(s,a):Vn(0),p=o.left+a.scrollLeft-u.x-h.x,g=o.top+a.scrollTop-u.y-h.y;return{x:p,y:g,width:o.width,height:o.height}}function Sh(t){return Sn(t).position==="static"}function vx(t,e){if(!Fn(t)||Sn(t).position==="fixed")return null;if(e)return e(t);let n=t.offsetParent;return Un(t)===n&&(n=n.ownerDocument.body),n}function m1(t,e){const n=Zt(t);if(qu(t))return n;if(!Fn(t)){let s=Hr(t);for(;s&&!Hi(s);){if(Tn(s)&&!Sh(s))return s;s=Hr(s)}return n}let r=vx(t,e);for(;r&&mk(r)&&Sh(r);)r=vx(r,e);return r&&Hi(r)&&Sh(r)&&!Dm(r)?n:r||gk(t)||n}const Ik=async function(t){const e=this.getOffsetParent||m1,n=this.getDimensions,r=await n(t.floating);return{reference:Rk(t.reference,await e(t.floating),t.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function Ak(t){return Sn(t).direction==="rtl"}const Nk={convertOffsetParentRelativeRectToViewportRelativeRect:xk,getDocumentElement:Un,getClippingRect:Ck,getOffsetParent:m1,getElementRects:Ik,getClientRects:wk,getDimensions:bk,getScale:Ii,isElement:Tn,isRTL:Ak};function g1(t,e){return t.x===e.x&&t.y===e.y&&t.width===e.width&&t.height===e.height}function Pk(t,e){let n=null,r;const s=Un(t);function i(){var a;clearTimeout(r),(a=n)==null||a.disconnect(),n=null}function o(a,u){a===void 0&&(a=!1),u===void 0&&(u=1),i();const d=t.getBoundingClientRect(),{left:h,top:p,width:g,height:w}=d;if(a||e(),!g||!w)return;const b=Xl(p),x=Xl(s.clientWidth-(h+g)),E=Xl(s.clientHeight-(p+w)),_=Xl(h),C={rootMargin:-b+"px "+-x+"px "+-E+"px "+-_+"px",threshold:Gt(0,Br(1,u))||1};let k=!0;function O(D){const S=D[0].intersectionRatio;if(S!==u){if(!k)return o();S?o(!1,S):r=setTimeout(()=>{o(!1,1e-7)},1e3)}S===1&&!g1(d,t.getBoundingClientRect())&&o(),k=!1}try{n=new IntersectionObserver(O,{...C,root:s.ownerDocument})}catch{n=new IntersectionObserver(O,C)}n.observe(t)}return o(!0),i}function kk(t,e,n,r){r===void 0&&(r={});const{ancestorScroll:s=!0,ancestorResize:i=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:a=typeof IntersectionObserver=="function",animationFrame:u=!1}=r,d=Vm(t),h=s||i?[...d?Oa(d):[],...Oa(e)]:[];h.forEach(_=>{s&&_.addEventListener("scroll",n,{passive:!0}),i&&_.addEventListener("resize",n)});const p=d&&a?Pk(d,n):null;let g=-1,w=null;o&&(w=new ResizeObserver(_=>{let[y]=_;y&&y.target===d&&w&&(w.unobserve(e),cancelAnimationFrame(g),g=requestAnimationFrame(()=>{var C;(C=w)==null||C.observe(e)})),n()}),d&&!u&&w.observe(d),w.observe(e));let b,x=u?ks(t):null;u&&E();function E(){const _=ks(t);x&&!g1(x,_)&&n(),x=_,b=requestAnimationFrame(E)}return n(),()=>{var _;h.forEach(y=>{s&&y.removeEventListener("scroll",n),i&&y.removeEventListener("resize",n)}),p==null||p(),(_=w)==null||_.disconnect(),w=null,u&&cancelAnimationFrame(b)}}const jk=dk,Dk=hk,Ok=lk,Vk=pk,Mk=ck,yx=ak,Lk=fk,Fk=(t,e,n)=>{const r=new Map,s={platform:Nk,...n},i={...s.platform,_c:r};return ok(t,e,{...s,platform:i})};var zk=typeof document<"u",Uk=function(){},Ec=zk?m.useLayoutEffect:Uk;function iu(t,e){if(t===e)return!0;if(typeof t!=typeof e)return!1;if(typeof t=="function"&&t.toString()===e.toString())return!0;let n,r,s;if(t&&e&&typeof t=="object"){if(Array.isArray(t)){if(n=t.length,n!==e.length)return!1;for(r=n;r--!==0;)if(!iu(t[r],e[r]))return!1;return!0}if(s=Object.keys(t),n=s.length,n!==Object.keys(e).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(e,s[r]))return!1;for(r=n;r--!==0;){const i=s[r];if(!(i==="_owner"&&t.$$typeof)&&!iu(t[i],e[i]))return!1}return!0}return t!==t&&e!==e}function v1(t){return typeof window>"u"?1:(t.ownerDocument.defaultView||window).devicePixelRatio||1}function xx(t,e){const n=v1(t);return Math.round(e*n)/n}function Ch(t){const e=m.useRef(t);return Ec(()=>{e.current=t}),e}function $k(t){t===void 0&&(t={});const{placement:e="bottom",strategy:n="absolute",middleware:r=[],platform:s,elements:{reference:i,floating:o}={},transform:a=!0,whileElementsMounted:u,open:d}=t,[h,p]=m.useState({x:0,y:0,strategy:n,placement:e,middlewareData:{},isPositioned:!1}),[g,w]=m.useState(r);iu(g,r)||w(r);const[b,x]=m.useState(null),[E,_]=m.useState(null),y=m.useCallback(V=>{V!==D.current&&(D.current=V,x(V))},[]),C=m.useCallback(V=>{V!==S.current&&(S.current=V,_(V))},[]),k=i||b,O=o||E,D=m.useRef(null),S=m.useRef(null),T=m.useRef(h),I=u!=null,A=Ch(u),P=Ch(s),j=Ch(d),N=m.useCallback(()=>{if(!D.current||!S.current)return;const V={placement:e,strategy:n,middleware:g};P.current&&(V.platform=P.current),Fk(D.current,S.current,V).then($=>{const Z={...$,isPositioned:j.current!==!1};L.current&&!iu(T.current,Z)&&(T.current=Z,Bs.flushSync(()=>{p(Z)}))})},[g,e,n,P,j]);Ec(()=>{d===!1&&T.current.isPositioned&&(T.current.isPositioned=!1,p(V=>({...V,isPositioned:!1})))},[d]);const L=m.useRef(!1);Ec(()=>(L.current=!0,()=>{L.current=!1}),[]),Ec(()=>{if(k&&(D.current=k),O&&(S.current=O),k&&O){if(A.current)return A.current(k,O,N);N()}},[k,O,N,A,I]);const G=m.useMemo(()=>({reference:D,floating:S,setReference:y,setFloating:C}),[y,C]),Q=m.useMemo(()=>({reference:k,floating:O}),[k,O]),z=m.useMemo(()=>{const V={position:n,left:0,top:0};if(!Q.floating)return V;const $=xx(Q.floating,h.x),Z=xx(Q.floating,h.y);return a?{...V,transform:"translate("+$+"px, "+Z+"px)",...v1(Q.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:$,top:Z}},[n,a,Q.floating,h.x,h.y]);return m.useMemo(()=>({...h,update:N,refs:G,elements:Q,floatingStyles:z}),[h,N,G,Q,z])}const Bk=t=>{function e(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:t,fn(n){const{element:r,padding:s}=typeof t=="function"?t(n):t;return r&&e(r)?r.current!=null?yx({element:r.current,padding:s}).fn(n):{}:r?yx({element:r,padding:s}).fn(n):{}}}},Hk=(t,e)=>({...jk(t),options:[t,e]}),Wk=(t,e)=>({...Dk(t),options:[t,e]}),qk=(t,e)=>({...Lk(t),options:[t,e]}),Kk=(t,e)=>({...Ok(t),options:[t,e]}),Gk=(t,e)=>({...Vk(t),options:[t,e]}),Qk=(t,e)=>({...Mk(t),options:[t,e]}),Yk=(t,e)=>({...Bk(t),options:[t,e]});var Xk="Arrow",y1=m.forwardRef((t,e)=>{const{children:n,width:r=10,height:s=5,...i}=t;return c.jsx(ce.svg,{...i,ref:e,width:r,height:s,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:t.asChild?n:c.jsx("polygon",{points:"0,0 30,0 15,10"})})});y1.displayName=Xk;var Jk=y1;function Zk(t){const[e,n]=m.useState(void 0);return ot(()=>{if(t){n({width:t.offsetWidth,height:t.offsetHeight});const r=new ResizeObserver(s=>{if(!Array.isArray(s)||!s.length)return;const i=s[0];let o,a;if("borderBoxSize"in i){const u=i.borderBoxSize,d=Array.isArray(u)?u[0]:u;o=d.inlineSize,a=d.blockSize}else o=t.offsetWidth,a=t.offsetHeight;n({width:o,height:a})});return r.observe(t,{box:"border-box"}),()=>r.unobserve(t)}else n(void 0)},[t]),e}var Lm="Popper",[x1,uo]=ts(Lm),[e2,w1]=x1(Lm),_1=t=>{const{__scopePopper:e,children:n}=t,[r,s]=m.useState(null);return c.jsx(e2,{scope:e,anchor:r,onAnchorChange:s,children:n})};_1.displayName=Lm;var E1="PopperAnchor",T1=m.forwardRef((t,e)=>{const{__scopePopper:n,virtualRef:r,...s}=t,i=w1(E1,n),o=m.useRef(null),a=Ne(e,o);return m.useEffect(()=>{i.onAnchorChange((r==null?void 0:r.current)||o.current)}),r?null:c.jsx(ce.div,{...s,ref:a})});T1.displayName=E1;var Fm="PopperContent",[t2,n2]=x1(Fm),S1=m.forwardRef((t,e)=>{var Y,fe,xe,ve,Ee,Se;const{__scopePopper:n,side:r="bottom",sideOffset:s=0,align:i="center",alignOffset:o=0,arrowPadding:a=0,avoidCollisions:u=!0,collisionBoundary:d=[],collisionPadding:h=0,sticky:p="partial",hideWhenDetached:g=!1,updatePositionStrategy:w="optimized",onPlaced:b,...x}=t,E=w1(Fm,n),[_,y]=m.useState(null),C=Ne(e,at=>y(at)),[k,O]=m.useState(null),D=Zk(k),S=(D==null?void 0:D.width)??0,T=(D==null?void 0:D.height)??0,I=r+(i!=="center"?"-"+i:""),A=typeof h=="number"?h:{top:0,right:0,bottom:0,left:0,...h},P=Array.isArray(d)?d:[d],j=P.length>0,N={padding:A,boundary:P.filter(s2),altBoundary:j},{refs:L,floatingStyles:G,placement:Q,isPositioned:z,middlewareData:V}=$k({strategy:"fixed",placement:I,whileElementsMounted:(...at)=>kk(...at,{animationFrame:w==="always"}),elements:{reference:E.anchor},middleware:[Hk({mainAxis:s+T,alignmentAxis:o}),u&&Wk({mainAxis:!0,crossAxis:!1,limiter:p==="partial"?qk():void 0,...N}),u&&Kk({...N}),Gk({...N,apply:({elements:at,rects:kt,availableWidth:$n,availableHeight:fr})=>{const{width:as,height:Rd}=kt.reference,ls=at.floating.style;ls.setProperty("--radix-popper-available-width",`${$n}px`),ls.setProperty("--radix-popper-available-height",`${fr}px`),ls.setProperty("--radix-popper-anchor-width",`${as}px`),ls.setProperty("--radix-popper-anchor-height",`${Rd}px`)}}),k&&Yk({element:k,padding:a}),i2({arrowWidth:S,arrowHeight:T}),g&&Qk({strategy:"referenceHidden",...N})]}),[$,Z]=R1(Q),se=En(b);ot(()=>{z&&(se==null||se())},[z,se]);const U=(Y=V.arrow)==null?void 0:Y.x,J=(fe=V.arrow)==null?void 0:fe.y,H=((xe=V.arrow)==null?void 0:xe.centerOffset)!==0,[B,ee]=m.useState();return ot(()=>{_&&ee(window.getComputedStyle(_).zIndex)},[_]),c.jsx("div",{ref:L.setFloating,"data-radix-popper-content-wrapper":"",style:{...G,transform:z?G.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:B,"--radix-popper-transform-origin":[(ve=V.transformOrigin)==null?void 0:ve.x,(Ee=V.transformOrigin)==null?void 0:Ee.y].join(" "),...((Se=V.hide)==null?void 0:Se.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:t.dir,children:c.jsx(t2,{scope:n,placedSide:$,onArrowChange:O,arrowX:U,arrowY:J,shouldHideArrow:H,children:c.jsx(ce.div,{"data-side":$,"data-align":Z,...x,ref:C,style:{...x.style,animation:z?void 0:"none"}})})})});S1.displayName=Fm;var C1="PopperArrow",r2={top:"bottom",right:"left",bottom:"top",left:"right"},b1=m.forwardRef(function(e,n){const{__scopePopper:r,...s}=e,i=n2(C1,r),o=r2[i.placedSide];return c.jsx("span",{ref:i.onArrowChange,style:{position:"absolute",left:i.arrowX,top:i.arrowY,[o]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[i.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[i.placedSide],visibility:i.shouldHideArrow?"hidden":void 0},children:c.jsx(Jk,{...s,ref:n,style:{...s.style,display:"block"}})})});b1.displayName=C1;function s2(t){return t!==null}var i2=t=>({name:"transformOrigin",options:t,fn(e){var E,_,y;const{placement:n,rects:r,middlewareData:s}=e,o=((E=s.arrow)==null?void 0:E.centerOffset)!==0,a=o?0:t.arrowWidth,u=o?0:t.arrowHeight,[d,h]=R1(n),p={start:"0%",center:"50%",end:"100%"}[h],g=(((_=s.arrow)==null?void 0:_.x)??0)+a/2,w=(((y=s.arrow)==null?void 0:y.y)??0)+u/2;let b="",x="";return d==="bottom"?(b=o?p:`${g}px`,x=`${-u}px`):d==="top"?(b=o?p:`${g}px`,x=`${r.floating.height+u}px`):d==="right"?(b=`${-u}px`,x=o?p:`${w}px`):d==="left"&&(b=`${r.floating.width+u}px`,x=o?p:`${w}px`),{data:{x:b,y:x}}}});function R1(t){const[e,n="center"]=t.split("-");return[e,n]}var I1=_1,Gu=T1,zm=S1,Um=b1,[Qu,M3]=ts("Tooltip",[uo]),$m=uo(),A1="TooltipProvider",o2=700,wx="tooltip.open",[a2,N1]=Qu(A1),P1=t=>{const{__scopeTooltip:e,delayDuration:n=o2,skipDelayDuration:r=300,disableHoverableContent:s=!1,children:i}=t,o=m.useRef(!0),a=m.useRef(!1),u=m.useRef(0);return m.useEffect(()=>{const d=u.current;return()=>window.clearTimeout(d)},[]),c.jsx(a2,{scope:e,isOpenDelayedRef:o,delayDuration:n,onOpen:m.useCallback(()=>{window.clearTimeout(u.current),o.current=!1},[]),onClose:m.useCallback(()=>{window.clearTimeout(u.current),u.current=window.setTimeout(()=>o.current=!0,r)},[r]),isPointerInTransitRef:a,onPointerInTransitChange:m.useCallback(d=>{a.current=d},[]),disableHoverableContent:s,children:i})};P1.displayName=A1;var k1="Tooltip",[L3,Yu]=Qu(k1),Qf="TooltipTrigger",l2=m.forwardRef((t,e)=>{const{__scopeTooltip:n,...r}=t,s=Yu(Qf,n),i=N1(Qf,n),o=$m(n),a=m.useRef(null),u=Ne(e,a,s.onTriggerChange),d=m.useRef(!1),h=m.useRef(!1),p=m.useCallback(()=>d.current=!1,[]);return m.useEffect(()=>()=>document.removeEventListener("pointerup",p),[p]),c.jsx(Gu,{asChild:!0,...o,children:c.jsx(ce.button,{"aria-describedby":s.open?s.contentId:void 0,"data-state":s.stateAttribute,...r,ref:u,onPointerMove:le(t.onPointerMove,g=>{g.pointerType!=="touch"&&!h.current&&!i.isPointerInTransitRef.current&&(s.onTriggerEnter(),h.current=!0)}),onPointerLeave:le(t.onPointerLeave,()=>{s.onTriggerLeave(),h.current=!1}),onPointerDown:le(t.onPointerDown,()=>{s.open&&s.onClose(),d.current=!0,document.addEventListener("pointerup",p,{once:!0})}),onFocus:le(t.onFocus,()=>{d.current||s.onOpen()}),onBlur:le(t.onBlur,s.onClose),onClick:le(t.onClick,s.onClose)})})});l2.displayName=Qf;var c2="TooltipPortal",[F3,u2]=Qu(c2,{forceMount:void 0}),Wi="TooltipContent",j1=m.forwardRef((t,e)=>{const n=u2(Wi,t.__scopeTooltip),{forceMount:r=n.forceMount,side:s="top",...i}=t,o=Yu(Wi,t.__scopeTooltip);return c.jsx(hr,{present:r||o.open,children:o.disableHoverableContent?c.jsx(D1,{side:s,...i,ref:e}):c.jsx(d2,{side:s,...i,ref:e})})}),d2=m.forwardRef((t,e)=>{const n=Yu(Wi,t.__scopeTooltip),r=N1(Wi,t.__scopeTooltip),s=m.useRef(null),i=Ne(e,s),[o,a]=m.useState(null),{trigger:u,onClose:d}=n,h=s.current,{onPointerInTransitChange:p}=r,g=m.useCallback(()=>{a(null),p(!1)},[p]),w=m.useCallback((b,x)=>{const E=b.currentTarget,_={x:b.clientX,y:b.clientY},y=g2(_,E.getBoundingClientRect()),C=v2(_,y),k=y2(x.getBoundingClientRect()),O=w2([...C,...k]);a(O),p(!0)},[p]);return m.useEffect(()=>()=>g(),[g]),m.useEffect(()=>{if(u&&h){const b=E=>w(E,h),x=E=>w(E,u);return u.addEventListener("pointerleave",b),h.addEventListener("pointerleave",x),()=>{u.removeEventListener("pointerleave",b),h.removeEventListener("pointerleave",x)}}},[u,h,w,g]),m.useEffect(()=>{if(o){const b=x=>{const E=x.target,_={x:x.clientX,y:x.clientY},y=(u==null?void 0:u.contains(E))||(h==null?void 0:h.contains(E)),C=!x2(_,o);y?g():C&&(g(),d())};return document.addEventListener("pointermove",b),()=>document.removeEventListener("pointermove",b)}},[u,h,o,d,g]),c.jsx(D1,{...t,ref:i})}),[h2,f2]=Qu(k1,{isInside:!1}),p2=lN("TooltipContent"),D1=m.forwardRef((t,e)=>{const{__scopeTooltip:n,children:r,"aria-label":s,onEscapeKeyDown:i,onPointerDownOutside:o,...a}=t,u=Yu(Wi,n),d=$m(n),{onClose:h}=u;return m.useEffect(()=>(document.addEventListener(wx,h),()=>document.removeEventListener(wx,h)),[h]),m.useEffect(()=>{if(u.trigger){const p=g=>{const w=g.target;w!=null&&w.contains(u.trigger)&&h()};return window.addEventListener("scroll",p,{capture:!0}),()=>window.removeEventListener("scroll",p,{capture:!0})}},[u.trigger,h]),c.jsx(io,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:i,onPointerDownOutside:o,onFocusOutside:p=>p.preventDefault(),onDismiss:h,children:c.jsxs(zm,{"data-state":u.stateAttribute,...d,...a,ref:e,style:{...a.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[c.jsx(p2,{children:r}),c.jsx(h2,{scope:n,isInside:!0,children:c.jsx(NN,{id:u.contentId,role:"tooltip",children:s||r})})]})})});j1.displayName=Wi;var O1="TooltipArrow",m2=m.forwardRef((t,e)=>{const{__scopeTooltip:n,...r}=t,s=$m(n);return f2(O1,n).isInside?null:c.jsx(Um,{...s,...r,ref:e})});m2.displayName=O1;function g2(t,e){const n=Math.abs(e.top-t.y),r=Math.abs(e.bottom-t.y),s=Math.abs(e.right-t.x),i=Math.abs(e.left-t.x);switch(Math.min(n,r,s,i)){case i:return"left";case s:return"right";case n:return"top";case r:return"bottom";default:throw new Error("unreachable")}}function v2(t,e,n=5){const r=[];switch(e){case"top":r.push({x:t.x-n,y:t.y+n},{x:t.x+n,y:t.y+n});break;case"bottom":r.push({x:t.x-n,y:t.y-n},{x:t.x+n,y:t.y-n});break;case"left":r.push({x:t.x+n,y:t.y-n},{x:t.x+n,y:t.y+n});break;case"right":r.push({x:t.x-n,y:t.y-n},{x:t.x-n,y:t.y+n});break}return r}function y2(t){const{top:e,right:n,bottom:r,left:s}=t;return[{x:s,y:e},{x:n,y:e},{x:n,y:r},{x:s,y:r}]}function x2(t,e){const{x:n,y:r}=t;let s=!1;for(let i=0,o=e.length-1;i<e.length;o=i++){const a=e[i],u=e[o],d=a.x,h=a.y,p=u.x,g=u.y;h>r!=g>r&&n<(p-d)*(r-h)/(g-h)+d&&(s=!s)}return s}function w2(t){const e=t.slice();return e.sort((n,r)=>n.x<r.x?-1:n.x>r.x?1:n.y<r.y?-1:n.y>r.y?1:0),_2(e)}function _2(t){if(t.length<=1)return t.slice();const e=[];for(let r=0;r<t.length;r++){const s=t[r];for(;e.length>=2;){const i=e[e.length-1],o=e[e.length-2];if((i.x-o.x)*(s.y-o.y)>=(i.y-o.y)*(s.x-o.x))e.pop();else break}e.push(s)}e.pop();const n=[];for(let r=t.length-1;r>=0;r--){const s=t[r];for(;n.length>=2;){const i=n[n.length-1],o=n[n.length-2];if((i.x-o.x)*(s.y-o.y)>=(i.y-o.y)*(s.x-o.x))n.pop();else break}n.push(s)}return n.pop(),e.length===1&&n.length===1&&e[0].x===n[0].x&&e[0].y===n[0].y?e:e.concat(n)}var E2=P1,V1=j1;const T2=E2,S2=m.forwardRef(({className:t,sideOffset:e=4,...n},r)=>c.jsx(V1,{ref:r,sideOffset:e,className:ae("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-tooltip-content-transform-origin]",t),...n}));S2.displayName=V1.displayName;const C2=oo("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),de=m.forwardRef(({className:t,variant:e,size:n,asChild:r=!1,...s},i)=>{const o=r?oN:"button";return c.jsx(o,{className:ae(C2({variant:e,size:n,className:t})),ref:i,...s})});de.displayName="Button";var bh="focusScope.autoFocusOnMount",Rh="focusScope.autoFocusOnUnmount",_x={bubbles:!1,cancelable:!0},b2="FocusScope",Xu=m.forwardRef((t,e)=>{const{loop:n=!1,trapped:r=!1,onMountAutoFocus:s,onUnmountAutoFocus:i,...o}=t,[a,u]=m.useState(null),d=En(s),h=En(i),p=m.useRef(null),g=Ne(e,x=>u(x)),w=m.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;m.useEffect(()=>{if(r){let x=function(C){if(w.paused||!a)return;const k=C.target;a.contains(k)?p.current=k:_r(p.current,{select:!0})},E=function(C){if(w.paused||!a)return;const k=C.relatedTarget;k!==null&&(a.contains(k)||_r(p.current,{select:!0}))},_=function(C){if(document.activeElement===document.body)for(const O of C)O.removedNodes.length>0&&_r(a)};document.addEventListener("focusin",x),document.addEventListener("focusout",E);const y=new MutationObserver(_);return a&&y.observe(a,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",x),document.removeEventListener("focusout",E),y.disconnect()}}},[r,a,w.paused]),m.useEffect(()=>{if(a){Tx.add(w);const x=document.activeElement;if(!a.contains(x)){const _=new CustomEvent(bh,_x);a.addEventListener(bh,d),a.dispatchEvent(_),_.defaultPrevented||(R2(k2(M1(a)),{select:!0}),document.activeElement===x&&_r(a))}return()=>{a.removeEventListener(bh,d),setTimeout(()=>{const _=new CustomEvent(Rh,_x);a.addEventListener(Rh,h),a.dispatchEvent(_),_.defaultPrevented||_r(x??document.body,{select:!0}),a.removeEventListener(Rh,h),Tx.remove(w)},0)}}},[a,d,h,w]);const b=m.useCallback(x=>{if(!n&&!r||w.paused)return;const E=x.key==="Tab"&&!x.altKey&&!x.ctrlKey&&!x.metaKey,_=document.activeElement;if(E&&_){const y=x.currentTarget,[C,k]=I2(y);C&&k?!x.shiftKey&&_===k?(x.preventDefault(),n&&_r(C,{select:!0})):x.shiftKey&&_===C&&(x.preventDefault(),n&&_r(k,{select:!0})):_===y&&x.preventDefault()}},[n,r,w.paused]);return c.jsx(ce.div,{tabIndex:-1,...o,ref:g,onKeyDown:b})});Xu.displayName=b2;function R2(t,{select:e=!1}={}){const n=document.activeElement;for(const r of t)if(_r(r,{select:e}),document.activeElement!==n)return}function I2(t){const e=M1(t),n=Ex(e,t),r=Ex(e.reverse(),t);return[n,r]}function M1(t){const e=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const s=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||s?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)e.push(n.currentNode);return e}function Ex(t,e){for(const n of t)if(!A2(n,{upTo:e}))return n}function A2(t,{upTo:e}){if(getComputedStyle(t).visibility==="hidden")return!0;for(;t;){if(e!==void 0&&t===e)return!1;if(getComputedStyle(t).display==="none")return!0;t=t.parentElement}return!1}function N2(t){return t instanceof HTMLInputElement&&"select"in t}function _r(t,{select:e=!1}={}){if(t&&t.focus){const n=document.activeElement;t.focus({preventScroll:!0}),t!==n&&N2(t)&&e&&t.select()}}var Tx=P2();function P2(){let t=[];return{add(e){const n=t[0];e!==n&&(n==null||n.pause()),t=Sx(t,e),t.unshift(e)},remove(e){var n;t=Sx(t,e),(n=t[0])==null||n.resume()}}}function Sx(t,e){const n=[...t],r=n.indexOf(e);return r!==-1&&n.splice(r,1),n}function k2(t){return t.filter(e=>e.tagName!=="A")}var Ih=0;function Bm(){m.useEffect(()=>{const t=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",t[0]??Cx()),document.body.insertAdjacentElement("beforeend",t[1]??Cx()),Ih++,()=>{Ih===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(e=>e.remove()),Ih--}},[])}function Cx(){const t=document.createElement("span");return t.setAttribute("data-radix-focus-guard",""),t.tabIndex=0,t.style.outline="none",t.style.opacity="0",t.style.position="fixed",t.style.pointerEvents="none",t}var kn=function(){return kn=Object.assign||function(e){for(var n,r=1,s=arguments.length;r<s;r++){n=arguments[r];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},kn.apply(this,arguments)};function L1(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n}function j2(t,e,n){if(n||arguments.length===2)for(var r=0,s=e.length,i;r<s;r++)(i||!(r in e))&&(i||(i=Array.prototype.slice.call(e,0,r)),i[r]=e[r]);return t.concat(i||Array.prototype.slice.call(e))}var Tc="right-scroll-bar-position",Sc="width-before-scroll-bar",D2="with-scroll-bars-hidden",O2="--removed-body-scroll-bar-size";function Ah(t,e){return typeof t=="function"?t(e):t&&(t.current=e),t}function V2(t,e){var n=m.useState(function(){return{value:t,callback:e,facade:{get current(){return n.value},set current(r){var s=n.value;s!==r&&(n.value=r,n.callback(r,s))}}}})[0];return n.callback=e,n.facade}var M2=typeof window<"u"?m.useLayoutEffect:m.useEffect,bx=new WeakMap;function L2(t,e){var n=V2(null,function(r){return t.forEach(function(s){return Ah(s,r)})});return M2(function(){var r=bx.get(n);if(r){var s=new Set(r),i=new Set(t),o=n.current;s.forEach(function(a){i.has(a)||Ah(a,null)}),i.forEach(function(a){s.has(a)||Ah(a,o)})}bx.set(n,t)},[t]),n}function F2(t){return t}function z2(t,e){e===void 0&&(e=F2);var n=[],r=!1,s={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:t},useMedium:function(i){var o=e(i,r);return n.push(o),function(){n=n.filter(function(a){return a!==o})}},assignSyncMedium:function(i){for(r=!0;n.length;){var o=n;n=[],o.forEach(i)}n={push:function(a){return i(a)},filter:function(){return n}}},assignMedium:function(i){r=!0;var o=[];if(n.length){var a=n;n=[],a.forEach(i),o=n}var u=function(){var h=o;o=[],h.forEach(i)},d=function(){return Promise.resolve().then(u)};d(),n={push:function(h){o.push(h),d()},filter:function(h){return o=o.filter(h),n}}}};return s}function U2(t){t===void 0&&(t={});var e=z2(null);return e.options=kn({async:!0,ssr:!1},t),e}var F1=function(t){var e=t.sideCar,n=L1(t,["sideCar"]);if(!e)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=e.read();if(!r)throw new Error("Sidecar medium not found");return m.createElement(r,kn({},n))};F1.isSideCarExport=!0;function $2(t,e){return t.useMedium(e),F1}var z1=U2(),Nh=function(){},Ju=m.forwardRef(function(t,e){var n=m.useRef(null),r=m.useState({onScrollCapture:Nh,onWheelCapture:Nh,onTouchMoveCapture:Nh}),s=r[0],i=r[1],o=t.forwardProps,a=t.children,u=t.className,d=t.removeScrollBar,h=t.enabled,p=t.shards,g=t.sideCar,w=t.noRelative,b=t.noIsolation,x=t.inert,E=t.allowPinchZoom,_=t.as,y=_===void 0?"div":_,C=t.gapMode,k=L1(t,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),O=g,D=L2([n,e]),S=kn(kn({},k),s);return m.createElement(m.Fragment,null,h&&m.createElement(O,{sideCar:z1,removeScrollBar:d,shards:p,noRelative:w,noIsolation:b,inert:x,setCallbacks:i,allowPinchZoom:!!E,lockRef:n,gapMode:C}),o?m.cloneElement(m.Children.only(a),kn(kn({},S),{ref:D})):m.createElement(y,kn({},S,{className:u,ref:D}),a))});Ju.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};Ju.classNames={fullWidth:Sc,zeroRight:Tc};var B2=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function H2(){if(!document)return null;var t=document.createElement("style");t.type="text/css";var e=B2();return e&&t.setAttribute("nonce",e),t}function W2(t,e){t.styleSheet?t.styleSheet.cssText=e:t.appendChild(document.createTextNode(e))}function q2(t){var e=document.head||document.getElementsByTagName("head")[0];e.appendChild(t)}var K2=function(){var t=0,e=null;return{add:function(n){t==0&&(e=H2())&&(W2(e,n),q2(e)),t++},remove:function(){t--,!t&&e&&(e.parentNode&&e.parentNode.removeChild(e),e=null)}}},G2=function(){var t=K2();return function(e,n){m.useEffect(function(){return t.add(e),function(){t.remove()}},[e&&n])}},U1=function(){var t=G2(),e=function(n){var r=n.styles,s=n.dynamic;return t(r,s),null};return e},Q2={left:0,top:0,right:0,gap:0},Ph=function(t){return parseInt(t||"",10)||0},Y2=function(t){var e=window.getComputedStyle(document.body),n=e[t==="padding"?"paddingLeft":"marginLeft"],r=e[t==="padding"?"paddingTop":"marginTop"],s=e[t==="padding"?"paddingRight":"marginRight"];return[Ph(n),Ph(r),Ph(s)]},X2=function(t){if(t===void 0&&(t="margin"),typeof window>"u")return Q2;var e=Y2(t),n=document.documentElement.clientWidth,r=window.innerWidth;return{left:e[0],top:e[1],right:e[2],gap:Math.max(0,r-n+e[2]-e[0])}},J2=U1(),Ai="data-scroll-locked",Z2=function(t,e,n,r){var s=t.left,i=t.top,o=t.right,a=t.gap;return n===void 0&&(n="margin"),`
  .`.concat(D2,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(a,"px ").concat(r,`;
  }
  body[`).concat(Ai,`] {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([e&&"position: relative ".concat(r,";"),n==="margin"&&`
    padding-left: `.concat(s,`px;
    padding-top: `).concat(i,`px;
    padding-right: `).concat(o,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(a,"px ").concat(r,`;
    `),n==="padding"&&"padding-right: ".concat(a,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(Tc,` {
    right: `).concat(a,"px ").concat(r,`;
  }
  
  .`).concat(Sc,` {
    margin-right: `).concat(a,"px ").concat(r,`;
  }
  
  .`).concat(Tc," .").concat(Tc,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(Sc," .").concat(Sc,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body[`).concat(Ai,`] {
    `).concat(O2,": ").concat(a,`px;
  }
`)},Rx=function(){var t=parseInt(document.body.getAttribute(Ai)||"0",10);return isFinite(t)?t:0},ej=function(){m.useEffect(function(){return document.body.setAttribute(Ai,(Rx()+1).toString()),function(){var t=Rx()-1;t<=0?document.body.removeAttribute(Ai):document.body.setAttribute(Ai,t.toString())}},[])},tj=function(t){var e=t.noRelative,n=t.noImportant,r=t.gapMode,s=r===void 0?"margin":r;ej();var i=m.useMemo(function(){return X2(s)},[s]);return m.createElement(J2,{styles:Z2(i,!e,s,n?"":"!important")})},Yf=!1;if(typeof window<"u")try{var Jl=Object.defineProperty({},"passive",{get:function(){return Yf=!0,!0}});window.addEventListener("test",Jl,Jl),window.removeEventListener("test",Jl,Jl)}catch{Yf=!1}var Zs=Yf?{passive:!1}:!1,nj=function(t){return t.tagName==="TEXTAREA"},$1=function(t,e){if(!(t instanceof Element))return!1;var n=window.getComputedStyle(t);return n[e]!=="hidden"&&!(n.overflowY===n.overflowX&&!nj(t)&&n[e]==="visible")},rj=function(t){return $1(t,"overflowY")},sj=function(t){return $1(t,"overflowX")},Ix=function(t,e){var n=e.ownerDocument,r=e;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var s=B1(t,r);if(s){var i=H1(t,r),o=i[1],a=i[2];if(o>a)return!0}r=r.parentNode}while(r&&r!==n.body);return!1},ij=function(t){var e=t.scrollTop,n=t.scrollHeight,r=t.clientHeight;return[e,n,r]},oj=function(t){var e=t.scrollLeft,n=t.scrollWidth,r=t.clientWidth;return[e,n,r]},B1=function(t,e){return t==="v"?rj(e):sj(e)},H1=function(t,e){return t==="v"?ij(e):oj(e)},aj=function(t,e){return t==="h"&&e==="rtl"?-1:1},lj=function(t,e,n,r,s){var i=aj(t,window.getComputedStyle(e).direction),o=i*r,a=n.target,u=e.contains(a),d=!1,h=o>0,p=0,g=0;do{if(!a)break;var w=H1(t,a),b=w[0],x=w[1],E=w[2],_=x-E-i*b;(b||_)&&B1(t,a)&&(p+=_,g+=b);var y=a.parentNode;a=y&&y.nodeType===Node.DOCUMENT_FRAGMENT_NODE?y.host:y}while(!u&&a!==document.body||u&&(e.contains(a)||e===a));return(h&&Math.abs(p)<1||!h&&Math.abs(g)<1)&&(d=!0),d},Zl=function(t){return"changedTouches"in t?[t.changedTouches[0].clientX,t.changedTouches[0].clientY]:[0,0]},Ax=function(t){return[t.deltaX,t.deltaY]},Nx=function(t){return t&&"current"in t?t.current:t},cj=function(t,e){return t[0]===e[0]&&t[1]===e[1]},uj=function(t){return`
  .block-interactivity-`.concat(t,` {pointer-events: none;}
  .allow-interactivity-`).concat(t,` {pointer-events: all;}
`)},dj=0,ei=[];function hj(t){var e=m.useRef([]),n=m.useRef([0,0]),r=m.useRef(),s=m.useState(dj++)[0],i=m.useState(U1)[0],o=m.useRef(t);m.useEffect(function(){o.current=t},[t]),m.useEffect(function(){if(t.inert){document.body.classList.add("block-interactivity-".concat(s));var x=j2([t.lockRef.current],(t.shards||[]).map(Nx),!0).filter(Boolean);return x.forEach(function(E){return E.classList.add("allow-interactivity-".concat(s))}),function(){document.body.classList.remove("block-interactivity-".concat(s)),x.forEach(function(E){return E.classList.remove("allow-interactivity-".concat(s))})}}},[t.inert,t.lockRef.current,t.shards]);var a=m.useCallback(function(x,E){if("touches"in x&&x.touches.length===2||x.type==="wheel"&&x.ctrlKey)return!o.current.allowPinchZoom;var _=Zl(x),y=n.current,C="deltaX"in x?x.deltaX:y[0]-_[0],k="deltaY"in x?x.deltaY:y[1]-_[1],O,D=x.target,S=Math.abs(C)>Math.abs(k)?"h":"v";if("touches"in x&&S==="h"&&D.type==="range")return!1;var T=Ix(S,D);if(!T)return!0;if(T?O=S:(O=S==="v"?"h":"v",T=Ix(S,D)),!T)return!1;if(!r.current&&"changedTouches"in x&&(C||k)&&(r.current=O),!O)return!0;var I=r.current||O;return lj(I,E,x,I==="h"?C:k)},[]),u=m.useCallback(function(x){var E=x;if(!(!ei.length||ei[ei.length-1]!==i)){var _="deltaY"in E?Ax(E):Zl(E),y=e.current.filter(function(O){return O.name===E.type&&(O.target===E.target||E.target===O.shadowParent)&&cj(O.delta,_)})[0];if(y&&y.should){E.cancelable&&E.preventDefault();return}if(!y){var C=(o.current.shards||[]).map(Nx).filter(Boolean).filter(function(O){return O.contains(E.target)}),k=C.length>0?a(E,C[0]):!o.current.noIsolation;k&&E.cancelable&&E.preventDefault()}}},[]),d=m.useCallback(function(x,E,_,y){var C={name:x,delta:E,target:_,should:y,shadowParent:fj(_)};e.current.push(C),setTimeout(function(){e.current=e.current.filter(function(k){return k!==C})},1)},[]),h=m.useCallback(function(x){n.current=Zl(x),r.current=void 0},[]),p=m.useCallback(function(x){d(x.type,Ax(x),x.target,a(x,t.lockRef.current))},[]),g=m.useCallback(function(x){d(x.type,Zl(x),x.target,a(x,t.lockRef.current))},[]);m.useEffect(function(){return ei.push(i),t.setCallbacks({onScrollCapture:p,onWheelCapture:p,onTouchMoveCapture:g}),document.addEventListener("wheel",u,Zs),document.addEventListener("touchmove",u,Zs),document.addEventListener("touchstart",h,Zs),function(){ei=ei.filter(function(x){return x!==i}),document.removeEventListener("wheel",u,Zs),document.removeEventListener("touchmove",u,Zs),document.removeEventListener("touchstart",h,Zs)}},[]);var w=t.removeScrollBar,b=t.inert;return m.createElement(m.Fragment,null,b?m.createElement(i,{styles:uj(s)}):null,w?m.createElement(tj,{noRelative:t.noRelative,gapMode:t.gapMode}):null)}function fj(t){for(var e=null;t!==null;)t instanceof ShadowRoot&&(e=t.host,t=t.host),t=t.parentNode;return e}const pj=$2(z1,hj);var Zu=m.forwardRef(function(t,e){return m.createElement(Ju,kn({},t,{ref:e,sideCar:pj}))});Zu.classNames=Ju.classNames;var mj=function(t){if(typeof document>"u")return null;var e=Array.isArray(t)?t[0]:t;return e.ownerDocument.body},ti=new WeakMap,ec=new WeakMap,tc={},kh=0,W1=function(t){return t&&(t.host||W1(t.parentNode))},gj=function(t,e){return e.map(function(n){if(t.contains(n))return n;var r=W1(n);return r&&t.contains(r)?r:(console.error("aria-hidden",n,"in not contained inside",t,". Doing nothing"),null)}).filter(function(n){return!!n})},vj=function(t,e,n,r){var s=gj(e,Array.isArray(t)?t:[t]);tc[n]||(tc[n]=new WeakMap);var i=tc[n],o=[],a=new Set,u=new Set(s),d=function(p){!p||a.has(p)||(a.add(p),d(p.parentNode))};s.forEach(d);var h=function(p){!p||u.has(p)||Array.prototype.forEach.call(p.children,function(g){if(a.has(g))h(g);else try{var w=g.getAttribute(r),b=w!==null&&w!=="false",x=(ti.get(g)||0)+1,E=(i.get(g)||0)+1;ti.set(g,x),i.set(g,E),o.push(g),x===1&&b&&ec.set(g,!0),E===1&&g.setAttribute(n,"true"),b||g.setAttribute(r,"true")}catch(_){console.error("aria-hidden: cannot operate on ",g,_)}})};return h(e),a.clear(),kh++,function(){o.forEach(function(p){var g=ti.get(p)-1,w=i.get(p)-1;ti.set(p,g),i.set(p,w),g||(ec.has(p)||p.removeAttribute(r),ec.delete(p)),w||p.removeAttribute(n)}),kh--,kh||(ti=new WeakMap,ti=new WeakMap,ec=new WeakMap,tc={})}},Hm=function(t,e,n){n===void 0&&(n="data-aria-hidden");var r=Array.from(Array.isArray(t)?t:[t]),s=mj(t);return s?(r.push.apply(r,Array.from(s.querySelectorAll("[aria-live], script"))),vj(r,s,n,"aria-hidden")):function(){return null}},ed="Dialog",[q1,z3]=ts(ed),[yj,bn]=q1(ed),K1=t=>{const{__scopeDialog:e,children:n,open:r,defaultOpen:s,onOpenChange:i,modal:o=!0}=t,a=m.useRef(null),u=m.useRef(null),[d,h]=$i({prop:r,defaultProp:s??!1,onChange:i,caller:ed});return c.jsx(yj,{scope:e,triggerRef:a,contentRef:u,contentId:Ut(),titleId:Ut(),descriptionId:Ut(),open:d,onOpenChange:h,onOpenToggle:m.useCallback(()=>h(p=>!p),[h]),modal:o,children:n})};K1.displayName=ed;var G1="DialogTrigger",Q1=m.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,s=bn(G1,n),i=Ne(e,s.triggerRef);return c.jsx(ce.button,{type:"button","aria-haspopup":"dialog","aria-expanded":s.open,"aria-controls":s.contentId,"data-state":Km(s.open),...r,ref:i,onClick:le(t.onClick,s.onOpenToggle)})});Q1.displayName=G1;var Wm="DialogPortal",[xj,Y1]=q1(Wm,{forceMount:void 0}),X1=t=>{const{__scopeDialog:e,forceMount:n,children:r,container:s}=t,i=bn(Wm,e);return c.jsx(xj,{scope:e,forceMount:n,children:m.Children.map(r,o=>c.jsx(hr,{present:n||i.open,children:c.jsx(tl,{asChild:!0,container:s,children:o})}))})};X1.displayName=Wm;var ou="DialogOverlay",J1=m.forwardRef((t,e)=>{const n=Y1(ou,t.__scopeDialog),{forceMount:r=n.forceMount,...s}=t,i=bn(ou,t.__scopeDialog);return i.modal?c.jsx(hr,{present:r||i.open,children:c.jsx(_j,{...s,ref:e})}):null});J1.displayName=ou;var wj=Ps("DialogOverlay.RemoveScroll"),_j=m.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,s=bn(ou,n);return c.jsx(Zu,{as:wj,allowPinchZoom:!0,shards:[s.contentRef],children:c.jsx(ce.div,{"data-state":Km(s.open),...r,ref:e,style:{pointerEvents:"auto",...r.style}})})}),js="DialogContent",Z1=m.forwardRef((t,e)=>{const n=Y1(js,t.__scopeDialog),{forceMount:r=n.forceMount,...s}=t,i=bn(js,t.__scopeDialog);return c.jsx(hr,{present:r||i.open,children:i.modal?c.jsx(Ej,{...s,ref:e}):c.jsx(Tj,{...s,ref:e})})});Z1.displayName=js;var Ej=m.forwardRef((t,e)=>{const n=bn(js,t.__scopeDialog),r=m.useRef(null),s=Ne(e,n.contentRef,r);return m.useEffect(()=>{const i=r.current;if(i)return Hm(i)},[]),c.jsx(eT,{...t,ref:s,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:le(t.onCloseAutoFocus,i=>{var o;i.preventDefault(),(o=n.triggerRef.current)==null||o.focus()}),onPointerDownOutside:le(t.onPointerDownOutside,i=>{const o=i.detail.originalEvent,a=o.button===0&&o.ctrlKey===!0;(o.button===2||a)&&i.preventDefault()}),onFocusOutside:le(t.onFocusOutside,i=>i.preventDefault())})}),Tj=m.forwardRef((t,e)=>{const n=bn(js,t.__scopeDialog),r=m.useRef(!1),s=m.useRef(!1);return c.jsx(eT,{...t,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:i=>{var o,a;(o=t.onCloseAutoFocus)==null||o.call(t,i),i.defaultPrevented||(r.current||(a=n.triggerRef.current)==null||a.focus(),i.preventDefault()),r.current=!1,s.current=!1},onInteractOutside:i=>{var u,d;(u=t.onInteractOutside)==null||u.call(t,i),i.defaultPrevented||(r.current=!0,i.detail.originalEvent.type==="pointerdown"&&(s.current=!0));const o=i.target;((d=n.triggerRef.current)==null?void 0:d.contains(o))&&i.preventDefault(),i.detail.originalEvent.type==="focusin"&&s.current&&i.preventDefault()}})}),eT=m.forwardRef((t,e)=>{const{__scopeDialog:n,trapFocus:r,onOpenAutoFocus:s,onCloseAutoFocus:i,...o}=t,a=bn(js,n),u=m.useRef(null),d=Ne(e,u);return Bm(),c.jsxs(c.Fragment,{children:[c.jsx(Xu,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:s,onUnmountAutoFocus:i,children:c.jsx(io,{role:"dialog",id:a.contentId,"aria-describedby":a.descriptionId,"aria-labelledby":a.titleId,"data-state":Km(a.open),...o,ref:d,onDismiss:()=>a.onOpenChange(!1)})}),c.jsxs(c.Fragment,{children:[c.jsx(Sj,{titleId:a.titleId}),c.jsx(bj,{contentRef:u,descriptionId:a.descriptionId})]})]})}),qm="DialogTitle",tT=m.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,s=bn(qm,n);return c.jsx(ce.h2,{id:s.titleId,...r,ref:e})});tT.displayName=qm;var nT="DialogDescription",rT=m.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,s=bn(nT,n);return c.jsx(ce.p,{id:s.descriptionId,...r,ref:e})});rT.displayName=nT;var sT="DialogClose",iT=m.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,s=bn(sT,n);return c.jsx(ce.button,{type:"button",...r,ref:e,onClick:le(t.onClick,()=>s.onOpenChange(!1))})});iT.displayName=sT;function Km(t){return t?"open":"closed"}var oT="DialogTitleWarning",[U3,aT]=sN(oT,{contentName:js,titleName:qm,docsSlug:"dialog"}),Sj=({titleId:t})=>{const e=aT(oT),n=`\`${e.contentName}\` requires a \`${e.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${e.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${e.docsSlug}`;return m.useEffect(()=>{t&&(document.getElementById(t)||console.error(n))},[n,t]),null},Cj="DialogDescriptionWarning",bj=({contentRef:t,descriptionId:e})=>{const r=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${aT(Cj).contentName}}.`;return m.useEffect(()=>{var i;const s=(i=t.current)==null?void 0:i.getAttribute("aria-describedby");e&&s&&(document.getElementById(e)||console.warn(r))},[r,t,e]),null},Gm=K1,lT=Q1,Qm=X1,ol=J1,al=Z1,td=tT,nd=rT,cT=iT;const Rj=Gm,Ij=lT,Aj=Qm,uT=m.forwardRef(({className:t,...e},n)=>c.jsx(ol,{className:ae("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...e,ref:n}));uT.displayName=ol.displayName;const Nj=oo("fixed z-50 gap-4 bg-background p-6 shadow-lg transition ease-in-out data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:duration-300 data-[state=open]:duration-500",{variants:{side:{top:"inset-x-0 top-0 border-b data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top",bottom:"inset-x-0 bottom-0 border-t data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom",left:"inset-y-0 left-0 h-full w-3/4 border-r data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left sm:max-w-sm",right:"inset-y-0 right-0 h-full w-3/4  border-l data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right sm:max-w-sm"}},defaultVariants:{side:"right"}}),dT=m.forwardRef(({side:t="right",className:e,children:n,...r},s)=>c.jsxs(Aj,{children:[c.jsx(uT,{}),c.jsxs(al,{ref:s,className:ae(Nj({side:t}),e),...r,children:[n,c.jsxs(cT,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-secondary",children:[c.jsx(sl,{className:"h-4 w-4"}),c.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));dT.displayName=al.displayName;const Pj=m.forwardRef(({className:t,...e},n)=>c.jsx(td,{ref:n,className:ae("text-lg font-semibold text-foreground",t),...e}));Pj.displayName=td.displayName;const kj=m.forwardRef(({className:t,...e},n)=>c.jsx(nd,{ref:n,className:ae("text-sm text-muted-foreground",t),...e}));kj.displayName=nd.displayName;const jj=()=>{const[t,e]=m.useState(!1),n=i=>window.location.hash===`#${i}`,r=[{path:"/",label:"Home",icon:aP},{path:"/recommended",label:"Consigliati",icon:tu},{path:"/calendar",label:"Calendario",icon:An},{path:"/favorites",label:"Preferiti",icon:bi},{path:"/add-restaurant",label:"Aggiungi",icon:nP}],s=({path:i,label:o,icon:a,mobile:u=!1})=>{const d=n(i);return c.jsx(ca,{href:i,children:c.jsxs(de,{variant:d?"default":"ghost",className:`${u?"w-full justify-start":""} ${d?"bg-[hsl(var(--terracotta))] text-white hover:bg-[hsl(var(--saddle))]":"text-[hsl(var(--dark-slate))] hover:text-[hsl(var(--terracotta))] hover:bg-[hsl(var(--terracotta))]/10"}`,onClick:()=>u&&e(!1),children:[c.jsx(a,{className:"w-4 h-4 mr-2"}),o]})})};return c.jsx("nav",{className:"bg-white shadow-lg sticky top-0 z-50",children:c.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:c.jsxs("div",{className:"flex justify-between items-center h-16",children:[c.jsx(ca,{href:"/",children:c.jsxs("div",{className:"flex items-center cursor-pointer",children:[c.jsx(cx,{className:"w-6 h-6 text-[hsl(var(--terracotta))] mr-2"}),c.jsx("h1",{className:"text-2xl font-display font-bold text-[hsl(var(--terracotta))]",children:"TripTaste"})]})}),c.jsx("div",{className:"hidden md:flex items-center space-x-4",children:r.map(i=>c.jsx(s,{path:i.path,label:i.label,icon:i.icon},i.path))}),c.jsx("div",{className:"md:hidden",children:c.jsxs(Rj,{open:t,onOpenChange:e,children:[c.jsx(Ij,{asChild:!0,children:c.jsx(de,{variant:"ghost",size:"icon",children:c.jsx(cP,{className:"w-6 h-6 text-[hsl(var(--dark-slate))]"})})}),c.jsx(dT,{side:"right",className:"w-[300px] sm:w-[400px]",children:c.jsxs("div",{className:"flex flex-col space-y-4 mt-6",children:[c.jsxs("div",{className:"flex items-center mb-6",children:[c.jsx(cx,{className:"w-6 h-6 text-[hsl(var(--terracotta))] mr-2"}),c.jsx("h2",{className:"text-xl font-display font-bold text-[hsl(var(--terracotta))]",children:"TripTaste"})]}),r.map(i=>c.jsx(s,{path:i.path,label:i.label,icon:i.icon,mobile:!0},i.path))]})})]})})]})})})},It=m.forwardRef(({className:t,type:e,...n},r)=>c.jsx("input",{type:e,className:ae("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t),ref:r,...n}));It.displayName="Input";function Px(t,[e,n]){return Math.min(n,Math.max(e,t))}var Dj=m.createContext(void 0);function Oj(t){const e=m.useContext(Dj);return t||e||"ltr"}function Vj(t){const e=m.useRef({value:t,previous:t});return m.useMemo(()=>(e.current.value!==t&&(e.current.previous=e.current.value,e.current.value=t),e.current.previous),[t])}var Mj=[" ","Enter","ArrowUp","ArrowDown"],Lj=[" ","Enter"],Ds="Select",[rd,sd,Fj]=SE(Ds),[ho,$3]=ts(Ds,[Fj,uo]),id=uo(),[zj,ns]=ho(Ds),[Uj,$j]=ho(Ds),hT=t=>{const{__scopeSelect:e,children:n,open:r,defaultOpen:s,onOpenChange:i,value:o,defaultValue:a,onValueChange:u,dir:d,name:h,autoComplete:p,disabled:g,required:w,form:b}=t,x=id(e),[E,_]=m.useState(null),[y,C]=m.useState(null),[k,O]=m.useState(!1),D=Oj(d),[S,T]=$i({prop:r,defaultProp:s??!1,onChange:i,caller:Ds}),[I,A]=$i({prop:o,defaultProp:a,onChange:u,caller:Ds}),P=m.useRef(null),j=E?b||!!E.closest("form"):!0,[N,L]=m.useState(new Set),G=Array.from(N).map(Q=>Q.props.value).join(";");return c.jsx(I1,{...x,children:c.jsxs(zj,{required:w,scope:e,trigger:E,onTriggerChange:_,valueNode:y,onValueNodeChange:C,valueNodeHasChildren:k,onValueNodeHasChildrenChange:O,contentId:Ut(),value:I,onValueChange:A,open:S,onOpenChange:T,dir:D,triggerPointerDownPosRef:P,disabled:g,children:[c.jsx(rd.Provider,{scope:e,children:c.jsx(Uj,{scope:t.__scopeSelect,onNativeOptionAdd:m.useCallback(Q=>{L(z=>new Set(z).add(Q))},[]),onNativeOptionRemove:m.useCallback(Q=>{L(z=>{const V=new Set(z);return V.delete(Q),V})},[]),children:n})}),j?c.jsxs(VT,{"aria-hidden":!0,required:w,tabIndex:-1,name:h,autoComplete:p,value:I,onChange:Q=>A(Q.target.value),disabled:g,form:b,children:[I===void 0?c.jsx("option",{value:""}):null,Array.from(N)]},G):null]})})};hT.displayName=Ds;var fT="SelectTrigger",pT=m.forwardRef((t,e)=>{const{__scopeSelect:n,disabled:r=!1,...s}=t,i=id(n),o=ns(fT,n),a=o.disabled||r,u=Ne(e,o.onTriggerChange),d=sd(n),h=m.useRef("touch"),[p,g,w]=LT(x=>{const E=d().filter(C=>!C.disabled),_=E.find(C=>C.value===o.value),y=FT(E,x,_);y!==void 0&&o.onValueChange(y.value)}),b=x=>{a||(o.onOpenChange(!0),w()),x&&(o.triggerPointerDownPosRef.current={x:Math.round(x.pageX),y:Math.round(x.pageY)})};return c.jsx(Gu,{asChild:!0,...i,children:c.jsx(ce.button,{type:"button",role:"combobox","aria-controls":o.contentId,"aria-expanded":o.open,"aria-required":o.required,"aria-autocomplete":"none",dir:o.dir,"data-state":o.open?"open":"closed",disabled:a,"data-disabled":a?"":void 0,"data-placeholder":MT(o.value)?"":void 0,...s,ref:u,onClick:le(s.onClick,x=>{x.currentTarget.focus(),h.current!=="mouse"&&b(x)}),onPointerDown:le(s.onPointerDown,x=>{h.current=x.pointerType;const E=x.target;E.hasPointerCapture(x.pointerId)&&E.releasePointerCapture(x.pointerId),x.button===0&&x.ctrlKey===!1&&x.pointerType==="mouse"&&(b(x),x.preventDefault())}),onKeyDown:le(s.onKeyDown,x=>{const E=p.current!=="";!(x.ctrlKey||x.altKey||x.metaKey)&&x.key.length===1&&g(x.key),!(E&&x.key===" ")&&Mj.includes(x.key)&&(b(),x.preventDefault())})})})});pT.displayName=fT;var mT="SelectValue",gT=m.forwardRef((t,e)=>{const{__scopeSelect:n,className:r,style:s,children:i,placeholder:o="",...a}=t,u=ns(mT,n),{onValueNodeHasChildrenChange:d}=u,h=i!==void 0,p=Ne(e,u.onValueNodeChange);return ot(()=>{d(h)},[d,h]),c.jsx(ce.span,{...a,ref:p,style:{pointerEvents:"none"},children:MT(u.value)?c.jsx(c.Fragment,{children:o}):i})});gT.displayName=mT;var Bj="SelectIcon",vT=m.forwardRef((t,e)=>{const{__scopeSelect:n,children:r,...s}=t;return c.jsx(ce.span,{"aria-hidden":!0,...s,ref:e,children:r||""})});vT.displayName=Bj;var Hj="SelectPortal",yT=t=>c.jsx(tl,{asChild:!0,...t});yT.displayName=Hj;var Os="SelectContent",xT=m.forwardRef((t,e)=>{const n=ns(Os,t.__scopeSelect),[r,s]=m.useState();if(ot(()=>{s(new DocumentFragment)},[]),!n.open){const i=r;return i?Bs.createPortal(c.jsx(wT,{scope:t.__scopeSelect,children:c.jsx(rd.Slot,{scope:t.__scopeSelect,children:c.jsx("div",{children:t.children})})}),i):null}return c.jsx(_T,{...t,ref:e})});xT.displayName=Os;var pn=10,[wT,rs]=ho(Os),Wj="SelectContentImpl",qj=Ps("SelectContent.RemoveScroll"),_T=m.forwardRef((t,e)=>{const{__scopeSelect:n,position:r="item-aligned",onCloseAutoFocus:s,onEscapeKeyDown:i,onPointerDownOutside:o,side:a,sideOffset:u,align:d,alignOffset:h,arrowPadding:p,collisionBoundary:g,collisionPadding:w,sticky:b,hideWhenDetached:x,avoidCollisions:E,..._}=t,y=ns(Os,n),[C,k]=m.useState(null),[O,D]=m.useState(null),S=Ne(e,Y=>k(Y)),[T,I]=m.useState(null),[A,P]=m.useState(null),j=sd(n),[N,L]=m.useState(!1),G=m.useRef(!1);m.useEffect(()=>{if(C)return Hm(C)},[C]),Bm();const Q=m.useCallback(Y=>{const[fe,...xe]=j().map(Se=>Se.ref.current),[ve]=xe.slice(-1),Ee=document.activeElement;for(const Se of Y)if(Se===Ee||(Se==null||Se.scrollIntoView({block:"nearest"}),Se===fe&&O&&(O.scrollTop=0),Se===ve&&O&&(O.scrollTop=O.scrollHeight),Se==null||Se.focus(),document.activeElement!==Ee))return},[j,O]),z=m.useCallback(()=>Q([T,C]),[Q,T,C]);m.useEffect(()=>{N&&z()},[N,z]);const{onOpenChange:V,triggerPointerDownPosRef:$}=y;m.useEffect(()=>{if(C){let Y={x:0,y:0};const fe=ve=>{var Ee,Se;Y={x:Math.abs(Math.round(ve.pageX)-(((Ee=$.current)==null?void 0:Ee.x)??0)),y:Math.abs(Math.round(ve.pageY)-(((Se=$.current)==null?void 0:Se.y)??0))}},xe=ve=>{Y.x<=10&&Y.y<=10?ve.preventDefault():C.contains(ve.target)||V(!1),document.removeEventListener("pointermove",fe),$.current=null};return $.current!==null&&(document.addEventListener("pointermove",fe),document.addEventListener("pointerup",xe,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",fe),document.removeEventListener("pointerup",xe,{capture:!0})}}},[C,V,$]),m.useEffect(()=>{const Y=()=>V(!1);return window.addEventListener("blur",Y),window.addEventListener("resize",Y),()=>{window.removeEventListener("blur",Y),window.removeEventListener("resize",Y)}},[V]);const[Z,se]=LT(Y=>{const fe=j().filter(Ee=>!Ee.disabled),xe=fe.find(Ee=>Ee.ref.current===document.activeElement),ve=FT(fe,Y,xe);ve&&setTimeout(()=>ve.ref.current.focus())}),U=m.useCallback((Y,fe,xe)=>{const ve=!G.current&&!xe;(y.value!==void 0&&y.value===fe||ve)&&(I(Y),ve&&(G.current=!0))},[y.value]),J=m.useCallback(()=>C==null?void 0:C.focus(),[C]),H=m.useCallback((Y,fe,xe)=>{const ve=!G.current&&!xe;(y.value!==void 0&&y.value===fe||ve)&&P(Y)},[y.value]),B=r==="popper"?Xf:ET,ee=B===Xf?{side:a,sideOffset:u,align:d,alignOffset:h,arrowPadding:p,collisionBoundary:g,collisionPadding:w,sticky:b,hideWhenDetached:x,avoidCollisions:E}:{};return c.jsx(wT,{scope:n,content:C,viewport:O,onViewportChange:D,itemRefCallback:U,selectedItem:T,onItemLeave:J,itemTextRefCallback:H,focusSelectedItem:z,selectedItemText:A,position:r,isPositioned:N,searchRef:Z,children:c.jsx(Zu,{as:qj,allowPinchZoom:!0,children:c.jsx(Xu,{asChild:!0,trapped:y.open,onMountAutoFocus:Y=>{Y.preventDefault()},onUnmountAutoFocus:le(s,Y=>{var fe;(fe=y.trigger)==null||fe.focus({preventScroll:!0}),Y.preventDefault()}),children:c.jsx(io,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:i,onPointerDownOutside:o,onFocusOutside:Y=>Y.preventDefault(),onDismiss:()=>y.onOpenChange(!1),children:c.jsx(B,{role:"listbox",id:y.contentId,"data-state":y.open?"open":"closed",dir:y.dir,onContextMenu:Y=>Y.preventDefault(),..._,...ee,onPlaced:()=>L(!0),ref:S,style:{display:"flex",flexDirection:"column",outline:"none",..._.style},onKeyDown:le(_.onKeyDown,Y=>{const fe=Y.ctrlKey||Y.altKey||Y.metaKey;if(Y.key==="Tab"&&Y.preventDefault(),!fe&&Y.key.length===1&&se(Y.key),["ArrowUp","ArrowDown","Home","End"].includes(Y.key)){let ve=j().filter(Ee=>!Ee.disabled).map(Ee=>Ee.ref.current);if(["ArrowUp","End"].includes(Y.key)&&(ve=ve.slice().reverse()),["ArrowUp","ArrowDown"].includes(Y.key)){const Ee=Y.target,Se=ve.indexOf(Ee);ve=ve.slice(Se+1)}setTimeout(()=>Q(ve)),Y.preventDefault()}})})})})})})});_T.displayName=Wj;var Kj="SelectItemAlignedPosition",ET=m.forwardRef((t,e)=>{const{__scopeSelect:n,onPlaced:r,...s}=t,i=ns(Os,n),o=rs(Os,n),[a,u]=m.useState(null),[d,h]=m.useState(null),p=Ne(e,S=>h(S)),g=sd(n),w=m.useRef(!1),b=m.useRef(!0),{viewport:x,selectedItem:E,selectedItemText:_,focusSelectedItem:y}=o,C=m.useCallback(()=>{if(i.trigger&&i.valueNode&&a&&d&&x&&E&&_){const S=i.trigger.getBoundingClientRect(),T=d.getBoundingClientRect(),I=i.valueNode.getBoundingClientRect(),A=_.getBoundingClientRect();if(i.dir!=="rtl"){const Ee=A.left-T.left,Se=I.left-Ee,at=S.left-Se,kt=S.width+at,$n=Math.max(kt,T.width),fr=window.innerWidth-pn,as=Px(Se,[pn,Math.max(pn,fr-$n)]);a.style.minWidth=kt+"px",a.style.left=as+"px"}else{const Ee=T.right-A.right,Se=window.innerWidth-I.right-Ee,at=window.innerWidth-S.right-Se,kt=S.width+at,$n=Math.max(kt,T.width),fr=window.innerWidth-pn,as=Px(Se,[pn,Math.max(pn,fr-$n)]);a.style.minWidth=kt+"px",a.style.right=as+"px"}const P=g(),j=window.innerHeight-pn*2,N=x.scrollHeight,L=window.getComputedStyle(d),G=parseInt(L.borderTopWidth,10),Q=parseInt(L.paddingTop,10),z=parseInt(L.borderBottomWidth,10),V=parseInt(L.paddingBottom,10),$=G+Q+N+V+z,Z=Math.min(E.offsetHeight*5,$),se=window.getComputedStyle(x),U=parseInt(se.paddingTop,10),J=parseInt(se.paddingBottom,10),H=S.top+S.height/2-pn,B=j-H,ee=E.offsetHeight/2,Y=E.offsetTop+ee,fe=G+Q+Y,xe=$-fe;if(fe<=H){const Ee=P.length>0&&E===P[P.length-1].ref.current;a.style.bottom="0px";const Se=d.clientHeight-x.offsetTop-x.offsetHeight,at=Math.max(B,ee+(Ee?J:0)+Se+z),kt=fe+at;a.style.height=kt+"px"}else{const Ee=P.length>0&&E===P[0].ref.current;a.style.top="0px";const at=Math.max(H,G+x.offsetTop+(Ee?U:0)+ee)+xe;a.style.height=at+"px",x.scrollTop=fe-H+x.offsetTop}a.style.margin=`${pn}px 0`,a.style.minHeight=Z+"px",a.style.maxHeight=j+"px",r==null||r(),requestAnimationFrame(()=>w.current=!0)}},[g,i.trigger,i.valueNode,a,d,x,E,_,i.dir,r]);ot(()=>C(),[C]);const[k,O]=m.useState();ot(()=>{d&&O(window.getComputedStyle(d).zIndex)},[d]);const D=m.useCallback(S=>{S&&b.current===!0&&(C(),y==null||y(),b.current=!1)},[C,y]);return c.jsx(Qj,{scope:n,contentWrapper:a,shouldExpandOnScrollRef:w,onScrollButtonChange:D,children:c.jsx("div",{ref:u,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:k},children:c.jsx(ce.div,{...s,ref:p,style:{boxSizing:"border-box",maxHeight:"100%",...s.style}})})})});ET.displayName=Kj;var Gj="SelectPopperPosition",Xf=m.forwardRef((t,e)=>{const{__scopeSelect:n,align:r="start",collisionPadding:s=pn,...i}=t,o=id(n);return c.jsx(zm,{...o,...i,ref:e,align:r,collisionPadding:s,style:{boxSizing:"border-box",...i.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});Xf.displayName=Gj;var[Qj,Ym]=ho(Os,{}),Jf="SelectViewport",TT=m.forwardRef((t,e)=>{const{__scopeSelect:n,nonce:r,...s}=t,i=rs(Jf,n),o=Ym(Jf,n),a=Ne(e,i.onViewportChange),u=m.useRef(0);return c.jsxs(c.Fragment,{children:[c.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:r}),c.jsx(rd.Slot,{scope:n,children:c.jsx(ce.div,{"data-radix-select-viewport":"",role:"presentation",...s,ref:a,style:{position:"relative",flex:1,overflow:"hidden auto",...s.style},onScroll:le(s.onScroll,d=>{const h=d.currentTarget,{contentWrapper:p,shouldExpandOnScrollRef:g}=o;if(g!=null&&g.current&&p){const w=Math.abs(u.current-h.scrollTop);if(w>0){const b=window.innerHeight-pn*2,x=parseFloat(p.style.minHeight),E=parseFloat(p.style.height),_=Math.max(x,E);if(_<b){const y=_+w,C=Math.min(b,y),k=y-C;p.style.height=C+"px",p.style.bottom==="0px"&&(h.scrollTop=k>0?k:0,p.style.justifyContent="flex-end")}}}u.current=h.scrollTop})})})]})});TT.displayName=Jf;var ST="SelectGroup",[Yj,Xj]=ho(ST),Jj=m.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t,s=Ut();return c.jsx(Yj,{scope:n,id:s,children:c.jsx(ce.div,{role:"group","aria-labelledby":s,...r,ref:e})})});Jj.displayName=ST;var CT="SelectLabel",bT=m.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t,s=Xj(CT,n);return c.jsx(ce.div,{id:s.id,...r,ref:e})});bT.displayName=CT;var au="SelectItem",[Zj,RT]=ho(au),IT=m.forwardRef((t,e)=>{const{__scopeSelect:n,value:r,disabled:s=!1,textValue:i,...o}=t,a=ns(au,n),u=rs(au,n),d=a.value===r,[h,p]=m.useState(i??""),[g,w]=m.useState(!1),b=Ne(e,y=>{var C;return(C=u.itemRefCallback)==null?void 0:C.call(u,y,r,s)}),x=Ut(),E=m.useRef("touch"),_=()=>{s||(a.onValueChange(r),a.onOpenChange(!1))};if(r==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return c.jsx(Zj,{scope:n,value:r,disabled:s,textId:x,isSelected:d,onItemTextChange:m.useCallback(y=>{p(C=>C||((y==null?void 0:y.textContent)??"").trim())},[]),children:c.jsx(rd.ItemSlot,{scope:n,value:r,disabled:s,textValue:h,children:c.jsx(ce.div,{role:"option","aria-labelledby":x,"data-highlighted":g?"":void 0,"aria-selected":d&&g,"data-state":d?"checked":"unchecked","aria-disabled":s||void 0,"data-disabled":s?"":void 0,tabIndex:s?void 0:-1,...o,ref:b,onFocus:le(o.onFocus,()=>w(!0)),onBlur:le(o.onBlur,()=>w(!1)),onClick:le(o.onClick,()=>{E.current!=="mouse"&&_()}),onPointerUp:le(o.onPointerUp,()=>{E.current==="mouse"&&_()}),onPointerDown:le(o.onPointerDown,y=>{E.current=y.pointerType}),onPointerMove:le(o.onPointerMove,y=>{var C;E.current=y.pointerType,s?(C=u.onItemLeave)==null||C.call(u):E.current==="mouse"&&y.currentTarget.focus({preventScroll:!0})}),onPointerLeave:le(o.onPointerLeave,y=>{var C;y.currentTarget===document.activeElement&&((C=u.onItemLeave)==null||C.call(u))}),onKeyDown:le(o.onKeyDown,y=>{var k;((k=u.searchRef)==null?void 0:k.current)!==""&&y.key===" "||(Lj.includes(y.key)&&_(),y.key===" "&&y.preventDefault())})})})})});IT.displayName=au;var Go="SelectItemText",AT=m.forwardRef((t,e)=>{const{__scopeSelect:n,className:r,style:s,...i}=t,o=ns(Go,n),a=rs(Go,n),u=RT(Go,n),d=$j(Go,n),[h,p]=m.useState(null),g=Ne(e,_=>p(_),u.onItemTextChange,_=>{var y;return(y=a.itemTextRefCallback)==null?void 0:y.call(a,_,u.value,u.disabled)}),w=h==null?void 0:h.textContent,b=m.useMemo(()=>c.jsx("option",{value:u.value,disabled:u.disabled,children:w},u.value),[u.disabled,u.value,w]),{onNativeOptionAdd:x,onNativeOptionRemove:E}=d;return ot(()=>(x(b),()=>E(b)),[x,E,b]),c.jsxs(c.Fragment,{children:[c.jsx(ce.span,{id:u.textId,...i,ref:g}),u.isSelected&&o.valueNode&&!o.valueNodeHasChildren?Bs.createPortal(i.children,o.valueNode):null]})});AT.displayName=Go;var NT="SelectItemIndicator",PT=m.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t;return RT(NT,n).isSelected?c.jsx(ce.span,{"aria-hidden":!0,...r,ref:e}):null});PT.displayName=NT;var Zf="SelectScrollUpButton",kT=m.forwardRef((t,e)=>{const n=rs(Zf,t.__scopeSelect),r=Ym(Zf,t.__scopeSelect),[s,i]=m.useState(!1),o=Ne(e,r.onScrollButtonChange);return ot(()=>{if(n.viewport&&n.isPositioned){let a=function(){const d=u.scrollTop>0;i(d)};const u=n.viewport;return a(),u.addEventListener("scroll",a),()=>u.removeEventListener("scroll",a)}},[n.viewport,n.isPositioned]),s?c.jsx(DT,{...t,ref:o,onAutoScroll:()=>{const{viewport:a,selectedItem:u}=n;a&&u&&(a.scrollTop=a.scrollTop-u.offsetHeight)}}):null});kT.displayName=Zf;var ep="SelectScrollDownButton",jT=m.forwardRef((t,e)=>{const n=rs(ep,t.__scopeSelect),r=Ym(ep,t.__scopeSelect),[s,i]=m.useState(!1),o=Ne(e,r.onScrollButtonChange);return ot(()=>{if(n.viewport&&n.isPositioned){let a=function(){const d=u.scrollHeight-u.clientHeight,h=Math.ceil(u.scrollTop)<d;i(h)};const u=n.viewport;return a(),u.addEventListener("scroll",a),()=>u.removeEventListener("scroll",a)}},[n.viewport,n.isPositioned]),s?c.jsx(DT,{...t,ref:o,onAutoScroll:()=>{const{viewport:a,selectedItem:u}=n;a&&u&&(a.scrollTop=a.scrollTop+u.offsetHeight)}}):null});jT.displayName=ep;var DT=m.forwardRef((t,e)=>{const{__scopeSelect:n,onAutoScroll:r,...s}=t,i=rs("SelectScrollButton",n),o=m.useRef(null),a=sd(n),u=m.useCallback(()=>{o.current!==null&&(window.clearInterval(o.current),o.current=null)},[]);return m.useEffect(()=>()=>u(),[u]),ot(()=>{var h;const d=a().find(p=>p.ref.current===document.activeElement);(h=d==null?void 0:d.ref.current)==null||h.scrollIntoView({block:"nearest"})},[a]),c.jsx(ce.div,{"aria-hidden":!0,...s,ref:e,style:{flexShrink:0,...s.style},onPointerDown:le(s.onPointerDown,()=>{o.current===null&&(o.current=window.setInterval(r,50))}),onPointerMove:le(s.onPointerMove,()=>{var d;(d=i.onItemLeave)==null||d.call(i),o.current===null&&(o.current=window.setInterval(r,50))}),onPointerLeave:le(s.onPointerLeave,()=>{u()})})}),eD="SelectSeparator",OT=m.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t;return c.jsx(ce.div,{"aria-hidden":!0,...r,ref:e})});OT.displayName=eD;var tp="SelectArrow",tD=m.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t,s=id(n),i=ns(tp,n),o=rs(tp,n);return i.open&&o.position==="popper"?c.jsx(Um,{...s,...r,ref:e}):null});tD.displayName=tp;var nD="SelectBubbleInput",VT=m.forwardRef(({__scopeSelect:t,value:e,...n},r)=>{const s=m.useRef(null),i=Ne(r,s),o=Vj(e);return m.useEffect(()=>{const a=s.current;if(!a)return;const u=window.HTMLSelectElement.prototype,h=Object.getOwnPropertyDescriptor(u,"value").set;if(o!==e&&h){const p=new Event("change",{bubbles:!0});h.call(a,e),a.dispatchEvent(p)}},[o,e]),c.jsx(ce.select,{...n,style:{...AE,...n.style},ref:i,defaultValue:e})});VT.displayName=nD;function MT(t){return t===""||t===void 0}function LT(t){const e=En(t),n=m.useRef(""),r=m.useRef(0),s=m.useCallback(o=>{const a=n.current+o;e(a),function u(d){n.current=d,window.clearTimeout(r.current),d!==""&&(r.current=window.setTimeout(()=>u(""),1e3))}(a)},[e]),i=m.useCallback(()=>{n.current="",window.clearTimeout(r.current)},[]);return m.useEffect(()=>()=>window.clearTimeout(r.current),[]),[n,s,i]}function FT(t,e,n){const s=e.length>1&&Array.from(e).every(d=>d===e[0])?e[0]:e,i=n?t.indexOf(n):-1;let o=rD(t,Math.max(i,0));s.length===1&&(o=o.filter(d=>d!==n));const u=o.find(d=>d.textValue.toLowerCase().startsWith(s.toLowerCase()));return u!==n?u:void 0}function rD(t,e){return t.map((n,r)=>t[(e+r)%t.length])}var sD=hT,zT=pT,iD=gT,oD=vT,aD=yT,UT=xT,lD=TT,$T=bT,BT=IT,cD=AT,uD=PT,HT=kT,WT=jT,qT=OT;const qi=sD,Ki=iD,Vs=m.forwardRef(({className:t,children:e,...n},r)=>c.jsxs(zT,{ref:r,className:ae("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background data-[placeholder]:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",t),...n,children:[e,c.jsx(oD,{asChild:!0,children:c.jsx(Im,{className:"h-4 w-4 opacity-50"})})]}));Vs.displayName=zT.displayName;const KT=m.forwardRef(({className:t,...e},n)=>c.jsx(HT,{ref:n,className:ae("flex cursor-default items-center justify-center py-1",t),...e,children:c.jsx(eP,{className:"h-4 w-4"})}));KT.displayName=HT.displayName;const GT=m.forwardRef(({className:t,...e},n)=>c.jsx(WT,{ref:n,className:ae("flex cursor-default items-center justify-center py-1",t),...e,children:c.jsx(Im,{className:"h-4 w-4"})}));GT.displayName=WT.displayName;const Ms=m.forwardRef(({className:t,children:e,position:n="popper",...r},s)=>c.jsx(aD,{children:c.jsxs(UT,{ref:s,className:ae("relative z-50 max-h-[--radix-select-content-available-height] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-select-content-transform-origin]",n==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",t),position:n,...r,children:[c.jsx(KT,{}),c.jsx(lD,{className:ae("p-1",n==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:e}),c.jsx(GT,{})]})}));Ms.displayName=UT.displayName;const dD=m.forwardRef(({className:t,...e},n)=>c.jsx($T,{ref:n,className:ae("py-1.5 pl-8 pr-2 text-sm font-semibold",t),...e}));dD.displayName=$T.displayName;const Xn=m.forwardRef(({className:t,children:e,...n},r)=>c.jsxs(BT,{ref:r,className:ae("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...n,children:[c.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:c.jsx(uD,{children:c.jsx(ja,{className:"h-4 w-4"})})}),c.jsx(cD,{children:e})]}));Xn.displayName=BT.displayName;const hD=m.forwardRef(({className:t,...e},n)=>c.jsx(qT,{ref:n,className:ae("-mx-1 my-1 h-px bg-muted",t),...e}));hD.displayName=qT.displayName;const rt=m.forwardRef(({className:t,...e},n)=>c.jsx("div",{ref:n,className:ae("rounded-lg border bg-card text-card-foreground shadow-sm",t),...e}));rt.displayName="Card";const Va=m.forwardRef(({className:t,...e},n)=>c.jsx("div",{ref:n,className:ae("flex flex-col space-y-1.5 p-6",t),...e}));Va.displayName="CardHeader";const Ma=m.forwardRef(({className:t,...e},n)=>c.jsx("div",{ref:n,className:ae("text-2xl font-semibold leading-none tracking-tight",t),...e}));Ma.displayName="CardTitle";const fD=m.forwardRef(({className:t,...e},n)=>c.jsx("div",{ref:n,className:ae("text-sm text-muted-foreground",t),...e}));fD.displayName="CardDescription";const st=m.forwardRef(({className:t,...e},n)=>c.jsx("div",{ref:n,className:ae("p-6 pt-0",t),...e}));st.displayName="CardContent";const pD=m.forwardRef(({className:t,...e},n)=>c.jsx("div",{ref:n,className:ae("flex items-center p-6 pt-0",t),...e}));pD.displayName="CardFooter";const mD=oo("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function Ni({className:t,variant:e,...n}){return c.jsx("div",{className:ae(mD({variant:e}),t),...n})}const gD=()=>{};var kx={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QT=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},vD=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=t[n++];e[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=t[n++],o=t[n++],a=t[n++],u=((s&7)<<18|(i&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(u&1023))}else{const i=t[n++],o=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|o&63)}}return e.join("")},YT={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const i=t[s],o=s+1<t.length,a=o?t[s+1]:0,u=s+2<t.length,d=u?t[s+2]:0,h=i>>2,p=(i&3)<<4|a>>4;let g=(a&15)<<2|d>>6,w=d&63;u||(w=64,o||(g=64)),r.push(n[h],n[p],n[g],n[w])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(QT(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):vD(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const i=n[t.charAt(s++)],a=s<t.length?n[t.charAt(s)]:0;++s;const d=s<t.length?n[t.charAt(s)]:64;++s;const p=s<t.length?n[t.charAt(s)]:64;if(++s,i==null||a==null||d==null||p==null)throw new yD;const g=i<<2|a>>4;if(r.push(g),d!==64){const w=a<<4&240|d>>2;if(r.push(w),p!==64){const b=d<<6&192|p;r.push(b)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class yD extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const xD=function(t){const e=QT(t);return YT.encodeByteArray(e,!0)},lu=function(t){return xD(t).replace(/\./g,"")},wD=function(t){try{return YT.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _D(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof globalThis<"u")return globalThis;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ED=()=>_D().__FIREBASE_DEFAULTS__,TD=()=>{if(typeof process>"u"||typeof kx>"u")return;const t=kx.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},SD=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&wD(t[1]);return e&&JSON.parse(e)},Xm=()=>{try{return gD()||ED()||TD()||SD()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},CD=t=>{var e,n;return(n=(e=Xm())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},bD=t=>{const e=CD(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},XT=()=>{var t;return(t=Xm())===null||t===void 0?void 0:t.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RD{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jm(t){return t.endsWith(".cloudworkstations.dev")}async function ID(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AD(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},t);return[lu(JSON.stringify(n)),lu(JSON.stringify(o)),""].join(".")}const da={};function ND(){const t={prod:[],emulator:[]};for(const e of Object.keys(da))da[e]?t.emulator.push(e):t.prod.push(e);return t}function PD(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let jx=!1;function kD(t,e){if(typeof window>"u"||typeof document>"u"||!Jm(window.location.host)||da[t]===e||da[t]||jx)return;da[t]=e;function n(g){return`__firebase__banner__${g}`}const r="__firebase__banner",i=ND().prod.length>0;function o(){const g=document.getElementById(r);g&&g.remove()}function a(g){g.style.display="flex",g.style.background="#7faaf0",g.style.position="fixed",g.style.bottom="5px",g.style.left="5px",g.style.padding=".5em",g.style.borderRadius="5px",g.style.alignItems="center"}function u(g,w){g.setAttribute("width","24"),g.setAttribute("id",w),g.setAttribute("height","24"),g.setAttribute("viewBox","0 0 24 24"),g.setAttribute("fill","none"),g.style.marginLeft="-6px"}function d(){const g=document.createElement("span");return g.style.cursor="pointer",g.style.marginLeft="16px",g.style.fontSize="24px",g.innerHTML=" &times;",g.onclick=()=>{jx=!0,o()},g}function h(g,w){g.setAttribute("id",w),g.innerText="Learn more",g.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",g.setAttribute("target","__blank"),g.style.paddingLeft="5px",g.style.textDecoration="underline"}function p(){const g=PD(r),w=n("text"),b=document.getElementById(w)||document.createElement("span"),x=n("learnmore"),E=document.getElementById(x)||document.createElement("a"),_=n("preprendIcon"),y=document.getElementById(_)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(g.created){const C=g.element;a(C),h(E,x);const k=d();u(y,_),C.append(y,b,E,k),document.body.appendChild(C)}i?(b.innerText="Preview backend disconnected.",y.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(y.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,b.innerText="Preview backend running in this workspace."),b.setAttribute("id",w)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",p):p()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jD(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function DD(){var t;const e=(t=Xm())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(globalThis.process)==="[object process]"}catch{return!1}}function OD(){return!DD()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function VD(){try{return typeof indexedDB=="object"}catch{return!1}}function MD(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var i;e(((i=s.error)===null||i===void 0?void 0:i.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LD="FirebaseError";class fo extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=LD,Object.setPrototypeOf(this,fo.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,JT.prototype.create)}}class JT{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,i=this.errors[e],o=i?FD(i,r):"Error",a=`${this.serviceName}: ${o} (${s}).`;return new fo(s,a,r)}}function FD(t,e){return t.replace(zD,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const zD=/\{\$([^}]+)}/g;function cu(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const i=t[s],o=e[s];if(Dx(i)&&Dx(o)){if(!cu(i,o))return!1}else if(i!==o)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function Dx(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function or(t){return t&&t._delegate?t._delegate:t}class La{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vs="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UD{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new RD;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(i){if(s)return null;throw i}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(BD(e))try{this.getOrInitializeService({instanceIdentifier:vs})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(e=vs){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=vs){return this.instances.has(e)}getOptions(e=vs){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[i,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(i);r===a&&o.resolve(s)}return s}onInit(e,n){var r;const s=this.normalizeInstanceIdentifier(n),i=(r=this.onInitCallbacks.get(s))!==null&&r!==void 0?r:new Set;i.add(e),this.onInitCallbacks.set(s,i);const o=this.instances.get(s);return o&&e(o,s),()=>{i.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:$D(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=vs){return this.component?this.component.multipleInstances?e:vs:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function $D(t){return t===vs?void 0:t}function BD(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HD{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new UD(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var _e;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(_e||(_e={}));const WD={debug:_e.DEBUG,verbose:_e.VERBOSE,info:_e.INFO,warn:_e.WARN,error:_e.ERROR,silent:_e.SILENT},qD=_e.INFO,KD={[_e.DEBUG]:"log",[_e.VERBOSE]:"log",[_e.INFO]:"info",[_e.WARN]:"warn",[_e.ERROR]:"error"},GD=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=KD[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class ZT{constructor(e){this.name=e,this._logLevel=qD,this._logHandler=GD,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in _e))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?WD[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,_e.DEBUG,...e),this._logHandler(this,_e.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,_e.VERBOSE,...e),this._logHandler(this,_e.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,_e.INFO,...e),this._logHandler(this,_e.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,_e.WARN,...e),this._logHandler(this,_e.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,_e.ERROR,...e),this._logHandler(this,_e.ERROR,...e)}}const QD=(t,e)=>e.some(n=>t instanceof n);let Ox,Vx;function YD(){return Ox||(Ox=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function XD(){return Vx||(Vx=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const eS=new WeakMap,np=new WeakMap,tS=new WeakMap,jh=new WeakMap,Zm=new WeakMap;function JD(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",o)},i=()=>{n(Mr(t.result)),s()},o=()=>{r(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&eS.set(n,t)}).catch(()=>{}),Zm.set(e,t),e}function ZD(t){if(np.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",o),t.removeEventListener("abort",o)},i=()=>{n(),s()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",o),t.addEventListener("abort",o)});np.set(t,e)}let rp={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return np.get(t);if(e==="objectStoreNames")return t.objectStoreNames||tS.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Mr(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function e4(t){rp=t(rp)}function t4(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(Dh(this),e,...n);return tS.set(r,e.sort?e.sort():[e]),Mr(r)}:XD().includes(t)?function(...e){return t.apply(Dh(this),e),Mr(eS.get(this))}:function(...e){return Mr(t.apply(Dh(this),e))}}function n4(t){return typeof t=="function"?t4(t):(t instanceof IDBTransaction&&ZD(t),QD(t,YD())?new Proxy(t,rp):t)}function Mr(t){if(t instanceof IDBRequest)return JD(t);if(jh.has(t))return jh.get(t);const e=n4(t);return e!==t&&(jh.set(t,e),Zm.set(e,t)),e}const Dh=t=>Zm.get(t);function r4(t,e,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const o=indexedDB.open(t,e),a=Mr(o);return r&&o.addEventListener("upgradeneeded",u=>{r(Mr(o.result),u.oldVersion,u.newVersion,Mr(o.transaction),u)}),n&&o.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),a.then(u=>{i&&u.addEventListener("close",()=>i()),s&&u.addEventListener("versionchange",d=>s(d.oldVersion,d.newVersion,d))}).catch(()=>{}),a}const s4=["get","getKey","getAll","getAllKeys","count"],i4=["put","add","delete","clear"],Oh=new Map;function Mx(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Oh.get(e))return Oh.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=i4.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||s4.includes(n)))return;const i=async function(o,...a){const u=this.transaction(o,s?"readwrite":"readonly");let d=u.store;return r&&(d=d.index(a.shift())),(await Promise.all([d[n](...a),s&&u.done]))[0]};return Oh.set(e,i),i}e4(t=>({...t,get:(e,n,r)=>Mx(e,n)||t.get(e,n,r),has:(e,n)=>!!Mx(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o4{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(a4(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function a4(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const sp="@firebase/app",Lx="0.13.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ar=new ZT("@firebase/app"),l4="@firebase/app-compat",c4="@firebase/analytics-compat",u4="@firebase/analytics",d4="@firebase/app-check-compat",h4="@firebase/app-check",f4="@firebase/auth",p4="@firebase/auth-compat",m4="@firebase/database",g4="@firebase/data-connect",v4="@firebase/database-compat",y4="@firebase/functions",x4="@firebase/functions-compat",w4="@firebase/installations",_4="@firebase/installations-compat",E4="@firebase/messaging",T4="@firebase/messaging-compat",S4="@firebase/performance",C4="@firebase/performance-compat",b4="@firebase/remote-config",R4="@firebase/remote-config-compat",I4="@firebase/storage",A4="@firebase/storage-compat",N4="@firebase/firestore",P4="@firebase/ai",k4="@firebase/firestore-compat",j4="firebase",D4="11.9.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ip="[DEFAULT]",O4={[sp]:"fire-core",[l4]:"fire-core-compat",[u4]:"fire-analytics",[c4]:"fire-analytics-compat",[h4]:"fire-app-check",[d4]:"fire-app-check-compat",[f4]:"fire-auth",[p4]:"fire-auth-compat",[m4]:"fire-rtdb",[g4]:"fire-data-connect",[v4]:"fire-rtdb-compat",[y4]:"fire-fn",[x4]:"fire-fn-compat",[w4]:"fire-iid",[_4]:"fire-iid-compat",[E4]:"fire-fcm",[T4]:"fire-fcm-compat",[S4]:"fire-perf",[C4]:"fire-perf-compat",[b4]:"fire-rc",[R4]:"fire-rc-compat",[I4]:"fire-gcs",[A4]:"fire-gcs-compat",[N4]:"fire-fst",[k4]:"fire-fst-compat",[P4]:"fire-vertex","fire-js":"fire-js",[j4]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fa=new Map,V4=new Map,op=new Map;function Fx(t,e){try{t.container.addComponent(e)}catch(n){ar.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function uu(t){const e=t.name;if(op.has(e))return ar.debug(`There were multiple attempts to register component ${e}.`),!1;op.set(e,t);for(const n of Fa.values())Fx(n,t);for(const n of V4.values())Fx(n,t);return!0}function M4(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function L4(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F4={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Lr=new JT("app","Firebase",F4);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z4{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new La("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Lr.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U4=D4;function nS(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:ip,automaticDataCollectionEnabled:!0},e),s=r.name;if(typeof s!="string"||!s)throw Lr.create("bad-app-name",{appName:String(s)});if(n||(n=XT()),!n)throw Lr.create("no-options");const i=Fa.get(s);if(i){if(cu(n,i.options)&&cu(r,i.config))return i;throw Lr.create("duplicate-app",{appName:s})}const o=new HD(s);for(const u of op.values())o.addComponent(u);const a=new z4(n,r,o);return Fa.set(s,a),a}function $4(t=ip){const e=Fa.get(t);if(!e&&t===ip&&XT())return nS();if(!e)throw Lr.create("no-app",{appName:t});return e}function B4(){return Array.from(Fa.values())}function Pi(t,e,n){var r;let s=(r=O4[t])!==null&&r!==void 0?r:t;n&&(s+=`-${n}`);const i=s.match(/\s|\//),o=e.match(/\s|\//);if(i||o){const a=[`Unable to register library "${s}" with version "${e}":`];i&&a.push(`library name "${s}" contains illegal characters (whitespace or "/")`),i&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),ar.warn(a.join(" "));return}uu(new La(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H4="firebase-heartbeat-database",W4=1,za="firebase-heartbeat-store";let Vh=null;function rS(){return Vh||(Vh=r4(H4,W4,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(za)}catch(n){console.warn(n)}}}}).catch(t=>{throw Lr.create("idb-open",{originalErrorMessage:t.message})})),Vh}async function q4(t){try{const n=(await rS()).transaction(za),r=await n.objectStore(za).get(sS(t));return await n.done,r}catch(e){if(e instanceof fo)ar.warn(e.message);else{const n=Lr.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});ar.warn(n.message)}}}async function zx(t,e){try{const r=(await rS()).transaction(za,"readwrite");await r.objectStore(za).put(e,sS(t)),await r.done}catch(n){if(n instanceof fo)ar.warn(n.message);else{const r=Lr.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});ar.warn(r.message)}}}function sS(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K4=1024,G4=30;class Q4{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new X4(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=Ux();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(o=>o.date===i))return;if(this._heartbeatsCache.heartbeats.push({date:i,agent:s}),this._heartbeatsCache.heartbeats.length>G4){const o=J4(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){ar.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=Ux(),{heartbeatsToSend:r,unsentEntries:s}=Y4(this._heartbeatsCache.heartbeats),i=lu(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(n){return ar.warn(n),""}}}function Ux(){return new Date().toISOString().substring(0,10)}function Y4(t,e=K4){const n=[];let r=t.slice();for(const s of t){const i=n.find(o=>o.agent===s.agent);if(i){if(i.dates.push(s.date),$x(n)>e){i.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),$x(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class X4{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return VD()?MD().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await q4(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return zx(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return zx(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function $x(t){return lu(JSON.stringify({version:2,heartbeats:t})).length}function J4(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Z4(t){uu(new La("platform-logger",e=>new o4(e),"PRIVATE")),uu(new La("heartbeat",e=>new Q4(e),"PRIVATE")),Pi(sp,Lx,t),Pi(sp,Lx,"esm2017"),Pi("fire-js","")}Z4("");var eO="firebase",tO="11.9.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Pi(eO,tO,"app");var Bx=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Fr,iS;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(S,T){function I(){}I.prototype=T.prototype,S.D=T.prototype,S.prototype=new I,S.prototype.constructor=S,S.C=function(A,P,j){for(var N=Array(arguments.length-2),L=2;L<arguments.length;L++)N[L-2]=arguments[L];return T.prototype[P].apply(A,N)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(S,T,I){I||(I=0);var A=Array(16);if(typeof T=="string")for(var P=0;16>P;++P)A[P]=T.charCodeAt(I++)|T.charCodeAt(I++)<<8|T.charCodeAt(I++)<<16|T.charCodeAt(I++)<<24;else for(P=0;16>P;++P)A[P]=T[I++]|T[I++]<<8|T[I++]<<16|T[I++]<<24;T=S.g[0],I=S.g[1],P=S.g[2];var j=S.g[3],N=T+(j^I&(P^j))+A[0]+3614090360&4294967295;T=I+(N<<7&4294967295|N>>>25),N=j+(P^T&(I^P))+A[1]+3905402710&4294967295,j=T+(N<<12&4294967295|N>>>20),N=P+(I^j&(T^I))+A[2]+606105819&4294967295,P=j+(N<<17&4294967295|N>>>15),N=I+(T^P&(j^T))+A[3]+3250441966&4294967295,I=P+(N<<22&4294967295|N>>>10),N=T+(j^I&(P^j))+A[4]+4118548399&4294967295,T=I+(N<<7&4294967295|N>>>25),N=j+(P^T&(I^P))+A[5]+1200080426&4294967295,j=T+(N<<12&4294967295|N>>>20),N=P+(I^j&(T^I))+A[6]+2821735955&4294967295,P=j+(N<<17&4294967295|N>>>15),N=I+(T^P&(j^T))+A[7]+4249261313&4294967295,I=P+(N<<22&4294967295|N>>>10),N=T+(j^I&(P^j))+A[8]+1770035416&4294967295,T=I+(N<<7&4294967295|N>>>25),N=j+(P^T&(I^P))+A[9]+2336552879&4294967295,j=T+(N<<12&4294967295|N>>>20),N=P+(I^j&(T^I))+A[10]+4294925233&4294967295,P=j+(N<<17&4294967295|N>>>15),N=I+(T^P&(j^T))+A[11]+2304563134&4294967295,I=P+(N<<22&4294967295|N>>>10),N=T+(j^I&(P^j))+A[12]+1804603682&4294967295,T=I+(N<<7&4294967295|N>>>25),N=j+(P^T&(I^P))+A[13]+4254626195&4294967295,j=T+(N<<12&4294967295|N>>>20),N=P+(I^j&(T^I))+A[14]+2792965006&4294967295,P=j+(N<<17&4294967295|N>>>15),N=I+(T^P&(j^T))+A[15]+1236535329&4294967295,I=P+(N<<22&4294967295|N>>>10),N=T+(P^j&(I^P))+A[1]+4129170786&4294967295,T=I+(N<<5&4294967295|N>>>27),N=j+(I^P&(T^I))+A[6]+3225465664&4294967295,j=T+(N<<9&4294967295|N>>>23),N=P+(T^I&(j^T))+A[11]+643717713&4294967295,P=j+(N<<14&4294967295|N>>>18),N=I+(j^T&(P^j))+A[0]+3921069994&4294967295,I=P+(N<<20&4294967295|N>>>12),N=T+(P^j&(I^P))+A[5]+3593408605&4294967295,T=I+(N<<5&4294967295|N>>>27),N=j+(I^P&(T^I))+A[10]+38016083&4294967295,j=T+(N<<9&4294967295|N>>>23),N=P+(T^I&(j^T))+A[15]+3634488961&4294967295,P=j+(N<<14&4294967295|N>>>18),N=I+(j^T&(P^j))+A[4]+3889429448&4294967295,I=P+(N<<20&4294967295|N>>>12),N=T+(P^j&(I^P))+A[9]+568446438&4294967295,T=I+(N<<5&4294967295|N>>>27),N=j+(I^P&(T^I))+A[14]+3275163606&4294967295,j=T+(N<<9&4294967295|N>>>23),N=P+(T^I&(j^T))+A[3]+4107603335&4294967295,P=j+(N<<14&4294967295|N>>>18),N=I+(j^T&(P^j))+A[8]+1163531501&4294967295,I=P+(N<<20&4294967295|N>>>12),N=T+(P^j&(I^P))+A[13]+2850285829&4294967295,T=I+(N<<5&4294967295|N>>>27),N=j+(I^P&(T^I))+A[2]+4243563512&4294967295,j=T+(N<<9&4294967295|N>>>23),N=P+(T^I&(j^T))+A[7]+1735328473&4294967295,P=j+(N<<14&4294967295|N>>>18),N=I+(j^T&(P^j))+A[12]+2368359562&4294967295,I=P+(N<<20&4294967295|N>>>12),N=T+(I^P^j)+A[5]+4294588738&4294967295,T=I+(N<<4&4294967295|N>>>28),N=j+(T^I^P)+A[8]+2272392833&4294967295,j=T+(N<<11&4294967295|N>>>21),N=P+(j^T^I)+A[11]+1839030562&4294967295,P=j+(N<<16&4294967295|N>>>16),N=I+(P^j^T)+A[14]+4259657740&4294967295,I=P+(N<<23&4294967295|N>>>9),N=T+(I^P^j)+A[1]+2763975236&4294967295,T=I+(N<<4&4294967295|N>>>28),N=j+(T^I^P)+A[4]+1272893353&4294967295,j=T+(N<<11&4294967295|N>>>21),N=P+(j^T^I)+A[7]+4139469664&4294967295,P=j+(N<<16&4294967295|N>>>16),N=I+(P^j^T)+A[10]+3200236656&4294967295,I=P+(N<<23&4294967295|N>>>9),N=T+(I^P^j)+A[13]+681279174&4294967295,T=I+(N<<4&4294967295|N>>>28),N=j+(T^I^P)+A[0]+3936430074&4294967295,j=T+(N<<11&4294967295|N>>>21),N=P+(j^T^I)+A[3]+3572445317&4294967295,P=j+(N<<16&4294967295|N>>>16),N=I+(P^j^T)+A[6]+76029189&4294967295,I=P+(N<<23&4294967295|N>>>9),N=T+(I^P^j)+A[9]+3654602809&4294967295,T=I+(N<<4&4294967295|N>>>28),N=j+(T^I^P)+A[12]+3873151461&4294967295,j=T+(N<<11&4294967295|N>>>21),N=P+(j^T^I)+A[15]+530742520&4294967295,P=j+(N<<16&4294967295|N>>>16),N=I+(P^j^T)+A[2]+3299628645&4294967295,I=P+(N<<23&4294967295|N>>>9),N=T+(P^(I|~j))+A[0]+4096336452&4294967295,T=I+(N<<6&4294967295|N>>>26),N=j+(I^(T|~P))+A[7]+1126891415&4294967295,j=T+(N<<10&4294967295|N>>>22),N=P+(T^(j|~I))+A[14]+2878612391&4294967295,P=j+(N<<15&4294967295|N>>>17),N=I+(j^(P|~T))+A[5]+4237533241&4294967295,I=P+(N<<21&4294967295|N>>>11),N=T+(P^(I|~j))+A[12]+1700485571&4294967295,T=I+(N<<6&4294967295|N>>>26),N=j+(I^(T|~P))+A[3]+2399980690&4294967295,j=T+(N<<10&4294967295|N>>>22),N=P+(T^(j|~I))+A[10]+4293915773&4294967295,P=j+(N<<15&4294967295|N>>>17),N=I+(j^(P|~T))+A[1]+2240044497&4294967295,I=P+(N<<21&4294967295|N>>>11),N=T+(P^(I|~j))+A[8]+1873313359&4294967295,T=I+(N<<6&4294967295|N>>>26),N=j+(I^(T|~P))+A[15]+4264355552&4294967295,j=T+(N<<10&4294967295|N>>>22),N=P+(T^(j|~I))+A[6]+2734768916&4294967295,P=j+(N<<15&4294967295|N>>>17),N=I+(j^(P|~T))+A[13]+1309151649&4294967295,I=P+(N<<21&4294967295|N>>>11),N=T+(P^(I|~j))+A[4]+4149444226&4294967295,T=I+(N<<6&4294967295|N>>>26),N=j+(I^(T|~P))+A[11]+3174756917&4294967295,j=T+(N<<10&4294967295|N>>>22),N=P+(T^(j|~I))+A[2]+718787259&4294967295,P=j+(N<<15&4294967295|N>>>17),N=I+(j^(P|~T))+A[9]+3951481745&4294967295,S.g[0]=S.g[0]+T&4294967295,S.g[1]=S.g[1]+(P+(N<<21&4294967295|N>>>11))&4294967295,S.g[2]=S.g[2]+P&4294967295,S.g[3]=S.g[3]+j&4294967295}r.prototype.u=function(S,T){T===void 0&&(T=S.length);for(var I=T-this.blockSize,A=this.B,P=this.h,j=0;j<T;){if(P==0)for(;j<=I;)s(this,S,j),j+=this.blockSize;if(typeof S=="string"){for(;j<T;)if(A[P++]=S.charCodeAt(j++),P==this.blockSize){s(this,A),P=0;break}}else for(;j<T;)if(A[P++]=S[j++],P==this.blockSize){s(this,A),P=0;break}}this.h=P,this.o+=T},r.prototype.v=function(){var S=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);S[0]=128;for(var T=1;T<S.length-8;++T)S[T]=0;var I=8*this.o;for(T=S.length-8;T<S.length;++T)S[T]=I&255,I/=256;for(this.u(S),S=Array(16),T=I=0;4>T;++T)for(var A=0;32>A;A+=8)S[I++]=this.g[T]>>>A&255;return S};function i(S,T){var I=a;return Object.prototype.hasOwnProperty.call(I,S)?I[S]:I[S]=T(S)}function o(S,T){this.h=T;for(var I=[],A=!0,P=S.length-1;0<=P;P--){var j=S[P]|0;A&&j==T||(I[P]=j,A=!1)}this.g=I}var a={};function u(S){return-128<=S&&128>S?i(S,function(T){return new o([T|0],0>T?-1:0)}):new o([S|0],0>S?-1:0)}function d(S){if(isNaN(S)||!isFinite(S))return p;if(0>S)return E(d(-S));for(var T=[],I=1,A=0;S>=I;A++)T[A]=S/I|0,I*=4294967296;return new o(T,0)}function h(S,T){if(S.length==0)throw Error("number format error: empty string");if(T=T||10,2>T||36<T)throw Error("radix out of range: "+T);if(S.charAt(0)=="-")return E(h(S.substring(1),T));if(0<=S.indexOf("-"))throw Error('number format error: interior "-" character');for(var I=d(Math.pow(T,8)),A=p,P=0;P<S.length;P+=8){var j=Math.min(8,S.length-P),N=parseInt(S.substring(P,P+j),T);8>j?(j=d(Math.pow(T,j)),A=A.j(j).add(d(N))):(A=A.j(I),A=A.add(d(N)))}return A}var p=u(0),g=u(1),w=u(16777216);t=o.prototype,t.m=function(){if(x(this))return-E(this).m();for(var S=0,T=1,I=0;I<this.g.length;I++){var A=this.i(I);S+=(0<=A?A:4294967296+A)*T,T*=4294967296}return S},t.toString=function(S){if(S=S||10,2>S||36<S)throw Error("radix out of range: "+S);if(b(this))return"0";if(x(this))return"-"+E(this).toString(S);for(var T=d(Math.pow(S,6)),I=this,A="";;){var P=k(I,T).g;I=_(I,P.j(T));var j=((0<I.g.length?I.g[0]:I.h)>>>0).toString(S);if(I=P,b(I))return j+A;for(;6>j.length;)j="0"+j;A=j+A}},t.i=function(S){return 0>S?0:S<this.g.length?this.g[S]:this.h};function b(S){if(S.h!=0)return!1;for(var T=0;T<S.g.length;T++)if(S.g[T]!=0)return!1;return!0}function x(S){return S.h==-1}t.l=function(S){return S=_(this,S),x(S)?-1:b(S)?0:1};function E(S){for(var T=S.g.length,I=[],A=0;A<T;A++)I[A]=~S.g[A];return new o(I,~S.h).add(g)}t.abs=function(){return x(this)?E(this):this},t.add=function(S){for(var T=Math.max(this.g.length,S.g.length),I=[],A=0,P=0;P<=T;P++){var j=A+(this.i(P)&65535)+(S.i(P)&65535),N=(j>>>16)+(this.i(P)>>>16)+(S.i(P)>>>16);A=N>>>16,j&=65535,N&=65535,I[P]=N<<16|j}return new o(I,I[I.length-1]&-2147483648?-1:0)};function _(S,T){return S.add(E(T))}t.j=function(S){if(b(this)||b(S))return p;if(x(this))return x(S)?E(this).j(E(S)):E(E(this).j(S));if(x(S))return E(this.j(E(S)));if(0>this.l(w)&&0>S.l(w))return d(this.m()*S.m());for(var T=this.g.length+S.g.length,I=[],A=0;A<2*T;A++)I[A]=0;for(A=0;A<this.g.length;A++)for(var P=0;P<S.g.length;P++){var j=this.i(A)>>>16,N=this.i(A)&65535,L=S.i(P)>>>16,G=S.i(P)&65535;I[2*A+2*P]+=N*G,y(I,2*A+2*P),I[2*A+2*P+1]+=j*G,y(I,2*A+2*P+1),I[2*A+2*P+1]+=N*L,y(I,2*A+2*P+1),I[2*A+2*P+2]+=j*L,y(I,2*A+2*P+2)}for(A=0;A<T;A++)I[A]=I[2*A+1]<<16|I[2*A];for(A=T;A<2*T;A++)I[A]=0;return new o(I,0)};function y(S,T){for(;(S[T]&65535)!=S[T];)S[T+1]+=S[T]>>>16,S[T]&=65535,T++}function C(S,T){this.g=S,this.h=T}function k(S,T){if(b(T))throw Error("division by zero");if(b(S))return new C(p,p);if(x(S))return T=k(E(S),T),new C(E(T.g),E(T.h));if(x(T))return T=k(S,E(T)),new C(E(T.g),T.h);if(30<S.g.length){if(x(S)||x(T))throw Error("slowDivide_ only works with positive integers.");for(var I=g,A=T;0>=A.l(S);)I=O(I),A=O(A);var P=D(I,1),j=D(A,1);for(A=D(A,2),I=D(I,2);!b(A);){var N=j.add(A);0>=N.l(S)&&(P=P.add(I),j=N),A=D(A,1),I=D(I,1)}return T=_(S,P.j(T)),new C(P,T)}for(P=p;0<=S.l(T);){for(I=Math.max(1,Math.floor(S.m()/T.m())),A=Math.ceil(Math.log(I)/Math.LN2),A=48>=A?1:Math.pow(2,A-48),j=d(I),N=j.j(T);x(N)||0<N.l(S);)I-=A,j=d(I),N=j.j(T);b(j)&&(j=g),P=P.add(j),S=_(S,N)}return new C(P,S)}t.A=function(S){return k(this,S).h},t.and=function(S){for(var T=Math.max(this.g.length,S.g.length),I=[],A=0;A<T;A++)I[A]=this.i(A)&S.i(A);return new o(I,this.h&S.h)},t.or=function(S){for(var T=Math.max(this.g.length,S.g.length),I=[],A=0;A<T;A++)I[A]=this.i(A)|S.i(A);return new o(I,this.h|S.h)},t.xor=function(S){for(var T=Math.max(this.g.length,S.g.length),I=[],A=0;A<T;A++)I[A]=this.i(A)^S.i(A);return new o(I,this.h^S.h)};function O(S){for(var T=S.g.length+1,I=[],A=0;A<T;A++)I[A]=S.i(A)<<1|S.i(A-1)>>>31;return new o(I,S.h)}function D(S,T){var I=T>>5;T%=32;for(var A=S.g.length-I,P=[],j=0;j<A;j++)P[j]=0<T?S.i(j+I)>>>T|S.i(j+I+1)<<32-T:S.i(j+I);return new o(P,S.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,iS=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=d,o.fromString=h,Fr=o}).apply(typeof Bx<"u"?Bx:typeof self<"u"?self:typeof window<"u"?window:{});var nc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var oS,Qo,aS,Cc,ap,lS,cS,uS;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(l,f,v){return l==Array.prototype||l==Object.prototype||(l[f]=v.value),l};function n(l){l=[typeof globalThis=="object"&&globalThis,l,typeof window=="object"&&window,typeof self=="object"&&self,typeof nc=="object"&&nc];for(var f=0;f<l.length;++f){var v=l[f];if(v&&v.Math==Math)return v}throw Error("Cannot find global object")}var r=n(this);function s(l,f){if(f)e:{var v=r;l=l.split(".");for(var R=0;R<l.length-1;R++){var M=l[R];if(!(M in v))break e;v=v[M]}l=l[l.length-1],R=v[l],f=f(R),f!=R&&f!=null&&e(v,l,{configurable:!0,writable:!0,value:f})}}function i(l,f){l instanceof String&&(l+="");var v=0,R=!1,M={next:function(){if(!R&&v<l.length){var F=v++;return{value:f(F,l[F]),done:!1}}return R=!0,{done:!0,value:void 0}}};return M[Symbol.iterator]=function(){return M},M}s("Array.prototype.values",function(l){return l||function(){return i(this,function(f,v){return v})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},a=this||self;function u(l){var f=typeof l;return f=f!="object"?f:l?Array.isArray(l)?"array":f:"null",f=="array"||f=="object"&&typeof l.length=="number"}function d(l){var f=typeof l;return f=="object"&&l!=null||f=="function"}function h(l,f,v){return l.call.apply(l.bind,arguments)}function p(l,f,v){if(!l)throw Error();if(2<arguments.length){var R=Array.prototype.slice.call(arguments,2);return function(){var M=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(M,R),l.apply(f,M)}}return function(){return l.apply(f,arguments)}}function g(l,f,v){return g=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?h:p,g.apply(null,arguments)}function w(l,f){var v=Array.prototype.slice.call(arguments,1);return function(){var R=v.slice();return R.push.apply(R,arguments),l.apply(this,R)}}function b(l,f){function v(){}v.prototype=f.prototype,l.aa=f.prototype,l.prototype=new v,l.prototype.constructor=l,l.Qb=function(R,M,F){for(var X=Array(arguments.length-2),Pe=2;Pe<arguments.length;Pe++)X[Pe-2]=arguments[Pe];return f.prototype[M].apply(R,X)}}function x(l){const f=l.length;if(0<f){const v=Array(f);for(let R=0;R<f;R++)v[R]=l[R];return v}return[]}function E(l,f){for(let v=1;v<arguments.length;v++){const R=arguments[v];if(u(R)){const M=l.length||0,F=R.length||0;l.length=M+F;for(let X=0;X<F;X++)l[M+X]=R[X]}else l.push(R)}}class _{constructor(f,v){this.i=f,this.j=v,this.h=0,this.g=null}get(){let f;return 0<this.h?(this.h--,f=this.g,this.g=f.next,f.next=null):f=this.i(),f}}function y(l){return/^[\s\xa0]*$/.test(l)}function C(){var l=a.navigator;return l&&(l=l.userAgent)?l:""}function k(l){return k[" "](l),l}k[" "]=function(){};var O=C().indexOf("Gecko")!=-1&&!(C().toLowerCase().indexOf("webkit")!=-1&&C().indexOf("Edge")==-1)&&!(C().indexOf("Trident")!=-1||C().indexOf("MSIE")!=-1)&&C().indexOf("Edge")==-1;function D(l,f,v){for(const R in l)f.call(v,l[R],R,l)}function S(l,f){for(const v in l)f.call(void 0,l[v],v,l)}function T(l){const f={};for(const v in l)f[v]=l[v];return f}const I="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function A(l,f){let v,R;for(let M=1;M<arguments.length;M++){R=arguments[M];for(v in R)l[v]=R[v];for(let F=0;F<I.length;F++)v=I[F],Object.prototype.hasOwnProperty.call(R,v)&&(l[v]=R[v])}}function P(l){var f=1;l=l.split(":");const v=[];for(;0<f&&l.length;)v.push(l.shift()),f--;return l.length&&v.push(l.join(":")),v}function j(l){a.setTimeout(()=>{throw l},0)}function N(){var l=$;let f=null;return l.g&&(f=l.g,l.g=l.g.next,l.g||(l.h=null),f.next=null),f}class L{constructor(){this.h=this.g=null}add(f,v){const R=G.get();R.set(f,v),this.h?this.h.next=R:this.g=R,this.h=R}}var G=new _(()=>new Q,l=>l.reset());class Q{constructor(){this.next=this.g=this.h=null}set(f,v){this.h=f,this.g=v,this.next=null}reset(){this.next=this.g=this.h=null}}let z,V=!1,$=new L,Z=()=>{const l=a.Promise.resolve(void 0);z=()=>{l.then(se)}};var se=()=>{for(var l;l=N();){try{l.h.call(l.g)}catch(v){j(v)}var f=G;f.j(l),100>f.h&&(f.h++,l.next=f.g,f.g=l)}V=!1};function U(){this.s=this.s,this.C=this.C}U.prototype.s=!1,U.prototype.ma=function(){this.s||(this.s=!0,this.N())},U.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function J(l,f){this.type=l,this.g=this.target=f,this.defaultPrevented=!1}J.prototype.h=function(){this.defaultPrevented=!0};var H=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var l=!1,f=Object.defineProperty({},"passive",{get:function(){l=!0}});try{const v=()=>{};a.addEventListener("test",v,f),a.removeEventListener("test",v,f)}catch{}return l}();function B(l,f){if(J.call(this,l?l.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,l){var v=this.type=l.type,R=l.changedTouches&&l.changedTouches.length?l.changedTouches[0]:null;if(this.target=l.target||l.srcElement,this.g=f,f=l.relatedTarget){if(O){e:{try{k(f.nodeName);var M=!0;break e}catch{}M=!1}M||(f=null)}}else v=="mouseover"?f=l.fromElement:v=="mouseout"&&(f=l.toElement);this.relatedTarget=f,R?(this.clientX=R.clientX!==void 0?R.clientX:R.pageX,this.clientY=R.clientY!==void 0?R.clientY:R.pageY,this.screenX=R.screenX||0,this.screenY=R.screenY||0):(this.clientX=l.clientX!==void 0?l.clientX:l.pageX,this.clientY=l.clientY!==void 0?l.clientY:l.pageY,this.screenX=l.screenX||0,this.screenY=l.screenY||0),this.button=l.button,this.key=l.key||"",this.ctrlKey=l.ctrlKey,this.altKey=l.altKey,this.shiftKey=l.shiftKey,this.metaKey=l.metaKey,this.pointerId=l.pointerId||0,this.pointerType=typeof l.pointerType=="string"?l.pointerType:ee[l.pointerType]||"",this.state=l.state,this.i=l,l.defaultPrevented&&B.aa.h.call(this)}}b(B,J);var ee={2:"touch",3:"pen",4:"mouse"};B.prototype.h=function(){B.aa.h.call(this);var l=this.i;l.preventDefault?l.preventDefault():l.returnValue=!1};var Y="closure_listenable_"+(1e6*Math.random()|0),fe=0;function xe(l,f,v,R,M){this.listener=l,this.proxy=null,this.src=f,this.type=v,this.capture=!!R,this.ha=M,this.key=++fe,this.da=this.fa=!1}function ve(l){l.da=!0,l.listener=null,l.proxy=null,l.src=null,l.ha=null}function Ee(l){this.src=l,this.g={},this.h=0}Ee.prototype.add=function(l,f,v,R,M){var F=l.toString();l=this.g[F],l||(l=this.g[F]=[],this.h++);var X=at(l,f,R,M);return-1<X?(f=l[X],v||(f.fa=!1)):(f=new xe(f,this.src,F,!!R,M),f.fa=v,l.push(f)),f};function Se(l,f){var v=f.type;if(v in l.g){var R=l.g[v],M=Array.prototype.indexOf.call(R,f,void 0),F;(F=0<=M)&&Array.prototype.splice.call(R,M,1),F&&(ve(f),l.g[v].length==0&&(delete l.g[v],l.h--))}}function at(l,f,v,R){for(var M=0;M<l.length;++M){var F=l[M];if(!F.da&&F.listener==f&&F.capture==!!v&&F.ha==R)return M}return-1}var kt="closure_lm_"+(1e6*Math.random()|0),$n={};function fr(l,f,v,R,M){if(Array.isArray(f)){for(var F=0;F<f.length;F++)fr(l,f[F],v,R,M);return null}return v=Hg(v),l&&l[Y]?l.K(f,v,d(R)?!!R.capture:!1,M):as(l,f,v,!1,R,M)}function as(l,f,v,R,M,F){if(!f)throw Error("Invalid event type");var X=d(M)?!!M.capture:!!M,Pe=Ad(l);if(Pe||(l[kt]=Pe=new Ee(l)),v=Pe.add(f,v,R,X,F),v.proxy)return v;if(R=Rd(),v.proxy=R,R.src=l,R.listener=v,l.addEventListener)H||(M=X),M===void 0&&(M=!1),l.addEventListener(f.toString(),R,M);else if(l.attachEvent)l.attachEvent(Bg(f.toString()),R);else if(l.addListener&&l.removeListener)l.addListener(R);else throw Error("addEventListener and attachEvent are unavailable.");return v}function Rd(){function l(v){return f.call(l.src,l.listener,v)}const f=Eb;return l}function ls(l,f,v,R,M){if(Array.isArray(f))for(var F=0;F<f.length;F++)ls(l,f[F],v,R,M);else R=d(R)?!!R.capture:!!R,v=Hg(v),l&&l[Y]?(l=l.i,f=String(f).toString(),f in l.g&&(F=l.g[f],v=at(F,v,R,M),-1<v&&(ve(F[v]),Array.prototype.splice.call(F,v,1),F.length==0&&(delete l.g[f],l.h--)))):l&&(l=Ad(l))&&(f=l.g[f.toString()],l=-1,f&&(l=at(f,v,R,M)),(v=-1<l?f[l]:null)&&Id(v))}function Id(l){if(typeof l!="number"&&l&&!l.da){var f=l.src;if(f&&f[Y])Se(f.i,l);else{var v=l.type,R=l.proxy;f.removeEventListener?f.removeEventListener(v,R,l.capture):f.detachEvent?f.detachEvent(Bg(v),R):f.addListener&&f.removeListener&&f.removeListener(R),(v=Ad(f))?(Se(v,l),v.h==0&&(v.src=null,f[kt]=null)):ve(l)}}}function Bg(l){return l in $n?$n[l]:$n[l]="on"+l}function Eb(l,f){if(l.da)l=!0;else{f=new B(f,this);var v=l.listener,R=l.ha||l.src;l.fa&&Id(l),l=v.call(R,f)}return l}function Ad(l){return l=l[kt],l instanceof Ee?l:null}var Nd="__closure_events_fn_"+(1e9*Math.random()>>>0);function Hg(l){return typeof l=="function"?l:(l[Nd]||(l[Nd]=function(f){return l.handleEvent(f)}),l[Nd])}function mt(){U.call(this),this.i=new Ee(this),this.M=this,this.F=null}b(mt,U),mt.prototype[Y]=!0,mt.prototype.removeEventListener=function(l,f,v,R){ls(this,l,f,v,R)};function Ct(l,f){var v,R=l.F;if(R)for(v=[];R;R=R.F)v.push(R);if(l=l.M,R=f.type||f,typeof f=="string")f=new J(f,l);else if(f instanceof J)f.target=f.target||l;else{var M=f;f=new J(R,l),A(f,M)}if(M=!0,v)for(var F=v.length-1;0<=F;F--){var X=f.g=v[F];M=gl(X,R,!0,f)&&M}if(X=f.g=l,M=gl(X,R,!0,f)&&M,M=gl(X,R,!1,f)&&M,v)for(F=0;F<v.length;F++)X=f.g=v[F],M=gl(X,R,!1,f)&&M}mt.prototype.N=function(){if(mt.aa.N.call(this),this.i){var l=this.i,f;for(f in l.g){for(var v=l.g[f],R=0;R<v.length;R++)ve(v[R]);delete l.g[f],l.h--}}this.F=null},mt.prototype.K=function(l,f,v,R){return this.i.add(String(l),f,!1,v,R)},mt.prototype.L=function(l,f,v,R){return this.i.add(String(l),f,!0,v,R)};function gl(l,f,v,R){if(f=l.i.g[String(f)],!f)return!0;f=f.concat();for(var M=!0,F=0;F<f.length;++F){var X=f[F];if(X&&!X.da&&X.capture==v){var Pe=X.listener,lt=X.ha||X.src;X.fa&&Se(l.i,X),M=Pe.call(lt,R)!==!1&&M}}return M&&!R.defaultPrevented}function Wg(l,f,v){if(typeof l=="function")v&&(l=g(l,v));else if(l&&typeof l.handleEvent=="function")l=g(l.handleEvent,l);else throw Error("Invalid listener argument");return 2147483647<Number(f)?-1:a.setTimeout(l,f||0)}function qg(l){l.g=Wg(()=>{l.g=null,l.i&&(l.i=!1,qg(l))},l.l);const f=l.h;l.h=null,l.m.apply(null,f)}class Tb extends U{constructor(f,v){super(),this.m=f,this.l=v,this.h=null,this.i=!1,this.g=null}j(f){this.h=arguments,this.g?this.i=!0:qg(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function wo(l){U.call(this),this.h=l,this.g={}}b(wo,U);var Kg=[];function Gg(l){D(l.g,function(f,v){this.g.hasOwnProperty(v)&&Id(f)},l),l.g={}}wo.prototype.N=function(){wo.aa.N.call(this),Gg(this)},wo.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Pd=a.JSON.stringify,Sb=a.JSON.parse,Cb=class{stringify(l){return a.JSON.stringify(l,void 0)}parse(l){return a.JSON.parse(l,void 0)}};function kd(){}kd.prototype.h=null;function Qg(l){return l.h||(l.h=l.i())}function Yg(){}var _o={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function jd(){J.call(this,"d")}b(jd,J);function Dd(){J.call(this,"c")}b(Dd,J);var cs={},Xg=null;function vl(){return Xg=Xg||new mt}cs.La="serverreachability";function Jg(l){J.call(this,cs.La,l)}b(Jg,J);function Eo(l){const f=vl();Ct(f,new Jg(f))}cs.STAT_EVENT="statevent";function Zg(l,f){J.call(this,cs.STAT_EVENT,l),this.stat=f}b(Zg,J);function bt(l){const f=vl();Ct(f,new Zg(f,l))}cs.Ma="timingevent";function ev(l,f){J.call(this,cs.Ma,l),this.size=f}b(ev,J);function To(l,f){if(typeof l!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){l()},f)}function So(){this.g=!0}So.prototype.xa=function(){this.g=!1};function bb(l,f,v,R,M,F){l.info(function(){if(l.g)if(F)for(var X="",Pe=F.split("&"),lt=0;lt<Pe.length;lt++){var Ce=Pe[lt].split("=");if(1<Ce.length){var gt=Ce[0];Ce=Ce[1];var vt=gt.split("_");X=2<=vt.length&&vt[1]=="type"?X+(gt+"="+Ce+"&"):X+(gt+"=redacted&")}}else X=null;else X=F;return"XMLHTTP REQ ("+R+") [attempt "+M+"]: "+f+`
`+v+`
`+X})}function Rb(l,f,v,R,M,F,X){l.info(function(){return"XMLHTTP RESP ("+R+") [ attempt "+M+"]: "+f+`
`+v+`
`+F+" "+X})}function Ks(l,f,v,R){l.info(function(){return"XMLHTTP TEXT ("+f+"): "+Ab(l,v)+(R?" "+R:"")})}function Ib(l,f){l.info(function(){return"TIMEOUT: "+f})}So.prototype.info=function(){};function Ab(l,f){if(!l.g)return f;if(!f)return null;try{var v=JSON.parse(f);if(v){for(l=0;l<v.length;l++)if(Array.isArray(v[l])){var R=v[l];if(!(2>R.length)){var M=R[1];if(Array.isArray(M)&&!(1>M.length)){var F=M[0];if(F!="noop"&&F!="stop"&&F!="close")for(var X=1;X<M.length;X++)M[X]=""}}}}return Pd(v)}catch{return f}}var yl={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},tv={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Od;function xl(){}b(xl,kd),xl.prototype.g=function(){return new XMLHttpRequest},xl.prototype.i=function(){return{}},Od=new xl;function pr(l,f,v,R){this.j=l,this.i=f,this.l=v,this.R=R||1,this.U=new wo(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new nv}function nv(){this.i=null,this.g="",this.h=!1}var rv={},Vd={};function Md(l,f,v){l.L=1,l.v=Tl(Bn(f)),l.m=v,l.P=!0,sv(l,null)}function sv(l,f){l.F=Date.now(),wl(l),l.A=Bn(l.v);var v=l.A,R=l.R;Array.isArray(R)||(R=[String(R)]),yv(v.i,"t",R),l.C=0,v=l.j.J,l.h=new nv,l.g=Vv(l.j,v?f:null,!l.m),0<l.O&&(l.M=new Tb(g(l.Y,l,l.g),l.O)),f=l.U,v=l.g,R=l.ca;var M="readystatechange";Array.isArray(M)||(M&&(Kg[0]=M.toString()),M=Kg);for(var F=0;F<M.length;F++){var X=fr(v,M[F],R||f.handleEvent,!1,f.h||f);if(!X)break;f.g[X.key]=X}f=l.H?T(l.H):{},l.m?(l.u||(l.u="POST"),f["Content-Type"]="application/x-www-form-urlencoded",l.g.ea(l.A,l.u,l.m,f)):(l.u="GET",l.g.ea(l.A,l.u,null,f)),Eo(),bb(l.i,l.u,l.A,l.l,l.R,l.m)}pr.prototype.ca=function(l){l=l.target;const f=this.M;f&&Hn(l)==3?f.j():this.Y(l)},pr.prototype.Y=function(l){try{if(l==this.g)e:{const vt=Hn(this.g);var f=this.g.Ba();const Ys=this.g.Z();if(!(3>vt)&&(vt!=3||this.g&&(this.h.h||this.g.oa()||Cv(this.g)))){this.J||vt!=4||f==7||(f==8||0>=Ys?Eo(3):Eo(2)),Ld(this);var v=this.g.Z();this.X=v;t:if(iv(this)){var R=Cv(this.g);l="";var M=R.length,F=Hn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){us(this),Co(this);var X="";break t}this.h.i=new a.TextDecoder}for(f=0;f<M;f++)this.h.h=!0,l+=this.h.i.decode(R[f],{stream:!(F&&f==M-1)});R.length=0,this.h.g+=l,this.C=0,X=this.h.g}else X=this.g.oa();if(this.o=v==200,Rb(this.i,this.u,this.A,this.l,this.R,vt,v),this.o){if(this.T&&!this.K){t:{if(this.g){var Pe,lt=this.g;if((Pe=lt.g?lt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!y(Pe)){var Ce=Pe;break t}}Ce=null}if(v=Ce)Ks(this.i,this.l,v,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Fd(this,v);else{this.o=!1,this.s=3,bt(12),us(this),Co(this);break e}}if(this.P){v=!0;let hn;for(;!this.J&&this.C<X.length;)if(hn=Nb(this,X),hn==Vd){vt==4&&(this.s=4,bt(14),v=!1),Ks(this.i,this.l,null,"[Incomplete Response]");break}else if(hn==rv){this.s=4,bt(15),Ks(this.i,this.l,X,"[Invalid Chunk]"),v=!1;break}else Ks(this.i,this.l,hn,null),Fd(this,hn);if(iv(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),vt!=4||X.length!=0||this.h.h||(this.s=1,bt(16),v=!1),this.o=this.o&&v,!v)Ks(this.i,this.l,X,"[Invalid Chunked Response]"),us(this),Co(this);else if(0<X.length&&!this.W){this.W=!0;var gt=this.j;gt.g==this&&gt.ba&&!gt.M&&(gt.j.info("Great, no buffering proxy detected. Bytes received: "+X.length),Wd(gt),gt.M=!0,bt(11))}}else Ks(this.i,this.l,X,null),Fd(this,X);vt==4&&us(this),this.o&&!this.J&&(vt==4?kv(this.j,this):(this.o=!1,wl(this)))}else Kb(this.g),v==400&&0<X.indexOf("Unknown SID")?(this.s=3,bt(12)):(this.s=0,bt(13)),us(this),Co(this)}}}catch{}finally{}};function iv(l){return l.g?l.u=="GET"&&l.L!=2&&l.j.Ca:!1}function Nb(l,f){var v=l.C,R=f.indexOf(`
`,v);return R==-1?Vd:(v=Number(f.substring(v,R)),isNaN(v)?rv:(R+=1,R+v>f.length?Vd:(f=f.slice(R,R+v),l.C=R+v,f)))}pr.prototype.cancel=function(){this.J=!0,us(this)};function wl(l){l.S=Date.now()+l.I,ov(l,l.I)}function ov(l,f){if(l.B!=null)throw Error("WatchDog timer not null");l.B=To(g(l.ba,l),f)}function Ld(l){l.B&&(a.clearTimeout(l.B),l.B=null)}pr.prototype.ba=function(){this.B=null;const l=Date.now();0<=l-this.S?(Ib(this.i,this.A),this.L!=2&&(Eo(),bt(17)),us(this),this.s=2,Co(this)):ov(this,this.S-l)};function Co(l){l.j.G==0||l.J||kv(l.j,l)}function us(l){Ld(l);var f=l.M;f&&typeof f.ma=="function"&&f.ma(),l.M=null,Gg(l.U),l.g&&(f=l.g,l.g=null,f.abort(),f.ma())}function Fd(l,f){try{var v=l.j;if(v.G!=0&&(v.g==l||zd(v.h,l))){if(!l.K&&zd(v.h,l)&&v.G==3){try{var R=v.Da.g.parse(f)}catch{R=null}if(Array.isArray(R)&&R.length==3){var M=R;if(M[0]==0){e:if(!v.u){if(v.g)if(v.g.F+3e3<l.F)Al(v),Rl(v);else break e;Hd(v),bt(18)}}else v.za=M[1],0<v.za-v.T&&37500>M[2]&&v.F&&v.v==0&&!v.C&&(v.C=To(g(v.Za,v),6e3));if(1>=cv(v.h)&&v.ca){try{v.ca()}catch{}v.ca=void 0}}else hs(v,11)}else if((l.K||v.g==l)&&Al(v),!y(f))for(M=v.Da.g.parse(f),f=0;f<M.length;f++){let Ce=M[f];if(v.T=Ce[0],Ce=Ce[1],v.G==2)if(Ce[0]=="c"){v.K=Ce[1],v.ia=Ce[2];const gt=Ce[3];gt!=null&&(v.la=gt,v.j.info("VER="+v.la));const vt=Ce[4];vt!=null&&(v.Aa=vt,v.j.info("SVER="+v.Aa));const Ys=Ce[5];Ys!=null&&typeof Ys=="number"&&0<Ys&&(R=1.5*Ys,v.L=R,v.j.info("backChannelRequestTimeoutMs_="+R)),R=v;const hn=l.g;if(hn){const Pl=hn.g?hn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Pl){var F=R.h;F.g||Pl.indexOf("spdy")==-1&&Pl.indexOf("quic")==-1&&Pl.indexOf("h2")==-1||(F.j=F.l,F.g=new Set,F.h&&(Ud(F,F.h),F.h=null))}if(R.D){const qd=hn.g?hn.g.getResponseHeader("X-HTTP-Session-Id"):null;qd&&(R.ya=qd,je(R.I,R.D,qd))}}v.G=3,v.l&&v.l.ua(),v.ba&&(v.R=Date.now()-l.F,v.j.info("Handshake RTT: "+v.R+"ms")),R=v;var X=l;if(R.qa=Ov(R,R.J?R.ia:null,R.W),X.K){uv(R.h,X);var Pe=X,lt=R.L;lt&&(Pe.I=lt),Pe.B&&(Ld(Pe),wl(Pe)),R.g=X}else Nv(R);0<v.i.length&&Il(v)}else Ce[0]!="stop"&&Ce[0]!="close"||hs(v,7);else v.G==3&&(Ce[0]=="stop"||Ce[0]=="close"?Ce[0]=="stop"?hs(v,7):Bd(v):Ce[0]!="noop"&&v.l&&v.l.ta(Ce),v.v=0)}}Eo(4)}catch{}}var Pb=class{constructor(l,f){this.g=l,this.map=f}};function av(l){this.l=l||10,a.PerformanceNavigationTiming?(l=a.performance.getEntriesByType("navigation"),l=0<l.length&&(l[0].nextHopProtocol=="hq"||l[0].nextHopProtocol=="h2")):l=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=l?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function lv(l){return l.h?!0:l.g?l.g.size>=l.j:!1}function cv(l){return l.h?1:l.g?l.g.size:0}function zd(l,f){return l.h?l.h==f:l.g?l.g.has(f):!1}function Ud(l,f){l.g?l.g.add(f):l.h=f}function uv(l,f){l.h&&l.h==f?l.h=null:l.g&&l.g.has(f)&&l.g.delete(f)}av.prototype.cancel=function(){if(this.i=dv(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const l of this.g.values())l.cancel();this.g.clear()}};function dv(l){if(l.h!=null)return l.i.concat(l.h.D);if(l.g!=null&&l.g.size!==0){let f=l.i;for(const v of l.g.values())f=f.concat(v.D);return f}return x(l.i)}function kb(l){if(l.V&&typeof l.V=="function")return l.V();if(typeof Map<"u"&&l instanceof Map||typeof Set<"u"&&l instanceof Set)return Array.from(l.values());if(typeof l=="string")return l.split("");if(u(l)){for(var f=[],v=l.length,R=0;R<v;R++)f.push(l[R]);return f}f=[],v=0;for(R in l)f[v++]=l[R];return f}function jb(l){if(l.na&&typeof l.na=="function")return l.na();if(!l.V||typeof l.V!="function"){if(typeof Map<"u"&&l instanceof Map)return Array.from(l.keys());if(!(typeof Set<"u"&&l instanceof Set)){if(u(l)||typeof l=="string"){var f=[];l=l.length;for(var v=0;v<l;v++)f.push(v);return f}f=[],v=0;for(const R in l)f[v++]=R;return f}}}function hv(l,f){if(l.forEach&&typeof l.forEach=="function")l.forEach(f,void 0);else if(u(l)||typeof l=="string")Array.prototype.forEach.call(l,f,void 0);else for(var v=jb(l),R=kb(l),M=R.length,F=0;F<M;F++)f.call(void 0,R[F],v&&v[F],l)}var fv=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Db(l,f){if(l){l=l.split("&");for(var v=0;v<l.length;v++){var R=l[v].indexOf("="),M=null;if(0<=R){var F=l[v].substring(0,R);M=l[v].substring(R+1)}else F=l[v];f(F,M?decodeURIComponent(M.replace(/\+/g," ")):"")}}}function ds(l){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,l instanceof ds){this.h=l.h,_l(this,l.j),this.o=l.o,this.g=l.g,El(this,l.s),this.l=l.l;var f=l.i,v=new Io;v.i=f.i,f.g&&(v.g=new Map(f.g),v.h=f.h),pv(this,v),this.m=l.m}else l&&(f=String(l).match(fv))?(this.h=!1,_l(this,f[1]||"",!0),this.o=bo(f[2]||""),this.g=bo(f[3]||"",!0),El(this,f[4]),this.l=bo(f[5]||"",!0),pv(this,f[6]||"",!0),this.m=bo(f[7]||"")):(this.h=!1,this.i=new Io(null,this.h))}ds.prototype.toString=function(){var l=[],f=this.j;f&&l.push(Ro(f,mv,!0),":");var v=this.g;return(v||f=="file")&&(l.push("//"),(f=this.o)&&l.push(Ro(f,mv,!0),"@"),l.push(encodeURIComponent(String(v)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),v=this.s,v!=null&&l.push(":",String(v))),(v=this.l)&&(this.g&&v.charAt(0)!="/"&&l.push("/"),l.push(Ro(v,v.charAt(0)=="/"?Mb:Vb,!0))),(v=this.i.toString())&&l.push("?",v),(v=this.m)&&l.push("#",Ro(v,Fb)),l.join("")};function Bn(l){return new ds(l)}function _l(l,f,v){l.j=v?bo(f,!0):f,l.j&&(l.j=l.j.replace(/:$/,""))}function El(l,f){if(f){if(f=Number(f),isNaN(f)||0>f)throw Error("Bad port number "+f);l.s=f}else l.s=null}function pv(l,f,v){f instanceof Io?(l.i=f,zb(l.i,l.h)):(v||(f=Ro(f,Lb)),l.i=new Io(f,l.h))}function je(l,f,v){l.i.set(f,v)}function Tl(l){return je(l,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),l}function bo(l,f){return l?f?decodeURI(l.replace(/%25/g,"%2525")):decodeURIComponent(l):""}function Ro(l,f,v){return typeof l=="string"?(l=encodeURI(l).replace(f,Ob),v&&(l=l.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),l):null}function Ob(l){return l=l.charCodeAt(0),"%"+(l>>4&15).toString(16)+(l&15).toString(16)}var mv=/[#\/\?@]/g,Vb=/[#\?:]/g,Mb=/[#\?]/g,Lb=/[#\?@]/g,Fb=/#/g;function Io(l,f){this.h=this.g=null,this.i=l||null,this.j=!!f}function mr(l){l.g||(l.g=new Map,l.h=0,l.i&&Db(l.i,function(f,v){l.add(decodeURIComponent(f.replace(/\+/g," ")),v)}))}t=Io.prototype,t.add=function(l,f){mr(this),this.i=null,l=Gs(this,l);var v=this.g.get(l);return v||this.g.set(l,v=[]),v.push(f),this.h+=1,this};function gv(l,f){mr(l),f=Gs(l,f),l.g.has(f)&&(l.i=null,l.h-=l.g.get(f).length,l.g.delete(f))}function vv(l,f){return mr(l),f=Gs(l,f),l.g.has(f)}t.forEach=function(l,f){mr(this),this.g.forEach(function(v,R){v.forEach(function(M){l.call(f,M,R,this)},this)},this)},t.na=function(){mr(this);const l=Array.from(this.g.values()),f=Array.from(this.g.keys()),v=[];for(let R=0;R<f.length;R++){const M=l[R];for(let F=0;F<M.length;F++)v.push(f[R])}return v},t.V=function(l){mr(this);let f=[];if(typeof l=="string")vv(this,l)&&(f=f.concat(this.g.get(Gs(this,l))));else{l=Array.from(this.g.values());for(let v=0;v<l.length;v++)f=f.concat(l[v])}return f},t.set=function(l,f){return mr(this),this.i=null,l=Gs(this,l),vv(this,l)&&(this.h-=this.g.get(l).length),this.g.set(l,[f]),this.h+=1,this},t.get=function(l,f){return l?(l=this.V(l),0<l.length?String(l[0]):f):f};function yv(l,f,v){gv(l,f),0<v.length&&(l.i=null,l.g.set(Gs(l,f),x(v)),l.h+=v.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const l=[],f=Array.from(this.g.keys());for(var v=0;v<f.length;v++){var R=f[v];const F=encodeURIComponent(String(R)),X=this.V(R);for(R=0;R<X.length;R++){var M=F;X[R]!==""&&(M+="="+encodeURIComponent(String(X[R]))),l.push(M)}}return this.i=l.join("&")};function Gs(l,f){return f=String(f),l.j&&(f=f.toLowerCase()),f}function zb(l,f){f&&!l.j&&(mr(l),l.i=null,l.g.forEach(function(v,R){var M=R.toLowerCase();R!=M&&(gv(this,R),yv(this,M,v))},l)),l.j=f}function Ub(l,f){const v=new So;if(a.Image){const R=new Image;R.onload=w(gr,v,"TestLoadImage: loaded",!0,f,R),R.onerror=w(gr,v,"TestLoadImage: error",!1,f,R),R.onabort=w(gr,v,"TestLoadImage: abort",!1,f,R),R.ontimeout=w(gr,v,"TestLoadImage: timeout",!1,f,R),a.setTimeout(function(){R.ontimeout&&R.ontimeout()},1e4),R.src=l}else f(!1)}function $b(l,f){const v=new So,R=new AbortController,M=setTimeout(()=>{R.abort(),gr(v,"TestPingServer: timeout",!1,f)},1e4);fetch(l,{signal:R.signal}).then(F=>{clearTimeout(M),F.ok?gr(v,"TestPingServer: ok",!0,f):gr(v,"TestPingServer: server error",!1,f)}).catch(()=>{clearTimeout(M),gr(v,"TestPingServer: error",!1,f)})}function gr(l,f,v,R,M){try{M&&(M.onload=null,M.onerror=null,M.onabort=null,M.ontimeout=null),R(v)}catch{}}function Bb(){this.g=new Cb}function Hb(l,f,v){const R=v||"";try{hv(l,function(M,F){let X=M;d(M)&&(X=Pd(M)),f.push(R+F+"="+encodeURIComponent(X))})}catch(M){throw f.push(R+"type="+encodeURIComponent("_badmap")),M}}function Sl(l){this.l=l.Ub||null,this.j=l.eb||!1}b(Sl,kd),Sl.prototype.g=function(){return new Cl(this.l,this.j)},Sl.prototype.i=function(l){return function(){return l}}({});function Cl(l,f){mt.call(this),this.D=l,this.o=f,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}b(Cl,mt),t=Cl.prototype,t.open=function(l,f){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=l,this.A=f,this.readyState=1,No(this)},t.send=function(l){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const f={headers:this.u,method:this.B,credentials:this.m,cache:void 0};l&&(f.body=l),(this.D||a).fetch(new Request(this.A,f)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Ao(this)),this.readyState=0},t.Sa=function(l){if(this.g&&(this.l=l,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=l.headers,this.readyState=2,No(this)),this.g&&(this.readyState=3,No(this),this.g)))if(this.responseType==="arraybuffer")l.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in l){if(this.j=l.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;xv(this)}else l.text().then(this.Ra.bind(this),this.ga.bind(this))};function xv(l){l.j.read().then(l.Pa.bind(l)).catch(l.ga.bind(l))}t.Pa=function(l){if(this.g){if(this.o&&l.value)this.response.push(l.value);else if(!this.o){var f=l.value?l.value:new Uint8Array(0);(f=this.v.decode(f,{stream:!l.done}))&&(this.response=this.responseText+=f)}l.done?Ao(this):No(this),this.readyState==3&&xv(this)}},t.Ra=function(l){this.g&&(this.response=this.responseText=l,Ao(this))},t.Qa=function(l){this.g&&(this.response=l,Ao(this))},t.ga=function(){this.g&&Ao(this)};function Ao(l){l.readyState=4,l.l=null,l.j=null,l.v=null,No(l)}t.setRequestHeader=function(l,f){this.u.append(l,f)},t.getResponseHeader=function(l){return this.h&&this.h.get(l.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const l=[],f=this.h.entries();for(var v=f.next();!v.done;)v=v.value,l.push(v[0]+": "+v[1]),v=f.next();return l.join(`\r
`)};function No(l){l.onreadystatechange&&l.onreadystatechange.call(l)}Object.defineProperty(Cl.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(l){this.m=l?"include":"same-origin"}});function wv(l){let f="";return D(l,function(v,R){f+=R,f+=":",f+=v,f+=`\r
`}),f}function $d(l,f,v){e:{for(R in v){var R=!1;break e}R=!0}R||(v=wv(v),typeof l=="string"?v!=null&&encodeURIComponent(String(v)):je(l,f,v))}function Be(l){mt.call(this),this.headers=new Map,this.o=l||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}b(Be,mt);var Wb=/^https?$/i,qb=["POST","PUT"];t=Be.prototype,t.Ha=function(l){this.J=l},t.ea=function(l,f,v,R){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+l);f=f?f.toUpperCase():"GET",this.D=l,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Od.g(),this.v=this.o?Qg(this.o):Qg(Od),this.g.onreadystatechange=g(this.Ea,this);try{this.B=!0,this.g.open(f,String(l),!0),this.B=!1}catch(F){_v(this,F);return}if(l=v||"",v=new Map(this.headers),R)if(Object.getPrototypeOf(R)===Object.prototype)for(var M in R)v.set(M,R[M]);else if(typeof R.keys=="function"&&typeof R.get=="function")for(const F of R.keys())v.set(F,R.get(F));else throw Error("Unknown input type for opt_headers: "+String(R));R=Array.from(v.keys()).find(F=>F.toLowerCase()=="content-type"),M=a.FormData&&l instanceof a.FormData,!(0<=Array.prototype.indexOf.call(qb,f,void 0))||R||M||v.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[F,X]of v)this.g.setRequestHeader(F,X);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Sv(this),this.u=!0,this.g.send(l),this.u=!1}catch(F){_v(this,F)}};function _v(l,f){l.h=!1,l.g&&(l.j=!0,l.g.abort(),l.j=!1),l.l=f,l.m=5,Ev(l),bl(l)}function Ev(l){l.A||(l.A=!0,Ct(l,"complete"),Ct(l,"error"))}t.abort=function(l){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=l||7,Ct(this,"complete"),Ct(this,"abort"),bl(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),bl(this,!0)),Be.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?Tv(this):this.bb())},t.bb=function(){Tv(this)};function Tv(l){if(l.h&&typeof o<"u"&&(!l.v[1]||Hn(l)!=4||l.Z()!=2)){if(l.u&&Hn(l)==4)Wg(l.Ea,0,l);else if(Ct(l,"readystatechange"),Hn(l)==4){l.h=!1;try{const X=l.Z();e:switch(X){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var f=!0;break e;default:f=!1}var v;if(!(v=f)){var R;if(R=X===0){var M=String(l.D).match(fv)[1]||null;!M&&a.self&&a.self.location&&(M=a.self.location.protocol.slice(0,-1)),R=!Wb.test(M?M.toLowerCase():"")}v=R}if(v)Ct(l,"complete"),Ct(l,"success");else{l.m=6;try{var F=2<Hn(l)?l.g.statusText:""}catch{F=""}l.l=F+" ["+l.Z()+"]",Ev(l)}}finally{bl(l)}}}}function bl(l,f){if(l.g){Sv(l);const v=l.g,R=l.v[0]?()=>{}:null;l.g=null,l.v=null,f||Ct(l,"ready");try{v.onreadystatechange=R}catch{}}}function Sv(l){l.I&&(a.clearTimeout(l.I),l.I=null)}t.isActive=function(){return!!this.g};function Hn(l){return l.g?l.g.readyState:0}t.Z=function(){try{return 2<Hn(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(l){if(this.g){var f=this.g.responseText;return l&&f.indexOf(l)==0&&(f=f.substring(l.length)),Sb(f)}};function Cv(l){try{if(!l.g)return null;if("response"in l.g)return l.g.response;switch(l.H){case"":case"text":return l.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in l.g)return l.g.mozResponseArrayBuffer}return null}catch{return null}}function Kb(l){const f={};l=(l.g&&2<=Hn(l)&&l.g.getAllResponseHeaders()||"").split(`\r
`);for(let R=0;R<l.length;R++){if(y(l[R]))continue;var v=P(l[R]);const M=v[0];if(v=v[1],typeof v!="string")continue;v=v.trim();const F=f[M]||[];f[M]=F,F.push(v)}S(f,function(R){return R.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Po(l,f,v){return v&&v.internalChannelParams&&v.internalChannelParams[l]||f}function bv(l){this.Aa=0,this.i=[],this.j=new So,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Po("failFast",!1,l),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Po("baseRetryDelayMs",5e3,l),this.cb=Po("retryDelaySeedMs",1e4,l),this.Wa=Po("forwardChannelMaxRetries",2,l),this.wa=Po("forwardChannelRequestTimeoutMs",2e4,l),this.pa=l&&l.xmlHttpFactory||void 0,this.Xa=l&&l.Tb||void 0,this.Ca=l&&l.useFetchStreams||!1,this.L=void 0,this.J=l&&l.supportsCrossDomainXhr||!1,this.K="",this.h=new av(l&&l.concurrentRequestLimit),this.Da=new Bb,this.P=l&&l.fastHandshake||!1,this.O=l&&l.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=l&&l.Rb||!1,l&&l.xa&&this.j.xa(),l&&l.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&l&&l.detectBufferingProxy||!1,this.ja=void 0,l&&l.longPollingTimeout&&0<l.longPollingTimeout&&(this.ja=l.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=bv.prototype,t.la=8,t.G=1,t.connect=function(l,f,v,R){bt(0),this.W=l,this.H=f||{},v&&R!==void 0&&(this.H.OSID=v,this.H.OAID=R),this.F=this.X,this.I=Ov(this,null,this.W),Il(this)};function Bd(l){if(Rv(l),l.G==3){var f=l.U++,v=Bn(l.I);if(je(v,"SID",l.K),je(v,"RID",f),je(v,"TYPE","terminate"),ko(l,v),f=new pr(l,l.j,f),f.L=2,f.v=Tl(Bn(v)),v=!1,a.navigator&&a.navigator.sendBeacon)try{v=a.navigator.sendBeacon(f.v.toString(),"")}catch{}!v&&a.Image&&(new Image().src=f.v,v=!0),v||(f.g=Vv(f.j,null),f.g.ea(f.v)),f.F=Date.now(),wl(f)}Dv(l)}function Rl(l){l.g&&(Wd(l),l.g.cancel(),l.g=null)}function Rv(l){Rl(l),l.u&&(a.clearTimeout(l.u),l.u=null),Al(l),l.h.cancel(),l.s&&(typeof l.s=="number"&&a.clearTimeout(l.s),l.s=null)}function Il(l){if(!lv(l.h)&&!l.s){l.s=!0;var f=l.Ga;z||Z(),V||(z(),V=!0),$.add(f,l),l.B=0}}function Gb(l,f){return cv(l.h)>=l.h.j-(l.s?1:0)?!1:l.s?(l.i=f.D.concat(l.i),!0):l.G==1||l.G==2||l.B>=(l.Va?0:l.Wa)?!1:(l.s=To(g(l.Ga,l,f),jv(l,l.B)),l.B++,!0)}t.Ga=function(l){if(this.s)if(this.s=null,this.G==1){if(!l){this.U=Math.floor(1e5*Math.random()),l=this.U++;const M=new pr(this,this.j,l);let F=this.o;if(this.S&&(F?(F=T(F),A(F,this.S)):F=this.S),this.m!==null||this.O||(M.H=F,F=null),this.P)e:{for(var f=0,v=0;v<this.i.length;v++){t:{var R=this.i[v];if("__data__"in R.map&&(R=R.map.__data__,typeof R=="string")){R=R.length;break t}R=void 0}if(R===void 0)break;if(f+=R,4096<f){f=v;break e}if(f===4096||v===this.i.length-1){f=v+1;break e}}f=1e3}else f=1e3;f=Av(this,M,f),v=Bn(this.I),je(v,"RID",l),je(v,"CVER",22),this.D&&je(v,"X-HTTP-Session-Id",this.D),ko(this,v),F&&(this.O?f="headers="+encodeURIComponent(String(wv(F)))+"&"+f:this.m&&$d(v,this.m,F)),Ud(this.h,M),this.Ua&&je(v,"TYPE","init"),this.P?(je(v,"$req",f),je(v,"SID","null"),M.T=!0,Md(M,v,null)):Md(M,v,f),this.G=2}}else this.G==3&&(l?Iv(this,l):this.i.length==0||lv(this.h)||Iv(this))};function Iv(l,f){var v;f?v=f.l:v=l.U++;const R=Bn(l.I);je(R,"SID",l.K),je(R,"RID",v),je(R,"AID",l.T),ko(l,R),l.m&&l.o&&$d(R,l.m,l.o),v=new pr(l,l.j,v,l.B+1),l.m===null&&(v.H=l.o),f&&(l.i=f.D.concat(l.i)),f=Av(l,v,1e3),v.I=Math.round(.5*l.wa)+Math.round(.5*l.wa*Math.random()),Ud(l.h,v),Md(v,R,f)}function ko(l,f){l.H&&D(l.H,function(v,R){je(f,R,v)}),l.l&&hv({},function(v,R){je(f,R,v)})}function Av(l,f,v){v=Math.min(l.i.length,v);var R=l.l?g(l.l.Na,l.l,l):null;e:{var M=l.i;let F=-1;for(;;){const X=["count="+v];F==-1?0<v?(F=M[0].g,X.push("ofs="+F)):F=0:X.push("ofs="+F);let Pe=!0;for(let lt=0;lt<v;lt++){let Ce=M[lt].g;const gt=M[lt].map;if(Ce-=F,0>Ce)F=Math.max(0,M[lt].g-100),Pe=!1;else try{Hb(gt,X,"req"+Ce+"_")}catch{R&&R(gt)}}if(Pe){R=X.join("&");break e}}}return l=l.i.splice(0,v),f.D=l,R}function Nv(l){if(!l.g&&!l.u){l.Y=1;var f=l.Fa;z||Z(),V||(z(),V=!0),$.add(f,l),l.v=0}}function Hd(l){return l.g||l.u||3<=l.v?!1:(l.Y++,l.u=To(g(l.Fa,l),jv(l,l.v)),l.v++,!0)}t.Fa=function(){if(this.u=null,Pv(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var l=2*this.R;this.j.info("BP detection timer enabled: "+l),this.A=To(g(this.ab,this),l)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,bt(10),Rl(this),Pv(this))};function Wd(l){l.A!=null&&(a.clearTimeout(l.A),l.A=null)}function Pv(l){l.g=new pr(l,l.j,"rpc",l.Y),l.m===null&&(l.g.H=l.o),l.g.O=0;var f=Bn(l.qa);je(f,"RID","rpc"),je(f,"SID",l.K),je(f,"AID",l.T),je(f,"CI",l.F?"0":"1"),!l.F&&l.ja&&je(f,"TO",l.ja),je(f,"TYPE","xmlhttp"),ko(l,f),l.m&&l.o&&$d(f,l.m,l.o),l.L&&(l.g.I=l.L);var v=l.g;l=l.ia,v.L=1,v.v=Tl(Bn(f)),v.m=null,v.P=!0,sv(v,l)}t.Za=function(){this.C!=null&&(this.C=null,Rl(this),Hd(this),bt(19))};function Al(l){l.C!=null&&(a.clearTimeout(l.C),l.C=null)}function kv(l,f){var v=null;if(l.g==f){Al(l),Wd(l),l.g=null;var R=2}else if(zd(l.h,f))v=f.D,uv(l.h,f),R=1;else return;if(l.G!=0){if(f.o)if(R==1){v=f.m?f.m.length:0,f=Date.now()-f.F;var M=l.B;R=vl(),Ct(R,new ev(R,v)),Il(l)}else Nv(l);else if(M=f.s,M==3||M==0&&0<f.X||!(R==1&&Gb(l,f)||R==2&&Hd(l)))switch(v&&0<v.length&&(f=l.h,f.i=f.i.concat(v)),M){case 1:hs(l,5);break;case 4:hs(l,10);break;case 3:hs(l,6);break;default:hs(l,2)}}}function jv(l,f){let v=l.Ta+Math.floor(Math.random()*l.cb);return l.isActive()||(v*=2),v*f}function hs(l,f){if(l.j.info("Error code "+f),f==2){var v=g(l.fb,l),R=l.Xa;const M=!R;R=new ds(R||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||_l(R,"https"),Tl(R),M?Ub(R.toString(),v):$b(R.toString(),v)}else bt(2);l.G=0,l.l&&l.l.sa(f),Dv(l),Rv(l)}t.fb=function(l){l?(this.j.info("Successfully pinged google.com"),bt(2)):(this.j.info("Failed to ping google.com"),bt(1))};function Dv(l){if(l.G=0,l.ka=[],l.l){const f=dv(l.h);(f.length!=0||l.i.length!=0)&&(E(l.ka,f),E(l.ka,l.i),l.h.i.length=0,x(l.i),l.i.length=0),l.l.ra()}}function Ov(l,f,v){var R=v instanceof ds?Bn(v):new ds(v);if(R.g!="")f&&(R.g=f+"."+R.g),El(R,R.s);else{var M=a.location;R=M.protocol,f=f?f+"."+M.hostname:M.hostname,M=+M.port;var F=new ds(null);R&&_l(F,R),f&&(F.g=f),M&&El(F,M),v&&(F.l=v),R=F}return v=l.D,f=l.ya,v&&f&&je(R,v,f),je(R,"VER",l.la),ko(l,R),R}function Vv(l,f,v){if(f&&!l.J)throw Error("Can't create secondary domain capable XhrIo object.");return f=l.Ca&&!l.pa?new Be(new Sl({eb:v})):new Be(l.pa),f.Ha(l.J),f}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Mv(){}t=Mv.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Nl(){}Nl.prototype.g=function(l,f){return new Ht(l,f)};function Ht(l,f){mt.call(this),this.g=new bv(f),this.l=l,this.h=f&&f.messageUrlParams||null,l=f&&f.messageHeaders||null,f&&f.clientProtocolHeaderRequired&&(l?l["X-Client-Protocol"]="webchannel":l={"X-Client-Protocol":"webchannel"}),this.g.o=l,l=f&&f.initMessageHeaders||null,f&&f.messageContentType&&(l?l["X-WebChannel-Content-Type"]=f.messageContentType:l={"X-WebChannel-Content-Type":f.messageContentType}),f&&f.va&&(l?l["X-WebChannel-Client-Profile"]=f.va:l={"X-WebChannel-Client-Profile":f.va}),this.g.S=l,(l=f&&f.Sb)&&!y(l)&&(this.g.m=l),this.v=f&&f.supportsCrossDomainXhr||!1,this.u=f&&f.sendRawJson||!1,(f=f&&f.httpSessionIdParam)&&!y(f)&&(this.g.D=f,l=this.h,l!==null&&f in l&&(l=this.h,f in l&&delete l[f])),this.j=new Qs(this)}b(Ht,mt),Ht.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Ht.prototype.close=function(){Bd(this.g)},Ht.prototype.o=function(l){var f=this.g;if(typeof l=="string"){var v={};v.__data__=l,l=v}else this.u&&(v={},v.__data__=Pd(l),l=v);f.i.push(new Pb(f.Ya++,l)),f.G==3&&Il(f)},Ht.prototype.N=function(){this.g.l=null,delete this.j,Bd(this.g),delete this.g,Ht.aa.N.call(this)};function Lv(l){jd.call(this),l.__headers__&&(this.headers=l.__headers__,this.statusCode=l.__status__,delete l.__headers__,delete l.__status__);var f=l.__sm__;if(f){e:{for(const v in f){l=v;break e}l=void 0}(this.i=l)&&(l=this.i,f=f!==null&&l in f?f[l]:void 0),this.data=f}else this.data=l}b(Lv,jd);function Fv(){Dd.call(this),this.status=1}b(Fv,Dd);function Qs(l){this.g=l}b(Qs,Mv),Qs.prototype.ua=function(){Ct(this.g,"a")},Qs.prototype.ta=function(l){Ct(this.g,new Lv(l))},Qs.prototype.sa=function(l){Ct(this.g,new Fv)},Qs.prototype.ra=function(){Ct(this.g,"b")},Nl.prototype.createWebChannel=Nl.prototype.g,Ht.prototype.send=Ht.prototype.o,Ht.prototype.open=Ht.prototype.m,Ht.prototype.close=Ht.prototype.close,uS=function(){return new Nl},cS=function(){return vl()},lS=cs,ap={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},yl.NO_ERROR=0,yl.TIMEOUT=8,yl.HTTP_ERROR=6,Cc=yl,tv.COMPLETE="complete",aS=tv,Yg.EventType=_o,_o.OPEN="a",_o.CLOSE="b",_o.ERROR="c",_o.MESSAGE="d",mt.prototype.listen=mt.prototype.K,Qo=Yg,Be.prototype.listenOnce=Be.prototype.L,Be.prototype.getLastError=Be.prototype.Ka,Be.prototype.getLastErrorCode=Be.prototype.Ba,Be.prototype.getStatus=Be.prototype.Z,Be.prototype.getResponseJson=Be.prototype.Oa,Be.prototype.getResponseText=Be.prototype.oa,Be.prototype.send=Be.prototype.ea,Be.prototype.setWithCredentials=Be.prototype.Ha,oS=Be}).apply(typeof nc<"u"?nc:typeof self<"u"?self:typeof window<"u"?window:{});const Hx="@firebase/firestore",Wx="4.7.17";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _t{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}_t.UNAUTHENTICATED=new _t(null),_t.GOOGLE_CREDENTIALS=new _t("google-credentials-uid"),_t.FIRST_PARTY=new _t("first-party-uid"),_t.MOCK_USER=new _t("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let po="11.9.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ls=new ZT("@firebase/firestore");function ni(){return Ls.logLevel}function te(t,...e){if(Ls.logLevel<=_e.DEBUG){const n=e.map(eg);Ls.debug(`Firestore (${po}): ${t}`,...n)}}function lr(t,...e){if(Ls.logLevel<=_e.ERROR){const n=e.map(eg);Ls.error(`Firestore (${po}): ${t}`,...n)}}function Gi(t,...e){if(Ls.logLevel<=_e.WARN){const n=e.map(eg);Ls.warn(`Firestore (${po}): ${t}`,...n)}}function eg(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oe(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,dS(t,r,n)}function dS(t,e,n){let r=`FIRESTORE (${po}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw lr(r),new Error(r)}function Ie(t,e,n,r){let s="Unexpected state";typeof n=="string"?s=n:r=n,t||dS(e,s,r)}function he(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class re extends fo{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zn{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hS{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class nO{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(_t.UNAUTHENTICATED))}shutdown(){}}class rO{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class sO{constructor(e){this.t=e,this.currentUser=_t.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Ie(this.o===void 0,42304);let r=this.i;const s=u=>this.i!==r?(r=this.i,n(u)):Promise.resolve();let i=new Zn;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new Zn,e.enqueueRetryable(()=>s(this.currentUser))};const o=()=>{const u=i;e.enqueueRetryable(async()=>{await u.promise,await s(this.currentUser)})},a=u=>{te("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(u=>a(u)),setTimeout(()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?a(u):(te("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new Zn)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(te("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Ie(typeof r.accessToken=="string",31837,{l:r}),new hS(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Ie(e===null||typeof e=="string",2055,{h:e}),new _t(e)}}class iO{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=_t.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class oO{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new iO(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(_t.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class qx{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class aO{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,L4(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){Ie(this.o===void 0,3512);const r=i=>{i.error!=null&&te("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const o=i.token!==this.m;return this.m=i.token,te("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>r(i))};const s=i=>{te("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(i=>s(i)),setTimeout(()=>{if(!this.appCheck){const i=this.V.getImmediate({optional:!0});i?s(i):te("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new qx(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Ie(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new qx(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lO(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fS(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pS{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const s=lO(40);for(let i=0;i<s.length;++i)r.length<20&&s[i]<n&&(r+=e.charAt(s[i]%62))}return r}}function me(t,e){return t<e?-1:t>e?1:0}function lp(t,e){let n=0;for(;n<t.length&&n<e.length;){const r=t.codePointAt(n),s=e.codePointAt(n);if(r!==s){if(r<128&&s<128)return me(r,s);{const i=fS(),o=cO(i.encode(Kx(t,n)),i.encode(Kx(e,n)));return o!==0?o:me(r,s)}}n+=r>65535?2:1}return me(t.length,e.length)}function Kx(t,e){return t.codePointAt(e)>65535?t.substring(e,e+2):t.substring(e,e+1)}function cO(t,e){for(let n=0;n<t.length&&n<e.length;++n)if(t[n]!==e[n])return me(t[n],e[n]);return me(t.length,e.length)}function Qi(t,e,n){return t.length===e.length&&t.every((r,s)=>n(r,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gx=-62135596800,Qx=1e6;class We{static now(){return We.fromMillis(Date.now())}static fromDate(e){return We.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*Qx);return new We(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new re(q.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new re(q.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<Gx)throw new re(q.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new re(q.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Qx}_compareTo(e){return this.seconds===e.seconds?me(this.nanoseconds,e.nanoseconds):me(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds-Gx;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ue{static fromTimestamp(e){return new ue(e)}static min(){return new ue(new We(0,0))}static max(){return new ue(new We(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yx="__name__";class Nn{constructor(e,n,r){n===void 0?n=0:n>e.length&&oe(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&oe(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return Nn.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Nn?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let s=0;s<r;s++){const i=Nn.compareSegments(e.get(s),n.get(s));if(i!==0)return i}return me(e.length,n.length)}static compareSegments(e,n){const r=Nn.isNumericId(e),s=Nn.isNumericId(n);return r&&!s?-1:!r&&s?1:r&&s?Nn.extractNumericId(e).compare(Nn.extractNumericId(n)):lp(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Fr.fromString(e.substring(4,e.length-2))}}class Ve extends Nn{construct(e,n,r){return new Ve(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new re(q.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(s=>s.length>0))}return new Ve(n)}static emptyPath(){return new Ve([])}}const uO=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class dt extends Nn{construct(e,n,r){return new dt(e,n,r)}static isValidIdentifier(e){return uO.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),dt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Yx}static keyField(){return new dt([Yx])}static fromServerFormat(e){const n=[];let r="",s=0;const i=()=>{if(r.length===0)throw new re(q.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;s<e.length;){const a=e[s];if(a==="\\"){if(s+1===e.length)throw new re(q.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const u=e[s+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new re(q.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,s+=2}else a==="`"?(o=!o,s++):a!=="."||o?(r+=a,s++):(i(),s++)}if(i(),o)throw new re(q.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new dt(n)}static emptyPath(){return new dt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ie{constructor(e){this.path=e}static fromPath(e){return new ie(Ve.fromString(e))}static fromName(e){return new ie(Ve.fromString(e).popFirst(5))}static empty(){return new ie(Ve.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Ve.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Ve.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ie(new Ve(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ua=-1;function dO(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,s=ue.fromTimestamp(r===1e9?new We(n+1,0):new We(n,r));return new Wr(s,ie.empty(),e)}function hO(t){return new Wr(t.readTime,t.key,Ua)}class Wr{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Wr(ue.min(),ie.empty(),Ua)}static max(){return new Wr(ue.max(),ie.empty(),Ua)}}function fO(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=ie.comparator(t.documentKey,e.documentKey),n!==0?n:me(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pO="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class mO{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mo(t){if(t.code!==q.FAILED_PRECONDITION||t.message!==pO)throw t;te("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&oe(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new W((r,s)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(r,s)},this.catchCallback=i=>{this.wrapFailure(n,i).next(r,s)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof W?n:W.resolve(n)}catch(n){return W.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):W.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):W.reject(n)}static resolve(e){return new W((n,r)=>{n(e)})}static reject(e){return new W((n,r)=>{r(e)})}static waitFor(e){return new W((n,r)=>{let s=0,i=0,o=!1;e.forEach(a=>{++s,a.next(()=>{++i,o&&i===s&&n()},u=>r(u))}),o=!0,i===s&&n()})}static or(e){let n=W.resolve(!1);for(const r of e)n=n.next(s=>s?W.resolve(s):r());return n}static forEach(e,n){const r=[];return e.forEach((s,i)=>{r.push(n.call(this,s,i))}),this.waitFor(r)}static mapArray(e,n){return new W((r,s)=>{const i=e.length,o=new Array(i);let a=0;for(let u=0;u<i;u++){const d=u;n(e[d]).next(h=>{o[d]=h,++a,a===i&&r(o)},h=>s(h))}})}static doWhile(e,n){return new W((r,s)=>{const i=()=>{e()===!0?n().next(()=>{i()},s):r()};i()})}}function gO(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function go(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class od{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ue(r),this.ce=r=>n.writeSequenceNumber(r))}ue(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ce&&this.ce(e),e}}od.le=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tg=-1;function ad(t){return t==null}function du(t){return t===0&&1/t==-1/0}function vO(t){return typeof t=="number"&&Number.isInteger(t)&&!du(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mS="";function yO(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=Xx(e)),e=xO(t.get(n),e);return Xx(e)}function xO(t,e){let n=e;const r=t.length;for(let s=0;s<r;s++){const i=t.charAt(s);switch(i){case"\0":n+="";break;case mS:n+="";break;default:n+=i}}return n}function Xx(t){return t+mS+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jx(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function ss(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function gS(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $e{constructor(e,n){this.comparator=e,this.root=n||ut.EMPTY}insert(e,n){return new $e(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,ut.BLACK,null,null))}remove(e){return new $e(this.comparator,this.root.remove(e,this.comparator).copy(null,null,ut.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new rc(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new rc(this.root,e,this.comparator,!1)}getReverseIterator(){return new rc(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new rc(this.root,e,this.comparator,!0)}}class rc{constructor(e,n,r,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=n?r(e.key,n):1,n&&s&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class ut{constructor(e,n,r,s,i){this.key=e,this.value=n,this.color=r??ut.RED,this.left=s??ut.EMPTY,this.right=i??ut.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,s,i){return new ut(e??this.key,n??this.value,r??this.color,s??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const i=r(e,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(e,n,r),null):i===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return ut.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return ut.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,ut.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,ut.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw oe(43730,{key:this.key,value:this.value});if(this.right.isRed())throw oe(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw oe(27949);return e+(this.isRed()?0:1)}}ut.EMPTY=null,ut.RED=!0,ut.BLACK=!1;ut.EMPTY=new class{constructor(){this.size=0}get key(){throw oe(57766)}get value(){throw oe(16141)}get color(){throw oe(16727)}get left(){throw oe(29726)}get right(){throw oe(36894)}copy(e,n,r,s,i){return this}insert(e,n,r){return new ut(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class et{constructor(e){this.comparator=e,this.data=new $e(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Zx(this.data.getIterator())}getIteratorFrom(e){return new Zx(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof et)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(this.comparator(s,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new et(this.comparator);return n.data=e,n}}class Zx{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yt{constructor(e){this.fields=e,e.sort(dt.comparator)}static empty(){return new Yt([])}unionWith(e){let n=new et(dt.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new Yt(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Qi(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vS extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(s){try{return atob(s)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new vS("Invalid base64 string: "+i):i}}(e);return new pt(n)}static fromUint8Array(e){const n=function(s){let i="";for(let o=0;o<s.length;++o)i+=String.fromCharCode(s[o]);return i}(e);return new pt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return me(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}pt.EMPTY_BYTE_STRING=new pt("");const wO=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function qr(t){if(Ie(!!t,39018),typeof t=="string"){let e=0;const n=wO.exec(t);if(Ie(!!n,46558,{timestamp:t}),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:qe(t.seconds),nanos:qe(t.nanos)}}function qe(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Kr(t){return typeof t=="string"?pt.fromBase64String(t):pt.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yS="server_timestamp",xS="__type__",wS="__previous_value__",_S="__local_write_time__";function ng(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{})[xS])===null||n===void 0?void 0:n.stringValue)===yS}function ld(t){const e=t.mapValue.fields[wS];return ng(e)?ld(e):e}function $a(t){const e=qr(t.mapValue.fields[_S].timestampValue);return new We(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _O{constructor(e,n,r,s,i,o,a,u,d,h){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=u,this.useFetchStreams=d,this.isUsingEmulator=h}}const hu="(default)";class Ba{constructor(e,n){this.projectId=e,this.database=n||hu}static empty(){return new Ba("","")}get isDefaultDatabase(){return this.database===hu}isEqual(e){return e instanceof Ba&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ES="__type__",EO="__max__",sc={mapValue:{}},TS="__vector__",fu="value";function Gr(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?ng(t)?4:SO(t)?9007199254740991:TO(t)?10:11:oe(28295,{value:t})}function zn(t,e){if(t===e)return!0;const n=Gr(t);if(n!==Gr(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return $a(t).isEqual($a(e));case 3:return function(s,i){if(typeof s.timestampValue=="string"&&typeof i.timestampValue=="string"&&s.timestampValue.length===i.timestampValue.length)return s.timestampValue===i.timestampValue;const o=qr(s.timestampValue),a=qr(i.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,i){return Kr(s.bytesValue).isEqual(Kr(i.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,i){return qe(s.geoPointValue.latitude)===qe(i.geoPointValue.latitude)&&qe(s.geoPointValue.longitude)===qe(i.geoPointValue.longitude)}(t,e);case 2:return function(s,i){if("integerValue"in s&&"integerValue"in i)return qe(s.integerValue)===qe(i.integerValue);if("doubleValue"in s&&"doubleValue"in i){const o=qe(s.doubleValue),a=qe(i.doubleValue);return o===a?du(o)===du(a):isNaN(o)&&isNaN(a)}return!1}(t,e);case 9:return Qi(t.arrayValue.values||[],e.arrayValue.values||[],zn);case 10:case 11:return function(s,i){const o=s.mapValue.fields||{},a=i.mapValue.fields||{};if(Jx(o)!==Jx(a))return!1;for(const u in o)if(o.hasOwnProperty(u)&&(a[u]===void 0||!zn(o[u],a[u])))return!1;return!0}(t,e);default:return oe(52216,{left:t})}}function Ha(t,e){return(t.values||[]).find(n=>zn(n,e))!==void 0}function Yi(t,e){if(t===e)return 0;const n=Gr(t),r=Gr(e);if(n!==r)return me(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return me(t.booleanValue,e.booleanValue);case 2:return function(i,o){const a=qe(i.integerValue||i.doubleValue),u=qe(o.integerValue||o.doubleValue);return a<u?-1:a>u?1:a===u?0:isNaN(a)?isNaN(u)?0:-1:1}(t,e);case 3:return ew(t.timestampValue,e.timestampValue);case 4:return ew($a(t),$a(e));case 5:return lp(t.stringValue,e.stringValue);case 6:return function(i,o){const a=Kr(i),u=Kr(o);return a.compareTo(u)}(t.bytesValue,e.bytesValue);case 7:return function(i,o){const a=i.split("/"),u=o.split("/");for(let d=0;d<a.length&&d<u.length;d++){const h=me(a[d],u[d]);if(h!==0)return h}return me(a.length,u.length)}(t.referenceValue,e.referenceValue);case 8:return function(i,o){const a=me(qe(i.latitude),qe(o.latitude));return a!==0?a:me(qe(i.longitude),qe(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return tw(t.arrayValue,e.arrayValue);case 10:return function(i,o){var a,u,d,h;const p=i.fields||{},g=o.fields||{},w=(a=p[fu])===null||a===void 0?void 0:a.arrayValue,b=(u=g[fu])===null||u===void 0?void 0:u.arrayValue,x=me(((d=w==null?void 0:w.values)===null||d===void 0?void 0:d.length)||0,((h=b==null?void 0:b.values)===null||h===void 0?void 0:h.length)||0);return x!==0?x:tw(w,b)}(t.mapValue,e.mapValue);case 11:return function(i,o){if(i===sc.mapValue&&o===sc.mapValue)return 0;if(i===sc.mapValue)return 1;if(o===sc.mapValue)return-1;const a=i.fields||{},u=Object.keys(a),d=o.fields||{},h=Object.keys(d);u.sort(),h.sort();for(let p=0;p<u.length&&p<h.length;++p){const g=lp(u[p],h[p]);if(g!==0)return g;const w=Yi(a[u[p]],d[h[p]]);if(w!==0)return w}return me(u.length,h.length)}(t.mapValue,e.mapValue);default:throw oe(23264,{Pe:n})}}function ew(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return me(t,e);const n=qr(t),r=qr(e),s=me(n.seconds,r.seconds);return s!==0?s:me(n.nanos,r.nanos)}function tw(t,e){const n=t.values||[],r=e.values||[];for(let s=0;s<n.length&&s<r.length;++s){const i=Yi(n[s],r[s]);if(i)return i}return me(n.length,r.length)}function Xi(t){return cp(t)}function cp(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=qr(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Kr(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return ie.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",s=!0;for(const i of n.values||[])s?s=!1:r+=",",r+=cp(i);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let s="{",i=!0;for(const o of r)i?i=!1:s+=",",s+=`${o}:${cp(n.fields[o])}`;return s+"}"}(t.mapValue):oe(61005,{value:t})}function bc(t){switch(Gr(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=ld(t);return e?16+bc(e):16;case 5:return 2*t.stringValue.length;case 6:return Kr(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((s,i)=>s+bc(i),0)}(t.arrayValue);case 10:case 11:return function(r){let s=0;return ss(r.fields,(i,o)=>{s+=i.length+bc(o)}),s}(t.mapValue);default:throw oe(13486,{value:t})}}function nw(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function up(t){return!!t&&"integerValue"in t}function rg(t){return!!t&&"arrayValue"in t}function rw(t){return!!t&&"nullValue"in t}function sw(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Rc(t){return!!t&&"mapValue"in t}function TO(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{})[ES])===null||n===void 0?void 0:n.stringValue)===TS}function ha(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return ss(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=ha(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=ha(t.arrayValue.values[n]);return e}return Object.assign({},t)}function SO(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===EO}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ot{constructor(e){this.value=e}static empty(){return new Ot({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Rc(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=ha(n)}setAll(e){let n=dt.emptyPath(),r={},s=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const u=this.getFieldsMap(n);this.applyChanges(u,r,s),r={},s=[],n=a.popLast()}o?r[a.lastSegment()]=ha(o):s.push(a.lastSegment())});const i=this.getFieldsMap(n);this.applyChanges(i,r,s)}delete(e){const n=this.field(e.popLast());Rc(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return zn(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=n.mapValue.fields[e.get(r)];Rc(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,r){ss(n,(s,i)=>e[s]=i);for(const s of r)delete e[s]}clone(){return new Ot(ha(this.value))}}function SS(t){const e=[];return ss(t.fields,(n,r)=>{const s=new dt([n]);if(Rc(r)){const i=SS(r.mapValue).fields;if(i.length===0)e.push(s);else for(const o of i)e.push(s.child(o))}else e.push(s)}),new Yt(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tt{constructor(e,n,r,s,i,o,a){this.key=e,this.documentType=n,this.version=r,this.readTime=s,this.createTime=i,this.data=o,this.documentState=a}static newInvalidDocument(e){return new Tt(e,0,ue.min(),ue.min(),ue.min(),Ot.empty(),0)}static newFoundDocument(e,n,r,s){return new Tt(e,1,n,ue.min(),r,s,0)}static newNoDocument(e,n){return new Tt(e,2,n,ue.min(),ue.min(),Ot.empty(),0)}static newUnknownDocument(e,n){return new Tt(e,3,n,ue.min(),ue.min(),Ot.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(ue.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Ot.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Ot.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ue.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Tt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Tt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pu{constructor(e,n){this.position=e,this.inclusive=n}}function iw(t,e,n){let r=0;for(let s=0;s<t.position.length;s++){const i=e[s],o=t.position[s];if(i.field.isKeyField()?r=ie.comparator(ie.fromName(o.referenceValue),n.key):r=Yi(o,n.data.field(i.field)),i.dir==="desc"&&(r*=-1),r!==0)break}return r}function ow(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!zn(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mu{constructor(e,n="asc"){this.field=e,this.dir=n}}function CO(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CS{}class Xe extends CS{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new RO(e,n,r):n==="array-contains"?new NO(e,r):n==="in"?new PO(e,r):n==="not-in"?new kO(e,r):n==="array-contains-any"?new jO(e,r):new Xe(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new IO(e,r):new AO(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(Yi(n,this.value)):n!==null&&Gr(this.value)===Gr(n)&&this.matchesComparison(Yi(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return oe(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Cn extends CS{constructor(e,n){super(),this.filters=e,this.op=n,this.Te=null}static create(e,n){return new Cn(e,n)}matches(e){return bS(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.Te!==null||(this.Te=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.Te}getFilters(){return Object.assign([],this.filters)}}function bS(t){return t.op==="and"}function RS(t){return bO(t)&&bS(t)}function bO(t){for(const e of t.filters)if(e instanceof Cn)return!1;return!0}function dp(t){if(t instanceof Xe)return t.field.canonicalString()+t.op.toString()+Xi(t.value);if(RS(t))return t.filters.map(e=>dp(e)).join(",");{const e=t.filters.map(n=>dp(n)).join(",");return`${t.op}(${e})`}}function IS(t,e){return t instanceof Xe?function(r,s){return s instanceof Xe&&r.op===s.op&&r.field.isEqual(s.field)&&zn(r.value,s.value)}(t,e):t instanceof Cn?function(r,s){return s instanceof Cn&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce((i,o,a)=>i&&IS(o,s.filters[a]),!0):!1}(t,e):void oe(19439)}function AS(t){return t instanceof Xe?function(n){return`${n.field.canonicalString()} ${n.op} ${Xi(n.value)}`}(t):t instanceof Cn?function(n){return n.op.toString()+" {"+n.getFilters().map(AS).join(" ,")+"}"}(t):"Filter"}class RO extends Xe{constructor(e,n,r){super(e,n,r),this.key=ie.fromName(r.referenceValue)}matches(e){const n=ie.comparator(e.key,this.key);return this.matchesComparison(n)}}class IO extends Xe{constructor(e,n){super(e,"in",n),this.keys=NS("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class AO extends Xe{constructor(e,n){super(e,"not-in",n),this.keys=NS("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function NS(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>ie.fromName(r.referenceValue))}class NO extends Xe{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return rg(n)&&Ha(n.arrayValue,this.value)}}class PO extends Xe{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Ha(this.value.arrayValue,n)}}class kO extends Xe{constructor(e,n){super(e,"not-in",n)}matches(e){if(Ha(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!Ha(this.value.arrayValue,n)}}class jO extends Xe{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!rg(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Ha(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DO{constructor(e,n=null,r=[],s=[],i=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=i,this.startAt=o,this.endAt=a,this.Ie=null}}function aw(t,e=null,n=[],r=[],s=null,i=null,o=null){return new DO(t,e,n,r,s,i,o)}function sg(t){const e=he(t);if(e.Ie===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>dp(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(i){return i.field.canonicalString()+i.dir}(r)).join(","),ad(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Xi(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Xi(r)).join(",")),e.Ie=n}return e.Ie}function ig(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!CO(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!IS(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!ow(t.startAt,e.startAt)&&ow(t.endAt,e.endAt)}function hp(t){return ie.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ll{constructor(e,n=null,r=[],s=[],i=null,o="F",a=null,u=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=i,this.limitType=o,this.startAt=a,this.endAt=u,this.Ee=null,this.de=null,this.Ae=null,this.startAt,this.endAt}}function OO(t,e,n,r,s,i,o,a){return new ll(t,e,n,r,s,i,o,a)}function og(t){return new ll(t)}function lw(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function PS(t){return t.collectionGroup!==null}function fa(t){const e=he(t);if(e.Ee===null){e.Ee=[];const n=new Set;for(const i of e.explicitOrderBy)e.Ee.push(i),n.add(i.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new et(dt.comparator);return o.filters.forEach(u=>{u.getFlattenedFilters().forEach(d=>{d.isInequality()&&(a=a.add(d.field))})}),a})(e).forEach(i=>{n.has(i.canonicalString())||i.isKeyField()||e.Ee.push(new mu(i,r))}),n.has(dt.keyField().canonicalString())||e.Ee.push(new mu(dt.keyField(),r))}return e.Ee}function Mn(t){const e=he(t);return e.de||(e.de=VO(e,fa(t))),e.de}function VO(t,e){if(t.limitType==="F")return aw(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(s=>{const i=s.dir==="desc"?"asc":"desc";return new mu(s.field,i)});const n=t.endAt?new pu(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new pu(t.startAt.position,t.startAt.inclusive):null;return aw(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function fp(t,e){const n=t.filters.concat([e]);return new ll(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function pp(t,e,n){return new ll(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function cd(t,e){return ig(Mn(t),Mn(e))&&t.limitType===e.limitType}function kS(t){return`${sg(Mn(t))}|lt:${t.limitType}`}function ri(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(s=>AS(s)).join(", ")}]`),ad(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(s=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(s)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(s=>Xi(s)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(s=>Xi(s)).join(",")),`Target(${r})`}(Mn(t))}; limitType=${t.limitType})`}function ud(t,e){return e.isFoundDocument()&&function(r,s){const i=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(i):ie.isDocumentKey(r.path)?r.path.isEqual(i):r.path.isImmediateParentOf(i)}(t,e)&&function(r,s){for(const i of fa(r))if(!i.field.isKeyField()&&s.data.field(i.field)===null)return!1;return!0}(t,e)&&function(r,s){for(const i of r.filters)if(!i.matches(s))return!1;return!0}(t,e)&&function(r,s){return!(r.startAt&&!function(o,a,u){const d=iw(o,a,u);return o.inclusive?d<=0:d<0}(r.startAt,fa(r),s)||r.endAt&&!function(o,a,u){const d=iw(o,a,u);return o.inclusive?d>=0:d>0}(r.endAt,fa(r),s))}(t,e)}function MO(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function jS(t){return(e,n)=>{let r=!1;for(const s of fa(t)){const i=LO(s,e,n);if(i!==0)return i;r=r||s.field.isKeyField()}return 0}}function LO(t,e,n){const r=t.field.isKeyField()?ie.comparator(e.key,n.key):function(i,o,a){const u=o.data.field(i),d=a.data.field(i);return u!==null&&d!==null?Yi(u,d):oe(42886)}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return oe(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hs{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[s,i]of r)if(this.equalsFn(s,e))return i}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],e))return void(s[i]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){ss(this.inner,(n,r)=>{for(const[s,i]of r)e(s,i)})}isEmpty(){return gS(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FO=new $e(ie.comparator);function cr(){return FO}const DS=new $e(ie.comparator);function Yo(...t){let e=DS;for(const n of t)e=e.insert(n.key,n);return e}function OS(t){let e=DS;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function _s(){return pa()}function VS(){return pa()}function pa(){return new Hs(t=>t.toString(),(t,e)=>t.isEqual(e))}const zO=new $e(ie.comparator),UO=new et(ie.comparator);function ye(...t){let e=UO;for(const n of t)e=e.add(n);return e}const $O=new et(me);function BO(){return $O}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ag(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:du(e)?"-0":e}}function MS(t){return{integerValue:""+t}}function HO(t,e){return vO(e)?MS(e):ag(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dd{constructor(){this._=void 0}}function WO(t,e,n){return t instanceof gu?function(s,i){const o={fields:{[xS]:{stringValue:yS},[_S]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return i&&ng(i)&&(i=ld(i)),i&&(o.fields[wS]=i),{mapValue:o}}(n,e):t instanceof Wa?FS(t,e):t instanceof qa?zS(t,e):function(s,i){const o=LS(s,i),a=cw(o)+cw(s.Re);return up(o)&&up(s.Re)?MS(a):ag(s.serializer,a)}(t,e)}function qO(t,e,n){return t instanceof Wa?FS(t,e):t instanceof qa?zS(t,e):n}function LS(t,e){return t instanceof vu?function(r){return up(r)||function(i){return!!i&&"doubleValue"in i}(r)}(e)?e:{integerValue:0}:null}class gu extends dd{}class Wa extends dd{constructor(e){super(),this.elements=e}}function FS(t,e){const n=US(e);for(const r of t.elements)n.some(s=>zn(s,r))||n.push(r);return{arrayValue:{values:n}}}class qa extends dd{constructor(e){super(),this.elements=e}}function zS(t,e){let n=US(e);for(const r of t.elements)n=n.filter(s=>!zn(s,r));return{arrayValue:{values:n}}}class vu extends dd{constructor(e,n){super(),this.serializer=e,this.Re=n}}function cw(t){return qe(t.integerValue||t.doubleValue)}function US(t){return rg(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function KO(t,e){return t.field.isEqual(e.field)&&function(r,s){return r instanceof Wa&&s instanceof Wa||r instanceof qa&&s instanceof qa?Qi(r.elements,s.elements,zn):r instanceof vu&&s instanceof vu?zn(r.Re,s.Re):r instanceof gu&&s instanceof gu}(t.transform,e.transform)}class GO{constructor(e,n){this.version=e,this.transformResults=n}}class wn{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new wn}static exists(e){return new wn(void 0,e)}static updateTime(e){return new wn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Ic(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class hd{}function $S(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new lg(t.key,wn.none()):new cl(t.key,t.data,wn.none());{const n=t.data,r=Ot.empty();let s=new et(dt.comparator);for(let i of e.fields)if(!s.has(i)){let o=n.field(i);o===null&&i.length>1&&(i=i.popLast(),o=n.field(i)),o===null?r.delete(i):r.set(i,o),s=s.add(i)}return new is(t.key,r,new Yt(s.toArray()),wn.none())}}function QO(t,e,n){t instanceof cl?function(s,i,o){const a=s.value.clone(),u=dw(s.fieldTransforms,i,o.transformResults);a.setAll(u),i.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(t,e,n):t instanceof is?function(s,i,o){if(!Ic(s.precondition,i))return void i.convertToUnknownDocument(o.version);const a=dw(s.fieldTransforms,i,o.transformResults),u=i.data;u.setAll(BS(s)),u.setAll(a),i.convertToFoundDocument(o.version,u).setHasCommittedMutations()}(t,e,n):function(s,i,o){i.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function ma(t,e,n,r){return t instanceof cl?function(i,o,a,u){if(!Ic(i.precondition,o))return a;const d=i.value.clone(),h=hw(i.fieldTransforms,u,o);return d.setAll(h),o.convertToFoundDocument(o.version,d).setHasLocalMutations(),null}(t,e,n,r):t instanceof is?function(i,o,a,u){if(!Ic(i.precondition,o))return a;const d=hw(i.fieldTransforms,u,o),h=o.data;return h.setAll(BS(i)),h.setAll(d),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),a===null?null:a.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(p=>p.field))}(t,e,n,r):function(i,o,a){return Ic(i.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(t,e,n)}function YO(t,e){let n=null;for(const r of t.fieldTransforms){const s=e.data.field(r.field),i=LS(r.transform,s||null);i!=null&&(n===null&&(n=Ot.empty()),n.set(r.field,i))}return n||null}function uw(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&Qi(r,s,(i,o)=>KO(i,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class cl extends hd{constructor(e,n,r,s=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class is extends hd{constructor(e,n,r,s,i=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function BS(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function dw(t,e,n){const r=new Map;Ie(t.length===n.length,32656,{Ve:n.length,me:t.length});for(let s=0;s<n.length;s++){const i=t[s],o=i.transform,a=e.data.field(i.field);r.set(i.field,qO(o,a,n[s]))}return r}function hw(t,e,n){const r=new Map;for(const s of t){const i=s.transform,o=n.data.field(s.field);r.set(s.field,WO(i,o,e))}return r}class lg extends hd{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class XO extends hd{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JO{constructor(e,n,r,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const i=this.mutations[s];i.key.isEqual(e.key)&&QO(i,e,r[s])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=ma(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=ma(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=VS();return this.mutations.forEach(s=>{const i=e.get(s.key),o=i.overlayedDocument;let a=this.applyToLocalView(o,i.mutatedFields);a=n.has(s.key)?null:a;const u=$S(o,a);u!==null&&r.set(s.key,u),o.isValidDocument()||o.convertToNoDocument(ue.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),ye())}isEqual(e){return this.batchId===e.batchId&&Qi(this.mutations,e.mutations,(n,r)=>uw(n,r))&&Qi(this.baseMutations,e.baseMutations,(n,r)=>uw(n,r))}}class cg{constructor(e,n,r,s){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=s}static from(e,n,r){Ie(e.mutations.length===r.length,58842,{fe:e.mutations.length,ge:r.length});let s=function(){return zO}();const i=e.mutations;for(let o=0;o<i.length;o++)s=s.insert(i[o].key,r[o].version);return new cg(e,n,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZO{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eV{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ge,we;function tV(t){switch(t){case q.OK:return oe(64938);case q.CANCELLED:case q.UNKNOWN:case q.DEADLINE_EXCEEDED:case q.RESOURCE_EXHAUSTED:case q.INTERNAL:case q.UNAVAILABLE:case q.UNAUTHENTICATED:return!1;case q.INVALID_ARGUMENT:case q.NOT_FOUND:case q.ALREADY_EXISTS:case q.PERMISSION_DENIED:case q.FAILED_PRECONDITION:case q.ABORTED:case q.OUT_OF_RANGE:case q.UNIMPLEMENTED:case q.DATA_LOSS:return!0;default:return oe(15467,{code:t})}}function HS(t){if(t===void 0)return lr("GRPC error has no .code"),q.UNKNOWN;switch(t){case Ge.OK:return q.OK;case Ge.CANCELLED:return q.CANCELLED;case Ge.UNKNOWN:return q.UNKNOWN;case Ge.DEADLINE_EXCEEDED:return q.DEADLINE_EXCEEDED;case Ge.RESOURCE_EXHAUSTED:return q.RESOURCE_EXHAUSTED;case Ge.INTERNAL:return q.INTERNAL;case Ge.UNAVAILABLE:return q.UNAVAILABLE;case Ge.UNAUTHENTICATED:return q.UNAUTHENTICATED;case Ge.INVALID_ARGUMENT:return q.INVALID_ARGUMENT;case Ge.NOT_FOUND:return q.NOT_FOUND;case Ge.ALREADY_EXISTS:return q.ALREADY_EXISTS;case Ge.PERMISSION_DENIED:return q.PERMISSION_DENIED;case Ge.FAILED_PRECONDITION:return q.FAILED_PRECONDITION;case Ge.ABORTED:return q.ABORTED;case Ge.OUT_OF_RANGE:return q.OUT_OF_RANGE;case Ge.UNIMPLEMENTED:return q.UNIMPLEMENTED;case Ge.DATA_LOSS:return q.DATA_LOSS;default:return oe(39323,{code:t})}}(we=Ge||(Ge={}))[we.OK=0]="OK",we[we.CANCELLED=1]="CANCELLED",we[we.UNKNOWN=2]="UNKNOWN",we[we.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",we[we.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",we[we.NOT_FOUND=5]="NOT_FOUND",we[we.ALREADY_EXISTS=6]="ALREADY_EXISTS",we[we.PERMISSION_DENIED=7]="PERMISSION_DENIED",we[we.UNAUTHENTICATED=16]="UNAUTHENTICATED",we[we.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",we[we.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",we[we.ABORTED=10]="ABORTED",we[we.OUT_OF_RANGE=11]="OUT_OF_RANGE",we[we.UNIMPLEMENTED=12]="UNIMPLEMENTED",we[we.INTERNAL=13]="INTERNAL",we[we.UNAVAILABLE=14]="UNAVAILABLE",we[we.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nV=new Fr([4294967295,4294967295],0);function fw(t){const e=fS().encode(t),n=new iS;return n.update(e),new Uint8Array(n.digest())}function pw(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new Fr([n,r],0),new Fr([s,i],0)]}class ug{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Xo(`Invalid padding: ${n}`);if(r<0)throw new Xo(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Xo(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Xo(`Invalid padding when bitmap length is 0: ${n}`);this.pe=8*e.length-n,this.ye=Fr.fromNumber(this.pe)}we(e,n,r){let s=e.add(n.multiply(Fr.fromNumber(r)));return s.compare(nV)===1&&(s=new Fr([s.getBits(0),s.getBits(1)],0)),s.modulo(this.ye).toNumber()}be(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.pe===0)return!1;const n=fw(e),[r,s]=pw(n);for(let i=0;i<this.hashCount;i++){const o=this.we(r,s,i);if(!this.be(o))return!1}return!0}static create(e,n,r){const s=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),o=new ug(i,s,n);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.pe===0)return;const n=fw(e),[r,s]=pw(n);for(let i=0;i<this.hashCount;i++){const o=this.we(r,s,i);this.Se(o)}}Se(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class Xo extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fd{constructor(e,n,r,s,i){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const s=new Map;return s.set(e,ul.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new fd(ue.min(),s,new $e(me),cr(),ye())}}class ul{constructor(e,n,r,s,i){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new ul(r,n,ye(),ye(),ye())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ac{constructor(e,n,r,s){this.De=e,this.removedTargetIds=n,this.key=r,this.ve=s}}class WS{constructor(e,n){this.targetId=e,this.Ce=n}}class qS{constructor(e,n,r=pt.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=s}}class mw{constructor(){this.Fe=0,this.Me=gw(),this.xe=pt.EMPTY_BYTE_STRING,this.Oe=!1,this.Ne=!0}get current(){return this.Oe}get resumeToken(){return this.xe}get Be(){return this.Fe!==0}get Le(){return this.Ne}ke(e){e.approximateByteSize()>0&&(this.Ne=!0,this.xe=e)}qe(){let e=ye(),n=ye(),r=ye();return this.Me.forEach((s,i)=>{switch(i){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:oe(38017,{changeType:i})}}),new ul(this.xe,this.Oe,e,n,r)}Qe(){this.Ne=!1,this.Me=gw()}$e(e,n){this.Ne=!0,this.Me=this.Me.insert(e,n)}Ue(e){this.Ne=!0,this.Me=this.Me.remove(e)}Ke(){this.Fe+=1}We(){this.Fe-=1,Ie(this.Fe>=0,3241,{Fe:this.Fe})}Ge(){this.Ne=!0,this.Oe=!0}}class rV{constructor(e){this.ze=e,this.je=new Map,this.He=cr(),this.Je=ic(),this.Ye=ic(),this.Ze=new $e(me)}Xe(e){for(const n of e.De)e.ve&&e.ve.isFoundDocument()?this.et(n,e.ve):this.tt(n,e.key,e.ve);for(const n of e.removedTargetIds)this.tt(n,e.key,e.ve)}nt(e){this.forEachTarget(e,n=>{const r=this.rt(n);switch(e.state){case 0:this.it(n)&&r.ke(e.resumeToken);break;case 1:r.We(),r.Be||r.Qe(),r.ke(e.resumeToken);break;case 2:r.We(),r.Be||this.removeTarget(n);break;case 3:this.it(n)&&(r.Ge(),r.ke(e.resumeToken));break;case 4:this.it(n)&&(this.st(n),r.ke(e.resumeToken));break;default:oe(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.je.forEach((r,s)=>{this.it(s)&&n(s)})}ot(e){const n=e.targetId,r=e.Ce.count,s=this._t(n);if(s){const i=s.target;if(hp(i))if(r===0){const o=new ie(i.path);this.tt(n,o,Tt.newNoDocument(o,ue.min()))}else Ie(r===1,20013,{expectedCount:r});else{const o=this.ut(n);if(o!==r){const a=this.ct(e),u=a?this.lt(a,e,o):1;if(u!==0){this.st(n);const d=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(n,d)}}}}}ct(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:i=0}=n;let o,a;try{o=Kr(r).toUint8Array()}catch(u){if(u instanceof vS)return Gi("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{a=new ug(o,s,i)}catch(u){return Gi(u instanceof Xo?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return a.pe===0?null:a}lt(e,n,r){return n.Ce.count===r-this.Tt(e,n.targetId)?0:2}Tt(e,n){const r=this.ze.getRemoteKeysForTarget(n);let s=0;return r.forEach(i=>{const o=this.ze.Pt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${i.path.canonicalString()}`;e.mightContain(a)||(this.tt(n,i,null),s++)}),s}It(e){const n=new Map;this.je.forEach((i,o)=>{const a=this._t(o);if(a){if(i.current&&hp(a.target)){const u=new ie(a.target.path);this.Et(u).has(o)||this.dt(o,u)||this.tt(o,u,Tt.newNoDocument(u,e))}i.Le&&(n.set(o,i.qe()),i.Qe())}});let r=ye();this.Ye.forEach((i,o)=>{let a=!0;o.forEachWhile(u=>{const d=this._t(u);return!d||d.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(i))}),this.He.forEach((i,o)=>o.setReadTime(e));const s=new fd(e,n,this.Ze,this.He,r);return this.He=cr(),this.Je=ic(),this.Ye=ic(),this.Ze=new $e(me),s}et(e,n){if(!this.it(e))return;const r=this.dt(e,n.key)?2:0;this.rt(e).$e(n.key,r),this.He=this.He.insert(n.key,n),this.Je=this.Je.insert(n.key,this.Et(n.key).add(e)),this.Ye=this.Ye.insert(n.key,this.At(n.key).add(e))}tt(e,n,r){if(!this.it(e))return;const s=this.rt(e);this.dt(e,n)?s.$e(n,1):s.Ue(n),this.Ye=this.Ye.insert(n,this.At(n).delete(e)),this.Ye=this.Ye.insert(n,this.At(n).add(e)),r&&(this.He=this.He.insert(n,r))}removeTarget(e){this.je.delete(e)}ut(e){const n=this.rt(e).qe();return this.ze.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ke(e){this.rt(e).Ke()}rt(e){let n=this.je.get(e);return n||(n=new mw,this.je.set(e,n)),n}At(e){let n=this.Ye.get(e);return n||(n=new et(me),this.Ye=this.Ye.insert(e,n)),n}Et(e){let n=this.Je.get(e);return n||(n=new et(me),this.Je=this.Je.insert(e,n)),n}it(e){const n=this._t(e)!==null;return n||te("WatchChangeAggregator","Detected inactive target",e),n}_t(e){const n=this.je.get(e);return n&&n.Be?null:this.ze.Rt(e)}st(e){this.je.set(e,new mw),this.ze.getRemoteKeysForTarget(e).forEach(n=>{this.tt(e,n,null)})}dt(e,n){return this.ze.getRemoteKeysForTarget(e).has(n)}}function ic(){return new $e(ie.comparator)}function gw(){return new $e(ie.comparator)}const sV={asc:"ASCENDING",desc:"DESCENDING"},iV={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},oV={and:"AND",or:"OR"};class aV{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function mp(t,e){return t.useProto3Json||ad(e)?e:{value:e}}function yu(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function KS(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function lV(t,e){return yu(t,e.toTimestamp())}function Ln(t){return Ie(!!t,49232),ue.fromTimestamp(function(n){const r=qr(n);return new We(r.seconds,r.nanos)}(t))}function dg(t,e){return gp(t,e).canonicalString()}function gp(t,e){const n=function(s){return new Ve(["projects",s.projectId,"databases",s.database])}(t).child("documents");return e===void 0?n:n.child(e)}function GS(t){const e=Ve.fromString(t);return Ie(ZS(e),10190,{key:e.toString()}),e}function vp(t,e){return dg(t.databaseId,e.path)}function Mh(t,e){const n=GS(e);if(n.get(1)!==t.databaseId.projectId)throw new re(q.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new re(q.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new ie(YS(n))}function QS(t,e){return dg(t.databaseId,e)}function cV(t){const e=GS(t);return e.length===4?Ve.emptyPath():YS(e)}function yp(t){return new Ve(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function YS(t){return Ie(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function vw(t,e,n){return{name:vp(t,e),fields:n.value.mapValue.fields}}function uV(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(d){return d==="NO_CHANGE"?0:d==="ADD"?1:d==="REMOVE"?2:d==="CURRENT"?3:d==="RESET"?4:oe(39313,{state:d})}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],i=function(d,h){return d.useProto3Json?(Ie(h===void 0||typeof h=="string",58123),pt.fromBase64String(h||"")):(Ie(h===void 0||h instanceof Buffer||h instanceof Uint8Array,16193),pt.fromUint8Array(h||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(d){const h=d.code===void 0?q.UNKNOWN:HS(d.code);return new re(h,d.message||"")}(o);n=new qS(r,s,i,a||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=Mh(t,r.document.name),i=Ln(r.document.updateTime),o=r.document.createTime?Ln(r.document.createTime):ue.min(),a=new Ot({mapValue:{fields:r.document.fields}}),u=Tt.newFoundDocument(s,i,o,a),d=r.targetIds||[],h=r.removedTargetIds||[];n=new Ac(d,h,u.key,u)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=Mh(t,r.document),i=r.readTime?Ln(r.readTime):ue.min(),o=Tt.newNoDocument(s,i),a=r.removedTargetIds||[];n=new Ac([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=Mh(t,r.document),i=r.removedTargetIds||[];n=new Ac([],i,s,null)}else{if(!("filter"in e))return oe(11601,{Vt:e});{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:i}=r,o=new eV(s,i),a=r.targetId;n=new WS(a,o)}}return n}function dV(t,e){let n;if(e instanceof cl)n={update:vw(t,e.key,e.value)};else if(e instanceof lg)n={delete:vp(t,e.key)};else if(e instanceof is)n={update:vw(t,e.key,e.data),updateMask:wV(e.fieldMask)};else{if(!(e instanceof XO))return oe(16599,{ft:e.type});n={verify:vp(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(i,o){const a=o.transform;if(a instanceof gu)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof Wa)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof qa)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof vu)return{fieldPath:o.field.canonicalString(),increment:a.Re};throw oe(20930,{transform:o.transform})}(0,r))),e.precondition.isNone||(n.currentDocument=function(s,i){return i.updateTime!==void 0?{updateTime:lV(s,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:oe(27497)}(t,e.precondition)),n}function hV(t,e){return t&&t.length>0?(Ie(e!==void 0,14353),t.map(n=>function(s,i){let o=s.updateTime?Ln(s.updateTime):Ln(i);return o.isEqual(ue.min())&&(o=Ln(i)),new GO(o,s.transformResults||[])}(n,e))):[]}function fV(t,e){return{documents:[QS(t,e.path)]}}function pV(t,e){const n={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=QS(t,s);const i=function(d){if(d.length!==0)return JS(Cn.create(d,"and"))}(e.filters);i&&(n.structuredQuery.where=i);const o=function(d){if(d.length!==0)return d.map(h=>function(g){return{field:si(g.field),direction:vV(g.dir)}}(h))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const a=mp(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(d){return{before:d.inclusive,values:d.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(d){return{before:!d.inclusive,values:d.position}}(e.endAt)),{gt:n,parent:s}}function mV(t){let e=cV(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){Ie(r===1,65062);const h=n.from[0];h.allDescendants?s=h.collectionId:e=e.child(h.collectionId)}let i=[];n.where&&(i=function(p){const g=XS(p);return g instanceof Cn&&RS(g)?g.getFilters():[g]}(n.where));let o=[];n.orderBy&&(o=function(p){return p.map(g=>function(b){return new mu(ii(b.field),function(E){switch(E){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(b.direction))}(g))}(n.orderBy));let a=null;n.limit&&(a=function(p){let g;return g=typeof p=="object"?p.value:p,ad(g)?null:g}(n.limit));let u=null;n.startAt&&(u=function(p){const g=!!p.before,w=p.values||[];return new pu(w,g)}(n.startAt));let d=null;return n.endAt&&(d=function(p){const g=!p.before,w=p.values||[];return new pu(w,g)}(n.endAt)),OO(e,s,o,i,a,"F",u,d)}function gV(t,e){const n=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return oe(28987,{purpose:s})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function XS(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=ii(n.unaryFilter.field);return Xe.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=ii(n.unaryFilter.field);return Xe.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=ii(n.unaryFilter.field);return Xe.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=ii(n.unaryFilter.field);return Xe.create(o,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return oe(61313);default:return oe(60726)}}(t):t.fieldFilter!==void 0?function(n){return Xe.create(ii(n.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return oe(58110);default:return oe(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return Cn.create(n.compositeFilter.filters.map(r=>XS(r)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return oe(1026)}}(n.compositeFilter.op))}(t):oe(30097,{filter:t})}function vV(t){return sV[t]}function yV(t){return iV[t]}function xV(t){return oV[t]}function si(t){return{fieldPath:t.canonicalString()}}function ii(t){return dt.fromServerFormat(t.fieldPath)}function JS(t){return t instanceof Xe?function(n){if(n.op==="=="){if(sw(n.value))return{unaryFilter:{field:si(n.field),op:"IS_NAN"}};if(rw(n.value))return{unaryFilter:{field:si(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(sw(n.value))return{unaryFilter:{field:si(n.field),op:"IS_NOT_NAN"}};if(rw(n.value))return{unaryFilter:{field:si(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:si(n.field),op:yV(n.op),value:n.value}}}(t):t instanceof Cn?function(n){const r=n.getFilters().map(s=>JS(s));return r.length===1?r[0]:{compositeFilter:{op:xV(n.op),filters:r}}}(t):oe(54877,{filter:t})}function wV(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function ZS(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ir{constructor(e,n,r,s,i=ue.min(),o=ue.min(),a=pt.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=u}withSequenceNumber(e){return new Ir(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Ir(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Ir(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Ir(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _V{constructor(e){this.wt=e}}function EV(t){const e=mV({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?pp(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TV{constructor(){this.Cn=new SV}addToCollectionParentIndex(e,n){return this.Cn.add(n),W.resolve()}getCollectionParents(e,n){return W.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return W.resolve()}deleteFieldIndex(e,n){return W.resolve()}deleteAllFieldIndexes(e){return W.resolve()}createTargetIndexes(e,n){return W.resolve()}getDocumentsMatchingTarget(e,n){return W.resolve(null)}getIndexType(e,n){return W.resolve(0)}getFieldIndexes(e,n){return W.resolve([])}getNextCollectionGroupToUpdate(e){return W.resolve(null)}getMinOffset(e,n){return W.resolve(Wr.min())}getMinOffsetFromCollectionGroup(e,n){return W.resolve(Wr.min())}updateCollectionGroup(e,n,r){return W.resolve()}updateIndexEntries(e,n){return W.resolve()}}class SV{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n]||new et(Ve.comparator),i=!s.has(r);return this.index[n]=s.add(r),i}has(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(e){return(this.index[e]||new et(Ve.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yw={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},eC=41943040;class jt{static withCacheSize(e){return new jt(e,jt.DEFAULT_COLLECTION_PERCENTILE,jt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */jt.DEFAULT_COLLECTION_PERCENTILE=10,jt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,jt.DEFAULT=new jt(eC,jt.DEFAULT_COLLECTION_PERCENTILE,jt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),jt.DISABLED=new jt(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ji{constructor(e){this.ur=e}next(){return this.ur+=2,this.ur}static cr(){return new Ji(0)}static lr(){return new Ji(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xw="LruGarbageCollector",CV=1048576;function ww([t,e],[n,r]){const s=me(t,n);return s===0?me(e,r):s}class bV{constructor(e){this.Er=e,this.buffer=new et(ww),this.dr=0}Ar(){return++this.dr}Rr(e){const n=[e,this.Ar()];if(this.buffer.size<this.Er)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();ww(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class RV{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Vr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.mr(6e4)}stop(){this.Vr&&(this.Vr.cancel(),this.Vr=null)}get started(){return this.Vr!==null}mr(e){te(xw,`Garbage collection scheduled in ${e}ms`),this.Vr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Vr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){go(n)?te(xw,"Ignoring IndexedDB error during garbage collection: ",n):await mo(n)}await this.mr(3e5)})}}class IV{constructor(e,n){this.gr=e,this.params=n}calculateTargetCount(e,n){return this.gr.pr(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return W.resolve(od.le);const r=new bV(n);return this.gr.forEachTarget(e,s=>r.Rr(s.sequenceNumber)).next(()=>this.gr.yr(e,s=>r.Rr(s))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.gr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.gr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(te("LruGarbageCollector","Garbage collection skipped; disabled"),W.resolve(yw)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(te("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),yw):this.wr(e,n))}getCacheSize(e){return this.gr.getCacheSize(e)}wr(e,n){let r,s,i,o,a,u,d;const h=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(p=>(p>this.params.maximumSequenceNumbersToCollect?(te("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${p}`),s=this.params.maximumSequenceNumbersToCollect):s=p,o=Date.now(),this.nthSequenceNumber(e,s))).next(p=>(r=p,a=Date.now(),this.removeTargets(e,r,n))).next(p=>(i=p,u=Date.now(),this.removeOrphanedDocuments(e,r))).next(p=>(d=Date.now(),ni()<=_e.DEBUG&&te("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-h}ms
	Determined least recently used ${s} in `+(a-o)+`ms
	Removed ${i} targets in `+(u-a)+`ms
	Removed ${p} documents in `+(d-u)+`ms
Total Duration: ${d-h}ms`),W.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:i,documentsRemoved:p})))}}function AV(t,e){return new IV(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NV{constructor(){this.changes=new Hs(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Tt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?W.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PV{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kV{constructor(e,n,r,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,n))).next(s=>(r!==null&&ma(r.mutation,s,Yt.empty(),We.now()),s))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,ye()).next(()=>r))}getLocalViewOfDocuments(e,n,r=ye()){const s=_s();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,r).next(i=>{let o=Yo();return i.forEach((a,u)=>{o=o.insert(a,u.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=_s();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,ye()))}populateOverlays(e,n,r){const s=[];return r.forEach(i=>{n.has(i)||s.push(i)}),this.documentOverlayCache.getOverlays(e,s).next(i=>{i.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,r,s){let i=cr();const o=pa(),a=function(){return pa()}();return n.forEach((u,d)=>{const h=r.get(d.key);s.has(d.key)&&(h===void 0||h.mutation instanceof is)?i=i.insert(d.key,d):h!==void 0?(o.set(d.key,h.mutation.getFieldMask()),ma(h.mutation,d,h.mutation.getFieldMask(),We.now())):o.set(d.key,Yt.empty())}),this.recalculateAndSaveOverlays(e,i).next(u=>(u.forEach((d,h)=>o.set(d,h)),n.forEach((d,h)=>{var p;return a.set(d,new PV(h,(p=o.get(d))!==null&&p!==void 0?p:null))}),a))}recalculateAndSaveOverlays(e,n){const r=pa();let s=new $e((o,a)=>o-a),i=ye();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const a of o)a.keys().forEach(u=>{const d=n.get(u);if(d===null)return;let h=r.get(u)||Yt.empty();h=a.applyToLocalView(d,h),r.set(u,h);const p=(s.get(a.batchId)||ye()).add(u);s=s.insert(a.batchId,p)})}).next(()=>{const o=[],a=s.getReverseIterator();for(;a.hasNext();){const u=a.getNext(),d=u.key,h=u.value,p=VS();h.forEach(g=>{if(!i.has(g)){const w=$S(n.get(g),r.get(g));w!==null&&p.set(g,w),i=i.add(g)}}),o.push(this.documentOverlayCache.saveOverlays(e,d,p))}return W.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,s){return function(o){return ie.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):PS(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,s):this.getDocumentsMatchingCollectionQuery(e,n,r,s)}getNextDocuments(e,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,s).next(i=>{const o=s-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,s-i.size):W.resolve(_s());let a=Ua,u=i;return o.next(d=>W.forEach(d,(h,p)=>(a<p.largestBatchId&&(a=p.largestBatchId),i.get(h)?W.resolve():this.remoteDocumentCache.getEntry(e,h).next(g=>{u=u.insert(h,g)}))).next(()=>this.populateOverlays(e,d,i)).next(()=>this.computeViews(e,u,d,ye())).next(h=>({batchId:a,changes:OS(h)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new ie(n)).next(r=>{let s=Yo();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,n,r,s){const i=n.collectionGroup;let o=Yo();return this.indexManager.getCollectionParents(e,i).next(a=>W.forEach(a,u=>{const d=function(p,g){return new ll(g,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)}(n,u.child(i));return this.getDocumentsMatchingCollectionQuery(e,d,r,s).next(h=>{h.forEach((p,g)=>{o=o.insert(p,g)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,s){let i;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(i=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,i,s))).next(o=>{i.forEach((u,d)=>{const h=d.getKey();o.get(h)===null&&(o=o.insert(h,Tt.newInvalidDocument(h)))});let a=Yo();return o.forEach((u,d)=>{const h=i.get(u);h!==void 0&&ma(h.mutation,d,Yt.empty(),We.now()),ud(n,d)&&(a=a.insert(u,d))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jV{constructor(e){this.serializer=e,this.kr=new Map,this.qr=new Map}getBundleMetadata(e,n){return W.resolve(this.kr.get(n))}saveBundleMetadata(e,n){return this.kr.set(n.id,function(s){return{id:s.id,version:s.version,createTime:Ln(s.createTime)}}(n)),W.resolve()}getNamedQuery(e,n){return W.resolve(this.qr.get(n))}saveNamedQuery(e,n){return this.qr.set(n.name,function(s){return{name:s.name,query:EV(s.bundledQuery),readTime:Ln(s.readTime)}}(n)),W.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DV{constructor(){this.overlays=new $e(ie.comparator),this.Qr=new Map}getOverlay(e,n){return W.resolve(this.overlays.get(n))}getOverlays(e,n){const r=_s();return W.forEach(n,s=>this.getOverlay(e,s).next(i=>{i!==null&&r.set(s,i)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((s,i)=>{this.St(e,n,i)}),W.resolve()}removeOverlaysForBatchId(e,n,r){const s=this.Qr.get(r);return s!==void 0&&(s.forEach(i=>this.overlays=this.overlays.remove(i)),this.Qr.delete(r)),W.resolve()}getOverlaysForCollection(e,n,r){const s=_s(),i=n.length+1,o=new ie(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const u=a.getNext().value,d=u.getKey();if(!n.isPrefixOf(d.path))break;d.path.length===i&&u.largestBatchId>r&&s.set(u.getKey(),u)}return W.resolve(s)}getOverlaysForCollectionGroup(e,n,r,s){let i=new $e((d,h)=>d-h);const o=this.overlays.getIterator();for(;o.hasNext();){const d=o.getNext().value;if(d.getKey().getCollectionGroup()===n&&d.largestBatchId>r){let h=i.get(d.largestBatchId);h===null&&(h=_s(),i=i.insert(d.largestBatchId,h)),h.set(d.getKey(),d)}}const a=_s(),u=i.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((d,h)=>a.set(d,h)),!(a.size()>=s)););return W.resolve(a)}St(e,n,r){const s=this.overlays.get(r.key);if(s!==null){const o=this.Qr.get(s.largestBatchId).delete(r.key);this.Qr.set(s.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new ZO(n,r));let i=this.Qr.get(n);i===void 0&&(i=ye(),this.Qr.set(n,i)),this.Qr.set(n,i.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OV{constructor(){this.sessionToken=pt.EMPTY_BYTE_STRING}getSessionToken(e){return W.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,W.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hg{constructor(){this.$r=new et(tt.Ur),this.Kr=new et(tt.Wr)}isEmpty(){return this.$r.isEmpty()}addReference(e,n){const r=new tt(e,n);this.$r=this.$r.add(r),this.Kr=this.Kr.add(r)}Gr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.zr(new tt(e,n))}jr(e,n){e.forEach(r=>this.removeReference(r,n))}Hr(e){const n=new ie(new Ve([])),r=new tt(n,e),s=new tt(n,e+1),i=[];return this.Kr.forEachInRange([r,s],o=>{this.zr(o),i.push(o.key)}),i}Jr(){this.$r.forEach(e=>this.zr(e))}zr(e){this.$r=this.$r.delete(e),this.Kr=this.Kr.delete(e)}Yr(e){const n=new ie(new Ve([])),r=new tt(n,e),s=new tt(n,e+1);let i=ye();return this.Kr.forEachInRange([r,s],o=>{i=i.add(o.key)}),i}containsKey(e){const n=new tt(e,0),r=this.$r.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class tt{constructor(e,n){this.key=e,this.Zr=n}static Ur(e,n){return ie.comparator(e.key,n.key)||me(e.Zr,n.Zr)}static Wr(e,n){return me(e.Zr,n.Zr)||ie.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VV{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.nr=1,this.Xr=new et(tt.Ur)}checkEmpty(e){return W.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,s){const i=this.nr;this.nr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new JO(i,n,r,s);this.mutationQueue.push(o);for(const a of s)this.Xr=this.Xr.add(new tt(a.key,i)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return W.resolve(o)}lookupMutationBatch(e,n){return W.resolve(this.ei(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=this.ti(r),i=s<0?0:s;return W.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return W.resolve(this.mutationQueue.length===0?tg:this.nr-1)}getAllMutationBatches(e){return W.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new tt(n,0),s=new tt(n,Number.POSITIVE_INFINITY),i=[];return this.Xr.forEachInRange([r,s],o=>{const a=this.ei(o.Zr);i.push(a)}),W.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new et(me);return n.forEach(s=>{const i=new tt(s,0),o=new tt(s,Number.POSITIVE_INFINITY);this.Xr.forEachInRange([i,o],a=>{r=r.add(a.Zr)})}),W.resolve(this.ni(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1;let i=r;ie.isDocumentKey(i)||(i=i.child(""));const o=new tt(new ie(i),0);let a=new et(me);return this.Xr.forEachWhile(u=>{const d=u.key.path;return!!r.isPrefixOf(d)&&(d.length===s&&(a=a.add(u.Zr)),!0)},o),W.resolve(this.ni(a))}ni(e){const n=[];return e.forEach(r=>{const s=this.ei(r);s!==null&&n.push(s)}),n}removeMutationBatch(e,n){Ie(this.ri(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Xr;return W.forEach(n.mutations,s=>{const i=new tt(s.key,n.batchId);return r=r.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.Xr=r})}sr(e){}containsKey(e,n){const r=new tt(n,0),s=this.Xr.firstAfterOrEqual(r);return W.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,W.resolve()}ri(e,n){return this.ti(e)}ti(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}ei(e){const n=this.ti(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MV{constructor(e){this.ii=e,this.docs=function(){return new $e(ie.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,s=this.docs.get(r),i=s?s.size:0,o=this.ii(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return W.resolve(r?r.document.mutableCopy():Tt.newInvalidDocument(n))}getEntries(e,n){let r=cr();return n.forEach(s=>{const i=this.docs.get(s);r=r.insert(s,i?i.document.mutableCopy():Tt.newInvalidDocument(s))}),W.resolve(r)}getDocumentsMatchingQuery(e,n,r,s){let i=cr();const o=n.path,a=new ie(o.child("__id-9223372036854775808__")),u=this.docs.getIteratorFrom(a);for(;u.hasNext();){const{key:d,value:{document:h}}=u.getNext();if(!o.isPrefixOf(d.path))break;d.path.length>o.length+1||fO(hO(h),r)<=0||(s.has(h.key)||ud(n,h))&&(i=i.insert(h.key,h.mutableCopy()))}return W.resolve(i)}getAllFromCollectionGroup(e,n,r,s){oe(9500)}si(e,n){return W.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new LV(this)}getSize(e){return W.resolve(this.size)}}class LV extends NV{constructor(e){super(),this.Br=e}applyChanges(e){const n=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?n.push(this.Br.addEntry(e,s)):this.Br.removeEntry(r)}),W.waitFor(n)}getFromCache(e,n){return this.Br.getEntry(e,n)}getAllFromCache(e,n){return this.Br.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FV{constructor(e){this.persistence=e,this.oi=new Hs(n=>sg(n),ig),this.lastRemoteSnapshotVersion=ue.min(),this.highestTargetId=0,this._i=0,this.ai=new hg,this.targetCount=0,this.ui=Ji.cr()}forEachTarget(e,n){return this.oi.forEach((r,s)=>n(s)),W.resolve()}getLastRemoteSnapshotVersion(e){return W.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return W.resolve(this._i)}allocateTargetId(e){return this.highestTargetId=this.ui.next(),W.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this._i&&(this._i=n),W.resolve()}Tr(e){this.oi.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ui=new Ji(n),this.highestTargetId=n),e.sequenceNumber>this._i&&(this._i=e.sequenceNumber)}addTargetData(e,n){return this.Tr(n),this.targetCount+=1,W.resolve()}updateTargetData(e,n){return this.Tr(n),W.resolve()}removeTargetData(e,n){return this.oi.delete(n.target),this.ai.Hr(n.targetId),this.targetCount-=1,W.resolve()}removeTargets(e,n,r){let s=0;const i=[];return this.oi.forEach((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.oi.delete(o),i.push(this.removeMatchingKeysForTargetId(e,a.targetId)),s++)}),W.waitFor(i).next(()=>s)}getTargetCount(e){return W.resolve(this.targetCount)}getTargetData(e,n){const r=this.oi.get(n)||null;return W.resolve(r)}addMatchingKeys(e,n,r){return this.ai.Gr(n,r),W.resolve()}removeMatchingKeys(e,n,r){this.ai.jr(n,r);const s=this.persistence.referenceDelegate,i=[];return s&&n.forEach(o=>{i.push(s.markPotentiallyOrphaned(e,o))}),W.waitFor(i)}removeMatchingKeysForTargetId(e,n){return this.ai.Hr(n),W.resolve()}getMatchingKeysForTargetId(e,n){const r=this.ai.Yr(n);return W.resolve(r)}containsKey(e,n){return W.resolve(this.ai.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tC{constructor(e,n){this.ci={},this.overlays={},this.li=new od(0),this.hi=!1,this.hi=!0,this.Pi=new OV,this.referenceDelegate=e(this),this.Ti=new FV(this),this.indexManager=new TV,this.remoteDocumentCache=function(s){return new MV(s)}(r=>this.referenceDelegate.Ii(r)),this.serializer=new _V(n),this.Ei=new jV(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.hi=!1,Promise.resolve()}get started(){return this.hi}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new DV,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.ci[e.toKey()];return r||(r=new VV(n,this.referenceDelegate),this.ci[e.toKey()]=r),r}getGlobalsCache(){return this.Pi}getTargetCache(){return this.Ti}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ei}runTransaction(e,n,r){te("MemoryPersistence","Starting transaction:",e);const s=new zV(this.li.next());return this.referenceDelegate.di(),r(s).next(i=>this.referenceDelegate.Ai(s).next(()=>i)).toPromise().then(i=>(s.raiseOnCommittedEvent(),i))}Ri(e,n){return W.or(Object.values(this.ci).map(r=>()=>r.containsKey(e,n)))}}class zV extends mO{constructor(e){super(),this.currentSequenceNumber=e}}class fg{constructor(e){this.persistence=e,this.Vi=new hg,this.mi=null}static fi(e){return new fg(e)}get gi(){if(this.mi)return this.mi;throw oe(60996)}addReference(e,n,r){return this.Vi.addReference(r,n),this.gi.delete(r.toString()),W.resolve()}removeReference(e,n,r){return this.Vi.removeReference(r,n),this.gi.add(r.toString()),W.resolve()}markPotentiallyOrphaned(e,n){return this.gi.add(n.toString()),W.resolve()}removeTarget(e,n){this.Vi.Hr(n.targetId).forEach(s=>this.gi.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(s=>{s.forEach(i=>this.gi.add(i.toString()))}).next(()=>r.removeTargetData(e,n))}di(){this.mi=new Set}Ai(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return W.forEach(this.gi,r=>{const s=ie.fromPath(r);return this.pi(e,s).next(i=>{i||n.removeEntry(s,ue.min())})}).next(()=>(this.mi=null,n.apply(e)))}updateLimboDocument(e,n){return this.pi(e,n).next(r=>{r?this.gi.delete(n.toString()):this.gi.add(n.toString())})}Ii(e){return 0}pi(e,n){return W.or([()=>W.resolve(this.Vi.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ri(e,n)])}}class xu{constructor(e,n){this.persistence=e,this.yi=new Hs(r=>yO(r.path),(r,s)=>r.isEqual(s)),this.garbageCollector=AV(this,n)}static fi(e,n){return new xu(e,n)}di(){}Ai(e){return W.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}pr(e){const n=this.br(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>n.next(s=>r+s))}br(e){let n=0;return this.yr(e,r=>{n++}).next(()=>n)}yr(e,n){return W.forEach(this.yi,(r,s)=>this.Dr(e,r,s).next(i=>i?W.resolve():n(s)))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const s=this.persistence.getRemoteDocumentCache(),i=s.newChangeBuffer();return s.si(e,o=>this.Dr(e,o,n).next(a=>{a||(r++,i.removeEntry(o,ue.min()))})).next(()=>i.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,n){return this.yi.set(n,e.currentSequenceNumber),W.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.yi.set(r,e.currentSequenceNumber),W.resolve()}removeReference(e,n,r){return this.yi.set(r,e.currentSequenceNumber),W.resolve()}updateLimboDocument(e,n){return this.yi.set(n,e.currentSequenceNumber),W.resolve()}Ii(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=bc(e.data.value)),n}Dr(e,n,r){return W.or([()=>this.persistence.Ri(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const s=this.yi.get(n);return W.resolve(s!==void 0&&s>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pg{constructor(e,n,r,s){this.targetId=e,this.fromCache=n,this.ds=r,this.As=s}static Rs(e,n){let r=ye(),s=ye();for(const i of n.docChanges)switch(i.type){case 0:r=r.add(i.doc.key);break;case 1:s=s.add(i.doc.key)}return new pg(e,n.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UV{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $V{constructor(){this.Vs=!1,this.fs=!1,this.gs=100,this.ps=function(){return OD()?8:gO(jD())>0?6:4}()}initialize(e,n){this.ys=e,this.indexManager=n,this.Vs=!0}getDocumentsMatchingQuery(e,n,r,s){const i={result:null};return this.ws(e,n).next(o=>{i.result=o}).next(()=>{if(!i.result)return this.bs(e,n,s,r).next(o=>{i.result=o})}).next(()=>{if(i.result)return;const o=new UV;return this.Ss(e,n,o).next(a=>{if(i.result=a,this.fs)return this.Ds(e,n,o,a.size)})}).next(()=>i.result)}Ds(e,n,r,s){return r.documentReadCount<this.gs?(ni()<=_e.DEBUG&&te("QueryEngine","SDK will not create cache indexes for query:",ri(n),"since it only creates cache indexes for collection contains","more than or equal to",this.gs,"documents"),W.resolve()):(ni()<=_e.DEBUG&&te("QueryEngine","Query:",ri(n),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.ps*s?(ni()<=_e.DEBUG&&te("QueryEngine","The SDK decides to create cache indexes for query:",ri(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Mn(n))):W.resolve())}ws(e,n){if(lw(n))return W.resolve(null);let r=Mn(n);return this.indexManager.getIndexType(e,r).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=pp(n,null,"F"),r=Mn(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(i=>{const o=ye(...i);return this.ys.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(u=>{const d=this.vs(n,a);return this.Cs(n,d,o,u.readTime)?this.ws(e,pp(n,null,"F")):this.Fs(e,d,n,u)}))})))}bs(e,n,r,s){return lw(n)||s.isEqual(ue.min())?W.resolve(null):this.ys.getDocuments(e,r).next(i=>{const o=this.vs(n,i);return this.Cs(n,o,r,s)?W.resolve(null):(ni()<=_e.DEBUG&&te("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),ri(n)),this.Fs(e,o,n,dO(s,Ua)).next(a=>a))})}vs(e,n){let r=new et(jS(e));return n.forEach((s,i)=>{ud(e,i)&&(r=r.add(i))}),r}Cs(e,n,r,s){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const i=e.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}Ss(e,n,r){return ni()<=_e.DEBUG&&te("QueryEngine","Using full collection scan to execute query:",ri(n)),this.ys.getDocumentsMatchingQuery(e,n,Wr.min(),r)}Fs(e,n,r,s){return this.ys.getDocumentsMatchingQuery(e,r,s).next(i=>(n.forEach(o=>{i=i.insert(o.key,o)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mg="LocalStore",BV=3e8;class HV{constructor(e,n,r,s){this.persistence=e,this.Ms=n,this.serializer=s,this.xs=new $e(me),this.Os=new Hs(i=>sg(i),ig),this.Ns=new Map,this.Bs=e.getRemoteDocumentCache(),this.Ti=e.getTargetCache(),this.Ei=e.getBundleCache(),this.Ls(r)}Ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new kV(this.Bs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Bs.setIndexManager(this.indexManager),this.Ms.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.xs))}}function WV(t,e,n,r){return new HV(t,e,n,r)}async function nC(t,e){const n=he(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next(i=>(s=i,n.Ls(e),n.mutationQueue.getAllMutationBatches(r))).next(i=>{const o=[],a=[];let u=ye();for(const d of s){o.push(d.batchId);for(const h of d.mutations)u=u.add(h.key)}for(const d of i){a.push(d.batchId);for(const h of d.mutations)u=u.add(h.key)}return n.localDocuments.getDocuments(r,u).next(d=>({ks:d,removedBatchIds:o,addedBatchIds:a}))})})}function qV(t,e){const n=he(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),i=n.Bs.newChangeBuffer({trackRemovals:!0});return function(a,u,d,h){const p=d.batch,g=p.keys();let w=W.resolve();return g.forEach(b=>{w=w.next(()=>h.getEntry(u,b)).next(x=>{const E=d.docVersions.get(b);Ie(E!==null,48541),x.version.compareTo(E)<0&&(p.applyToRemoteDocument(x,d),x.isValidDocument()&&(x.setReadTime(d.commitVersion),h.addEntry(x)))})}),w.next(()=>a.mutationQueue.removeMutationBatch(u,p))}(n,r,e,i).next(()=>i.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let u=ye();for(let d=0;d<a.mutationResults.length;++d)a.mutationResults[d].transformResults.length>0&&(u=u.add(a.batch.mutations[d].key));return u}(e))).next(()=>n.localDocuments.getDocuments(r,s))})}function rC(t){const e=he(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ti.getLastRemoteSnapshotVersion(n))}function KV(t,e){const n=he(t),r=e.snapshotVersion;let s=n.xs;return n.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const o=n.Bs.newChangeBuffer({trackRemovals:!0});s=n.xs;const a=[];e.targetChanges.forEach((h,p)=>{const g=s.get(p);if(!g)return;a.push(n.Ti.removeMatchingKeys(i,h.removedDocuments,p).next(()=>n.Ti.addMatchingKeys(i,h.addedDocuments,p)));let w=g.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(p)!==null?w=w.withResumeToken(pt.EMPTY_BYTE_STRING,ue.min()).withLastLimboFreeSnapshotVersion(ue.min()):h.resumeToken.approximateByteSize()>0&&(w=w.withResumeToken(h.resumeToken,r)),s=s.insert(p,w),function(x,E,_){return x.resumeToken.approximateByteSize()===0||E.snapshotVersion.toMicroseconds()-x.snapshotVersion.toMicroseconds()>=BV?!0:_.addedDocuments.size+_.modifiedDocuments.size+_.removedDocuments.size>0}(g,w,h)&&a.push(n.Ti.updateTargetData(i,w))});let u=cr(),d=ye();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(i,h))}),a.push(GV(i,o,e.documentUpdates).next(h=>{u=h.qs,d=h.Qs})),!r.isEqual(ue.min())){const h=n.Ti.getLastRemoteSnapshotVersion(i).next(p=>n.Ti.setTargetsMetadata(i,i.currentSequenceNumber,r));a.push(h)}return W.waitFor(a).next(()=>o.apply(i)).next(()=>n.localDocuments.getLocalViewOfDocuments(i,u,d)).next(()=>u)}).then(i=>(n.xs=s,i))}function GV(t,e,n){let r=ye(),s=ye();return n.forEach(i=>r=r.add(i)),e.getEntries(t,r).next(i=>{let o=cr();return n.forEach((a,u)=>{const d=i.get(a);u.isFoundDocument()!==d.isFoundDocument()&&(s=s.add(a)),u.isNoDocument()&&u.version.isEqual(ue.min())?(e.removeEntry(a,u.readTime),o=o.insert(a,u)):!d.isValidDocument()||u.version.compareTo(d.version)>0||u.version.compareTo(d.version)===0&&d.hasPendingWrites?(e.addEntry(u),o=o.insert(a,u)):te(mg,"Ignoring outdated watch update for ",a,". Current version:",d.version," Watch version:",u.version)}),{qs:o,Qs:s}})}function QV(t,e){const n=he(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=tg),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function YV(t,e){const n=he(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return n.Ti.getTargetData(r,e).next(i=>i?(s=i,W.resolve(s)):n.Ti.allocateTargetId(r).next(o=>(s=new Ir(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Ti.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=n.xs.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.xs=n.xs.insert(r.targetId,r),n.Os.set(e,r.targetId)),r})}async function xp(t,e,n){const r=he(t),s=r.xs.get(e),i=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",i,o=>r.persistence.referenceDelegate.removeTarget(o,s))}catch(o){if(!go(o))throw o;te(mg,`Failed to update sequence numbers for target ${e}: ${o}`)}r.xs=r.xs.remove(e),r.Os.delete(s.target)}function _w(t,e,n){const r=he(t);let s=ue.min(),i=ye();return r.persistence.runTransaction("Execute query","readwrite",o=>function(u,d,h){const p=he(u),g=p.Os.get(h);return g!==void 0?W.resolve(p.xs.get(g)):p.Ti.getTargetData(d,h)}(r,o,Mn(e)).next(a=>{if(a)return s=a.lastLimboFreeSnapshotVersion,r.Ti.getMatchingKeysForTargetId(o,a.targetId).next(u=>{i=u})}).next(()=>r.Ms.getDocumentsMatchingQuery(o,e,n?s:ue.min(),n?i:ye())).next(a=>(XV(r,MO(e),a),{documents:a,$s:i})))}function XV(t,e,n){let r=t.Ns.get(e)||ue.min();n.forEach((s,i)=>{i.readTime.compareTo(r)>0&&(r=i.readTime)}),t.Ns.set(e,r)}class Ew{constructor(){this.activeTargetIds=BO()}js(e){this.activeTargetIds=this.activeTargetIds.add(e)}Hs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}zs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class JV{constructor(){this.xo=new Ew,this.Oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.xo.js(e),this.Oo[e]||"not-current"}updateQueryState(e,n,r){this.Oo[e]=n}removeLocalQueryTarget(e){this.xo.Hs(e)}isLocalQueryTarget(e){return this.xo.activeTargetIds.has(e)}clearQueryState(e){delete this.Oo[e]}getAllActiveQueryTargets(){return this.xo.activeTargetIds}isActiveQueryTarget(e){return this.xo.activeTargetIds.has(e)}start(){return this.xo=new Ew,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZV{No(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tw="ConnectivityMonitor";class Sw{constructor(){this.Bo=()=>this.Lo(),this.ko=()=>this.qo(),this.Qo=[],this.$o()}No(e){this.Qo.push(e)}shutdown(){window.removeEventListener("online",this.Bo),window.removeEventListener("offline",this.ko)}$o(){window.addEventListener("online",this.Bo),window.addEventListener("offline",this.ko)}Lo(){te(Tw,"Network connectivity changed: AVAILABLE");for(const e of this.Qo)e(0)}qo(){te(Tw,"Network connectivity changed: UNAVAILABLE");for(const e of this.Qo)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let oc=null;function wp(){return oc===null?oc=function(){return 268435456+Math.round(2147483648*Math.random())}():oc++,"0x"+oc.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lh="RestConnection",eM={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class tM{get Uo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Ko=n+"://"+e.host,this.Wo=`projects/${r}/databases/${s}`,this.Go=this.databaseId.database===hu?`project_id=${r}`:`project_id=${r}&database_id=${s}`}zo(e,n,r,s,i){const o=wp(),a=this.jo(e,n.toUriEncodedString());te(Lh,`Sending RPC '${e}' ${o}:`,a,r);const u={"google-cloud-resource-prefix":this.Wo,"x-goog-request-params":this.Go};this.Ho(u,s,i);const{host:d}=new URL(a),h=Jm(d);return this.Jo(e,a,u,r,h).then(p=>(te(Lh,`Received RPC '${e}' ${o}: `,p),p),p=>{throw Gi(Lh,`RPC '${e}' ${o} failed with error: `,p,"url: ",a,"request:",r),p})}Yo(e,n,r,s,i,o){return this.zo(e,n,r,s,i)}Ho(e,n,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+po}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((s,i)=>e[i]=s),r&&r.headers.forEach((s,i)=>e[i]=s)}jo(e,n){const r=eM[e];return`${this.Ko}/v1/${n}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nM{constructor(e){this.Zo=e.Zo,this.Xo=e.Xo}e_(e){this.t_=e}n_(e){this.r_=e}i_(e){this.s_=e}onMessage(e){this.o_=e}close(){this.Xo()}send(e){this.Zo(e)}__(){this.t_()}a_(){this.r_()}u_(e){this.s_(e)}c_(e){this.o_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wt="WebChannelConnection";class rM extends tM{constructor(e){super(e),this.l_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,r,s,i){const o=wp();return new Promise((a,u)=>{const d=new oS;d.setWithCredentials(!0),d.listenOnce(aS.COMPLETE,()=>{try{switch(d.getLastErrorCode()){case Cc.NO_ERROR:const p=d.getResponseJson();te(wt,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(p)),a(p);break;case Cc.TIMEOUT:te(wt,`RPC '${e}' ${o} timed out`),u(new re(q.DEADLINE_EXCEEDED,"Request time out"));break;case Cc.HTTP_ERROR:const g=d.getStatus();if(te(wt,`RPC '${e}' ${o} failed with status:`,g,"response text:",d.getResponseText()),g>0){let w=d.getResponseJson();Array.isArray(w)&&(w=w[0]);const b=w==null?void 0:w.error;if(b&&b.status&&b.message){const x=function(_){const y=_.toLowerCase().replace(/_/g,"-");return Object.values(q).indexOf(y)>=0?y:q.UNKNOWN}(b.status);u(new re(x,b.message))}else u(new re(q.UNKNOWN,"Server responded with status "+d.getStatus()))}else u(new re(q.UNAVAILABLE,"Connection failed."));break;default:oe(9055,{h_:e,streamId:o,P_:d.getLastErrorCode(),T_:d.getLastError()})}}finally{te(wt,`RPC '${e}' ${o} completed.`)}});const h=JSON.stringify(s);te(wt,`RPC '${e}' ${o} sending request:`,s),d.send(n,"POST",h,r,15)})}I_(e,n,r){const s=wp(),i=[this.Ko,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=uS(),a=cS(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},d=this.longPollingOptions.timeoutSeconds;d!==void 0&&(u.longPollingTimeout=Math.round(1e3*d)),this.useFetchStreams&&(u.useFetchStreams=!0),this.Ho(u.initMessageHeaders,n,r),u.encodeInitMessageHeaders=!0;const h=i.join("");te(wt,`Creating RPC '${e}' stream ${s}: ${h}`,u);const p=o.createWebChannel(h,u);this.E_(p);let g=!1,w=!1;const b=new nM({Zo:E=>{w?te(wt,`Not sending because RPC '${e}' stream ${s} is closed:`,E):(g||(te(wt,`Opening RPC '${e}' stream ${s} transport.`),p.open(),g=!0),te(wt,`RPC '${e}' stream ${s} sending:`,E),p.send(E))},Xo:()=>p.close()}),x=(E,_,y)=>{E.listen(_,C=>{try{y(C)}catch(k){setTimeout(()=>{throw k},0)}})};return x(p,Qo.EventType.OPEN,()=>{w||(te(wt,`RPC '${e}' stream ${s} transport opened.`),b.__())}),x(p,Qo.EventType.CLOSE,()=>{w||(w=!0,te(wt,`RPC '${e}' stream ${s} transport closed`),b.u_(),this.d_(p))}),x(p,Qo.EventType.ERROR,E=>{w||(w=!0,Gi(wt,`RPC '${e}' stream ${s} transport errored. Name:`,E.name,"Message:",E.message),b.u_(new re(q.UNAVAILABLE,"The operation could not be completed")))}),x(p,Qo.EventType.MESSAGE,E=>{var _;if(!w){const y=E.data[0];Ie(!!y,16349);const C=y,k=(C==null?void 0:C.error)||((_=C[0])===null||_===void 0?void 0:_.error);if(k){te(wt,`RPC '${e}' stream ${s} received error:`,k);const O=k.status;let D=function(I){const A=Ge[I];if(A!==void 0)return HS(A)}(O),S=k.message;D===void 0&&(D=q.INTERNAL,S="Unknown error status: "+O+" with message "+k.message),w=!0,b.u_(new re(D,S)),p.close()}else te(wt,`RPC '${e}' stream ${s} received:`,y),b.c_(y)}}),x(a,lS.STAT_EVENT,E=>{E.stat===ap.PROXY?te(wt,`RPC '${e}' stream ${s} detected buffering proxy`):E.stat===ap.NOPROXY&&te(wt,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{b.a_()},0),b}terminate(){this.l_.forEach(e=>e.close()),this.l_=[]}E_(e){this.l_.push(e)}d_(e){this.l_=this.l_.filter(n=>n===e)}}function Fh(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pd(t){return new aV(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sC{constructor(e,n,r=1e3,s=1.5,i=6e4){this.xi=e,this.timerId=n,this.A_=r,this.R_=s,this.V_=i,this.m_=0,this.f_=null,this.g_=Date.now(),this.reset()}reset(){this.m_=0}p_(){this.m_=this.V_}y_(e){this.cancel();const n=Math.floor(this.m_+this.w_()),r=Math.max(0,Date.now()-this.g_),s=Math.max(0,n-r);s>0&&te("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.m_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.f_=this.xi.enqueueAfterDelay(this.timerId,s,()=>(this.g_=Date.now(),e())),this.m_*=this.R_,this.m_<this.A_&&(this.m_=this.A_),this.m_>this.V_&&(this.m_=this.V_)}b_(){this.f_!==null&&(this.f_.skipDelay(),this.f_=null)}cancel(){this.f_!==null&&(this.f_.cancel(),this.f_=null)}w_(){return(Math.random()-.5)*this.m_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cw="PersistentStream";class iC{constructor(e,n,r,s,i,o,a,u){this.xi=e,this.S_=r,this.D_=s,this.connection=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=u,this.state=0,this.v_=0,this.C_=null,this.F_=null,this.stream=null,this.M_=0,this.x_=new sC(e,n)}O_(){return this.state===1||this.state===5||this.N_()}N_(){return this.state===2||this.state===3}start(){this.M_=0,this.state!==4?this.auth():this.B_()}async stop(){this.O_()&&await this.close(0)}L_(){this.state=0,this.x_.reset()}k_(){this.N_()&&this.C_===null&&(this.C_=this.xi.enqueueAfterDelay(this.S_,6e4,()=>this.q_()))}Q_(e){this.U_(),this.stream.send(e)}async q_(){if(this.N_())return this.close(0)}U_(){this.C_&&(this.C_.cancel(),this.C_=null)}K_(){this.F_&&(this.F_.cancel(),this.F_=null)}async close(e,n){this.U_(),this.K_(),this.x_.cancel(),this.v_++,e!==4?this.x_.reset():n&&n.code===q.RESOURCE_EXHAUSTED?(lr(n.toString()),lr("Using maximum backoff delay to prevent overloading the backend."),this.x_.p_()):n&&n.code===q.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.W_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.i_(n)}W_(){}auth(){this.state=1;const e=this.G_(this.v_),n=this.v_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.v_===n&&this.z_(r,s)},r=>{e(()=>{const s=new re(q.UNKNOWN,"Fetching auth token failed: "+r.message);return this.j_(s)})})}z_(e,n){const r=this.G_(this.v_);this.stream=this.H_(e,n),this.stream.e_(()=>{r(()=>this.listener.e_())}),this.stream.n_(()=>{r(()=>(this.state=2,this.F_=this.xi.enqueueAfterDelay(this.D_,1e4,()=>(this.N_()&&(this.state=3),Promise.resolve())),this.listener.n_()))}),this.stream.i_(s=>{r(()=>this.j_(s))}),this.stream.onMessage(s=>{r(()=>++this.M_==1?this.J_(s):this.onNext(s))})}B_(){this.state=5,this.x_.y_(async()=>{this.state=0,this.start()})}j_(e){return te(Cw,`close with error: ${e}`),this.stream=null,this.close(4,e)}G_(e){return n=>{this.xi.enqueueAndForget(()=>this.v_===e?n():(te(Cw,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class sM extends iC{constructor(e,n,r,s,i,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}H_(e,n){return this.connection.I_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.x_.reset();const n=uV(this.serializer,e),r=function(i){if(!("targetChange"in i))return ue.min();const o=i.targetChange;return o.targetIds&&o.targetIds.length?ue.min():o.readTime?Ln(o.readTime):ue.min()}(e);return this.listener.Y_(n,r)}Z_(e){const n={};n.database=yp(this.serializer),n.addTarget=function(i,o){let a;const u=o.target;if(a=hp(u)?{documents:fV(i,u)}:{query:pV(i,u).gt},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=KS(i,o.resumeToken);const d=mp(i,o.expectedCount);d!==null&&(a.expectedCount=d)}else if(o.snapshotVersion.compareTo(ue.min())>0){a.readTime=yu(i,o.snapshotVersion.toTimestamp());const d=mp(i,o.expectedCount);d!==null&&(a.expectedCount=d)}return a}(this.serializer,e);const r=gV(this.serializer,e);r&&(n.labels=r),this.Q_(n)}X_(e){const n={};n.database=yp(this.serializer),n.removeTarget=e,this.Q_(n)}}class iM extends iC{constructor(e,n,r,s,i,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}get ea(){return this.M_>0}start(){this.lastStreamToken=void 0,super.start()}W_(){this.ea&&this.ta([])}H_(e,n){return this.connection.I_("Write",e,n)}J_(e){return Ie(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Ie(!e.writeResults||e.writeResults.length===0,55816),this.listener.na()}onNext(e){Ie(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.x_.reset();const n=hV(e.writeResults,e.commitTime),r=Ln(e.commitTime);return this.listener.ra(r,n)}ia(){const e={};e.database=yp(this.serializer),this.Q_(e)}ta(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>dV(this.serializer,r))};this.Q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oM{}class aM extends oM{constructor(e,n,r,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.sa=!1}oa(){if(this.sa)throw new re(q.FAILED_PRECONDITION,"The client has already been terminated.")}zo(e,n,r,s){return this.oa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,o])=>this.connection.zo(e,gp(n,r),s,i,o)).catch(i=>{throw i.name==="FirebaseError"?(i.code===q.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new re(q.UNKNOWN,i.toString())})}Yo(e,n,r,s,i){return this.oa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Yo(e,gp(n,r),s,o,a,i)).catch(o=>{throw o.name==="FirebaseError"?(o.code===q.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new re(q.UNKNOWN,o.toString())})}terminate(){this.sa=!0,this.connection.terminate()}}class lM{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this._a=0,this.aa=null,this.ua=!0}ca(){this._a===0&&(this.la("Unknown"),this.aa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.aa=null,this.ha("Backend didn't respond within 10 seconds."),this.la("Offline"),Promise.resolve())))}Pa(e){this.state==="Online"?this.la("Unknown"):(this._a++,this._a>=1&&(this.Ta(),this.ha(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.la("Offline")))}set(e){this.Ta(),this._a=0,e==="Online"&&(this.ua=!1),this.la(e)}la(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ha(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.ua?(lr(n),this.ua=!1):te("OnlineStateTracker",n)}Ta(){this.aa!==null&&(this.aa.cancel(),this.aa=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fs="RemoteStore";class cM{constructor(e,n,r,s,i){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Ia=[],this.Ea=new Map,this.da=new Set,this.Aa=[],this.Ra=i,this.Ra.No(o=>{r.enqueueAndForget(async()=>{Ws(this)&&(te(Fs,"Restarting streams for network reachability change."),await async function(u){const d=he(u);d.da.add(4),await dl(d),d.Va.set("Unknown"),d.da.delete(4),await md(d)}(this))})}),this.Va=new lM(r,s)}}async function md(t){if(Ws(t))for(const e of t.Aa)await e(!0)}async function dl(t){for(const e of t.Aa)await e(!1)}function oC(t,e){const n=he(t);n.Ea.has(e.targetId)||(n.Ea.set(e.targetId,e),xg(n)?yg(n):vo(n).N_()&&vg(n,e))}function gg(t,e){const n=he(t),r=vo(n);n.Ea.delete(e),r.N_()&&aC(n,e),n.Ea.size===0&&(r.N_()?r.k_():Ws(n)&&n.Va.set("Unknown"))}function vg(t,e){if(t.ma.Ke(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ue.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}vo(t).Z_(e)}function aC(t,e){t.ma.Ke(e),vo(t).X_(e)}function yg(t){t.ma=new rV({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),Rt:e=>t.Ea.get(e)||null,Pt:()=>t.datastore.serializer.databaseId}),vo(t).start(),t.Va.ca()}function xg(t){return Ws(t)&&!vo(t).O_()&&t.Ea.size>0}function Ws(t){return he(t).da.size===0}function lC(t){t.ma=void 0}async function uM(t){t.Va.set("Online")}async function dM(t){t.Ea.forEach((e,n)=>{vg(t,e)})}async function hM(t,e){lC(t),xg(t)?(t.Va.Pa(e),yg(t)):t.Va.set("Unknown")}async function fM(t,e,n){if(t.Va.set("Online"),e instanceof qS&&e.state===2&&e.cause)try{await async function(s,i){const o=i.cause;for(const a of i.targetIds)s.Ea.has(a)&&(await s.remoteSyncer.rejectListen(a,o),s.Ea.delete(a),s.ma.removeTarget(a))}(t,e)}catch(r){te(Fs,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await wu(t,r)}else if(e instanceof Ac?t.ma.Xe(e):e instanceof WS?t.ma.ot(e):t.ma.nt(e),!n.isEqual(ue.min()))try{const r=await rC(t.localStore);n.compareTo(r)>=0&&await function(i,o){const a=i.ma.It(o);return a.targetChanges.forEach((u,d)=>{if(u.resumeToken.approximateByteSize()>0){const h=i.Ea.get(d);h&&i.Ea.set(d,h.withResumeToken(u.resumeToken,o))}}),a.targetMismatches.forEach((u,d)=>{const h=i.Ea.get(u);if(!h)return;i.Ea.set(u,h.withResumeToken(pt.EMPTY_BYTE_STRING,h.snapshotVersion)),aC(i,u);const p=new Ir(h.target,u,d,h.sequenceNumber);vg(i,p)}),i.remoteSyncer.applyRemoteEvent(a)}(t,n)}catch(r){te(Fs,"Failed to raise snapshot:",r),await wu(t,r)}}async function wu(t,e,n){if(!go(e))throw e;t.da.add(1),await dl(t),t.Va.set("Offline"),n||(n=()=>rC(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{te(Fs,"Retrying IndexedDB access"),await n(),t.da.delete(1),await md(t)})}function cC(t,e){return e().catch(n=>wu(t,n,e))}async function gd(t){const e=he(t),n=Qr(e);let r=e.Ia.length>0?e.Ia[e.Ia.length-1].batchId:tg;for(;pM(e);)try{const s=await QV(e.localStore,r);if(s===null){e.Ia.length===0&&n.k_();break}r=s.batchId,mM(e,s)}catch(s){await wu(e,s)}uC(e)&&dC(e)}function pM(t){return Ws(t)&&t.Ia.length<10}function mM(t,e){t.Ia.push(e);const n=Qr(t);n.N_()&&n.ea&&n.ta(e.mutations)}function uC(t){return Ws(t)&&!Qr(t).O_()&&t.Ia.length>0}function dC(t){Qr(t).start()}async function gM(t){Qr(t).ia()}async function vM(t){const e=Qr(t);for(const n of t.Ia)e.ta(n.mutations)}async function yM(t,e,n){const r=t.Ia.shift(),s=cg.from(r,e,n);await cC(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await gd(t)}async function xM(t,e){e&&Qr(t).ea&&await async function(r,s){if(function(o){return tV(o)&&o!==q.ABORTED}(s.code)){const i=r.Ia.shift();Qr(r).L_(),await cC(r,()=>r.remoteSyncer.rejectFailedWrite(i.batchId,s)),await gd(r)}}(t,e),uC(t)&&dC(t)}async function bw(t,e){const n=he(t);n.asyncQueue.verifyOperationInProgress(),te(Fs,"RemoteStore received new credentials");const r=Ws(n);n.da.add(3),await dl(n),r&&n.Va.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.da.delete(3),await md(n)}async function wM(t,e){const n=he(t);e?(n.da.delete(2),await md(n)):e||(n.da.add(2),await dl(n),n.Va.set("Unknown"))}function vo(t){return t.fa||(t.fa=function(n,r,s){const i=he(n);return i.oa(),new sM(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{e_:uM.bind(null,t),n_:dM.bind(null,t),i_:hM.bind(null,t),Y_:fM.bind(null,t)}),t.Aa.push(async e=>{e?(t.fa.L_(),xg(t)?yg(t):t.Va.set("Unknown")):(await t.fa.stop(),lC(t))})),t.fa}function Qr(t){return t.ga||(t.ga=function(n,r,s){const i=he(n);return i.oa(),new iM(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{e_:()=>Promise.resolve(),n_:gM.bind(null,t),i_:xM.bind(null,t),na:vM.bind(null,t),ra:yM.bind(null,t)}),t.Aa.push(async e=>{e?(t.ga.L_(),await gd(t)):(await t.ga.stop(),t.Ia.length>0&&(te(Fs,`Stopping write stream with ${t.Ia.length} pending writes`),t.Ia=[]))})),t.ga}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wg{constructor(e,n,r,s,i){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=i,this.deferred=new Zn,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,s,i){const o=Date.now()+r,a=new wg(e,n,o,s,i);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new re(q.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function _g(t,e){if(lr("AsyncQueue",`${e}: ${t}`),go(t))return new re(q.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ki{static emptySet(e){return new ki(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||ie.comparator(n.key,r.key):(n,r)=>ie.comparator(n.key,r.key),this.keyedMap=Yo(),this.sortedSet=new $e(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof ki)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(!s.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new ki;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rw{constructor(){this.pa=new $e(ie.comparator)}track(e){const n=e.doc.key,r=this.pa.get(n);r?e.type!==0&&r.type===3?this.pa=this.pa.insert(n,e):e.type===3&&r.type!==1?this.pa=this.pa.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.pa=this.pa.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.pa=this.pa.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.pa=this.pa.remove(n):e.type===1&&r.type===2?this.pa=this.pa.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.pa=this.pa.insert(n,{type:2,doc:e.doc}):oe(63341,{Vt:e,ya:r}):this.pa=this.pa.insert(n,e)}wa(){const e=[];return this.pa.inorderTraversal((n,r)=>{e.push(r)}),e}}class Zi{constructor(e,n,r,s,i,o,a,u,d){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=u,this.hasCachedResults=d}static fromInitialDocuments(e,n,r,s,i){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new Zi(e,n,ki.emptySet(n),o,r,s,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&cd(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _M{constructor(){this.ba=void 0,this.Sa=[]}Da(){return this.Sa.some(e=>e.va())}}class EM{constructor(){this.queries=Iw(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,r){const s=he(n),i=s.queries;s.queries=Iw(),i.forEach((o,a)=>{for(const u of a.Sa)u.onError(r)})})(this,new re(q.ABORTED,"Firestore shutting down"))}}function Iw(){return new Hs(t=>kS(t),cd)}async function hC(t,e){const n=he(t);let r=3;const s=e.query;let i=n.queries.get(s);i?!i.Da()&&e.va()&&(r=2):(i=new _M,r=e.va()?0:1);try{switch(r){case 0:i.ba=await n.onListen(s,!0);break;case 1:i.ba=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(o){const a=_g(o,`Initialization of query '${ri(e.query)}' failed`);return void e.onError(a)}n.queries.set(s,i),i.Sa.push(e),e.Fa(n.onlineState),i.ba&&e.Ma(i.ba)&&Eg(n)}async function fC(t,e){const n=he(t),r=e.query;let s=3;const i=n.queries.get(r);if(i){const o=i.Sa.indexOf(e);o>=0&&(i.Sa.splice(o,1),i.Sa.length===0?s=e.va()?0:1:!i.Da()&&e.va()&&(s=2))}switch(s){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function TM(t,e){const n=he(t);let r=!1;for(const s of e){const i=s.query,o=n.queries.get(i);if(o){for(const a of o.Sa)a.Ma(s)&&(r=!0);o.ba=s}}r&&Eg(n)}function SM(t,e,n){const r=he(t),s=r.queries.get(e);if(s)for(const i of s.Sa)i.onError(n);r.queries.delete(e)}function Eg(t){t.Ca.forEach(e=>{e.next()})}var _p,Aw;(Aw=_p||(_p={})).xa="default",Aw.Cache="cache";class pC{constructor(e,n,r){this.query=e,this.Oa=n,this.Na=!1,this.Ba=null,this.onlineState="Unknown",this.options=r||{}}Ma(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new Zi(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Na?this.La(e)&&(this.Oa.next(e),n=!0):this.ka(e,this.onlineState)&&(this.qa(e),n=!0),this.Ba=e,n}onError(e){this.Oa.error(e)}Fa(e){this.onlineState=e;let n=!1;return this.Ba&&!this.Na&&this.ka(this.Ba,e)&&(this.qa(this.Ba),n=!0),n}ka(e,n){if(!e.fromCache||!this.va())return!0;const r=n!=="Offline";return(!this.options.Qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}La(e){if(e.docChanges.length>0)return!0;const n=this.Ba&&this.Ba.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}qa(e){e=Zi.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Na=!0,this.Oa.next(e)}va(){return this.options.source!==_p.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mC{constructor(e){this.key=e}}class gC{constructor(e){this.key=e}}class CM{constructor(e,n){this.query=e,this.Ha=n,this.Ja=null,this.hasCachedResults=!1,this.current=!1,this.Ya=ye(),this.mutatedKeys=ye(),this.Za=jS(e),this.Xa=new ki(this.Za)}get eu(){return this.Ha}tu(e,n){const r=n?n.nu:new Rw,s=n?n.Xa:this.Xa;let i=n?n.mutatedKeys:this.mutatedKeys,o=s,a=!1;const u=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,d=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((h,p)=>{const g=s.get(h),w=ud(this.query,p)?p:null,b=!!g&&this.mutatedKeys.has(g.key),x=!!w&&(w.hasLocalMutations||this.mutatedKeys.has(w.key)&&w.hasCommittedMutations);let E=!1;g&&w?g.data.isEqual(w.data)?b!==x&&(r.track({type:3,doc:w}),E=!0):this.ru(g,w)||(r.track({type:2,doc:w}),E=!0,(u&&this.Za(w,u)>0||d&&this.Za(w,d)<0)&&(a=!0)):!g&&w?(r.track({type:0,doc:w}),E=!0):g&&!w&&(r.track({type:1,doc:g}),E=!0,(u||d)&&(a=!0)),E&&(w?(o=o.add(w),i=x?i.add(h):i.delete(h)):(o=o.delete(h),i=i.delete(h)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const h=this.query.limitType==="F"?o.last():o.first();o=o.delete(h.key),i=i.delete(h.key),r.track({type:1,doc:h})}return{Xa:o,nu:r,Cs:a,mutatedKeys:i}}ru(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,s){const i=this.Xa;this.Xa=e.Xa,this.mutatedKeys=e.mutatedKeys;const o=e.nu.wa();o.sort((h,p)=>function(w,b){const x=E=>{switch(E){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return oe(20277,{Vt:E})}};return x(w)-x(b)}(h.type,p.type)||this.Za(h.doc,p.doc)),this.iu(r),s=s!=null&&s;const a=n&&!s?this.su():[],u=this.Ya.size===0&&this.current&&!s?1:0,d=u!==this.Ja;return this.Ja=u,o.length!==0||d?{snapshot:new Zi(this.query,e.Xa,i,o,e.mutatedKeys,u===0,d,!1,!!r&&r.resumeToken.approximateByteSize()>0),ou:a}:{ou:a}}Fa(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Xa:this.Xa,nu:new Rw,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{ou:[]}}_u(e){return!this.Ha.has(e)&&!!this.Xa.has(e)&&!this.Xa.get(e).hasLocalMutations}iu(e){e&&(e.addedDocuments.forEach(n=>this.Ha=this.Ha.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ha=this.Ha.delete(n)),this.current=e.current)}su(){if(!this.current)return[];const e=this.Ya;this.Ya=ye(),this.Xa.forEach(r=>{this._u(r.key)&&(this.Ya=this.Ya.add(r.key))});const n=[];return e.forEach(r=>{this.Ya.has(r)||n.push(new gC(r))}),this.Ya.forEach(r=>{e.has(r)||n.push(new mC(r))}),n}au(e){this.Ha=e.$s,this.Ya=ye();const n=this.tu(e.documents);return this.applyChanges(n,!0)}uu(){return Zi.fromInitialDocuments(this.query,this.Xa,this.mutatedKeys,this.Ja===0,this.hasCachedResults)}}const Tg="SyncEngine";class bM{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class RM{constructor(e){this.key=e,this.cu=!1}}class IM{constructor(e,n,r,s,i,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.lu={},this.hu=new Hs(a=>kS(a),cd),this.Pu=new Map,this.Tu=new Set,this.Iu=new $e(ie.comparator),this.Eu=new Map,this.du=new hg,this.Au={},this.Ru=new Map,this.Vu=Ji.lr(),this.onlineState="Unknown",this.mu=void 0}get isPrimaryClient(){return this.mu===!0}}async function AM(t,e,n=!0){const r=EC(t);let s;const i=r.hu.get(e);return i?(r.sharedClientState.addLocalQueryTarget(i.targetId),s=i.view.uu()):s=await vC(r,e,n,!0),s}async function NM(t,e){const n=EC(t);await vC(n,e,!0,!1)}async function vC(t,e,n,r){const s=await YV(t.localStore,Mn(e)),i=s.targetId,o=t.sharedClientState.addLocalQueryTarget(i,n);let a;return r&&(a=await PM(t,e,i,o==="current",s.resumeToken)),t.isPrimaryClient&&n&&oC(t.remoteStore,s),a}async function PM(t,e,n,r,s){t.fu=(p,g,w)=>async function(x,E,_,y){let C=E.view.tu(_);C.Cs&&(C=await _w(x.localStore,E.query,!1).then(({documents:S})=>E.view.tu(S,C)));const k=y&&y.targetChanges.get(E.targetId),O=y&&y.targetMismatches.get(E.targetId)!=null,D=E.view.applyChanges(C,x.isPrimaryClient,k,O);return Pw(x,E.targetId,D.ou),D.snapshot}(t,p,g,w);const i=await _w(t.localStore,e,!0),o=new CM(e,i.$s),a=o.tu(i.documents),u=ul.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",s),d=o.applyChanges(a,t.isPrimaryClient,u);Pw(t,n,d.ou);const h=new bM(e,n,o);return t.hu.set(e,h),t.Pu.has(n)?t.Pu.get(n).push(e):t.Pu.set(n,[e]),d.snapshot}async function kM(t,e,n){const r=he(t),s=r.hu.get(e),i=r.Pu.get(s.targetId);if(i.length>1)return r.Pu.set(s.targetId,i.filter(o=>!cd(o,e))),void r.hu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await xp(r.localStore,s.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(s.targetId),n&&gg(r.remoteStore,s.targetId),Ep(r,s.targetId)}).catch(mo)):(Ep(r,s.targetId),await xp(r.localStore,s.targetId,!0))}async function jM(t,e){const n=he(t),r=n.hu.get(e),s=n.Pu.get(r.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),gg(n.remoteStore,r.targetId))}async function DM(t,e,n){const r=UM(t);try{const s=await function(o,a){const u=he(o),d=We.now(),h=a.reduce((w,b)=>w.add(b.key),ye());let p,g;return u.persistence.runTransaction("Locally write mutations","readwrite",w=>{let b=cr(),x=ye();return u.Bs.getEntries(w,h).next(E=>{b=E,b.forEach((_,y)=>{y.isValidDocument()||(x=x.add(_))})}).next(()=>u.localDocuments.getOverlayedDocuments(w,b)).next(E=>{p=E;const _=[];for(const y of a){const C=YO(y,p.get(y.key).overlayedDocument);C!=null&&_.push(new is(y.key,C,SS(C.value.mapValue),wn.exists(!0)))}return u.mutationQueue.addMutationBatch(w,d,_,a)}).next(E=>{g=E;const _=E.applyToLocalDocumentSet(p,x);return u.documentOverlayCache.saveOverlays(w,E.batchId,_)})}).then(()=>({batchId:g.batchId,changes:OS(p)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(o,a,u){let d=o.Au[o.currentUser.toKey()];d||(d=new $e(me)),d=d.insert(a,u),o.Au[o.currentUser.toKey()]=d}(r,s.batchId,n),await hl(r,s.changes),await gd(r.remoteStore)}catch(s){const i=_g(s,"Failed to persist write");n.reject(i)}}async function yC(t,e){const n=he(t);try{const r=await KV(n.localStore,e);e.targetChanges.forEach((s,i)=>{const o=n.Eu.get(i);o&&(Ie(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1,22616),s.addedDocuments.size>0?o.cu=!0:s.modifiedDocuments.size>0?Ie(o.cu,14607):s.removedDocuments.size>0&&(Ie(o.cu,42227),o.cu=!1))}),await hl(n,r,e)}catch(r){await mo(r)}}function Nw(t,e,n){const r=he(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.hu.forEach((i,o)=>{const a=o.view.Fa(e);a.snapshot&&s.push(a.snapshot)}),function(o,a){const u=he(o);u.onlineState=a;let d=!1;u.queries.forEach((h,p)=>{for(const g of p.Sa)g.Fa(a)&&(d=!0)}),d&&Eg(u)}(r.eventManager,e),s.length&&r.lu.Y_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function OM(t,e,n){const r=he(t);r.sharedClientState.updateQueryState(e,"rejected",n);const s=r.Eu.get(e),i=s&&s.key;if(i){let o=new $e(ie.comparator);o=o.insert(i,Tt.newNoDocument(i,ue.min()));const a=ye().add(i),u=new fd(ue.min(),new Map,new $e(me),o,a);await yC(r,u),r.Iu=r.Iu.remove(i),r.Eu.delete(e),Sg(r)}else await xp(r.localStore,e,!1).then(()=>Ep(r,e,n)).catch(mo)}async function VM(t,e){const n=he(t),r=e.batch.batchId;try{const s=await qV(n.localStore,e);wC(n,r,null),xC(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await hl(n,s)}catch(s){await mo(s)}}async function MM(t,e,n){const r=he(t);try{const s=await function(o,a){const u=he(o);return u.persistence.runTransaction("Reject batch","readwrite-primary",d=>{let h;return u.mutationQueue.lookupMutationBatch(d,a).next(p=>(Ie(p!==null,37113),h=p.keys(),u.mutationQueue.removeMutationBatch(d,p))).next(()=>u.mutationQueue.performConsistencyCheck(d)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(d,h,a)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(d,h)).next(()=>u.localDocuments.getDocuments(d,h))})}(r.localStore,e);wC(r,e,n),xC(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await hl(r,s)}catch(s){await mo(s)}}function xC(t,e){(t.Ru.get(e)||[]).forEach(n=>{n.resolve()}),t.Ru.delete(e)}function wC(t,e,n){const r=he(t);let s=r.Au[r.currentUser.toKey()];if(s){const i=s.get(e);i&&(n?i.reject(n):i.resolve(),s=s.remove(e)),r.Au[r.currentUser.toKey()]=s}}function Ep(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Pu.get(e))t.hu.delete(r),n&&t.lu.gu(r,n);t.Pu.delete(e),t.isPrimaryClient&&t.du.Hr(e).forEach(r=>{t.du.containsKey(r)||_C(t,r)})}function _C(t,e){t.Tu.delete(e.path.canonicalString());const n=t.Iu.get(e);n!==null&&(gg(t.remoteStore,n),t.Iu=t.Iu.remove(e),t.Eu.delete(n),Sg(t))}function Pw(t,e,n){for(const r of n)r instanceof mC?(t.du.addReference(r.key,e),LM(t,r)):r instanceof gC?(te(Tg,"Document no longer in limbo: "+r.key),t.du.removeReference(r.key,e),t.du.containsKey(r.key)||_C(t,r.key)):oe(19791,{pu:r})}function LM(t,e){const n=e.key,r=n.path.canonicalString();t.Iu.get(n)||t.Tu.has(r)||(te(Tg,"New document in limbo: "+n),t.Tu.add(r),Sg(t))}function Sg(t){for(;t.Tu.size>0&&t.Iu.size<t.maxConcurrentLimboResolutions;){const e=t.Tu.values().next().value;t.Tu.delete(e);const n=new ie(Ve.fromString(e)),r=t.Vu.next();t.Eu.set(r,new RM(n)),t.Iu=t.Iu.insert(n,r),oC(t.remoteStore,new Ir(Mn(og(n.path)),r,"TargetPurposeLimboResolution",od.le))}}async function hl(t,e,n){const r=he(t),s=[],i=[],o=[];r.hu.isEmpty()||(r.hu.forEach((a,u)=>{o.push(r.fu(u,e,n).then(d=>{var h;if((d||n)&&r.isPrimaryClient){const p=d?!d.fromCache:(h=n==null?void 0:n.targetChanges.get(u.targetId))===null||h===void 0?void 0:h.current;r.sharedClientState.updateQueryState(u.targetId,p?"current":"not-current")}if(d){s.push(d);const p=pg.Rs(u.targetId,d);i.push(p)}}))}),await Promise.all(o),r.lu.Y_(s),await async function(u,d){const h=he(u);try{await h.persistence.runTransaction("notifyLocalViewChanges","readwrite",p=>W.forEach(d,g=>W.forEach(g.ds,w=>h.persistence.referenceDelegate.addReference(p,g.targetId,w)).next(()=>W.forEach(g.As,w=>h.persistence.referenceDelegate.removeReference(p,g.targetId,w)))))}catch(p){if(!go(p))throw p;te(mg,"Failed to update sequence numbers: "+p)}for(const p of d){const g=p.targetId;if(!p.fromCache){const w=h.xs.get(g),b=w.snapshotVersion,x=w.withLastLimboFreeSnapshotVersion(b);h.xs=h.xs.insert(g,x)}}}(r.localStore,i))}async function FM(t,e){const n=he(t);if(!n.currentUser.isEqual(e)){te(Tg,"User change. New user:",e.toKey());const r=await nC(n.localStore,e);n.currentUser=e,function(i,o){i.Ru.forEach(a=>{a.forEach(u=>{u.reject(new re(q.CANCELLED,o))})}),i.Ru.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await hl(n,r.ks)}}function zM(t,e){const n=he(t),r=n.Eu.get(e);if(r&&r.cu)return ye().add(r.key);{let s=ye();const i=n.Pu.get(e);if(!i)return s;for(const o of i){const a=n.hu.get(o);s=s.unionWith(a.view.eu)}return s}}function EC(t){const e=he(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=yC.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=zM.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=OM.bind(null,e),e.lu.Y_=TM.bind(null,e.eventManager),e.lu.gu=SM.bind(null,e.eventManager),e}function UM(t){const e=he(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=VM.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=MM.bind(null,e),e}class _u{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=pd(e.databaseInfo.databaseId),this.sharedClientState=this.bu(e),this.persistence=this.Su(e),await this.persistence.start(),this.localStore=this.Du(e),this.gcScheduler=this.vu(e,this.localStore),this.indexBackfillerScheduler=this.Cu(e,this.localStore)}vu(e,n){return null}Cu(e,n){return null}Du(e){return WV(this.persistence,new $V,e.initialUser,this.serializer)}Su(e){return new tC(fg.fi,this.serializer)}bu(e){return new JV}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}_u.provider={build:()=>new _u};class $M extends _u{constructor(e){super(),this.cacheSizeBytes=e}vu(e,n){Ie(this.persistence.referenceDelegate instanceof xu,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new RV(r,e.asyncQueue,n)}Su(e){const n=this.cacheSizeBytes!==void 0?jt.withCacheSize(this.cacheSizeBytes):jt.DEFAULT;return new tC(r=>xu.fi(r,n),this.serializer)}}class Tp{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>Nw(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=FM.bind(null,this.syncEngine),await wM(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new EM}()}createDatastore(e){const n=pd(e.databaseInfo.databaseId),r=function(i){return new rM(i)}(e.databaseInfo);return function(i,o,a,u){return new aM(i,o,a,u)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,s,i,o,a){return new cM(r,s,i,o,a)}(this.localStore,this.datastore,e.asyncQueue,n=>Nw(this.syncEngine,n,0),function(){return Sw.C()?new Sw:new ZV}())}createSyncEngine(e,n){return function(s,i,o,a,u,d,h){const p=new IM(s,i,o,a,u,d);return h&&(p.mu=!0),p}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(s){const i=he(s);te(Fs,"RemoteStore shutting down."),i.da.add(5),await dl(i),i.Ra.shutdown(),i.Va.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}Tp.provider={build:()=>new Tp};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TC{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Mu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Mu(this.observer.error,e):lr("Uncaught Error in snapshot listener:",e.toString()))}xu(){this.muted=!0}Mu(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yr="FirestoreClient";class BM{constructor(e,n,r,s,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=s,this.user=_t.UNAUTHENTICATED,this.clientId=pS.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(r,async o=>{te(Yr,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(te(Yr,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Zn;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=_g(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function zh(t,e){t.asyncQueue.verifyOperationInProgress(),te(Yr,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async s=>{r.isEqual(s)||(await nC(e.localStore,s),r=s)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function kw(t,e){t.asyncQueue.verifyOperationInProgress();const n=await HM(t);te(Yr,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>bw(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,s)=>bw(e.remoteStore,s)),t._onlineComponents=e}async function HM(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){te(Yr,"Using user provided OfflineComponentProvider");try{await zh(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(s){return s.name==="FirebaseError"?s.code===q.FAILED_PRECONDITION||s.code===q.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(n))throw n;Gi("Error using user provided cache. Falling back to memory cache: "+n),await zh(t,new _u)}}else te(Yr,"Using default OfflineComponentProvider"),await zh(t,new $M(void 0));return t._offlineComponents}async function SC(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(te(Yr,"Using user provided OnlineComponentProvider"),await kw(t,t._uninitializedComponentsProvider._online)):(te(Yr,"Using default OnlineComponentProvider"),await kw(t,new Tp))),t._onlineComponents}function WM(t){return SC(t).then(e=>e.syncEngine)}async function CC(t){const e=await SC(t),n=e.eventManager;return n.onListen=AM.bind(null,e.syncEngine),n.onUnlisten=kM.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=NM.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=jM.bind(null,e.syncEngine),n}function qM(t,e,n={}){const r=new Zn;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,a,u,d){const h=new TC({next:g=>{h.xu(),o.enqueueAndForget(()=>fC(i,p));const w=g.docs.has(a);!w&&g.fromCache?d.reject(new re(q.UNAVAILABLE,"Failed to get document because the client is offline.")):w&&g.fromCache&&u&&u.source==="server"?d.reject(new re(q.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):d.resolve(g)},error:g=>d.reject(g)}),p=new pC(og(a.path),h,{includeMetadataChanges:!0,Qa:!0});return hC(i,p)}(await CC(t),t.asyncQueue,e,n,r)),r.promise}function KM(t,e,n={}){const r=new Zn;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,a,u,d){const h=new TC({next:g=>{h.xu(),o.enqueueAndForget(()=>fC(i,p)),g.fromCache&&u.source==="server"?d.reject(new re(q.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):d.resolve(g)},error:g=>d.reject(g)}),p=new pC(a,h,{includeMetadataChanges:!0,Qa:!0});return hC(i,p)}(await CC(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bC(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jw=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RC(t,e,n){if(!n)throw new re(q.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function GM(t,e,n,r){if(e===!0&&r===!0)throw new re(q.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function Dw(t){if(!ie.isDocumentKey(t))throw new re(q.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function Ow(t){if(ie.isDocumentKey(t))throw new re(q.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function vd(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":oe(12329,{type:typeof t})}function ur(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new re(q.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=vd(t);throw new re(q.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IC="firestore.googleapis.com",Vw=!0;class Mw{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new re(q.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=IC,this.ssl=Vw}else this.host=e.host,this.ssl=(n=e.ssl)!==null&&n!==void 0?n:Vw;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=eC;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<CV)throw new re(q.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}GM("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=bC((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new re(q.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new re(q.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new re(q.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,s){return r.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class yd{constructor(e,n,r,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Mw({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new re(q.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new re(q.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Mw(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new nO;switch(r.type){case"firstParty":return new oO(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new re(q.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=jw.get(n);r&&(te("ComponentProvider","Removing Datastore"),jw.delete(n),r.terminate())}(this),Promise.resolve()}}function QM(t,e,n,r={}){var s;t=ur(t,yd);const i=Jm(e),o=t._getSettings(),a=Object.assign(Object.assign({},o),{emulatorOptions:t._getEmulatorOptions()}),u=`${e}:${n}`;i&&(ID(`https://${u}`),kD("Firestore",!0)),o.host!==IC&&o.host!==u&&Gi("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const d=Object.assign(Object.assign({},o),{host:u,ssl:i,emulatorOptions:r});if(!cu(d,a)&&(t._setSettings(d),r.mockUserToken)){let h,p;if(typeof r.mockUserToken=="string")h=r.mockUserToken,p=_t.MOCK_USER;else{h=AD(r.mockUserToken,(s=t._app)===null||s===void 0?void 0:s.options.projectId);const g=r.mockUserToken.sub||r.mockUserToken.user_id;if(!g)throw new re(q.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");p=new _t(g)}t._authCredentials=new rO(new hS(h,p))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yo{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new yo(this.firestore,e,this._query)}}class $t{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new zr(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new $t(this.firestore,e,this._key)}}class zr extends yo{constructor(e,n,r){super(e,n,og(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new $t(this.firestore,null,new ie(e))}withConverter(e){return new zr(this.firestore,e,this._path)}}function Lw(t,e,...n){if(t=or(t),RC("collection","path",e),t instanceof yd){const r=Ve.fromString(e,...n);return Ow(r),new zr(t,null,r)}{if(!(t instanceof $t||t instanceof zr))throw new re(q.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Ve.fromString(e,...n));return Ow(r),new zr(t.firestore,null,r)}}function Jo(t,e,...n){if(t=or(t),arguments.length===1&&(e=pS.newId()),RC("doc","path",e),t instanceof yd){const r=Ve.fromString(e,...n);return Dw(r),new $t(t,null,new ie(r))}{if(!(t instanceof $t||t instanceof zr))throw new re(q.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Ve.fromString(e,...n));return Dw(r),new $t(t.firestore,t instanceof zr?t.converter:null,new ie(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fw="AsyncQueue";class zw{constructor(e=Promise.resolve()){this.Ju=[],this.Yu=!1,this.Zu=[],this.Xu=null,this.ec=!1,this.tc=!1,this.nc=[],this.x_=new sC(this,"async_queue_retry"),this.rc=()=>{const r=Fh();r&&te(Fw,"Visibility state changed to "+r.visibilityState),this.x_.b_()},this.sc=e;const n=Fh();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.rc)}get isShuttingDown(){return this.Yu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.oc(),this._c(e)}enterRestrictedMode(e){if(!this.Yu){this.Yu=!0,this.tc=e||!1;const n=Fh();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.rc)}}enqueue(e){if(this.oc(),this.Yu)return new Promise(()=>{});const n=new Zn;return this._c(()=>this.Yu&&this.tc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Ju.push(e),this.ac()))}async ac(){if(this.Ju.length!==0){try{await this.Ju[0](),this.Ju.shift(),this.x_.reset()}catch(e){if(!go(e))throw e;te(Fw,"Operation failed with retryable error: "+e)}this.Ju.length>0&&this.x_.y_(()=>this.ac())}}_c(e){const n=this.sc.then(()=>(this.ec=!0,e().catch(r=>{throw this.Xu=r,this.ec=!1,lr("INTERNAL UNHANDLED ERROR: ",Uw(r)),r}).then(r=>(this.ec=!1,r))));return this.sc=n,n}enqueueAfterDelay(e,n,r){this.oc(),this.nc.indexOf(e)>-1&&(n=0);const s=wg.createAndSchedule(this,e,n,r,i=>this.uc(i));return this.Zu.push(s),s}oc(){this.Xu&&oe(47125,{cc:Uw(this.Xu)})}verifyOperationInProgress(){}async lc(){let e;do e=this.sc,await e;while(e!==this.sc)}hc(e){for(const n of this.Zu)if(n.timerId===e)return!0;return!1}Pc(e){return this.lc().then(()=>{this.Zu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.Zu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.lc()})}Tc(e){this.nc.push(e)}uc(e){const n=this.Zu.indexOf(e);this.Zu.splice(n,1)}}function Uw(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}class xo extends yd{constructor(e,n,r,s){super(e,n,r,s),this.type="firestore",this._queue=new zw,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new zw(e),this._firestoreClient=void 0,await e}}}function YM(t,e){const n=$4(),r=hu,s=M4(n,"firestore").getImmediate({identifier:r});if(!s._initialized){const i=bD("firestore");i&&QM(s,...i)}return s}function Cg(t){if(t._terminated)throw new re(q.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||XM(t),t._firestoreClient}function XM(t){var e,n,r;const s=t._freezeSettings(),i=function(a,u,d,h){return new _O(a,u,d,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,bC(h.experimentalLongPollingOptions),h.useFetchStreams,h.isUsingEmulator)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,s);t._componentsProvider||!((n=s.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=s.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider}),t._firestoreClient=new BM(t._authCredentials,t._appCheckCredentials,t._queue,i,t._componentsProvider&&function(a){const u=a==null?void 0:a._online.build();return{_offline:a==null?void 0:a._offline.build(u),_online:u}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eo{constructor(e){this._byteString=e}static fromBase64String(e){try{return new eo(pt.fromBase64String(e))}catch(n){throw new re(q.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new eo(pt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xd{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new re(q.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new dt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bg{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rg{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new re(q.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new re(q.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return me(this._lat,e._lat)||me(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ig{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,s){if(r.length!==s.length)return!1;for(let i=0;i<r.length;++i)if(r[i]!==s[i])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JM=/^__.*__$/;class ZM{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new is(e,this.data,this.fieldMask,n,this.fieldTransforms):new cl(e,this.data,n,this.fieldTransforms)}}class AC{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new is(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function NC(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw oe(40011,{Ic:t})}}class Ag{constructor(e,n,r,s,i,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=s,i===void 0&&this.Ec(),this.fieldTransforms=i||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Ic(){return this.settings.Ic}dc(e){return new Ag(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Ac(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.dc({path:r,Rc:!1});return s.Vc(e),s}mc(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.dc({path:r,Rc:!1});return s.Ec(),s}fc(e){return this.dc({path:void 0,Rc:!0})}gc(e){return Eu(e,this.settings.methodName,this.settings.yc||!1,this.path,this.settings.wc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Ec(){if(this.path)for(let e=0;e<this.path.length;e++)this.Vc(this.path.get(e))}Vc(e){if(e.length===0)throw this.gc("Document fields must not be empty");if(NC(this.Ic)&&JM.test(e))throw this.gc('Document fields cannot begin and end with "__"')}}class eL{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||pd(e)}bc(e,n,r,s=!1){return new Ag({Ic:e,methodName:n,wc:r,path:dt.emptyPath(),Rc:!1,yc:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Ng(t){const e=t._freezeSettings(),n=pd(t._databaseId);return new eL(t._databaseId,!!e.ignoreUndefinedProperties,n)}function tL(t,e,n,r,s,i={}){const o=t.bc(i.merge||i.mergeFields?2:0,e,n,s);Pg("Data must be an object, but it was:",o,r);const a=PC(r,o);let u,d;if(i.merge)u=new Yt(o.fieldMask),d=o.fieldTransforms;else if(i.mergeFields){const h=[];for(const p of i.mergeFields){const g=Sp(e,p,n);if(!o.contains(g))throw new re(q.INVALID_ARGUMENT,`Field '${g}' is specified in your field mask but missing from your input data.`);jC(h,g)||h.push(g)}u=new Yt(h),d=o.fieldTransforms.filter(p=>u.covers(p.field))}else u=null,d=o.fieldTransforms;return new ZM(new Ot(a),u,d)}class wd extends bg{_toFieldTransform(e){if(e.Ic!==2)throw e.Ic===1?e.gc(`${this._methodName}() can only appear at the top level of your update data`):e.gc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof wd}}function nL(t,e,n,r){const s=t.bc(1,e,n);Pg("Data must be an object, but it was:",s,r);const i=[],o=Ot.empty();ss(r,(u,d)=>{const h=kg(e,u,n);d=or(d);const p=s.mc(h);if(d instanceof wd)i.push(h);else{const g=fl(d,p);g!=null&&(i.push(h),o.set(h,g))}});const a=new Yt(i);return new AC(o,a,s.fieldTransforms)}function rL(t,e,n,r,s,i){const o=t.bc(1,e,n),a=[Sp(e,r,n)],u=[s];if(i.length%2!=0)throw new re(q.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let g=0;g<i.length;g+=2)a.push(Sp(e,i[g])),u.push(i[g+1]);const d=[],h=Ot.empty();for(let g=a.length-1;g>=0;--g)if(!jC(d,a[g])){const w=a[g];let b=u[g];b=or(b);const x=o.mc(w);if(b instanceof wd)d.push(w);else{const E=fl(b,x);E!=null&&(d.push(w),h.set(w,E))}}const p=new Yt(d);return new AC(h,p,o.fieldTransforms)}function sL(t,e,n,r=!1){return fl(n,t.bc(r?4:3,e))}function fl(t,e){if(kC(t=or(t)))return Pg("Unsupported field value:",e,t),PC(t,e);if(t instanceof bg)return function(r,s){if(!NC(s.Ic))throw s.gc(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.gc(`${r._methodName}() is not currently supported inside arrays`);const i=r._toFieldTransform(s);i&&s.fieldTransforms.push(i)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.Rc&&e.Ic!==4)throw e.gc("Nested arrays are not supported");return function(r,s){const i=[];let o=0;for(const a of r){let u=fl(a,s.fc(o));u==null&&(u={nullValue:"NULL_VALUE"}),i.push(u),o++}return{arrayValue:{values:i}}}(t,e)}return function(r,s){if((r=or(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return HO(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const i=We.fromDate(r);return{timestampValue:yu(s.serializer,i)}}if(r instanceof We){const i=new We(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:yu(s.serializer,i)}}if(r instanceof Rg)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof eo)return{bytesValue:KS(s.serializer,r._byteString)};if(r instanceof $t){const i=s.databaseId,o=r.firestore._databaseId;if(!o.isEqual(i))throw s.gc(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:dg(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof Ig)return function(o,a){return{mapValue:{fields:{[ES]:{stringValue:TS},[fu]:{arrayValue:{values:o.toArray().map(d=>{if(typeof d!="number")throw a.gc("VectorValues must only contain numeric values.");return ag(a.serializer,d)})}}}}}}(r,s);throw s.gc(`Unsupported field value: ${vd(r)}`)}(t,e)}function PC(t,e){const n={};return gS(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ss(t,(r,s)=>{const i=fl(s,e.Ac(r));i!=null&&(n[r]=i)}),{mapValue:{fields:n}}}function kC(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof We||t instanceof Rg||t instanceof eo||t instanceof $t||t instanceof bg||t instanceof Ig)}function Pg(t,e,n){if(!kC(n)||!function(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}(n)){const r=vd(n);throw r==="an object"?e.gc(t+" a custom object"):e.gc(t+" "+r)}}function Sp(t,e,n){if((e=or(e))instanceof xd)return e._internalPath;if(typeof e=="string")return kg(t,e);throw Eu("Field path arguments must be of type string or ",t,!1,void 0,n)}const iL=new RegExp("[~\\*/\\[\\]]");function kg(t,e,n){if(e.search(iL)>=0)throw Eu(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new xd(...e.split("."))._internalPath}catch{throw Eu(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Eu(t,e,n,r,s){const i=r&&!r.isEmpty(),o=s!==void 0;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let u="";return(i||o)&&(u+=" (found",i&&(u+=` in field ${r}`),o&&(u+=` in document ${s}`),u+=")"),new re(q.INVALID_ARGUMENT,a+t+u)}function jC(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DC{constructor(e,n,r,s,i){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new $t(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new oL(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(jg("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class oL extends DC{data(){return super.data()}}function jg(t,e){return typeof e=="string"?kg(t,e):e instanceof xd?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aL(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new re(q.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Dg{}class lL extends Dg{}function fs(t,e,...n){let r=[];e instanceof Dg&&r.push(e),r=r.concat(n),function(i){const o=i.filter(u=>u instanceof Og).length,a=i.filter(u=>u instanceof _d).length;if(o>1||o>0&&a>0)throw new re(q.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const s of r)t=s._apply(t);return t}class _d extends lL{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new _d(e,n,r)}_apply(e){const n=this._parse(e);return OC(e._query,n),new yo(e.firestore,e.converter,fp(e._query,n))}_parse(e){const n=Ng(e.firestore);return function(i,o,a,u,d,h,p){let g;if(d.isKeyField()){if(h==="array-contains"||h==="array-contains-any")throw new re(q.INVALID_ARGUMENT,`Invalid Query. You can't perform '${h}' queries on documentId().`);if(h==="in"||h==="not-in"){Bw(p,h);const b=[];for(const x of p)b.push($w(u,i,x));g={arrayValue:{values:b}}}else g=$w(u,i,p)}else h!=="in"&&h!=="not-in"&&h!=="array-contains-any"||Bw(p,h),g=sL(a,o,p,h==="in"||h==="not-in");return Xe.create(d,h,g)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function ps(t,e,n){const r=e,s=jg("where",t);return _d._create(s,r,n)}class Og extends Dg{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new Og(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:Cn.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(s,i){let o=s;const a=i.getFlattenedFilters();for(const u of a)OC(o,u),o=fp(o,u)}(e._query,n),new yo(e.firestore,e.converter,fp(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function $w(t,e,n){if(typeof(n=or(n))=="string"){if(n==="")throw new re(q.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!PS(e)&&n.indexOf("/")!==-1)throw new re(q.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(Ve.fromString(n));if(!ie.isDocumentKey(r))throw new re(q.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return nw(t,new ie(r))}if(n instanceof $t)return nw(t,n._key);throw new re(q.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${vd(n)}.`)}function Bw(t,e){if(!Array.isArray(t)||t.length===0)throw new re(q.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function OC(t,e){const n=function(s,i){for(const o of s)for(const a of o.getFlattenedFilters())if(i.indexOf(a.op)>=0)return a.op;return null}(t.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new re(q.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new re(q.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class cL{convertValue(e,n="none"){switch(Gr(e)){case 0:return null;case 1:return e.booleanValue;case 2:return qe(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Kr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw oe(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return ss(e,(s,i)=>{r[s]=this.convertValue(i,n)}),r}convertVectorValue(e){var n,r,s;const i=(s=(r=(n=e.fields)===null||n===void 0?void 0:n[fu].arrayValue)===null||r===void 0?void 0:r.values)===null||s===void 0?void 0:s.map(o=>qe(o.doubleValue));return new Ig(i)}convertGeoPoint(e){return new Rg(qe(e.latitude),qe(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=ld(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp($a(e));default:return null}}convertTimestamp(e){const n=qr(e);return new We(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=Ve.fromString(e);Ie(ZS(r),9688,{name:e});const s=new Ba(r.get(1),r.get(3)),i=new ie(r.popFirst(5));return s.isEqual(n)||lr(`Document ${i} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uL(t,e,n){let r;return r=t?t.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zo{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class VC extends DC{constructor(e,n,r,s,i,o){super(e,n,r,s,o),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Nc(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(jg("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class Nc extends VC{data(e={}){return super.data(e)}}class dL{constructor(e,n,r,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new Zo(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new Nc(this._firestore,this._userDataWriter,r.key,r,new Zo(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new re(q.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(s,i){if(s._snapshot.oldDocs.isEmpty()){let o=0;return s._snapshot.docChanges.map(a=>{const u=new Nc(s._firestore,s._userDataWriter,a.doc.key,a.doc,new Zo(s._snapshot.mutatedKeys.has(a.doc.key),s._snapshot.fromCache),s.query.converter);return a.doc,{type:"added",doc:u,oldIndex:-1,newIndex:o++}})}{let o=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(a=>i||a.type!==3).map(a=>{const u=new Nc(s._firestore,s._userDataWriter,a.doc.key,a.doc,new Zo(s._snapshot.mutatedKeys.has(a.doc.key),s._snapshot.fromCache),s.query.converter);let d=-1,h=-1;return a.type!==0&&(d=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),h=o.indexOf(a.doc.key)),{type:hL(a.type),doc:u,oldIndex:d,newIndex:h}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function hL(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return oe(61501,{type:t})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hw(t){t=ur(t,$t);const e=ur(t.firestore,xo);return qM(Cg(e),t._key).then(n=>fL(e,t,n))}class MC extends cL{constructor(e){super(),this.firestore=e}convertBytes(e){return new eo(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new $t(this.firestore,null,n)}}function qn(t){t=ur(t,yo);const e=ur(t.firestore,xo),n=Cg(e),r=new MC(e);return aL(t._query),KM(n,t._query).then(s=>new dL(e,r,t,s))}function Ww(t,e,n,...r){t=ur(t,$t);const s=ur(t.firestore,xo),i=Ng(s);let o;return o=typeof(e=or(e))=="string"||e instanceof xd?rL(i,"updateDoc",t._key,e,n,r):nL(i,"updateDoc",t._key,e),Vg(s,[o.toMutation(t._key,wn.exists(!0))])}function qw(t){return Vg(ur(t.firestore,xo),[new lg(t._key,wn.none())])}function Kw(t,e){const n=ur(t.firestore,xo),r=Jo(t),s=uL(t.converter,e);return Vg(n,[tL(Ng(t.firestore),"addDoc",r._key,s,t.converter!==null,{}).toMutation(r._key,wn.exists(!1))]).then(()=>r)}function Vg(t,e){return function(r,s){const i=new Zn;return r.asyncQueue.enqueueAndForget(async()=>DM(await WM(r),s,i)),i.promise}(Cg(t),e)}function fL(t,e,n){const r=n.docs.get(e._key),s=new MC(t);return new VC(t,s,e._key,r,new Zo(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){(function(s){po=s})(U4),uu(new La("firestore",(r,{instanceIdentifier:s,options:i})=>{const o=r.getProvider("app").getImmediate(),a=new xo(new sO(r.getProvider("auth-internal")),new aO(o,r.getProvider("app-check-internal")),function(d,h){if(!Object.prototype.hasOwnProperty.apply(d.options,["projectId"]))throw new re(q.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ba(d.options.projectId,h)}(o,s),o);return i=Object.assign({useFetchStreams:n},i),a._setSettings(i),a},"PUBLIC").setMultipleInstances(!0)),Pi(Hx,Wx,e),Pi(Hx,Wx,"esm2017")})();class ji{static setMachineId(e){this.machineId=e%1024}static generateId(){let e=Date.now();if(e<this.lastTimestamp)throw new Error("Clock moved backwards");return e===this.lastTimestamp?(this.sequence=(this.sequence+1)%4096,this.sequence===0&&(e=this.waitNextMillis(this.lastTimestamp))):this.sequence=0,this.lastTimestamp=e,e-16409952e5<<22|this.machineId<<12|this.sequence}static waitNextMillis(e){let n=Date.now();for(;n<=e;)n=Date.now();return n}}rn(ji,"sequence",0),rn(ji,"lastTimestamp",0),rn(ji,"machineId",1);class pL{constructor(){rn(this,"config");rn(this,"currentIndex",0);rn(this,"urlStats",new Map);rn(this,"FAILURE_THRESHOLD",3);rn(this,"RESET_TIMEOUT",3e5);this.config={baseUrls:this.getApiBaseUrls(),timeout:3e4,apiKey:this.getApiKey()},this.initializeUrlStats(),this.validateConfig()}getApiBaseUrls(){return window.location.hostname==="localhost"?["http://localhost:3000"]:["https://trip-advisor-scraping-api.vercel.app","https://trip-advisor-craping-api-2-git-main-fabiodagostinos-projects.vercel.app","https://trip-advisor-craping-api-3.vercel.app","https://trip-advisor-craping-api-4.vercel.app","https://trip-advisor-craping-api-5.vercel.app","https://trip-advisor-craping-api-6.vercel.app","https://trip-advisor-craping-api-7.vercel.app","https://trip-advisor-craping-api-8.vercel.app","https://trip-advisor-craping-api-9.vercel.app"]}initializeUrlStats(){this.config.baseUrls.forEach(e=>{this.urlStats.set(e,{failures:0,lastFailure:0,successCount:0,totalRequests:0})})}getApiKey(){return"w7c9i4l9TMv9Q2dzGLFGdjkkV0t3uMOk"||""}validateConfig(){this.config.apiKey||console.error(" API Key mancante. Configura VITE_SCRAPING_API_KEY nel tuo .env")}getHeaders(){const e={"Content-Type":"application/json"};return this.config.apiKey&&(e["X-API-Key"]=this.config.apiKey),e}getNextAvailableUrl(){const e=Date.now();let n=0;for(this.urlStats.forEach((r,s)=>{r.failures>0&&e-r.lastFailure>this.RESET_TIMEOUT&&(console.log(` Reset failures per ${s} (timeout scaduto)`),r.failures=0)});n<this.config.baseUrls.length;){const r=this.config.baseUrls[this.currentIndex%this.config.baseUrls.length];this.currentIndex++;const s=this.urlStats.get(r);if(!s||s.failures<this.FAILURE_THRESHOLD)return console.log(` Selected URL: ${r} (failures: ${(s==null?void 0:s.failures)||0})`),r;n++}return console.log(" Tutti gli endpoint sembrano bloccati, reset generale"),this.urlStats.forEach(r=>{r.failures=0}),this.config.baseUrls[0]}markUrlFailed(e,n){const r=this.urlStats.get(e);r&&(r.failures++,r.lastFailure=Date.now(),r.totalRequests++,console.log(` ${e} failed (${r.failures}/${this.FAILURE_THRESHOLD}): ${n}`))}markUrlSuccess(e){const n=this.urlStats.get(e);n&&(n.failures=0,n.successCount++,n.totalRequests++,console.log(` ${e} success (total: ${n.successCount})`))}async healthCheck(){const e=[];console.log(" Checking health of all endpoints...");for(const n of this.config.baseUrls)try{const r=await fetch(`${n}/api/health`,{method:"GET",headers:this.getHeaders(),signal:AbortSignal.timeout(5e3)});if(!r.ok)throw new Error(`${r.status} ${r.statusText}`);const s=await r.json();console.log(` ${n}: ${s.status}`),e.push(s)}catch(r){console.error(` ${n}: ${r}`),e.push({status:"unhealthy",timestamp:new Date().toISOString(),uptime:0,version:"unknown",services:{scraping:"down",external_apis:"down"}})}return e}async scrapeRestaurant(e){if(!e.url||!e.url.includes("tripadvisor"))throw new Error("URL TripAdvisor richiesto");if(!this.config.apiKey)throw new Error("API Key mancante. Configurare VITE_SCRAPING_API_KEY");console.log(` Iniziando scraping di: ${e.url}`),console.log(` Endpoints disponibili: ${this.config.baseUrls.length}`);let n=null,r=0;const s=this.config.baseUrls.length;for(;r<s;){const i=this.getNextAvailableUrl();if(!i)throw new Error("Nessun endpoint disponibile");try{r++,console.log(` Tentativo ${r}/${s} con: ${i}`);const o=await fetch(`${i}/api/scrape`,{method:"POST",headers:this.getHeaders(),body:JSON.stringify(e),signal:AbortSignal.timeout(this.config.timeout)});if(!o.ok){let u=`HTTP ${o.status}`;try{u=(await o.json()).error||u}catch(d){console.error(" Failed to parse error response:",d)}throw new Error(u)}const a=await o.json();if(!a.success||!a.data)throw new Error(a.error||"Errore durante lo scraping");return this.markUrlSuccess(i),a.data}catch(o){const a=o instanceof Error?o.message:"Errore sconosciuto";console.error(` Errore con ${i}:`,a),this.markUrlFailed(i,a),n=o instanceof Error?o:new Error(a),r<s&&await new Promise(u=>setTimeout(u,1e3))}}throw console.error(" Tutti gli endpoints hanno fallito"),this.logStats(),n?n.name==="TimeoutError"||n.message.includes("timeout")?new Error("Lo scraping ha impiegato troppo tempo. Riprova o inserisci i dati manualmente."):n.message.includes("401")||n.message.includes("Unauthorized")?new Error("Errore di autenticazione. Verifica la configurazione dell'API key."):n.message.includes("403")||n.message.includes("Forbidden")?new Error("Accesso negato. Verifica le autorizzazioni dell'API."):n:new Error("Tutti gli endpoints di scraping non sono disponibili. Riprova pi tardi.")}async testApi(){const e=await this.healthCheck(),n=this.config.baseUrls.map((s,i)=>{var o;return{url:s,status:((o=e[i])==null?void 0:o.status)||"unknown"}});return{working:n.filter(s=>s.status==="healthy").length,total:this.config.baseUrls.length,details:n}}getStats(){return Array.from(this.urlStats.entries()).map(([e,n])=>({url:e,stats:{...n}}))}logStats(){this.urlStats.forEach((e,n)=>{e.totalRequests>0&&(e.successCount/e.totalRequests*100).toFixed(1)})}async testAuthentication(){try{if(!this.config.apiKey)return{success:!1,message:"API Key mancante. Configura VITE_SCRAPING_API_KEY nel file .env",details:null};const e=await this.testApi();return e.working>0?{success:!0,message:`${e.working}/${e.total} endpoints funzionanti`,details:e.details}:{success:!1,message:"Nessun endpoint disponibile",details:e.details}}catch(e){return{success:!1,message:`Errore di connessione: ${e instanceof Error?e.message:"Errore sconosciuto"}`,details:null}}}getApiInfo(){return{baseUrls:this.config.baseUrls,totalEndpoints:this.config.baseUrls.length,timeout:this.config.timeout,environment:"production",hasApiKey:!!this.config.apiKey,configSource:"default",stats:this.getStats()}}resetStats(){this.urlStats.forEach(e=>{e.failures=0,e.lastFailure=0,e.successCount=0,e.totalRequests=0})}updateConfig(e){this.config={...this.config,...e},e.baseUrls&&this.initializeUrlStats(),console.log(" Configurazione aggiornata:",this.config)}}const mL=new pL,Uh={apiKey:"AIzaSyAFbqkAtEvQroMp1zGYvfjIPOYXWTZSBmg",authDomain:"rotiniel-35c5b.firebaseapp.com",projectId:"rotiniel-35c5b",storageBucket:"rotiniel-35c5b.firebasestorage.app",messagingSenderId:"546264380520",appId:"1:546264380520:web:7034e18e1211898418f7dd"};function Wt(t){return t?t instanceof Date?t:t instanceof We||typeof t.toDate=="function"?t.toDate():new Date:new Date}function gL(){if(!Uh.apiKey||!Uh.projectId)throw new be("Configurazione Firebase incompleta. Verificare le variabili d'ambiente VITE_FIREBASE_*.","FIREBASE_CONFIG_ERROR");if(!B4().length)try{nS(Uh),console.log(" Firebase Client initialized successfully")}catch(e){throw new be("Errore nell'inizializzazione di Firebase","FIREBASE_INIT_ERROR",e)}return ji.setMachineId(100),YM()}class be extends Error{constructor(e,n,r){super(e),this.code=n,this.originalError=r,this.name="RestaurantServiceError"}getUserFriendlyMessage(){switch(this.code){case"FIREBASE_CONFIG_ERROR":return"Errore di configurazione del database. Contatta il supporto tecnico.";case"FIREBASE_INIT_ERROR":return"Impossibile connettersi al database. Riprova tra qualche minuto.";case"FETCH_ERROR":return"Problemi di connessione. Riprova tra qualche minuto.";case"VALIDATION_ERROR":return"I dati inseriti non sono corretti. Controlla i campi evidenziati.";case"INVALID_URL":return"L'URL di TripAdvisor non  valido. Assicurati di copiare il link completo.";case"EXTRACTION_ERROR":return"Impossibile estrarre i dati da TripAdvisor. L'URL potrebbe non essere accessibile.";case"PAST_DATE":return"Non puoi prenotare per una data gi passata.";case"INVALID_ID":case"INVALID_RESTAURANT_ID":case"INVALID_BOOKING_ID":return"ID non valido. Ricarica la pagina e riprova.";case"NOT_FOUND":return"Elemento non trovato.";case"DELETE_ERROR":return"Impossibile eliminare l'elemento. Riprova.";default:return this.message}}}class qt{static validateTripAdvisorUrl(e){try{const n=new URL(e);return n.hostname.includes("tripadvisor.com")||n.hostname.includes("tripadvisor.it")||n.hostname.includes("tripadvisor.")}catch{return!1}}static validateRestaurantData(e){const n=[];return(!e.name||e.name.trim().length<2)&&n.push("Il nome del ristorante deve avere almeno 2 caratteri"),e.name&&e.name.length>100&&n.push("Il nome del ristorante non pu superare i 100 caratteri"),(!e.tripadvisorUrl||!this.validateTripAdvisorUrl(e.tripadvisorUrl))&&n.push("URL TripAdvisor non valido"),(!e.cuisines||e.cuisines.length===0)&&n.push("Almeno un tipo di cucina  obbligatorio"),e.priceRange||n.push("Fascia di prezzo obbligatoria"),["","","",""].includes(e.priceRange||"")||n.push("Fascia di prezzo non valida"),(!e.location||e.location.trim().length<2)&&n.push("Posizione obbligatoria"),e.location&&e.location.length>200&&n.push("La posizione non pu superare i 200 caratteri"),e.phone&&!/^[\d\s\-\+\(\)]+$/.test(e.phone)&&n.push("Numero di telefono non valido"),e.rating&&!this.validateRating(e.rating)&&n.push("Rating non valido (deve essere tra 1.0 e 5.0)"),n}static validateBookingData(e){const n=[];if(e.restaurantId||n.push("ID ristorante non valido"),!e.date)n.push("Data prenotazione obbligatoria");else{const r=new Date(e.date),s=new Date;s.setHours(0,0,0,0),r<s&&n.push("Non  possibile prenotare per una data passata")}return e.time?this.validateTime(e.time)||n.push("Formato orario non valido (usa HH:MM)"):n.push("Orario prenotazione obbligatorio"),e.notes&&e.notes.length>500&&n.push("Le note non possono superare i 500 caratteri"),n}static validateRating(e){const n=parseFloat(e);return!isNaN(n)&&n>=1&&n<=5}static validateTime(e){return/^([01]?[0-9]|2[0-3]):[0-5][0-9]$/.test(e)}static validateId(e){return Number.isInteger(e)}}class vL{constructor(){rn(this,"db");rn(this,"restaurantsRef");rn(this,"bookingsRef");try{this.db=gL(),this.restaurantsRef=Lw(this.db,"restaurants"),this.bookingsRef=Lw(this.db,"bookings")}catch(e){throw e instanceof be?e:new be("Errore nell'inizializzazione del servizio","SERVICE_INIT_ERROR",e)}}async getAllRestaurants(){try{return(await qn(this.restaurantsRef)).docs.map(n=>{const r=n.data();return{id:r.id||parseInt(n.id),...r,createdAt:Wt(r.createdAt)}})}catch(e){throw new be("Errore nel recupero dei ristoranti","FETCH_ERROR",e)}}async getRestaurant(e){if(!qt.validateId(e))throw new be("ID ristorante non valido","INVALID_RESTAURANT_ID");try{const n=fs(this.restaurantsRef,ps("id","==",e)),r=await qn(n);if(r.empty)return;const i=r.docs[0].data();return{id:e,...i,createdAt:Wt(i.createdAt)}}catch(n){throw new be(`Errore nel recupero del ristorante ${e}`,"FETCH_ERROR",n)}}async createRestaurant(e){const n=qt.validateRestaurantData(e);if(n.length>0)throw new be(`Dati non validi: ${n.join(", ")}`,"VALIDATION_ERROR");try{const r=ji.generateId(),s={...e,id:r,isApproved:!0,createdAt:We.now()},i=Object.fromEntries(Object.entries(s).filter(([o,a])=>a!==void 0));return await Kw(this.restaurantsRef,i),{...i,createdAt:Wt(i.createdAt)}}catch(r){throw new be("Errore nella creazione del ristorante","CREATE_ERROR",r)}}async updateRestaurant(e,n){if(!qt.validateId(e))throw new be("ID ristorante non valido","INVALID_RESTAURANT_ID");try{const r=fs(this.restaurantsRef,ps("id","==",e)),s=await qn(r);if(s.empty)return;const i=s.docs[0],o=Jo(this.db,"restaurants",i.id);await Ww(o,n);const u=(await Hw(o)).data();return{id:e,...u,createdAt:Wt(u==null?void 0:u.createdAt)}}catch(r){throw new be(`Errore nell'aggiornamento del ristorante ${e}`,"UPDATE_ERROR",r)}}async deleteRestaurant(e){if(!qt.validateId(e))throw new be("ID ristorante non valido","INVALID_RESTAURANT_ID");try{const n=fs(this.restaurantsRef,ps("id","==",e)),r=await qn(n);if(r.empty)return!1;const s=r.docs[0],i=Jo(this.db,"restaurants",s.id);return await qw(i),!0}catch(n){throw new be(`Errore nell'eliminazione del ristorante ${e}`,"DELETE_ERROR",n)}}async extractRestaurantData(e){if(!qt.validateTripAdvisorUrl(e))throw new be("URL TripAdvisor non valido","INVALID_URL");try{var n={url:e},r=await mL.scrapeRestaurant(n),s={extracted:r};return s}catch(i){throw console.error(" Errore nell'estrazione:",i),new be("Impossibile estrarre i dati del ristorante. Verifica l'URL.","EXTRACTION_ERROR",i)}}async getAllBookings(){try{return(await qn(this.bookingsRef)).docs.map(n=>{const r=n.data();return{id:r.id||parseInt(n.id),...r,date:Wt(r.date),createdAt:Wt(r.createdAt)}})}catch(e){throw new be("Errore nel recupero delle prenotazioni","FETCH_ERROR",e)}}async getBookingsByRestaurant(e){if(!qt.validateId(e))throw new be("ID ristorante non valido","INVALID_RESTAURANT_ID");try{const n=fs(this.bookingsRef,ps("restaurantId","==",e));return(await qn(n)).docs.map(s=>{const i=s.data();return{id:i.id||parseInt(s.id),...i,date:Wt(i.date),createdAt:Wt(i.createdAt)}})}catch(n){throw new be(`Errore nel recupero delle prenotazioni per il ristorante ${e}`,"FETCH_ERROR",n)}}async getBooking(e){if(!qt.validateId(e))throw new be("ID prenotazione non valido","INVALID_BOOKING_ID");try{const n=fs(this.bookingsRef,ps("id","==",e)),r=await qn(n);if(r.empty)throw new be(`Prenotazione ${e} non trovata`,"NOT_FOUND");const i=r.docs[0].data();return{id:e,...i,date:Wt(i.date),createdAt:Wt(i.createdAt)}}catch(n){throw n instanceof be?n:new be(`Errore nel recupero della prenotazione ${e}`,"FETCH_ERROR",n)}}async createBooking(e){const n=qt.validateBookingData(e);if(n.length>0)throw new be(`Dati prenotazione non validi: ${n.join(", ")}`,"VALIDATION_ERROR");try{const r=ji.generateId(),s={...e,id:r,createdAt:We.now()},i=Object.fromEntries(Object.entries(s).filter(([o,a])=>a!==void 0));return await Kw(this.bookingsRef,i),{...i,createdAt:Wt(i.createdAt)}}catch(r){throw new be("Errore nella creazione della prenotazione","CREATE_ERROR",r)}}async updateBooking(e,n){if(!qt.validateId(e))throw new be("ID prenotazione non valido","INVALID_BOOKING_ID");try{const r=fs(this.bookingsRef,ps("id","==",e)),s=await qn(r);if(s.empty)throw new be(`Prenotazione ${e} non trovata`,"NOT_FOUND");const i=s.docs[0],o=Jo(this.db,"bookings",i.id);await Ww(o,n);const u=(await Hw(o)).data();return{id:e,...u,date:Wt(u.date),createdAt:Wt(u.createdAt)}}catch(r){throw r instanceof be?r:new be(`Errore nell'aggiornamento della prenotazione ${e}`,"UPDATE_ERROR",r)}}async deleteBooking(e){if(!qt.validateId(e))throw new be("ID prenotazione non valido","INVALID_BOOKING_ID");try{const n=fs(this.bookingsRef,ps("id","==",e)),r=await qn(n);if(r.empty)return!1;const s=r.docs[0],i=Jo(this.db,"bookings",s.id);return await qw(i),!0}catch(n){throw new be(`Errore nell'eliminazione della prenotazione ${e}`,"DELETE_ERROR",n)}}}let $h=null;const yL=()=>($h||($h=new vL),$h),qs=()=>{const t=yL();return{getAllRestaurants:()=>t.getAllRestaurants(),getRestaurant:e=>t.getRestaurant(e),createRestaurant:e=>t.createRestaurant(e),updateRestaurant:(e,n)=>t.updateRestaurant(e,n),deleteRestaurant:e=>t.deleteRestaurant(e),extractRestaurantData:e=>t.extractRestaurantData(e),getAllBookings:()=>t.getAllBookings(),getBookingsByRestaurant:e=>t.getBookingsByRestaurant(e),getBooking:e=>t.getBooking(e),createBooking:e=>t.createBooking(e),updateBooking:(e,n)=>t.updateBooking(e,n),deleteBooking:e=>t.deleteBooking(e),validateRestaurantData:qt.validateRestaurantData,validateBookingData:qt.validateBookingData,validateTripAdvisorUrl:qt.validateTripAdvisorUrl,service:t}},Xt=t=>t instanceof be?t.getUserFriendlyMessage():t instanceof Error?t.message:"Si  verificato un errore imprevisto. Riprova tra qualche minuto.",Vt=(t,e)=>{console.error(`[RestaurantService] ${t}:`,e),e instanceof be&&(console.error(`- Code: ${e.code}`),console.error("- Original Error:",e.originalError))},Ed=()=>{const[t,e]=m.useState([]),[n,r]=m.useState(!1),[s,i]=m.useState(null),{getAllRestaurants:o,updateRestaurant:a}=qs();m.useEffect(()=>{(async()=>{try{r(!0),i(null);const x=await o();if(x){const E=x.filter(_=>_.favorite===!0).map(_=>_.id);e(E)}}catch(x){const E=Xt(x);i(E),Vt("Caricamento favoriti",x)}finally{r(!1)}})()},[]);const u=m.useCallback(async(b,x)=>{try{r(!0),i(null),await a(b,{favorite:x}),e(E=>x?E.includes(b)?E:[...E,b]:E.filter(_=>_!==b))}catch(E){const _=Xt(E);throw i(_),Vt("Aggiornamento favorito",E),E}finally{r(!1)}},[a]),d=m.useCallback(async b=>{t.includes(b)||await u(b,!0)},[t,u]),h=m.useCallback(async b=>{t.includes(b)&&await u(b,!1)},[t,u]),p=m.useCallback(async b=>{const x=t.includes(b);await u(b,!x)},[t,u]),g=m.useCallback(b=>t.includes(b),[t]),w=m.useCallback(async()=>{try{r(!0),i(null);const E=(await o()).filter(_=>_.favorite===!0).map(_=>a(_.id,{favorite:!1}));await Promise.all(E),e([])}catch(b){const x=Xt(b);throw i(x),Vt("Cancellazione favoriti",b),b}finally{r(!1)}},[o,a]);return{favorites:t,addFavorite:d,removeFavorite:h,toggleFavorite:p,isFavorite:g,clearFavorites:w,isLoading:n,error:s}},LC=[{value:"italiana",label:"Italiana"},{value:"mediterranea",label:"Mediterranea"},{value:"pesce",label:"Pesce"},{value:"barbecue",label:"Barbecue"},{value:"steakhouse",label:"Steakhouse"},{value:"pugliese",label:"Pugliese"}],FC=t=>{const e=LC.find(n=>n.value===t);return e?e.label:t.charAt(0).toUpperCase()+t.slice(1)},xL=t=>{if(!t)return[];if(Array.isArray(t))return t;if(typeof t=="string")try{const e=JSON.parse(t);return Array.isArray(e)?e:[t]}catch{return[t]}return[]};function wL(t){if(!t)return!1;try{const e=new URL(t),n=["tripadvisor.com","unsplash.com","images.unsplash.com"],r=[".jpg",".jpeg",".png",".webp"],s=n.some(o=>e.hostname.includes(o)),i=r.some(o=>e.pathname.toLowerCase().includes(o));return s&&(i||e.hostname.includes("tripadvisor.com"))}catch{return!1}}function _L(t){const e={pugliese:"https://images.unsplash.com/photo-1551218808-94e220e084d2?ixlib=rb-4.0.3&auto=format&fit=crop&w=600&h=300",italiana:"https://images.unsplash.com/photo-1414235077428-338989a2e8c0?ixlib=rb-4.0.3&auto=format&fit=crop&w=600&h=300",pesce:"https://images.unsplash.com/photo-1544943151-6e4ed999de46?ixlib=rb-4.0.3&auto=format&fit=crop&w=600&h=300",mediterranea:"https://images.unsplash.com/photo-1540189549336-e6e99c3679fe?ixlib=rb-4.0.3&auto=format&fit=crop&w=600&h=300",barbecue:"https://images.unsplash.com/photo-1551218808-94e220e084d2?ixlib=rb-4.0.3&auto=format&fit=crop&w=600&h=300",steakhouse:"https://images.unsplash.com/photo-1546833999-b9f581a1996d?ixlib=rb-4.0.3&auto=format&fit=crop&w=600&h=300"};return e[t]||e.italiana}function Tu(t){var n={pugliese:"bg-[hsl(var(--forest-green))]/10 text-[hsl(var(--forest-green))]",italiana:"bg-[hsl(var(--olive-drab))]/10 text-[hsl(var(--olive-drab))]",pesce:"bg-blue-100 text-blue-700",barbecue:"bg-red-100 text-red-700",steakhouse:"bg-gray-100 text-gray-700",mediterranea:"bg-[hsl(var(--terracotta))]/10 text-[hsl(var(--terracotta))]"}[t];return n}const zC=({restaurant:t,onViewDetails:e})=>{const{isFavorite:n,toggleFavorite:r}=Ed(),s=m.useCallback(async g=>{g.stopPropagation();try{await r(t.id)}catch(w){console.error("Errore nel toggle favorito:",w)}},[t.id,r]),i=n(t.id),[o,a]=m.useState(t.imageUrl&&wL(t.imageUrl)?t.imageUrl:_L(t.cuisines[0])),[u,d]=m.useState(!1),h=g=>{const w=parseFloat(g),b=Math.floor(w),x=w%1>=.5;return c.jsx("div",{className:"flex text-[hsl(var(--goldenrod))]",children:[...Array(5)].map((E,_)=>c.jsx(an,{className:`w-4 h-4 ${_<b?"fill-current":_===b&&x?"fill-current opacity-50":""}`},_))})},p=Array.isArray(t.cuisines)?t.cuisines:[t.cuisines];return c.jsxs(rt,{className:"bg-white rounded-xl shadow-lg overflow-hidden hover:shadow-xl transition-shadow duration-300 cursor-pointer",children:[c.jsxs("div",{className:"relative",children:[c.jsx("img",{src:t.imageUrl||void 0,alt:t.name,className:"w-full h-48 object-cover"}),c.jsx(de,{variant:"ghost",size:"icon",className:`absolute top-2 right-2 ${i?"text-[hsl(var(--tomato))] hover:text-red-600":"text-gray-400 hover:text-[hsl(var(--tomato))]"} bg-white/80 hover:bg-white/90`,onClick:s,children:c.jsx(bi,{className:`w-5 h-5 ${i?"fill-current":""}`})})]}),c.jsxs(st,{className:"p-6",children:[c.jsx("div",{className:"flex justify-between items-start mb-2",children:c.jsx("h3",{className:"text-xl font-display font-semibold text-[hsl(var(--dark-slate))]",children:t.name})}),c.jsxs("div",{className:"flex items-center mb-3",children:[h(t.rating),c.jsx("span",{className:"text-[hsl(var(--dark-slate))] font-medium ml-2",children:t.rating}),c.jsx("span",{className:"text-[hsl(var(--dark-slate))]/50 mx-2",children:""}),c.jsx("span",{className:"text-[hsl(var(--terracotta))] font-medium",children:t.priceRange})]}),c.jsx("p",{className:"text-[hsl(var(--dark-slate))]/70 mb-3 line-clamp-2",children:t.description}),c.jsxs("div",{className:"flex flex-wrap gap-2 mb-4",children:[p.slice(0,3).map((g,w)=>c.jsx(Ni,{className:Tu(g),children:FC(g)},w)),p.length>3&&c.jsxs(Ni,{className:"bg-gray-100 text-gray-700",children:["+",p.length-3]})]}),c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsxs("div",{className:"flex items-center text-[hsl(var(--dark-slate))]/60 text-sm",children:[c.jsx(Bi,{className:"w-4 h-4 mr-1"}),c.jsx("span",{children:t.location})]}),c.jsx(de,{className:"bg-[hsl(var(--terracotta))] text-white hover:bg-[hsl(var(--saddle))] transition-colors text-sm font-medium",onClick:()=>e(t),children:"Dettagli"})]})]})]})},Su=Gm,EL=lT,TL=Qm,UC=m.forwardRef(({className:t,...e},n)=>c.jsx(ol,{ref:n,className:ae("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...e}));UC.displayName=ol.displayName;const Ka=m.forwardRef(({className:t,children:e,...n},r)=>c.jsxs(TL,{children:[c.jsx(UC,{}),c.jsxs(al,{ref:r,className:ae("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",t),...n,children:[e,c.jsxs(cT,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[c.jsx(sl,{className:"h-4 w-4"}),c.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));Ka.displayName=al.displayName;const Ga=({className:t,...e})=>c.jsx("div",{className:ae("flex flex-col space-y-1.5 text-center sm:text-left",t),...e});Ga.displayName="DialogHeader";const Qa=m.forwardRef(({className:t,...e},n)=>c.jsx(td,{ref:n,className:ae("text-lg font-semibold leading-none tracking-tight",t),...e}));Qa.displayName=td.displayName;const SL=m.forwardRef(({className:t,...e},n)=>c.jsx(nd,{ref:n,className:ae("text-sm text-muted-foreground",t),...e}));SL.displayName=nd.displayName;var CL="Label",$C=m.forwardRef((t,e)=>c.jsx(ce.label,{...t,ref:e,onMouseDown:n=>{var s;n.target.closest("button, input, select, textarea")||((s=t.onMouseDown)==null||s.call(t,n),!n.defaultPrevented&&n.detail>1&&n.preventDefault())}}));$C.displayName=CL;var BC=$C;const bL=oo("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),Qe=m.forwardRef(({className:t,...e},n)=>c.jsx(BC,{ref:n,className:ae(bL(),t),...e}));Qe.displayName=BC.displayName;const Td=m.forwardRef(({className:t,...e},n)=>c.jsx("textarea",{className:ae("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t),ref:n,...e}));Td.displayName="Textarea";var Bh;const RL=({restaurant:t,isOpen:e,onClose:n})=>{const[r,s]=m.useState({date:"",time:"",notes:""}),{toast:i}=$u(),o=()=>{s({date:"",time:"",notes:""})},{createBooking:a}=qs(),u=async p=>{var E;if(Bh=!0,p.preventDefault(),!t||!r.date||!r.time){i({title:"Informazioni Mancanti",description:"Per favore compila tutti i campi obbligatori.",variant:"destructive"});return}const g=new Date(r.date),w=new Date;if(w.setHours(0,0,0,0),g<w){i({title:"Data Non Valida",description:"Non puoi prenotare per una data passata.",variant:"destructive"});return}const b={restaurantId:Number(t.id),date:new Date(r.date+"T00:00:00.000Z"),time:r.time.trim(),notes:((E=r.notes)==null?void 0:E.trim())||void 0};try{var x=await a(b);x&&(i({title:"Prenotazione Aggiunta",description:"La prenotazione  stata aggiunta"}),d())}catch{}finally{Bh=!1}},d=()=>{n(),o()};if(!t)return null;const h=["12:00","12:30","13:00","13:30","14:00","14:30","19:00","19:30","20:00","20:30","21:00","21:30"];return c.jsx(Su,{open:e,onOpenChange:d,children:c.jsxs(Ka,{className:"max-w-md",children:[c.jsx(Ga,{children:c.jsxs(Qa,{className:"text-xl font-display font-bold text-[hsl(var(--dark-slate))] flex items-center",children:[c.jsx(An,{className:"w-5 h-5 text-[hsl(var(--terracotta))] mr-2"}),"Marca prenotazione per ",t.name]})}),c.jsxs("form",{onSubmit:u,className:"space-y-4",children:[c.jsxs("div",{className:"bg-[hsl(var(--warm-beige))] p-3 rounded-lg",children:[c.jsx("h4",{className:"font-semibold text-[hsl(var(--dark-slate))]",children:t.name}),c.jsx("p",{className:"text-sm text-[hsl(var(--dark-slate))]/70",children:t.location}),c.jsxs("p",{className:"text-sm text-[hsl(var(--terracotta))]",children:[t.priceRange,"  ",t.cuisines.join(", ")]})]}),c.jsxs("div",{children:[c.jsx(Qe,{htmlFor:"booking-date",className:"text-[hsl(var(--dark-slate))] font-medium",children:"Data della Prenotazione *"}),c.jsx(It,{id:"booking-date",type:"date",value:r.date,onChange:p=>s(g=>({...g,date:p.target.value})),min:new Date().toISOString().split("T")[0],required:!0,className:"mt-1"})]}),c.jsxs("div",{children:[c.jsx(Qe,{htmlFor:"booking-time",className:"text-[hsl(var(--dark-slate))] font-medium",children:"Orario *"}),c.jsxs("div",{className:"mt-1 space-y-2",children:[c.jsx(It,{id:"booking-time",type:"time",value:r.time,onChange:p=>s(g=>({...g,time:p.target.value})),required:!0}),c.jsxs("div",{children:[c.jsx("p",{className:"text-xs text-[hsl(var(--dark-slate))]/60 mb-1",children:"Orari suggeriti:"}),c.jsx("div",{className:"flex flex-wrap gap-1",children:h.map(p=>c.jsx(de,{type:"button",variant:"outline",size:"sm",onClick:()=>s(g=>({...g,time:p})),className:"text-xs h-7 px-2 text-[hsl(var(--terracotta))] hover:bg-[hsl(var(--terracotta))]/10",children:p},p))})]})]})]}),c.jsxs("div",{children:[c.jsx(Qe,{htmlFor:"booking-notes",className:"text-[hsl(var(--dark-slate))] font-medium",children:"Note Aggiuntive"}),c.jsx(Td,{id:"booking-notes",placeholder:"Numero di persone, richieste speciali, allergie, etc...",value:r.notes,onChange:p=>s(g=>({...g,notes:p.target.value})),className:"mt-1 min-h-[80px]"})]}),c.jsx("div",{className:"bg-blue-50 p-3 rounded-lg",children:c.jsxs("div",{className:"flex items-start",children:[c.jsx(rl,{className:"w-4 h-4 text-blue-600 mr-2 mt-0.5 flex-shrink-0"}),c.jsxs("div",{className:"text-sm text-blue-800",children:[c.jsx("p",{className:"font-medium",children:"Nota Importante"}),c.jsx("p",{children:"Questa  una prenotazione indicativa. Ti consigliamo di contattare il ristorante per confermare la disponibilit."}),t.phone&&c.jsxs("p",{className:"mt-1",children:["Tel: ",c.jsx("span",{className:"font-medium",children:t.phone})]})]})]})}),c.jsxs("div",{className:"flex gap-3 pt-2",children:[c.jsx(de,{type:"button",variant:"outline",onClick:d,className:"flex-1",children:"Annulla"}),c.jsx(de,{type:"submit",className:"flex-1 bg-[hsl(var(--terracotta))] text-white hover:bg-[hsl(var(--saddle))]",children:Bh?c.jsxs(c.Fragment,{children:[c.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Prenotando..."]}):c.jsxs(c.Fragment,{children:[c.jsx(ja,{className:"w-4 h-4 mr-2"}),"Marca come Prenotata"]})})]})]})]})})},Mg=({restaurant:t,isOpen:e,onClose:n,onBookVisit:r,onDelete:s,allowDelete:i=!0})=>{var O;const{favorites:o,toggleFavorite:a}=Ed(),[u,d]=m.useState(!1),[h,p]=m.useState(!1),g=()=>{d(!0)},w=()=>{d(!1),n()},b=m.useCallback(async()=>{if(t&&window.confirm(`Sei sicuro di voler eliminare "${t.name}"?`)){p(!0);try{s&&s(t.id),n()}catch(D){console.error("Errore nell'eliminazione del ristorante:",D),alert("Errore nell'eliminazione del ristorante. Riprova pi tardi.")}finally{p(!1)}}},[t,s,n]);if(!t)return null;const x=o.includes(t.id),E=()=>{a(t.id)},_=()=>{if(t.latitude&&t.longitude){const D=`https://www.google.com/maps/dir/?api=1&destination=${t.latitude},${t.longitude}`;window.open(D,"_blank")}},y=D=>{const S=parseFloat(D),T=Math.floor(S),I=S%1>=.5;return c.jsx("div",{className:"flex text-[hsl(var(--goldenrod))]",children:[...Array(5)].map((A,P)=>c.jsx(an,{className:`w-4 h-4 ${P<T?"fill-current":P===T&&I?"fill-current opacity-50":""}`},P))})},C=D=>{if(!D)return null;const S=Math.floor(D),T=D%1>=.5;return c.jsx("div",{className:"flex text-[hsl(var(--terracotta))]",children:[...Array(5)].map((I,A)=>c.jsx(an,{className:`w-4 h-4 ${A<S?"fill-current":A===S&&T?"fill-current opacity-50":"text-gray-300"}`},A))})},k=t.locationUser||t.qualitPrezzoUser||t.mediaPrezzo;return c.jsxs(c.Fragment,{children:[c.jsx(Su,{open:e,onOpenChange:n,children:c.jsxs(Ka,{className:"max-w-4xl max-h-[90vh] overflow-y-auto",children:[c.jsx(Ga,{children:c.jsxs("div",{className:"flex justify-between items-start",children:[c.jsxs("div",{className:"flex-1",children:[c.jsx(Qa,{className:"text-2xl font-display font-bold text-[hsl(var(--dark-slate))] mb-2",children:t.name}),k&&c.jsxs(Ni,{className:"bg-[hsl(var(--terracotta))]/10 text-[hsl(var(--terracotta))] border-[hsl(var(--terracotta))]/20",children:[c.jsx(ax,{className:"w-3 h-3 mr-1"}),"Valutato dalla community"]})]}),i&&c.jsx(de,{variant:"ghost",size:"icon",className:"text-gray-400 hover:text-red-600 hover:bg-red-50",onClick:b,disabled:h,title:"Elimina ristorante",children:c.jsx(Am,{className:`w-5 h-5 ${h?"animate-pulse":""}`})})]})}),c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[c.jsx("img",{src:t.imageUrl||"https://images.unsplash.com/photo-1414235077428-338989a2e8c0?ixlib=rb-4.0.3&auto=format&fit=crop&w=600&h=400",alt:t.name,className:"w-full h-64 object-cover rounded-lg"}),c.jsx("img",{src:"https://images.unsplash.com/photo-1556909114-f6e7ad7d3136?ixlib=rb-4.0.3&auto=format&fit=crop&w=600&h=400",alt:"Chef preparing food",className:"w-full h-64 object-cover rounded-lg"})]}),k&&c.jsxs("div",{className:"bg-gradient-to-r from-[hsl(var(--terracotta))]/5 to-[hsl(var(--saddle))]/5 rounded-lg p-6 border border-[hsl(var(--terracotta))]/20",children:[c.jsxs("div",{className:"flex items-center mb-4",children:[c.jsx(tu,{className:"w-5 h-5 text-[hsl(var(--terracotta))] mr-2"}),c.jsx("h4",{className:"text-lg font-semibold text-[hsl(var(--dark-slate))]",children:"Valutazioni della Community"})]}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[t.locationUser&&c.jsxs("div",{className:"text-center",children:[c.jsxs("div",{className:"flex items-center justify-center mb-2",children:[c.jsx(Bi,{className:"w-5 h-5 text-[hsl(var(--terracotta))] mr-2"}),c.jsx("span",{className:"font-medium text-[hsl(var(--dark-slate))]",children:"Posizione"})]}),c.jsx("div",{className:"flex justify-center mb-1",children:C(t.locationUser)}),c.jsx("div",{className:"text-2xl font-bold text-[hsl(var(--terracotta))] mb-1",children:t.locationUser.toFixed(1)}),c.jsx("div",{className:"text-xs text-gray-600",children:"Accessibilit, parcheggio, zona"})]}),t.qualitPrezzoUser&&c.jsxs("div",{className:"text-center",children:[c.jsxs("div",{className:"flex items-center justify-center mb-2",children:[c.jsx(an,{className:"w-5 h-5 text-[hsl(var(--terracotta))] mr-2"}),c.jsx("span",{className:"font-medium text-[hsl(var(--dark-slate))]",children:"Qualit/Prezzo"})]}),c.jsx("div",{className:"flex justify-center mb-1",children:C(t.qualitPrezzoUser)}),c.jsx("div",{className:"text-2xl font-bold text-[hsl(var(--terracotta))] mb-1",children:t.qualitPrezzoUser.toFixed(1)}),c.jsx("div",{className:"text-xs text-gray-600",children:"Rapporto qualit vs prezzo"})]}),t.mediaPrezzo&&c.jsxs("div",{className:"text-center",children:[c.jsxs("div",{className:"flex items-center justify-center mb-2",children:[c.jsx(Hf,{className:"w-5 h-5 text-[hsl(var(--terracotta))] mr-2"}),c.jsx("span",{className:"font-medium text-[hsl(var(--dark-slate))]",children:"Prezzo Medio"})]}),c.jsxs("div",{className:"text-2xl font-bold text-[hsl(var(--terracotta))] mb-1",children:["",t.mediaPrezzo.toFixed(2)]}),c.jsx("div",{className:"text-xs text-gray-600",children:"Per persona (secondo la community)"})]})]}),c.jsx("div",{className:"mt-4 text-center",children:c.jsx("p",{className:"text-xs text-gray-600 italic",children:"Valutazioni basate sull'esperienza della community di utenti"})})]}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[c.jsxs("div",{children:[c.jsx("h4",{className:"text-lg font-semibold text-[hsl(var(--dark-slate))] mb-4",children:"Dettaglio"}),c.jsx("p",{className:"text-[hsl(var(--dark-slate))]/70 mb-4",children:t.description||"Experience authentic cuisine in a warm, family-friendly atmosphere. Our restaurant has been serving traditional recipes using only the finest local ingredients."}),c.jsxs("div",{className:"space-y-3",children:[c.jsxs("div",{className:"flex items-center",children:[c.jsx(Bi,{className:"w-5 h-5 text-[hsl(var(--terracotta))] mr-3"}),c.jsx("span",{className:"text-[hsl(var(--dark-slate))]",children:t.address||t.location})]}),t.phone&&c.jsxs("div",{className:"flex items-center",children:[c.jsx(uP,{className:"w-5 h-5 text-[hsl(var(--terracotta))] mr-3"}),c.jsx("span",{className:"text-[hsl(var(--dark-slate))]",children:t.phone})]}),t.hours&&c.jsxs("div",{className:"flex items-center",children:[c.jsx(rl,{className:"w-5 h-5 text-[hsl(var(--terracotta))] mr-3"}),c.jsx("span",{className:"text-[hsl(var(--dark-slate))]",children:t.hours})]}),c.jsxs("div",{className:"flex items-center",children:[c.jsx(rP,{className:"w-5 h-5 text-[hsl(var(--terracotta))] mr-3"}),c.jsx("span",{className:"text-[hsl(var(--dark-slate))]",children:t.priceRange}),t.mediaPrezzo&&c.jsxs("span",{className:"text-[hsl(var(--dark-slate))]/60 ml-2",children:["(Media: ",t.mediaPrezzo.toFixed(2),")"]})]}),c.jsxs("div",{className:"flex items-center",children:[y(t.rating),c.jsx("span",{className:"ml-2 text-[hsl(var(--dark-slate))] font-medium",children:t.rating}),c.jsx("span",{className:"text-[hsl(var(--dark-slate))]/50 ml-2",children:"TripAdvisor"})]})]})]}),c.jsxs("div",{children:[c.jsx("h4",{className:"text-lg font-semibold text-[hsl(var(--dark-slate))] mb-4",children:"Cucine e Specialit"}),c.jsx("div",{className:"flex flex-wrap gap-2 mb-6",children:((O=t.cuisines)==null?void 0:O.map((D,S)=>c.jsx(Ni,{className:Tu(D),children:D.charAt(0).toUpperCase()+D.slice(1)},`${D}-${S}`)))||c.jsx(Ni,{className:"bg-gray-100 text-gray-600",children:"Cucina non specificata"})}),k&&c.jsxs("div",{className:"bg-white border border-[hsl(var(--terracotta))]/20 rounded-lg p-4",children:[c.jsxs("h5",{className:"font-medium text-[hsl(var(--dark-slate))] mb-3 flex items-center",children:[c.jsx(ax,{className:"w-4 h-4 mr-2 text-[hsl(var(--terracotta))]"}),"Highlights Community"]}),c.jsxs("div",{className:"space-y-2 text-sm",children:[t.locationUser&&c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsx("span",{className:"text-[hsl(var(--dark-slate))]/70",children:"Posizione"}),c.jsxs("div",{className:"flex items-center",children:[c.jsx("span",{className:"font-medium text-[hsl(var(--terracotta))] mr-1",children:t.locationUser.toFixed(1)}),c.jsx(an,{className:"w-3 h-3 text-[hsl(var(--terracotta))]"})]})]}),t.qualitPrezzoUser&&c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsx("span",{className:"text-[hsl(var(--dark-slate))]/70",children:"Qualit/Prezzo"}),c.jsxs("div",{className:"flex items-center",children:[c.jsx("span",{className:"font-medium text-[hsl(var(--terracotta))] mr-1",children:t.qualitPrezzoUser.toFixed(1)}),c.jsx(an,{className:"w-3 h-3 text-[hsl(var(--terracotta))]"})]})]}),t.mediaPrezzo&&c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsx("span",{className:"text-[hsl(var(--dark-slate))]/70",children:"Prezzo Tipico"}),c.jsxs("div",{className:"flex items-center",children:[c.jsx(Hf,{className:"w-3 h-3 text-[hsl(var(--terracotta))] mr-1"}),c.jsx("span",{className:"font-medium text-[hsl(var(--terracotta))]",children:t.mediaPrezzo.toFixed(2)})]})]})]})]})]})]}),c.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 pt-6 border-t",children:[c.jsxs(de,{className:"flex-1 bg-[hsl(var(--terracotta))] text-white hover:bg-[hsl(var(--saddle))] transition-colors font-medium",onClick:g,children:[c.jsx(An,{className:"w-4 h-4 mr-2"}),"Prenota"]}),c.jsxs(de,{variant:"outline",className:"flex-1 border-[hsl(var(--terracotta))] text-[hsl(var(--terracotta))] hover:bg-[hsl(var(--terracotta))]/10 transition-colors font-medium",onClick:_,children:[c.jsx(iP,{className:"w-4 h-4 mr-2"}),"Ottieni Indicazioni"]}),c.jsx(de,{variant:"outline",className:`border-gray-300 hover:bg-gray-50 transition-colors font-medium ${x?"text-[hsl(var(--tomato))]":"text-[hsl(var(--dark-slate))]"}`,onClick:E,children:c.jsx(bi,{className:`w-4 h-4 mr-2 ${x?"fill-current":""}`})})]})]})]})}),c.jsx(RL,{restaurant:t,isOpen:u,onClose:w})]})},IL=({restaurants:t,onRestaurantClick:e,className:n=""})=>{const r=m.useRef(null),s=m.useRef(null),i=m.useRef([]);m.useEffect(()=>{if(window.L)o();else{const u=document.createElement("link");u.rel="stylesheet",u.href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css",document.head.appendChild(u);const d=document.createElement("script");d.src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js",d.onload=o,document.head.appendChild(d)}return()=>{s.current&&(s.current.remove(),s.current=null)}},[]),m.useEffect(()=>{s.current&&a()},[t]);const o=()=>{!r.current||s.current||(s.current=window.L.map(r.current).setView([40.2,18.2],10),window.L.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:" OpenStreetMap contributors"}).addTo(s.current),a())},a=()=>{!s.current||!window.L||(i.current.forEach(u=>{s.current.removeLayer(u)}),i.current=[],t.forEach(u=>{if(u.latitude&&u.longitude){const d=parseFloat(u.latitude),h=parseFloat(u.longitude),p=window.L.marker([d,h]).addTo(s.current),g=`
          <div class="p-2">
            <h3 class="font-semibold text-lg mb-1">${u.name}</h3>
            <p class="text-sm text-gray-600 mb-2">${u.location}</p>
            <div class="flex items-center mb-2">
              <span class="text-yellow-500 mr-1"></span>
              <span class="mr-2">${u.rating}</span>
              <span class="text-orange-600 font-medium">${u.priceRange}</span>
            </div>
            <button 
              onclick="window.openRestaurantFromMap?.(${u.id})"
              class="bg-orange-600 text-white px-3 py-1 rounded text-sm hover:bg-orange-700 transition-colors"
            >
              Dettagli
            </button>
          </div>
        `;p.bindPopup(g),i.current.push(p),p.on("click",()=>{e==null||e(u)})}}),window.openRestaurantFromMap=u=>{const d=t.find(h=>h.id===u);d&&e&&e(d)})};return c.jsx("div",{ref:r,className:`h-96 rounded-xl ${n}`})};var Sd="Popover",[HC,H3]=ts(Sd,[uo]),pl=uo(),[AL,os]=HC(Sd),WC=t=>{const{__scopePopover:e,children:n,open:r,defaultOpen:s,onOpenChange:i,modal:o=!1}=t,a=pl(e),u=m.useRef(null),[d,h]=m.useState(!1),[p,g]=$i({prop:r,defaultProp:s??!1,onChange:i,caller:Sd});return c.jsx(I1,{...a,children:c.jsx(AL,{scope:e,contentId:Ut(),triggerRef:u,open:p,onOpenChange:g,onOpenToggle:m.useCallback(()=>g(w=>!w),[g]),hasCustomAnchor:d,onCustomAnchorAdd:m.useCallback(()=>h(!0),[]),onCustomAnchorRemove:m.useCallback(()=>h(!1),[]),modal:o,children:n})})};WC.displayName=Sd;var qC="PopoverAnchor",NL=m.forwardRef((t,e)=>{const{__scopePopover:n,...r}=t,s=os(qC,n),i=pl(n),{onCustomAnchorAdd:o,onCustomAnchorRemove:a}=s;return m.useEffect(()=>(o(),()=>a()),[o,a]),c.jsx(Gu,{...i,...r,ref:e})});NL.displayName=qC;var KC="PopoverTrigger",GC=m.forwardRef((t,e)=>{const{__scopePopover:n,...r}=t,s=os(KC,n),i=pl(n),o=Ne(e,s.triggerRef),a=c.jsx(ce.button,{type:"button","aria-haspopup":"dialog","aria-expanded":s.open,"aria-controls":s.contentId,"data-state":ZC(s.open),...r,ref:o,onClick:le(t.onClick,s.onOpenToggle)});return s.hasCustomAnchor?a:c.jsx(Gu,{asChild:!0,...i,children:a})});GC.displayName=KC;var Lg="PopoverPortal",[PL,kL]=HC(Lg,{forceMount:void 0}),QC=t=>{const{__scopePopover:e,forceMount:n,children:r,container:s}=t,i=os(Lg,e);return c.jsx(PL,{scope:e,forceMount:n,children:c.jsx(hr,{present:n||i.open,children:c.jsx(tl,{asChild:!0,container:s,children:r})})})};QC.displayName=Lg;var to="PopoverContent",YC=m.forwardRef((t,e)=>{const n=kL(to,t.__scopePopover),{forceMount:r=n.forceMount,...s}=t,i=os(to,t.__scopePopover);return c.jsx(hr,{present:r||i.open,children:i.modal?c.jsx(DL,{...s,ref:e}):c.jsx(OL,{...s,ref:e})})});YC.displayName=to;var jL=Ps("PopoverContent.RemoveScroll"),DL=m.forwardRef((t,e)=>{const n=os(to,t.__scopePopover),r=m.useRef(null),s=Ne(e,r),i=m.useRef(!1);return m.useEffect(()=>{const o=r.current;if(o)return Hm(o)},[]),c.jsx(Zu,{as:jL,allowPinchZoom:!0,children:c.jsx(XC,{...t,ref:s,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:le(t.onCloseAutoFocus,o=>{var a;o.preventDefault(),i.current||(a=n.triggerRef.current)==null||a.focus()}),onPointerDownOutside:le(t.onPointerDownOutside,o=>{const a=o.detail.originalEvent,u=a.button===0&&a.ctrlKey===!0,d=a.button===2||u;i.current=d},{checkForDefaultPrevented:!1}),onFocusOutside:le(t.onFocusOutside,o=>o.preventDefault(),{checkForDefaultPrevented:!1})})})}),OL=m.forwardRef((t,e)=>{const n=os(to,t.__scopePopover),r=m.useRef(!1),s=m.useRef(!1);return c.jsx(XC,{...t,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:i=>{var o,a;(o=t.onCloseAutoFocus)==null||o.call(t,i),i.defaultPrevented||(r.current||(a=n.triggerRef.current)==null||a.focus(),i.preventDefault()),r.current=!1,s.current=!1},onInteractOutside:i=>{var u,d;(u=t.onInteractOutside)==null||u.call(t,i),i.defaultPrevented||(r.current=!0,i.detail.originalEvent.type==="pointerdown"&&(s.current=!0));const o=i.target;((d=n.triggerRef.current)==null?void 0:d.contains(o))&&i.preventDefault(),i.detail.originalEvent.type==="focusin"&&s.current&&i.preventDefault()}})}),XC=m.forwardRef((t,e)=>{const{__scopePopover:n,trapFocus:r,onOpenAutoFocus:s,onCloseAutoFocus:i,disableOutsidePointerEvents:o,onEscapeKeyDown:a,onPointerDownOutside:u,onFocusOutside:d,onInteractOutside:h,...p}=t,g=os(to,n),w=pl(n);return Bm(),c.jsx(Xu,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:s,onUnmountAutoFocus:i,children:c.jsx(io,{asChild:!0,disableOutsidePointerEvents:o,onInteractOutside:h,onEscapeKeyDown:a,onPointerDownOutside:u,onFocusOutside:d,onDismiss:()=>g.onOpenChange(!1),children:c.jsx(zm,{"data-state":ZC(g.open),role:"dialog",id:g.contentId,...w,...p,ref:e,style:{...p.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}})})})}),JC="PopoverClose",VL=m.forwardRef((t,e)=>{const{__scopePopover:n,...r}=t,s=os(JC,n);return c.jsx(ce.button,{type:"button",...r,ref:e,onClick:le(t.onClick,()=>s.onOpenChange(!1))})});VL.displayName=JC;var ML="PopoverArrow",LL=m.forwardRef((t,e)=>{const{__scopePopover:n,...r}=t,s=pl(n);return c.jsx(Um,{...s,...r,ref:e})});LL.displayName=ML;function ZC(t){return t?"open":"closed"}var FL=WC,zL=GC,UL=QC,eb=YC;const $L=FL,BL=zL,tb=m.forwardRef(({className:t,align:e="center",sideOffset:n=4,...r},s)=>c.jsx(UL,{children:c.jsx(eb,{ref:s,align:e,sideOffset:n,className:ae("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-popover-content-transform-origin]",t),...r})}));tb.displayName=eb.displayName;var Gw=1,HL=.9,WL=.8,qL=.17,Hh=.1,Wh=.999,KL=.9999,GL=.99,QL=/[\\\/_+.#"@\[\(\{&]/,YL=/[\\\/_+.#"@\[\(\{&]/g,XL=/[\s-]/,nb=/[\s-]/g;function Cp(t,e,n,r,s,i,o){if(i===e.length)return s===t.length?Gw:GL;var a=`${s},${i}`;if(o[a]!==void 0)return o[a];for(var u=r.charAt(i),d=n.indexOf(u,s),h=0,p,g,w,b;d>=0;)p=Cp(t,e,n,r,d+1,i+1,o),p>h&&(d===s?p*=Gw:QL.test(t.charAt(d-1))?(p*=WL,w=t.slice(s,d-1).match(YL),w&&s>0&&(p*=Math.pow(Wh,w.length))):XL.test(t.charAt(d-1))?(p*=HL,b=t.slice(s,d-1).match(nb),b&&s>0&&(p*=Math.pow(Wh,b.length))):(p*=qL,s>0&&(p*=Math.pow(Wh,d-s))),t.charAt(d)!==e.charAt(i)&&(p*=KL)),(p<Hh&&n.charAt(d-1)===r.charAt(i+1)||r.charAt(i+1)===r.charAt(i)&&n.charAt(d-1)!==r.charAt(i))&&(g=Cp(t,e,n,r,d+1,i+2,o),g*Hh>p&&(p=g*Hh)),p>h&&(h=p),d=n.indexOf(u,d+1);return o[a]=h,h}function Qw(t){return t.toLowerCase().replace(nb," ")}function JL(t,e,n){return t=n&&n.length>0?`${t+" "+n.join(" ")}`:t,Cp(t,e,Qw(t),Qw(e),0,0,{})}var Bo='[cmdk-group=""]',qh='[cmdk-group-items=""]',ZL='[cmdk-group-heading=""]',rb='[cmdk-item=""]',Yw=`${rb}:not([aria-disabled="true"])`,bp="cmdk-item-select",oi="data-value",e3=(t,e,n)=>JL(t,e,n),sb=m.createContext(void 0),ml=()=>m.useContext(sb),ib=m.createContext(void 0),Fg=()=>m.useContext(ib),ob=m.createContext(void 0),ab=m.forwardRef((t,e)=>{let n=ai(()=>{var U,J;return{search:"",value:(J=(U=t.value)!=null?U:t.defaultValue)!=null?J:"",selectedItemId:void 0,filtered:{count:0,items:new Map,groups:new Set}}}),r=ai(()=>new Set),s=ai(()=>new Map),i=ai(()=>new Map),o=ai(()=>new Set),a=lb(t),{label:u,children:d,value:h,onValueChange:p,filter:g,shouldFilter:w,loop:b,disablePointerSelection:x=!1,vimBindings:E=!0,..._}=t,y=Ut(),C=Ut(),k=Ut(),O=m.useRef(null),D=d3();zs(()=>{if(h!==void 0){let U=h.trim();n.current.value=U,S.emit()}},[h]),zs(()=>{D(6,N)},[]);let S=m.useMemo(()=>({subscribe:U=>(o.current.add(U),()=>o.current.delete(U)),snapshot:()=>n.current,setState:(U,J,H)=>{var B,ee,Y,fe;if(!Object.is(n.current[U],J)){if(n.current[U]=J,U==="search")j(),A(),D(1,P);else if(U==="value"){if(document.activeElement.hasAttribute("cmdk-input")||document.activeElement.hasAttribute("cmdk-root")){let xe=document.getElementById(k);xe?xe.focus():(B=document.getElementById(y))==null||B.focus()}if(D(7,()=>{var xe;n.current.selectedItemId=(xe=L())==null?void 0:xe.id,S.emit()}),H||D(5,N),((ee=a.current)==null?void 0:ee.value)!==void 0){let xe=J??"";(fe=(Y=a.current).onValueChange)==null||fe.call(Y,xe);return}}S.emit()}},emit:()=>{o.current.forEach(U=>U())}}),[]),T=m.useMemo(()=>({value:(U,J,H)=>{var B;J!==((B=i.current.get(U))==null?void 0:B.value)&&(i.current.set(U,{value:J,keywords:H}),n.current.filtered.items.set(U,I(J,H)),D(2,()=>{A(),S.emit()}))},item:(U,J)=>(r.current.add(U),J&&(s.current.has(J)?s.current.get(J).add(U):s.current.set(J,new Set([U]))),D(3,()=>{j(),A(),n.current.value||P(),S.emit()}),()=>{i.current.delete(U),r.current.delete(U),n.current.filtered.items.delete(U);let H=L();D(4,()=>{j(),(H==null?void 0:H.getAttribute("id"))===U&&P(),S.emit()})}),group:U=>(s.current.has(U)||s.current.set(U,new Set),()=>{i.current.delete(U),s.current.delete(U)}),filter:()=>a.current.shouldFilter,label:u||t["aria-label"],getDisablePointerSelection:()=>a.current.disablePointerSelection,listId:y,inputId:k,labelId:C,listInnerRef:O}),[]);function I(U,J){var H,B;let ee=(B=(H=a.current)==null?void 0:H.filter)!=null?B:e3;return U?ee(U,n.current.search,J):0}function A(){if(!n.current.search||a.current.shouldFilter===!1)return;let U=n.current.filtered.items,J=[];n.current.filtered.groups.forEach(B=>{let ee=s.current.get(B),Y=0;ee.forEach(fe=>{let xe=U.get(fe);Y=Math.max(xe,Y)}),J.push([B,Y])});let H=O.current;G().sort((B,ee)=>{var Y,fe;let xe=B.getAttribute("id"),ve=ee.getAttribute("id");return((Y=U.get(ve))!=null?Y:0)-((fe=U.get(xe))!=null?fe:0)}).forEach(B=>{let ee=B.closest(qh);ee?ee.appendChild(B.parentElement===ee?B:B.closest(`${qh} > *`)):H.appendChild(B.parentElement===H?B:B.closest(`${qh} > *`))}),J.sort((B,ee)=>ee[1]-B[1]).forEach(B=>{var ee;let Y=(ee=O.current)==null?void 0:ee.querySelector(`${Bo}[${oi}="${encodeURIComponent(B[0])}"]`);Y==null||Y.parentElement.appendChild(Y)})}function P(){let U=G().find(H=>H.getAttribute("aria-disabled")!=="true"),J=U==null?void 0:U.getAttribute(oi);S.setState("value",J||void 0)}function j(){var U,J,H,B;if(!n.current.search||a.current.shouldFilter===!1){n.current.filtered.count=r.current.size;return}n.current.filtered.groups=new Set;let ee=0;for(let Y of r.current){let fe=(J=(U=i.current.get(Y))==null?void 0:U.value)!=null?J:"",xe=(B=(H=i.current.get(Y))==null?void 0:H.keywords)!=null?B:[],ve=I(fe,xe);n.current.filtered.items.set(Y,ve),ve>0&&ee++}for(let[Y,fe]of s.current)for(let xe of fe)if(n.current.filtered.items.get(xe)>0){n.current.filtered.groups.add(Y);break}n.current.filtered.count=ee}function N(){var U,J,H;let B=L();B&&(((U=B.parentElement)==null?void 0:U.firstChild)===B&&((H=(J=B.closest(Bo))==null?void 0:J.querySelector(ZL))==null||H.scrollIntoView({block:"nearest"})),B.scrollIntoView({block:"nearest"}))}function L(){var U;return(U=O.current)==null?void 0:U.querySelector(`${rb}[aria-selected="true"]`)}function G(){var U;return Array.from(((U=O.current)==null?void 0:U.querySelectorAll(Yw))||[])}function Q(U){let J=G()[U];J&&S.setState("value",J.getAttribute(oi))}function z(U){var J;let H=L(),B=G(),ee=B.findIndex(fe=>fe===H),Y=B[ee+U];(J=a.current)!=null&&J.loop&&(Y=ee+U<0?B[B.length-1]:ee+U===B.length?B[0]:B[ee+U]),Y&&S.setState("value",Y.getAttribute(oi))}function V(U){let J=L(),H=J==null?void 0:J.closest(Bo),B;for(;H&&!B;)H=U>0?c3(H,Bo):u3(H,Bo),B=H==null?void 0:H.querySelector(Yw);B?S.setState("value",B.getAttribute(oi)):z(U)}let $=()=>Q(G().length-1),Z=U=>{U.preventDefault(),U.metaKey?$():U.altKey?V(1):z(1)},se=U=>{U.preventDefault(),U.metaKey?Q(0):U.altKey?V(-1):z(-1)};return m.createElement(ce.div,{ref:e,tabIndex:-1,..._,"cmdk-root":"",onKeyDown:U=>{var J;(J=_.onKeyDown)==null||J.call(_,U);let H=U.nativeEvent.isComposing||U.keyCode===229;if(!(U.defaultPrevented||H))switch(U.key){case"n":case"j":{E&&U.ctrlKey&&Z(U);break}case"ArrowDown":{Z(U);break}case"p":case"k":{E&&U.ctrlKey&&se(U);break}case"ArrowUp":{se(U);break}case"Home":{U.preventDefault(),Q(0);break}case"End":{U.preventDefault(),$();break}case"Enter":{U.preventDefault();let B=L();if(B){let ee=new Event(bp);B.dispatchEvent(ee)}}}}},m.createElement("label",{"cmdk-label":"",htmlFor:T.inputId,id:T.labelId,style:f3},u),Cd(t,U=>m.createElement(ib.Provider,{value:S},m.createElement(sb.Provider,{value:T},U))))}),t3=m.forwardRef((t,e)=>{var n,r;let s=Ut(),i=m.useRef(null),o=m.useContext(ob),a=ml(),u=lb(t),d=(r=(n=u.current)==null?void 0:n.forceMount)!=null?r:o==null?void 0:o.forceMount;zs(()=>{if(!d)return a.item(s,o==null?void 0:o.id)},[d]);let h=cb(s,i,[t.value,t.children,i],t.keywords),p=Fg(),g=Xr(D=>D.value&&D.value===h.current),w=Xr(D=>d||a.filter()===!1?!0:D.search?D.filtered.items.get(s)>0:!0);m.useEffect(()=>{let D=i.current;if(!(!D||t.disabled))return D.addEventListener(bp,b),()=>D.removeEventListener(bp,b)},[w,t.onSelect,t.disabled]);function b(){var D,S;x(),(S=(D=u.current).onSelect)==null||S.call(D,h.current)}function x(){p.setState("value",h.current,!0)}if(!w)return null;let{disabled:E,value:_,onSelect:y,forceMount:C,keywords:k,...O}=t;return m.createElement(ce.div,{ref:Ns(i,e),...O,id:s,"cmdk-item":"",role:"option","aria-disabled":!!E,"aria-selected":!!g,"data-disabled":!!E,"data-selected":!!g,onPointerMove:E||a.getDisablePointerSelection()?void 0:x,onClick:E?void 0:b},t.children)}),n3=m.forwardRef((t,e)=>{let{heading:n,children:r,forceMount:s,...i}=t,o=Ut(),a=m.useRef(null),u=m.useRef(null),d=Ut(),h=ml(),p=Xr(w=>s||h.filter()===!1?!0:w.search?w.filtered.groups.has(o):!0);zs(()=>h.group(o),[]),cb(o,a,[t.value,t.heading,u]);let g=m.useMemo(()=>({id:o,forceMount:s}),[s]);return m.createElement(ce.div,{ref:Ns(a,e),...i,"cmdk-group":"",role:"presentation",hidden:p?void 0:!0},n&&m.createElement("div",{ref:u,"cmdk-group-heading":"","aria-hidden":!0,id:d},n),Cd(t,w=>m.createElement("div",{"cmdk-group-items":"",role:"group","aria-labelledby":n?d:void 0},m.createElement(ob.Provider,{value:g},w))))}),r3=m.forwardRef((t,e)=>{let{alwaysRender:n,...r}=t,s=m.useRef(null),i=Xr(o=>!o.search);return!n&&!i?null:m.createElement(ce.div,{ref:Ns(s,e),...r,"cmdk-separator":"",role:"separator"})}),s3=m.forwardRef((t,e)=>{let{onValueChange:n,...r}=t,s=t.value!=null,i=Fg(),o=Xr(d=>d.search),a=Xr(d=>d.selectedItemId),u=ml();return m.useEffect(()=>{t.value!=null&&i.setState("search",t.value)},[t.value]),m.createElement(ce.input,{ref:e,...r,"cmdk-input":"",autoComplete:"off",autoCorrect:"off",spellCheck:!1,"aria-autocomplete":"list",role:"combobox","aria-expanded":!0,"aria-controls":u.listId,"aria-labelledby":u.labelId,"aria-activedescendant":a,id:u.inputId,type:"text",value:s?t.value:o,onChange:d=>{s||i.setState("search",d.target.value),n==null||n(d.target.value)}})}),i3=m.forwardRef((t,e)=>{let{children:n,label:r="Suggestions",...s}=t,i=m.useRef(null),o=m.useRef(null),a=Xr(d=>d.selectedItemId),u=ml();return m.useEffect(()=>{if(o.current&&i.current){let d=o.current,h=i.current,p,g=new ResizeObserver(()=>{p=requestAnimationFrame(()=>{let w=d.offsetHeight;h.style.setProperty("--cmdk-list-height",w.toFixed(1)+"px")})});return g.observe(d),()=>{cancelAnimationFrame(p),g.unobserve(d)}}},[]),m.createElement(ce.div,{ref:Ns(i,e),...s,"cmdk-list":"",role:"listbox",tabIndex:-1,"aria-activedescendant":a,"aria-label":r,id:u.listId},Cd(t,d=>m.createElement("div",{ref:Ns(o,u.listInnerRef),"cmdk-list-sizer":""},d)))}),o3=m.forwardRef((t,e)=>{let{open:n,onOpenChange:r,overlayClassName:s,contentClassName:i,container:o,...a}=t;return m.createElement(Gm,{open:n,onOpenChange:r},m.createElement(Qm,{container:o},m.createElement(ol,{"cmdk-overlay":"",className:s}),m.createElement(al,{"aria-label":t.label,"cmdk-dialog":"",className:i},m.createElement(ab,{ref:e,...a}))))}),a3=m.forwardRef((t,e)=>Xr(n=>n.filtered.count===0)?m.createElement(ce.div,{ref:e,...t,"cmdk-empty":"",role:"presentation"}):null),l3=m.forwardRef((t,e)=>{let{progress:n,children:r,label:s="Loading...",...i}=t;return m.createElement(ce.div,{ref:e,...i,"cmdk-loading":"",role:"progressbar","aria-valuenow":n,"aria-valuemin":0,"aria-valuemax":100,"aria-label":s},Cd(t,o=>m.createElement("div",{"aria-hidden":!0},o)))}),Bt=Object.assign(ab,{List:i3,Item:t3,Input:s3,Group:n3,Separator:r3,Dialog:o3,Empty:a3,Loading:l3});function c3(t,e){let n=t.nextElementSibling;for(;n;){if(n.matches(e))return n;n=n.nextElementSibling}}function u3(t,e){let n=t.previousElementSibling;for(;n;){if(n.matches(e))return n;n=n.previousElementSibling}}function lb(t){let e=m.useRef(t);return zs(()=>{e.current=t}),e}var zs=typeof window>"u"?m.useEffect:m.useLayoutEffect;function ai(t){let e=m.useRef();return e.current===void 0&&(e.current=t()),e}function Xr(t){let e=Fg(),n=()=>t(e.snapshot());return m.useSyncExternalStore(e.subscribe,n,n)}function cb(t,e,n,r=[]){let s=m.useRef(),i=ml();return zs(()=>{var o;let a=(()=>{var d;for(let h of n){if(typeof h=="string")return h.trim();if(typeof h=="object"&&"current"in h)return h.current?(d=h.current.textContent)==null?void 0:d.trim():s.current}})(),u=r.map(d=>d.trim());i.value(t,a,u),(o=e.current)==null||o.setAttribute(oi,a),s.current=a}),s}var d3=()=>{let[t,e]=m.useState(),n=ai(()=>new Map);return zs(()=>{n.current.forEach(r=>r()),n.current=new Map},[t]),(r,s)=>{n.current.set(r,s),e({})}};function h3(t){let e=t.type;return typeof e=="function"?e(t.props):"render"in e?e.render(t.props):t}function Cd({asChild:t,children:e},n){return t&&m.isValidElement(e)?m.cloneElement(h3(e),{ref:e.ref},n(e.props.children)):n(e)}var f3={position:"absolute",width:"1px",height:"1px",padding:"0",margin:"-1px",overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0"};const ub=m.forwardRef(({className:t,...e},n)=>c.jsx(Bt,{ref:n,className:ae("flex h-full w-full flex-col overflow-hidden rounded-md bg-popover text-popover-foreground",t),...e}));ub.displayName=Bt.displayName;const db=m.forwardRef(({className:t,...e},n)=>c.jsxs("div",{className:"flex items-center border-b px-3","cmdk-input-wrapper":"",children:[c.jsx(_c,{className:"mr-2 h-4 w-4 shrink-0 opacity-50"}),c.jsx(Bt.Input,{ref:n,className:ae("flex h-11 w-full rounded-md bg-transparent py-3 text-sm outline-none placeholder:text-muted-foreground disabled:cursor-not-allowed disabled:opacity-50",t),...e})]}));db.displayName=Bt.Input.displayName;const p3=m.forwardRef(({className:t,...e},n)=>c.jsx(Bt.List,{ref:n,className:ae("max-h-[300px] overflow-y-auto overflow-x-hidden",t),...e}));p3.displayName=Bt.List.displayName;const hb=m.forwardRef((t,e)=>c.jsx(Bt.Empty,{ref:e,className:"py-6 text-center text-sm",...t}));hb.displayName=Bt.Empty.displayName;const fb=m.forwardRef(({className:t,...e},n)=>c.jsx(Bt.Group,{ref:n,className:ae("overflow-hidden p-1 text-foreground [&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:py-1.5 [&_[cmdk-group-heading]]:text-xs [&_[cmdk-group-heading]]:font-medium [&_[cmdk-group-heading]]:text-muted-foreground",t),...e}));fb.displayName=Bt.Group.displayName;const m3=m.forwardRef(({className:t,...e},n)=>c.jsx(Bt.Separator,{ref:n,className:ae("-mx-1 h-px bg-border",t),...e}));m3.displayName=Bt.Separator.displayName;const pb=m.forwardRef(({className:t,...e},n)=>c.jsx(Bt.Item,{ref:n,className:ae("relative flex cursor-default gap-2 select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none data-[disabled=true]:pointer-events-none data-[selected='true']:bg-accent data-[selected=true]:text-accent-foreground data-[disabled=true]:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",t),...e}));pb.displayName=Bt.Item.displayName;const mb=({selectedCuisines:t,onCuisinesChange:e,placeholder:n="Seleziona tipi di cucina...",className:r})=>{const[s,i]=m.useState(!1),o=d=>{t.includes(d)||e([...t,d]),i(!1)},a=d=>{e(t.filter(h=>h!==d))},u=LC.filter(d=>!t.includes(d.value));return c.jsxs("div",{className:ae("space-y-2",r),children:[c.jsx("div",{className:"flex flex-wrap gap-2",children:t.map(d=>c.jsxs(Ni,{variant:"outline",className:ae("px-3 py-1 text-sm font-medium border cursor-pointer hover:opacity-80 transition-opacity",Tu(d)),onClick:()=>a(d),children:[FC(d),c.jsx(sl,{className:"w-3 h-3 ml-2"})]},d))}),c.jsxs($L,{open:s,onOpenChange:i,children:[c.jsx(BL,{asChild:!0,children:c.jsxs(de,{variant:"outline",role:"combobox","aria-expanded":s,className:"justify-start text-left font-normal",disabled:u.length===0,children:[c.jsx(Ss,{className:"w-4 h-4 mr-2"}),u.length===0?"Tutti i tipi di cucina selezionati":n]})}),c.jsx(tb,{className:"w-full p-0",align:"start",children:c.jsxs(ub,{children:[c.jsx(db,{placeholder:"Cerca tipo di cucina..."}),c.jsx(hb,{children:"Nessun tipo di cucina trovato."}),c.jsx(fb,{children:u.map(d=>c.jsxs(pb,{value:d.value,onSelect:()=>o(d.value),className:"cursor-pointer",children:[c.jsx(ja,{className:"w-4 h-4 mr-2 opacity-0"}),c.jsx("span",{className:ae("px-2 py-1 rounded text-xs font-medium",Tu(d.value)),children:d.label})]},d.value))})]})})]}),t.length===0&&c.jsx("p",{className:"text-sm text-muted-foreground",children:"Seleziona almeno un tipo di cucina"})]})},g3=()=>{const[t,e]=m.useState(""),[n,r]=m.useState([]),[s,i]=m.useState("all"),[o,a]=m.useState("all"),[u,d]=m.useState("grid"),[h,p]=m.useState(null),[g,w]=m.useState(!1),[b,x]=m.useState([]),[E,_]=m.useState(!0),[y,C]=m.useState(null),{getAllRestaurants:k,deleteRestaurant:O}=qs();m.useEffect(()=>{(async()=>{try{_(!0),C(null);const j=await k();x(j)}catch(j){const N=Xt(j);C(N),Vt("Caricamento ristoranti in Home",j)}finally{_(!1)}})()},[]);const D=m.useMemo(()=>b.filter(P=>{var z;const j=P.name.toLowerCase().includes(t.toLowerCase())||((z=P.description)==null?void 0:z.toLowerCase().includes(t.toLowerCase())),N=xL(P.cuisines),L=n.length===0||n.some(V=>N.includes(V)),G=s==="all"||P.priceRange===s,Q=o==="all"||parseFloat(P.rating)>=parseFloat(o);return j&&L&&G&&Q}),[b,t,n,s,o]),S=P=>{p(P),w(!0)},T=()=>{e(""),r([]),i("all"),a("all")},I=[{value:"",label:" - Budget"},{value:"",label:" - Moderate"},{value:"",label:" - Expensive"},{value:"",label:" - Fine Dining"}],A=[{value:"4.5",label:"4.5+ Stars"},{value:"4.0",label:"4.0+ Stars"},{value:"3.5",label:"3.5+ Stars"},{value:"3.0",label:"3.0+ Stars"}];return E?c.jsx("div",{className:"min-h-screen flex items-center justify-center",children:c.jsxs("div",{className:"text-center",children:[c.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-[hsl(var(--terracotta))] mx-auto mb-4"}),c.jsx("p",{className:"text-[hsl(var(--dark-slate))]/70",children:"Caricamento ristoranti..."})]})}):y?c.jsx("div",{className:"min-h-screen flex items-center justify-center",children:c.jsx("div",{className:"text-center max-w-md mx-auto px-4",children:c.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-8",children:[c.jsx("div",{className:"text-red-500 mb-4",children:c.jsx(_c,{className:"w-16 h-16 mx-auto mb-4 opacity-50"})}),c.jsx("h3",{className:"text-2xl font-display font-semibold text-[hsl(var(--dark-slate))] mb-2",children:"Errore nel caricamento"}),c.jsx("p",{className:"text-[hsl(var(--dark-slate))]/70 mb-6",children:y}),c.jsx(de,{onClick:()=>window.location.reload(),className:"bg-[hsl(var(--terracotta))] text-white hover:bg-[hsl(var(--saddle))]",children:"Riprova"})]})})}):c.jsx("main",{className:"min-h-screen",children:c.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:[c.jsxs("div",{className:"text-center mb-8",children:[c.jsx("h2",{className:"text-4xl md:text-5xl font-display font-bold text-[hsl(var(--dark-slate))] mb-4",children:"Lu mare, lu sole, lu spinning"}),c.jsx("p",{className:"text-lg text-[hsl(var(--dark-slate))]/70 max-w-2xl mx-auto",children:"Esplora i ristoranti autentici nel cuore della Puglia, dalle trattorie tradizionali alle esperienze culinarie moderne."})]}),c.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6 mb-6",children:[c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{className:"relative",children:[c.jsx(_c,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-[hsl(var(--dark-slate))]/50 w-5 h-5"}),c.jsx(It,{type:"text",placeholder:"Search restaurants...",value:t,onChange:P=>e(P.target.value),className:"pl-10 py-3 border-gray-200 focus:ring-2 focus:ring-[hsl(var(--terracotta))] focus:border-transparent"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-[hsl(var(--dark-slate))] mb-2",children:"Tipi di Cucina"}),c.jsx(mb,{selectedCuisines:n,onCuisinesChange:r,placeholder:"Filtra per tipo di cucina..."})]}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-[hsl(var(--dark-slate))] mb-2",children:"Fascia di Prezzo"}),c.jsxs(qi,{value:s,onValueChange:i,children:[c.jsx(Vs,{className:"py-3 border-gray-200 focus:ring-2 focus:ring-[hsl(var(--terracotta))]",children:c.jsx(Ki,{placeholder:"Tutte le fasce"})}),c.jsxs(Ms,{children:[c.jsx(Xn,{value:"all",children:"Tutte le fasce"}),I.map(P=>c.jsx(Xn,{value:P.value,children:P.label},P.value))]})]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-[hsl(var(--dark-slate))] mb-2",children:"Rating Minimo"}),c.jsxs(qi,{value:o,onValueChange:a,children:[c.jsx(Vs,{className:"py-3 border-gray-200 focus:ring-2 focus:ring-[hsl(var(--terracotta))]",children:c.jsx(Ki,{placeholder:"Tutti i rating"})}),c.jsxs(Ms,{children:[c.jsx(Xn,{value:"all",children:"Tutti i rating"}),A.map(P=>c.jsx(Xn,{value:P.value,children:P.label},P.value))]})]})]})]})]}),c.jsxs("div",{className:"flex justify-between items-center mt-6 pt-4 border-t",children:[c.jsxs("div",{className:"flex space-x-2",children:[c.jsxs(de,{variant:u==="grid"?"default":"outline",onClick:()=>d("grid"),className:u==="grid"?"bg-[hsl(var(--terracotta))] text-white":"",children:[c.jsx(oP,{className:"w-4 h-4 mr-2"}),"Grid"]}),c.jsxs(de,{variant:u==="map"?"default":"outline",onClick:()=>d("map"),className:u==="map"?"bg-[hsl(var(--terracotta))] text-white":"",children:[c.jsx(lP,{className:"w-4 h-4 mr-2"}),"Map"]})]}),c.jsxs("div",{className:"flex items-center space-x-4",children:[c.jsxs("span",{className:"text-[hsl(var(--dark-slate))]/70",children:[D.length," ristorante",D.length!==1?"i":""," trovato",D.length!==1?"i":""]}),(t||n.length>0||s!=="all"||o!=="all")&&c.jsx(de,{variant:"outline",onClick:T,className:"text-[hsl(var(--terracotta))] border-[hsl(var(--terracotta))] hover:bg-[hsl(var(--terracotta))] hover:text-white",children:"Cancella Filtri"})]})]})]}),u==="map"&&c.jsx("div",{className:"bg-white rounded-xl shadow-lg mb-6 overflow-hidden",children:c.jsx(IL,{restaurants:D,onRestaurantClick:S})}),u==="grid"&&c.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:D.map(P=>c.jsx(zC,{restaurant:P,onViewDetails:S},P.id))}),c.jsx(Mg,{restaurant:h,isOpen:g,onClose:()=>{w(!1),p(null)},allowDelete:!0,onDelete:async P=>{try{await O(P),x(j=>j.filter(N=>N.id!==P))}catch{alert("Errore nell'eliminazione del ristorante")}}}),D.length===0&&c.jsx("div",{className:"text-center py-12",children:c.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-12",children:[c.jsx(_c,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),c.jsx("h3",{className:"text-2xl font-display font-semibold text-[hsl(var(--dark-slate))] mb-2",children:"Nessun ristorante trovato"}),c.jsx("p",{className:"text-[hsl(var(--dark-slate))]/70 mb-6",children:"Prova a modificare i criteri di ricerca o i filtri"}),c.jsx(de,{onClick:T,className:"bg-[hsl(var(--terracotta))] text-white hover:bg-[hsl(var(--saddle))]",children:"Cancella Filtri"})]})}),(t||n.length>0||s!=="all"||o!=="all")&&c.jsxs("div",{className:"mt-6 bg-blue-50 border border-blue-200 rounded-lg p-4",children:[c.jsx("h4",{className:"font-medium text-blue-800 mb-2",children:"Filtri Attivi:"}),c.jsxs("div",{className:"flex flex-wrap gap-2 text-sm",children:[t&&c.jsxs("span",{className:"bg-blue-100 text-blue-800 px-2 py-1 rounded",children:['Ricerca: "',t,'"']}),n.length>0&&c.jsxs("span",{className:"bg-blue-100 text-blue-800 px-2 py-1 rounded",children:["Cucine: ",n.join(", ")]}),s!=="all"&&c.jsxs("span",{className:"bg-blue-100 text-blue-800 px-2 py-1 rounded",children:["Prezzo: ",s]}),o!=="all"&&c.jsxs("span",{className:"bg-blue-100 text-blue-800 px-2 py-1 rounded",children:["Rating: ",o,"+ stelle"]})]})]})]})})},v3=()=>{const[t,e]=m.useState(null),[n,r]=m.useState(!1),[s,i]=m.useState(null),o=m.useCallback(()=>{i(null)},[]),a=m.useCallback(()=>{if(!navigator.geolocation){i({code:0,message:"Geolocation is not supported by this browser"});return}r(!0),i(null);const u={enableHighAccuracy:!0,timeout:1e4,maximumAge:3e5};navigator.geolocation.getCurrentPosition(d=>{e({latitude:d.coords.latitude,longitude:d.coords.longitude}),r(!1)},d=>{let h;switch(d.code){case d.PERMISSION_DENIED:h="Location access denied by user";break;case d.POSITION_UNAVAILABLE:h="Location information is unavailable";break;case d.TIMEOUT:h="Location request timed out";break;default:h="An unknown error occurred while retrieving location";break}i({code:d.code,message:h}),r(!1)},u)},[]);return{location:t,isLoading:n,error:s,getCurrentLocation:a,clearError:o}},y3=()=>{const[t,e]=m.useState([]),[n,r]=m.useState(!0),[s,i]=m.useState(null),[o,a]=m.useState("pugliese"),[u,d]=m.useState(""),[h,p]=m.useState(null),[g,w]=m.useState(!1),{location:b,isLoading:x,error:E,getCurrentLocation:_}=v3(),{favorites:y}=Ed(),{getAllRestaurants:C,deleteRestaurant:k}=qs(),O=(L,G,Q,z)=>{const $=(Q-L)*Math.PI/180,Z=(z-G)*Math.PI/180,se=Math.sin($/2)*Math.sin($/2)+Math.cos(L*Math.PI/180)*Math.cos(Q*Math.PI/180)*Math.sin(Z/2)*Math.sin(Z/2);return 6371*(2*Math.atan2(Math.sqrt(se),Math.sqrt(1-se)))};m.useEffect(()=>{(async()=>{try{r(!0),i(null);const G=await C();e(G)}catch(G){const Q=Xt(G);i(Q),Vt("Caricamento ristoranti in Recommended",G)}finally{r(!1)}})()},[]);const S=t.length?t.map(G=>{let Q=0;G.cuisines.find($=>$===o)&&(Q+=35),G.priceRange===u&&(Q+=20);const z=parseFloat(G.rating)/5*25;Q+=z,y.includes(G.id)&&(Q+=10);let V=null;if(b&&G.latitude&&G.longitude){V=O(b.latitude,b.longitude,parseFloat(G.latitude),parseFloat(G.longitude));const $=Math.max(0,10-V/2);Q+=$}return{...G,score:Q,distance:V}}).sort((G,Q)=>Q.score-G.score):[],T=S[0],I=S.slice(1,4),A=L=>L?L<1?`${Math.round(L*1e3)}m`:`${L.toFixed(1)}km`:null,P=L=>L?`${Math.round(L/5*60)} min a piedi`:null,j=[{value:"pugliese",label:"Pugliese"},{value:"italiana",label:"Italiana"},{value:"mediterranea",label:"Mediterranea"},{value:"pesce",label:"Pesce"},{value:"barbecue",label:"Barbecue"},{value:"steakhouse",label:"Steakhouse"}],N=[{value:"",label:" - Economico"},{value:"",label:" - Moderato"},{value:"",label:" - Costoso"},{value:"",label:" - Fine Dining"}];return n?c.jsx("main",{className:"min-h-screen",children:c.jsxs("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[c.jsxs("div",{className:"text-center mb-8",children:[c.jsx("h2",{className:"text-3xl font-display font-bold text-[hsl(var(--dark-slate))] mb-4",children:"Consigliati per te"}),c.jsx("p",{className:"text-lg text-[hsl(var(--dark-slate))]/70",children:"Basato sulla tua posizione e preferenze"})]}),c.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:c.jsxs("div",{className:"text-center",children:[c.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-[hsl(var(--terracotta))] mx-auto mb-4"}),c.jsx("p",{className:"text-[hsl(var(--dark-slate))]/70",children:"Caricamento dei consigli personalizzati..."})]})})]})}):s?c.jsx("main",{className:"min-h-screen",children:c.jsxs("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[c.jsx("div",{className:"text-center mb-8",children:c.jsx("h2",{className:"text-3xl font-display font-bold text-[hsl(var(--dark-slate))] mb-4",children:"Consigliati per te"})}),c.jsx(rt,{children:c.jsxs(st,{className:"p-12 text-center",children:[c.jsx("div",{className:"text-red-500 mb-4",children:c.jsx(tu,{className:"w-16 h-16 mx-auto mb-4 opacity-50"})}),c.jsx("h3",{className:"text-2xl font-display font-semibold text-[hsl(var(--dark-slate))] mb-2",children:"Errore nel caricamento"}),c.jsx("p",{className:"text-[hsl(var(--dark-slate))]/70 mb-6",children:s}),c.jsx(de,{onClick:()=>window.location.reload(),className:"bg-[hsl(var(--terracotta))] text-white hover:bg-[hsl(var(--saddle))]",children:"Riprova"})]})})]})}):c.jsxs("main",{className:"min-h-screen",children:[c.jsxs("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[c.jsxs("div",{className:"text-center mb-8",children:[c.jsx("h2",{className:"text-3xl font-display font-bold text-[hsl(var(--dark-slate))] mb-4",children:"Consigliati per te"}),c.jsx("p",{className:"text-lg text-[hsl(var(--dark-slate))]/70",children:"Basato sulla tua posizione e preferenze"})]}),c.jsx(rt,{className:"mb-6",children:c.jsx(st,{className:"pt-6",children:c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{className:"flex items-center",children:[c.jsx(Bi,{className:"w-6 h-6 text-[hsl(var(--terracotta))] mr-3"}),c.jsxs("div",{children:[c.jsx("h3",{className:"font-semibold text-[hsl(var(--dark-slate))]",children:"La tua posizione"}),c.jsx("p",{className:"text-[hsl(var(--dark-slate))]/70",children:x?"Rilevamento posizione...":b?`Lat: ${b.latitude.toFixed(4)}, Lng: ${b.longitude.toFixed(4)}`:E?"Impossibile rilevare la posizione":"Clicca per rilevare la tua posizione"})]})]}),c.jsxs(de,{onClick:_,disabled:x,className:"bg-[hsl(var(--terracotta))] text-white hover:bg-[hsl(var(--saddle))]",children:[c.jsx(hP,{className:"w-4 h-4 mr-2"}),x?"Rilevamento...":"Rileva posizione"]})]})})}),c.jsxs(rt,{className:"mb-6",children:[c.jsx(Va,{children:c.jsx(Ma,{className:"text-xl font-display font-semibold text-[hsl(var(--dark-slate))]",children:"Le tue preferenze"})}),c.jsxs(st,{children:[c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-[hsl(var(--dark-slate))] mb-2",children:"Cucina preferita"}),c.jsxs(qi,{value:o,onValueChange:a,children:[c.jsx(Vs,{children:c.jsx(Ki,{})}),c.jsx(Ms,{children:j.map(L=>c.jsx(Xn,{value:L.value,children:L.label},L.value))})]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-[hsl(var(--dark-slate))] mb-2",children:"Fascia di prezzo"}),c.jsxs(qi,{value:u,onValueChange:d,children:[c.jsx(Vs,{children:c.jsx(Ki,{})}),c.jsx(Ms,{children:N.map(L=>c.jsx(Xn,{value:L.value,children:L.label},L.value))})]})]})]}),c.jsx("div",{className:"mt-4 p-3 bg-[hsl(var(--terracotta))]/5 rounded-lg",children:c.jsxs("div",{className:"flex items-center text-sm",children:[c.jsx(tu,{className:"w-4 h-4 text-[hsl(var(--terracotta))] mr-2"}),c.jsxs("span",{className:"text-[hsl(var(--dark-slate))]/70",children:["Consigli basati su: cucina ",o,", fascia ",u,b&&", distanza dalla tua posizione",y.length>0&&`, ${y.length} preferiti`]})]})})]})]}),c.jsxs("div",{className:"space-y-6",children:[T&&c.jsxs("div",{className:"bg-gradient-to-r from-[hsl(var(--terracotta))] to-[hsl(var(--saddle))] rounded-xl text-white p-6 relative overflow-hidden",children:[c.jsx("div",{className:"absolute top-0 right-0 bg-[hsl(var(--goldenrod))] text-[hsl(var(--dark-slate))] px-3 py-1 rounded-bl-lg font-bold text-sm",children:"#1 SCELTA"}),c.jsxs("div",{className:"flex flex-col md:flex-row items-center",children:[c.jsx("img",{src:T.imageUrl||"https://images.unsplash.com/photo-1414235077428-338989a2e8c0?ixlib=rb-4.0.3&auto=format&fit=crop&w=200&h=150",alt:T.name,className:"w-full md:w-48 h-32 object-cover rounded-lg mb-4 md:mb-0 md:mr-6"}),c.jsxs("div",{className:"flex-1 text-center md:text-left",children:[c.jsx("h3",{className:"text-2xl font-display font-bold mb-2",children:T.name}),c.jsxs("p",{className:"mb-3 opacity-90",children:["Perfetta corrispondenza per gli amanti della cucina ",o,T.distance&&`  Solo ${A(T.distance)} di distanza`,y.includes(T.id)&&"   Nei tuoi preferiti"]}),c.jsxs("div",{className:"flex items-center justify-center md:justify-start space-x-4 mb-4",children:[c.jsxs("div",{className:"flex items-center",children:[c.jsx(an,{className:"w-4 h-4 text-[hsl(var(--goldenrod))] mr-1 fill-current"}),c.jsx("span",{children:T.rating})]}),c.jsx("span",{children:T.priceRange}),T.distance&&c.jsxs("span",{className:"flex items-center",children:[c.jsx(rl,{className:"w-4 h-4 mr-1"}),P(T.distance)]})]}),c.jsx(de,{onClick:()=>{p(T),w(!0)},className:"bg-white text-[hsl(var(--terracotta))] hover:bg-[hsl(var(--warm-beige))] font-semibold",children:"Visualizza ristorante"})]})]})]}),c.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:I.map((L,G)=>c.jsx(rt,{className:"bg-white shadow-lg",children:c.jsxs(st,{className:"p-6",children:[c.jsxs("div",{className:"flex justify-between items-start mb-4",children:[c.jsxs("span",{className:"bg-[hsl(var(--terracotta))]/10 text-[hsl(var(--terracotta))] px-2 py-1 rounded-full text-sm font-medium",children:["#",G+2]}),c.jsxs("div",{className:"text-right text-sm text-[hsl(var(--dark-slate))]/60",children:[L.distance&&c.jsxs("div",{children:[A(L.distance)," di distanza"]}),y.includes(L.id)&&c.jsx("div",{className:"text-[hsl(var(--tomato))]",children:" Preferito"})]})]}),c.jsx("img",{src:L.imageUrl||"https://images.unsplash.com/photo-1555396273-367ea4eb4db5?ixlib=rb-4.0.3&auto=format&fit=crop&w=400&h=200",alt:L.name,className:"w-full h-32 object-cover rounded-lg mb-4"}),c.jsx("h4",{className:"text-xl font-display font-semibold text-[hsl(var(--dark-slate))] mb-2",children:L.name}),c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{className:"flex items-center space-x-2",children:[c.jsxs("div",{className:"flex items-center text-[hsl(var(--goldenrod))]",children:[c.jsx(an,{className:"w-4 h-4 mr-1 fill-current"}),c.jsx("span",{children:L.rating})]}),c.jsx("span",{className:"text-[hsl(var(--terracotta))]",children:L.priceRange})]}),c.jsx(de,{variant:"outline",onClick:()=>{p(L),w(!0)},className:"text-[hsl(var(--terracotta))] hover:text-[hsl(var(--saddle))]",children:"Dettagli"})]}),c.jsx("div",{className:"mt-3 text-xs text-[hsl(var(--dark-slate))]/50",children:L.cuisines.find(Q=>Q===o)&&L.priceRange===u?" Corrisponde perfettamente alle tue preferenze":L.cuisines.find(Q=>Q===o)?" Cucina preferita":L.priceRange===u?" Fascia di prezzo preferita":" Alto rating"})]})},L.id))})]}),S.length===0&&c.jsx("div",{className:"text-center py-12",children:c.jsx(rt,{children:c.jsxs(st,{className:"p-12",children:[c.jsx(an,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),c.jsx("h3",{className:"text-2xl font-display font-semibold text-[hsl(var(--dark-slate))] mb-2",children:"Nessun consiglio disponibile"}),c.jsx("p",{className:"text-[hsl(var(--dark-slate))]/70",children:"Prova ad aggiustare le tue preferenze o controlla pi tardi"})]})})})]}),c.jsx(Mg,{restaurant:h,isOpen:g,onClose:()=>{w(!1),p(null)},allowDelete:!0,onDelete:async L=>{try{await k(L),e(G=>G.filter(Q=>Q.id!==L))}catch{alert("Errore nell'eliminazione del ristorante")}}})]})},x3=({events:t=[],onDateClick:e,onEventClick:n,onDayClick:r})=>{const[s,i]=m.useState(new Date),o=["January","February","March","April","May","June","July","August","September","October","November","December"],a=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],u=new Date(s.getFullYear(),s.getMonth(),1),d=new Date(s.getFullYear(),s.getMonth()+1,0),h=u.getDay(),p=d.getDate(),g=()=>{i(new Date(s.getFullYear(),s.getMonth()-1))},w=()=>{i(new Date(s.getFullYear(),s.getMonth()+1))},b=_=>{const y=new Date(s.getFullYear(),s.getMonth(),_);return t.filter(C=>C.date.toDateString()===y.toDateString())},x=_=>{const y=new Date(s.getFullYear(),s.getMonth(),_);e==null||e(y),r==null||r(y)},E=()=>{const _=[];for(let k=0;k<h;k++){const O=new Date(s.getFullYear(),s.getMonth(),-(h-1-k));_.push(c.jsx("div",{className:"h-24 p-2 text-gray-400 cursor-pointer hover:bg-gray-50",onClick:()=>{r==null||r(O)},children:c.jsx("span",{children:O.getDate()})},`prev-${k}`))}for(let k=1;k<=p;k++){const O=b(k),D=new Date().toDateString()===new Date(s.getFullYear(),s.getMonth(),k).toDateString();_.push(c.jsxs("div",{className:`h-24 p-2 hover:bg-gray-50 cursor-pointer relative border-r border-b border-gray-200 transition-colors ${D?"bg-[hsl(var(--terracotta))]/10 font-semibold":""}`,onClick:()=>x(k),children:[c.jsx("span",{className:`text-[hsl(var(--dark-slate))] ${D?"text-[hsl(var(--terracotta))]":""}`,children:k}),O.length>0&&c.jsxs("div",{className:"mt-1 space-y-1",children:[O.slice(0,2).map((S,T)=>c.jsx("div",{className:`text-xs px-1 py-0.5 rounded truncate cursor-pointer ${S.color} hover:opacity-80`,onClick:I=>{I.stopPropagation(),n==null||n(S)},children:S.title},S.id)),O.length>2&&c.jsxs("div",{className:"text-xs text-gray-500 cursor-pointer hover:text-[hsl(var(--terracotta))]",children:["+",O.length-2," more"]})]}),c.jsx("div",{className:"absolute bottom-1 right-1 opacity-0 group-hover:opacity-100 transition-opacity",children:c.jsx("div",{className:"w-2 h-2 rounded-full bg-[hsl(var(--terracotta))]/30"})})]},k))}const C=Math.ceil((h+p)/7)*7-(h+p);for(let k=1;k<=C;k++){const O=new Date(s.getFullYear(),s.getMonth()+1,k);_.push(c.jsx("div",{className:"h-24 p-2 text-gray-400 cursor-pointer hover:bg-gray-50",onClick:()=>{r==null||r(O)},children:c.jsx("span",{children:k})},`next-${k}`))}return _};return c.jsxs("div",{className:"bg-white rounded-xl shadow-lg overflow-hidden group",children:[c.jsx("div",{className:"bg-[hsl(var(--terracotta))] text-white p-4",children:c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsx(de,{variant:"ghost",size:"icon",onClick:g,className:"text-white hover:bg-white/20 transition-colors",children:c.jsx(JN,{className:"w-5 h-5"})}),c.jsxs("h3",{className:"text-xl font-display font-semibold",children:[o[s.getMonth()]," ",s.getFullYear()]}),c.jsx(de,{variant:"ghost",size:"icon",onClick:w,className:"text-white hover:bg-white/20 transition-colors",children:c.jsx(ZN,{className:"w-5 h-5"})})]})}),c.jsx("div",{className:"grid grid-cols-7 bg-[hsl(var(--terracotta))] text-white",children:a.map(_=>c.jsx("div",{className:"p-4 text-center font-medium border-r border-white/20 last:border-r-0",children:_},_))}),c.jsx("div",{className:"grid grid-cols-7",children:E()}),c.jsx("div",{className:"bg-gray-50 px-4 py-2 text-center",children:c.jsx("p",{className:"text-xs text-gray-600",children:"Clicca su un giorno per vedere i dettagli delle prenotazioni"})})]})},w3=()=>{const[t,e]=m.useState([]),[n,r]=m.useState(!0),[s,i]=m.useState(null),[o,a]=m.useState([]),[u,d]=m.useState(!0),[h,p]=m.useState(null),[g,w]=m.useState(!1),[b,x]=m.useState(null),[E,_]=m.useState(null),[y,C]=m.useState(!1),[k,O]=m.useState(null),[D,S]=m.useState({restaurantId:"",date:"",time:"",notes:""}),{toast:T}=$u(),{getAllRestaurants:I,getAllBookings:A,createBooking:P,deleteBooking:j}=qs();m.useEffect(()=>{(async()=>{try{r(!0),i(null);const B=await I();e(B)}catch(B){const ee=Xt(B);i(ee),Vt("Caricamento ristoranti in Calendar",B)}finally{r(!1)}})()},[]),m.useEffect(()=>{(async()=>{try{d(!0),p(null);const B=await A();a(B)}catch(B){const ee=Xt(B);p(ee),Vt("Caricamento prenotazioni in Calendar",B)}finally{d(!1)}})()},[]);const N=()=>{S({restaurantId:"",date:"",time:"",notes:""}),x(null)},L=async()=>{try{const H=await A();a(H)}catch(H){Vt("Ricaricamento prenotazioni",H)}},G=H=>{_(H),C(!0)},Q=H=>o.filter(B=>new Date(B.date).toDateString()===H.toDateString()).sort((B,ee)=>B.time.localeCompare(ee.time)),z=async H=>{if(H.preventDefault(),!D.restaurantId||!D.date||!D.time){T({title:"Informazioni mancanti",description:"Compila tutti i campi obbligatori.",variant:"destructive"});return}try{await P({restaurantId:parseInt(D.restaurantId),date:new Date(D.date+"T00:00:00"),time:D.time,notes:D.notes}),w(!1),N(),await L(),T({title:"Prenotazione creata",description:"La tua prenotazione al ristorante  stata creata con successo."})}catch(B){const ee=Xt(B);Vt("Creazione prenotazione",B),T({title:"Errore",description:ee,variant:"destructive"})}},V=async H=>{O(H);try{await j(H),await L(),T({title:"Prenotazione eliminata",description:"La prenotazione  stata eliminata con successo.",variant:"default"})}catch(B){const ee=Xt(B);Vt("Eliminazione prenotazione",B),T({title:"Errore",description:ee,variant:"destructive"})}finally{O(null)}},$=o.map(H=>{const B=t.find(ee=>ee.id===H.restaurantId);return{id:H.id,title:`${(B==null?void 0:B.name)||"Ristorante"} ${H.time}`,date:new Date(H.date),color:"bg-[hsl(var(--terracotta))] text-white",onClick:()=>G(new Date(H.date))}}),Z=o.filter(H=>new Date(H.date)>=new Date).sort((H,B)=>new Date(H.date).getTime()-new Date(B.date).getTime()).slice(0,5),se=E?Q(E):[],U=H=>H.toLocaleDateString("it-IT",{weekday:"long",year:"numeric",month:"long",day:"numeric"}),J=()=>{if(E){const H=E.toISOString().split("T")[0];S(B=>({...B,date:H}))}C(!1),w(!0)};return u||n?c.jsx("main",{className:"min-h-screen",children:c.jsxs("div",{className:"max-w-6xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[c.jsxs("div",{className:"text-center mb-8",children:[c.jsx("h2",{className:"text-3xl font-display font-bold text-[hsl(var(--dark-slate))] mb-4",children:"Calendario Ristoranti"}),c.jsx("p",{className:"text-lg text-[hsl(var(--dark-slate))]/70",children:"Pianifica le tue avventure culinarie"})]}),c.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:c.jsxs("div",{className:"text-center",children:[c.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-[hsl(var(--terracotta))] mx-auto mb-4"}),c.jsx("p",{className:"text-[hsl(var(--dark-slate))]/70",children:"Caricamento calendario e prenotazioni..."})]})})]})}):h||s?c.jsx("main",{className:"min-h-screen",children:c.jsxs("div",{className:"max-w-6xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[c.jsx("div",{className:"text-center mb-8",children:c.jsx("h2",{className:"text-3xl font-display font-bold text-[hsl(var(--dark-slate))] mb-4",children:"Calendario Ristoranti"})}),c.jsx(rt,{children:c.jsxs(st,{className:"p-12 text-center",children:[c.jsx("div",{className:"text-red-500 mb-4",children:c.jsx(An,{className:"w-16 h-16 mx-auto mb-4 opacity-50"})}),c.jsx("h3",{className:"text-2xl font-display font-semibold text-[hsl(var(--dark-slate))] mb-2",children:"Errore nel caricamento"}),c.jsx("p",{className:"text-[hsl(var(--dark-slate))]/70 mb-6",children:h||s}),c.jsx(de,{onClick:()=>window.location.reload(),className:"bg-[hsl(var(--terracotta))] text-white hover:bg-[hsl(var(--saddle))]",children:"Riprova"})]})})]})}):c.jsx("main",{className:"min-h-screen",children:c.jsxs("div",{className:"max-w-6xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[c.jsxs("div",{className:"text-center mb-8",children:[c.jsx("h2",{className:"text-3xl font-display font-bold text-[hsl(var(--dark-slate))] mb-4",children:"Calendario Ristoranti"}),c.jsx("p",{className:"text-lg text-[hsl(var(--dark-slate))]/70",children:"Pianifica le tue avventure culinarie"})]}),c.jsx(rt,{className:"mb-6",children:c.jsx(st,{className:"pt-6",children:c.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-center",children:[c.jsxs("div",{className:"flex items-center space-x-4 mb-4 md:mb-0",children:[c.jsx(An,{className:"w-6 h-6 text-[hsl(var(--terracotta))]"}),c.jsx("h3",{className:"text-xl font-display font-semibold text-[hsl(var(--dark-slate))]",children:"Le tue prenotazioni"})]}),c.jsxs(Su,{open:g,onOpenChange:w,children:[c.jsx(EL,{asChild:!0,children:c.jsxs(de,{className:"bg-[hsl(var(--terracotta))] text-white hover:bg-[hsl(var(--saddle))]",children:[c.jsx(Ss,{className:"w-4 h-4 mr-2"}),"Aggiungi prenotazione"]})}),c.jsxs(Ka,{children:[c.jsx(Ga,{children:c.jsx(Qa,{children:"Nuova prenotazione"})}),c.jsxs("form",{onSubmit:z,className:"space-y-4",children:[c.jsxs("div",{children:[c.jsx(Qe,{htmlFor:"restaurant",children:"Ristorante *"}),c.jsxs(qi,{value:D.restaurantId,onValueChange:H=>S(B=>({...B,restaurantId:H})),required:!0,children:[c.jsx(Vs,{children:c.jsx(Ki,{placeholder:"Seleziona un ristorante"})}),c.jsx(Ms,{children:t.map(H=>c.jsxs(Xn,{value:H.id.toString(),children:[H.name," - ",H.location]},H.id))})]})]}),c.jsxs("div",{children:[c.jsx(Qe,{htmlFor:"date",children:"Data *"}),c.jsx(It,{id:"date",type:"date",value:D.date,onChange:H=>S(B=>({...B,date:H.target.value})),min:new Date().toISOString().split("T")[0],required:!0})]}),c.jsxs("div",{children:[c.jsx(Qe,{htmlFor:"time",children:"Orario *"}),c.jsx(It,{id:"time",type:"time",value:D.time,onChange:H=>S(B=>({...B,time:H.target.value})),required:!0})]}),c.jsxs("div",{children:[c.jsx(Qe,{htmlFor:"notes",children:"Note"}),c.jsx(Td,{id:"notes",placeholder:"Richieste speciali, numero di ospiti, ecc.",value:D.notes,onChange:H=>S(B=>({...B,notes:H.target.value}))})]}),c.jsxs("div",{className:"flex justify-end space-x-2",children:[c.jsx(de,{type:"button",variant:"outline",onClick:()=>{w(!1),N()},children:"Annulla"}),c.jsx(de,{type:"submit",className:"bg-[hsl(var(--terracotta))] text-white hover:bg-[hsl(var(--saddle))]",children:"Crea prenotazione"})]})]})]})]})]})})}),c.jsx("div",{className:"mb-8",children:c.jsx(x3,{events:$,onDayClick:G})}),c.jsx(Su,{open:y,onOpenChange:C,children:c.jsxs(Ka,{className:"max-w-2xl max-h-[80vh] overflow-y-auto",children:[c.jsx(Ga,{children:c.jsxs("div",{className:"flex justify-between items-start",children:[c.jsxs("div",{children:[c.jsx(Qa,{className:"text-2xl font-display font-bold text-[hsl(var(--dark-slate))] mb-2",children:E?U(E):""}),c.jsxs("p",{className:"text-[hsl(var(--dark-slate))]/60",children:[se.length," prenotazion",se.length!==1?"i":"e"," in programma"]})]}),c.jsx(de,{variant:"ghost",size:"icon",onClick:()=>C(!1),className:"text-gray-400 hover:text-gray-600",children:c.jsx(sl,{className:"w-5 h-5"})})]})}),c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"flex justify-between items-center pb-4 border-b",children:[c.jsxs("div",{className:"flex items-center text-[hsl(var(--terracotta))]",children:[c.jsx(An,{className:"w-5 h-5 mr-2"}),c.jsx("span",{className:"font-medium",children:"Prenotazioni del giorno"})]}),c.jsxs(de,{onClick:J,size:"sm",className:"bg-[hsl(var(--terracotta))] text-white hover:bg-[hsl(var(--saddle))]",children:[c.jsx(Ss,{className:"w-4 h-4 mr-2"}),"Nuova prenotazione"]})]}),se.length===0?c.jsxs("div",{className:"text-center py-12",children:[c.jsx("div",{className:"bg-gray-50 rounded-full w-16 h-16 flex items-center justify-center mx-auto mb-4",children:c.jsx(An,{className:"w-8 h-8 text-gray-300"})}),c.jsx("h3",{className:"text-lg font-semibold text-[hsl(var(--dark-slate))] mb-2",children:"Nessuna prenotazione"}),c.jsx("p",{className:"text-[hsl(var(--dark-slate))]/60 mb-6",children:"Non hai ancora prenotazioni per questo giorno."}),c.jsxs(de,{onClick:J,className:"bg-[hsl(var(--terracotta))] text-white hover:bg-[hsl(var(--saddle))]",children:[c.jsx(Ss,{className:"w-4 h-4 mr-2"}),"Aggiungi prenotazione"]})]}):c.jsx("div",{className:"space-y-4",children:se.map((H,B)=>{const ee=t.find(fe=>fe.id===H.restaurantId),Y=k===H.id;return c.jsxs("div",{className:"group relative bg-gradient-to-r from-white to-gray-50 border border-gray-200 rounded-xl p-6 hover:shadow-md transition-all duration-200",children:[c.jsx("div",{className:"absolute -top-2 left-6",children:c.jsxs("div",{className:"bg-[hsl(var(--terracotta))] text-white px-3 py-1 rounded-full text-sm font-medium flex items-center",children:[c.jsx(rl,{className:"w-3 h-3 mr-1"}),H.time]})}),c.jsx("div",{className:"pt-3",children:c.jsxs("div",{className:"flex justify-between items-start",children:[c.jsxs("div",{className:"flex-1",children:[c.jsx("h4",{className:"text-xl font-display font-semibold text-[hsl(var(--dark-slate))] mb-2",children:(ee==null?void 0:ee.name)||"Ristorante sconosciuto"}),c.jsxs("div",{className:"space-y-2",children:[c.jsxs("div",{className:"flex items-center text-[hsl(var(--dark-slate))]/70",children:[c.jsx(Bi,{className:"w-4 h-4 mr-2 text-[hsl(var(--terracotta))]"}),c.jsx("span",{className:"text-sm",children:ee==null?void 0:ee.location}),(ee==null?void 0:ee.priceRange)&&c.jsxs(c.Fragment,{children:[c.jsx("span",{className:"mx-2",children:""}),c.jsx("span",{className:"text-sm font-medium",children:ee.priceRange})]})]}),H.notes&&c.jsxs("div",{className:"flex items-start text-[hsl(var(--dark-slate))]/60",children:[c.jsx(fP,{className:"w-4 h-4 mr-2 mt-0.5 text-[hsl(var(--terracotta))] flex-shrink-0"}),c.jsx("span",{className:"text-sm italic",children:H.notes})]})]})]}),c.jsxs("div",{className:"flex space-x-2 opacity-0 group-hover:opacity-100 transition-opacity",children:[c.jsx(de,{variant:"outline",size:"icon",className:"text-[hsl(var(--terracotta))] hover:text-[hsl(var(--saddle))] hover:bg-[hsl(var(--terracotta))]/10",onClick:()=>{T({title:"Funzionalit in arrivo",description:"La modifica delle prenotazioni sar disponibile presto."})},children:c.jsx(dP,{className:"w-4 h-4"})}),c.jsx(de,{variant:"outline",size:"icon",className:"text-red-500 hover:text-red-700 hover:bg-red-50",disabled:Y,onClick:()=>{window.confirm(`Sei sicuro di voler eliminare la prenotazione da ${(ee==null?void 0:ee.name)||"questo ristorante"}?`)&&V(H.id)},children:Y?c.jsx("div",{className:"w-4 h-4 border-2 border-red-500 border-t-transparent rounded-full animate-spin"}):c.jsx(Am,{className:"w-4 h-4"})})]})]})}),c.jsx("div",{className:"absolute right-4 bottom-4 opacity-5",children:c.jsx(An,{className:"w-8 h-8"})})]},H.id)})}),se.length>0&&c.jsx("div",{className:"pt-4 border-t bg-gray-50 rounded-lg p-4",children:c.jsxs("div",{className:"flex items-center justify-between text-sm text-[hsl(var(--dark-slate))]/60",children:[c.jsx("span",{children:"Giornata culinaria completa!"}),c.jsxs("span",{children:[se.length," ristorante",se.length!==1?"i":""," da visitare"]})]})})]})]})}),c.jsxs(rt,{children:[c.jsx(Va,{children:c.jsx(Ma,{className:"text-2xl font-display font-semibold text-[hsl(var(--dark-slate))]",children:"Prossime prenotazioni"})}),c.jsx(st,{children:Z.length===0?c.jsxs("div",{className:"text-center py-8",children:[c.jsx(An,{className:"w-12 h-12 text-gray-300 mx-auto mb-4"}),c.jsx("h3",{className:"text-lg font-semibold text-[hsl(var(--dark-slate))] mb-2",children:"Nessuna prenotazione futura"}),c.jsx("p",{className:"text-[hsl(var(--dark-slate))]/70 mb-4",children:"Inizia a pianificare la tua prossima avventura culinaria!"}),c.jsx(de,{onClick:()=>w(!0),className:"bg-[hsl(var(--terracotta))] text-white hover:bg-[hsl(var(--saddle))]",children:"Aggiungi la tua prima prenotazione"})]}):c.jsx("div",{className:"space-y-4",children:Z.map(H=>{const B=t.find(Y=>Y.id===H.restaurantId),ee=new Date(H.date);return c.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg hover:bg-gray-50 cursor-pointer",onClick:()=>G(ee),children:[c.jsxs("div",{className:"flex items-center",children:[c.jsx("div",{className:"bg-[hsl(var(--terracotta))] text-white rounded-lg p-3 mr-4",children:c.jsx(An,{className:"w-5 h-5"})}),c.jsxs("div",{children:[c.jsx("h4",{className:"font-semibold text-[hsl(var(--dark-slate))]",children:(B==null?void 0:B.name)||"Ristorante sconosciuto"}),c.jsxs("p",{className:"text-[hsl(var(--dark-slate))]/70",children:[ee.toLocaleDateString("it-IT",{weekday:"long",year:"numeric",month:"long",day:"numeric"})," alle ",H.time]}),c.jsxs("p",{className:"text-[hsl(var(--dark-slate))]/60 text-sm",children:[B==null?void 0:B.location,"  ",B==null?void 0:B.priceRange]}),H.notes&&c.jsxs("p",{className:"text-[hsl(var(--dark-slate))]/60 text-sm mt-1",children:["Note: ",H.notes]})]})]}),c.jsx("div",{className:"text-[hsl(var(--dark-slate))]/40",children:c.jsx("span",{className:"text-sm",children:"Clicca per dettagli"})})]},H.id)})})})]})]})})},_3=()=>{const{favorites:t}=Ed(),[e,n]=m.useState(null),[r,s]=m.useState(!1),[i,o]=m.useState([]),[a,u]=m.useState(!0),[d,h]=m.useState(null),{getAllRestaurants:p,deleteRestaurant:g}=qs();m.useEffect(()=>{(async()=>{try{u(!0),h(null);const E=await p();o(E)}catch(E){const _=Xt(E);h(_),Vt("Caricamento ristoranti in Favorites",E)}finally{u(!1)}})()},[]);const w=i.filter(x=>t.includes(x.id)),b=x=>{n(x),s(!0)};return a?c.jsx("main",{className:"min-h-screen",children:c.jsxs("div",{className:"max-w-6xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[c.jsxs("div",{className:"text-center mb-8",children:[c.jsx("h2",{className:"text-3xl font-display font-bold text-[hsl(var(--dark-slate))] mb-4",children:"I tuoi ristoranti preferiti"}),c.jsx("p",{className:"text-lg text-[hsl(var(--dark-slate))]/70",children:"La tua lista curata di luoghi imperdibili"})]}),c.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:c.jsxs("div",{className:"text-center",children:[c.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-[hsl(var(--terracotta))] mx-auto mb-4"}),c.jsx("p",{className:"text-[hsl(var(--dark-slate))]/70",children:"Caricamento dei tuoi ristoranti preferiti..."})]})})]})}):d?c.jsx("main",{className:"min-h-screen",children:c.jsxs("div",{className:"max-w-6xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[c.jsx("div",{className:"text-center mb-8",children:c.jsx("h2",{className:"text-3xl font-display font-bold text-[hsl(var(--dark-slate))] mb-4",children:"I tuoi ristoranti preferiti"})}),c.jsx(rt,{children:c.jsxs(st,{className:"p-12 text-center",children:[c.jsx("div",{className:"text-red-500 mb-4",children:c.jsx(bi,{className:"w-16 h-16 mx-auto mb-4 opacity-50"})}),c.jsx("h3",{className:"text-2xl font-display font-semibold text-[hsl(var(--dark-slate))] mb-2",children:"Errore nel caricamento"}),c.jsx("p",{className:"text-[hsl(var(--dark-slate))]/70 mb-6",children:d}),c.jsx(de,{onClick:()=>window.location.reload(),className:"bg-[hsl(var(--terracotta))] text-white hover:bg-[hsl(var(--saddle))]",children:"Riprova"})]})})]})}):c.jsxs("main",{className:"min-h-screen",children:[c.jsxs("div",{className:"max-w-6xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[c.jsxs("div",{className:"text-center mb-8",children:[c.jsx("h2",{className:"text-3xl font-display font-bold text-[hsl(var(--dark-slate))] mb-4",children:"I tuoi ristoranti preferiti"}),c.jsx("p",{className:"text-lg text-[hsl(var(--dark-slate))]/70",children:"La tua lista curata di luoghi imperdibili"})]}),w.length===0?c.jsx("div",{className:"text-center py-12",children:c.jsx(rt,{children:c.jsxs(st,{className:"p-12",children:[c.jsx(bi,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),c.jsx("h3",{className:"text-2xl font-display font-semibold text-[hsl(var(--dark-slate))] mb-2",children:"Nessun preferito ancora"}),c.jsx("p",{className:"text-[hsl(var(--dark-slate))]/70 mb-6",children:"Inizia a esplorare i ristoranti e aggiungili ai tuoi preferiti!"}),c.jsx(ca,{href:"/",children:c.jsx(de,{className:"bg-[hsl(var(--terracotta))] text-white hover:bg-[hsl(var(--saddle))]",children:"Esplora ristoranti"})})]})})}):c.jsxs("div",{children:[c.jsx("div",{className:"mb-6",children:c.jsxs("p",{className:"text-[hsl(var(--dark-slate))]/70",children:[w.length," ristorante",w.length!==1?"s":""," preferit",w.length!==1?"i":"o"]})}),c.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:w.map(x=>c.jsx(zC,{restaurant:x,onViewDetails:b},x.id))}),c.jsx(rt,{className:"mt-8 bg-[hsl(var(--terracotta))]/5 border-[hsl(var(--terracotta))]/20",children:c.jsx(st,{className:"p-6",children:c.jsxs("div",{className:"flex items-start",children:[c.jsx(bi,{className:"w-6 h-6 text-[hsl(var(--terracotta))] mr-3 mt-1 flex-shrink-0"}),c.jsxs("div",{children:[c.jsx("h3",{className:"font-semibold text-[hsl(var(--dark-slate))] mb-2",children:"Consigli per i tuoi preferiti"}),c.jsxs("ul",{className:"text-[hsl(var(--dark-slate))]/70 space-y-1 text-sm",children:[c.jsx("li",{children:" Clicca sull'icona del cuore su qualsiasi scheda ristorante per aggiungerlo ai preferiti"}),c.jsx("li",{children:" I tuoi preferiti vengono salvati localmente e rimarranno tra le visite"}),c.jsx("li",{children:" Usa il calendario per pianificare visite ai tuoi ristoranti preferiti"}),c.jsx("li",{children:" Condividi i tuoi ristoranti preferiti con amici e famiglia"}),c.jsx("li",{children:" Controlla regolarmente i consigli personalizzati basati sui tuoi preferiti"})]})]})]})})}),w.length>0&&c.jsx(rt,{className:"mt-6 bg-[hsl(var(--forest-green))]/5 border-[hsl(var(--forest-green))]/20",children:c.jsxs(st,{className:"p-6",children:[c.jsx("h3",{className:"font-semibold text-[hsl(var(--dark-slate))] mb-4",children:"Le tue preferenze culinarie"}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[c.jsxs("div",{children:[c.jsx("h4",{className:"font-medium text-[hsl(var(--dark-slate))] mb-2",children:"Cucine preferite"}),c.jsx("div",{className:"space-y-1",children:(()=>{const E=w.flatMap(_=>_.cuisines||[]).reduce((_,y)=>(_[y]=(_[y]||0)+1,_),{});return Object.entries(E).sort(([,_],[,y])=>y-_).slice(0,3).map(([_,y])=>c.jsxs("div",{className:"flex justify-between text-sm",children:[c.jsx("span",{className:"capitalize",children:_}),c.jsx("span",{className:"text-[hsl(var(--forest-green))] font-medium",children:y})]},_))})()})]}),c.jsxs("div",{children:[c.jsx("h4",{className:"font-medium text-[hsl(var(--dark-slate))] mb-2",children:"Fasce di prezzo"}),c.jsx("div",{className:"space-y-1",children:Array.from(new Set(w.map(x=>x.priceRange))).slice(0,3).map(x=>{const E=w.filter(_=>_.priceRange===x).length;return c.jsxs("div",{className:"flex justify-between text-sm",children:[c.jsx("span",{children:x}),c.jsx("span",{className:"text-[hsl(var(--forest-green))] font-medium",children:E})]},x)})})]}),c.jsxs("div",{children:[c.jsx("h4",{className:"font-medium text-[hsl(var(--dark-slate))] mb-2",children:"Rating medio"}),c.jsxs("div",{className:"text-2xl font-bold text-[hsl(var(--forest-green))]",children:[(w.reduce((x,E)=>x+parseFloat(E.rating),0)/w.length).toFixed(1),c.jsx("span",{className:"text-sm font-normal text-[hsl(var(--dark-slate))]/70 ml-1",children:"/ 5.0"})]}),c.jsx("p",{className:"text-xs text-[hsl(var(--dark-slate))]/60 mt-1",children:"Hai ottimi gusti!"})]})]})]})}),w.length>0&&c.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row gap-4",children:[c.jsx(ca,{href:"/recommended",className:"flex-1",children:c.jsx(de,{variant:"outline",className:"w-full border-[hsl(var(--terracotta))] text-[hsl(var(--terracotta))] hover:bg-[hsl(var(--terracotta))]/10",children:"Scopri ristoranti simili"})}),c.jsx(ca,{href:"/calendar",className:"flex-1",children:c.jsx(de,{className:"w-full bg-[hsl(var(--forest-green))] text-white hover:bg-[hsl(var(--forest-green))]/90",children:"Pianifica una visita"})})]})]})]}),c.jsx(Mg,{restaurant:e,isOpen:r,onClose:()=>{s(!1),n(null)},allowDelete:!0,onDelete:async x=>{try{await g(x),o(E=>E.filter(_=>_.id!==x))}catch{alert("Errore nell'eliminazione del ristorante")}}})]})},E3=oo("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),gb=m.forwardRef(({className:t,variant:e,...n},r)=>c.jsx("div",{ref:r,role:"alert",className:ae(E3({variant:e}),t),...n}));gb.displayName="Alert";const T3=m.forwardRef(({className:t,...e},n)=>c.jsx("h5",{ref:n,className:ae("mb-1 font-medium leading-none tracking-tight",t),...e}));T3.displayName="AlertTitle";const vb=m.forwardRef(({className:t,...e},n)=>c.jsx("div",{ref:n,className:ae("text-sm [&_p]:leading-relaxed",t),...e}));vb.displayName="AlertDescription";var bd="Collapsible",[S3,W3]=ts(bd),[C3,zg]=S3(bd),yb=m.forwardRef((t,e)=>{const{__scopeCollapsible:n,open:r,defaultOpen:s,disabled:i,onOpenChange:o,...a}=t,[u,d]=$i({prop:r,defaultProp:s??!1,onChange:o,caller:bd});return c.jsx(C3,{scope:n,disabled:i,contentId:Ut(),open:u,onOpenToggle:m.useCallback(()=>d(h=>!h),[d]),children:c.jsx(ce.div,{"data-state":$g(u),"data-disabled":i?"":void 0,...a,ref:e})})});yb.displayName=bd;var xb="CollapsibleTrigger",wb=m.forwardRef((t,e)=>{const{__scopeCollapsible:n,...r}=t,s=zg(xb,n);return c.jsx(ce.button,{type:"button","aria-controls":s.contentId,"aria-expanded":s.open||!1,"data-state":$g(s.open),"data-disabled":s.disabled?"":void 0,disabled:s.disabled,...r,ref:e,onClick:le(t.onClick,s.onOpenToggle)})});wb.displayName=xb;var Ug="CollapsibleContent",_b=m.forwardRef((t,e)=>{const{forceMount:n,...r}=t,s=zg(Ug,t.__scopeCollapsible);return c.jsx(hr,{present:n||s.open,children:({present:i})=>c.jsx(b3,{...r,ref:e,present:i})})});_b.displayName=Ug;var b3=m.forwardRef((t,e)=>{const{__scopeCollapsible:n,present:r,children:s,...i}=t,o=zg(Ug,n),[a,u]=m.useState(r),d=m.useRef(null),h=Ne(e,d),p=m.useRef(0),g=p.current,w=m.useRef(0),b=w.current,x=o.open||a,E=m.useRef(x),_=m.useRef(void 0);return m.useEffect(()=>{const y=requestAnimationFrame(()=>E.current=!1);return()=>cancelAnimationFrame(y)},[]),ot(()=>{const y=d.current;if(y){_.current=_.current||{transitionDuration:y.style.transitionDuration,animationName:y.style.animationName},y.style.transitionDuration="0s",y.style.animationName="none";const C=y.getBoundingClientRect();p.current=C.height,w.current=C.width,E.current||(y.style.transitionDuration=_.current.transitionDuration,y.style.animationName=_.current.animationName),u(r)}},[o.open,r]),c.jsx(ce.div,{"data-state":$g(o.open),"data-disabled":o.disabled?"":void 0,id:o.contentId,hidden:!x,...i,ref:h,style:{"--radix-collapsible-content-height":g?`${g}px`:void 0,"--radix-collapsible-content-width":b?`${b}px`:void 0,...t.style},children:x&&s})});function $g(t){return t?"open":"closed"}var R3=yb;const I3=R3,A3=wb,N3=_b,P3=()=>{var Q;const[t,e]=m.useState([""]),[n,r]=m.useState({name:"",cuisines:[],priceRange:"",location:"",description:"",phone:"",address:"",rating:"",locationUser:"",qualitPrezzoUser:"",mediaPrezzo:""}),[s,i]=m.useState(null),[o,a]=m.useState(!1),[u,d]=m.useState(!1),[h,p]=m.useState(!1),[g,w]=m.useState(!1),[b,x]=m.useState([]),[E,_]=m.useState(!0),[y,C]=m.useState(null),{extractRestaurantData:k,createRestaurant:O,getAllRestaurants:D}=qs(),{toast:S}=$u();m.useEffect(()=>{(async()=>{try{_(!0),C(null);const $=(await D()).sort((Z,se)=>se.id-Z.id).slice(0,5);x($)}catch(V){const $=Xt(V);C($),Vt("Caricamento ristoranti recenti",V)}finally{_(!1)}})()},[u]);const T=async()=>{const z=t[0];if(!z||!z.toLowerCase().includes("tripadvisor")){S({title:"URL Non Valido",description:"Inserisci un URL valido di TripAdvisor.",variant:"destructive"});return}try{a(!0),i(null);const V=await k(z);i(V.extracted),S({title:"Estrazione Completata",description:"I dati del ristorante sono stati estratti con successo."})}catch(V){const $=Xt(V);Vt("Estrazione dati ristorante",V),S({title:"Estrazione Fallita",description:$,variant:"destructive"})}finally{a(!1)}},I=()=>{const z=[];return n.locationUser&&(parseFloat(n.locationUser)<0||parseFloat(n.locationUser)>5)&&z.push("Il rating location deve essere tra 0 e 5"),n.qualitPrezzoUser&&(parseFloat(n.qualitPrezzoUser)<0||parseFloat(n.qualitPrezzoUser)>5)&&z.push("Il rating qualit/prezzo deve essere tra 0 e 5"),n.mediaPrezzo&&(parseFloat(n.mediaPrezzo)<0||parseFloat(n.mediaPrezzo)>1e3)&&z.push("Il prezzo medio deve essere tra 0 e 1000 euro"),z},A=async z=>{z.preventDefault();const V=t[0];if(!V){S({title:"URL Mancante",description:"Inserisci almeno un URL di TripAdvisor.",variant:"destructive"});return}const $=s||n;if(!$.cuisines||$.cuisines.length===0){S({title:"Tipi di Cucina Mancanti",description:"Seleziona almeno un tipo di cucina.",variant:"destructive"});return}if(!$.name||!$.priceRange){S({title:"Campi Obbligatori",description:"Compila tutti i campi obbligatori (Nome, Tipi di Cucina, Fascia di Prezzo).",variant:"destructive"});return}const Z=I();if(Z.length>0){S({title:"Valutazioni Non Valide",description:Z.join(". "),variant:"destructive"});return}const se={id:void 0,tripadvisorUrl:V,name:$.name,cuisines:$.cuisines,priceRange:$.priceRange,rating:$.rating||"4.0",location:$.location||"Salento",description:$.description||"Delizioso ristorante con cucina locale",phone:$.phone||void 0,address:$.address||void 0,latitude:$.latitude||"40.3515",longitude:$.longitude||"18.1750",imageUrl:$.imageUrl||void 0,locationUser:n.locationUser?parseFloat(n.locationUser):void 0,qualitPrezzoUser:n.qualitPrezzoUser?parseFloat(n.qualitPrezzoUser):void 0,mediaPrezzo:n.mediaPrezzo?parseFloat(n.mediaPrezzo):void 0};try{p(!0),await O(se),d(!0),P(),setTimeout(()=>d(!1),5e3),S({title:"Ristorante Aggiunto",description:"Il ristorante  stato aggiunto con successo ed  in attesa di approvazione."})}catch(U){const J=Xt(U);Vt("Creazione ristorante",U),S({title:"Errore",description:J,variant:"destructive"})}finally{p(!1)}},P=()=>{e([""]),r({name:"",cuisines:[],priceRange:"",location:"",description:"",phone:"",address:"",rating:"",locationUser:"",qualitPrezzoUser:"",mediaPrezzo:""}),i(null),w(!1)},j=()=>{e([...t,""])},N=z=>{e(t.filter((V,$)=>$!==z))},L=(z,V)=>{const $=[...t];$[z]=V,e($)},G=[{value:"",label:" - Budget"},{value:"",label:" - Moderato"},{value:"",label:" - Costoso"},{value:"",label:" - Fine Dining"}];return c.jsx("main",{className:"min-h-screen",children:c.jsxs("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[c.jsxs("div",{className:"text-center mb-8",children:[c.jsx("h2",{className:"text-3xl font-display font-bold text-[hsl(var(--dark-slate))] mb-4",children:"Aggiungi Nuovo Ristorante"}),c.jsx("p",{className:"text-lg text-[hsl(var(--dark-slate))]/70",children:"Aiuta ad espandere il nostro database con le tue scoperte preferite"})]}),u&&c.jsxs(gb,{className:"mb-6 bg-[hsl(var(--forest-green))]/10 border-[hsl(var(--forest-green))]/20",children:[c.jsx(ja,{className:"w-4 h-4 text-[hsl(var(--forest-green))]"}),c.jsx(vb,{className:"text-[hsl(var(--forest-green))]",children:"Ristorante aggiunto con successo! Apparir nei risultati di ricerca dopo l'approvazione."})]}),c.jsxs(rt,{className:"mb-8",children:[c.jsx(Va,{children:c.jsx(Ma,{className:"text-xl font-display font-semibold text-[hsl(var(--dark-slate))]",children:"Informazioni Ristorante"})}),c.jsx(st,{children:c.jsxs("form",{onSubmit:A,className:"space-y-6",children:[c.jsxs("div",{children:[c.jsxs(Qe,{className:"text-base font-medium text-[hsl(var(--dark-slate))] mb-3 block",children:[c.jsx(lx,{className:"w-4 h-4 inline mr-2 text-[hsl(var(--terracotta))]"}),"URL TripAdvisor *"]}),t.map((z,V)=>c.jsxs("div",{className:"flex gap-2 mb-3",children:[c.jsx(It,{type:"url",placeholder:"https://www.tripadvisor.com/Restaurant_Review-...",value:z,onChange:$=>L(V,$.target.value),className:"flex-1",required:V===0}),V>0&&c.jsx(de,{type:"button",variant:"outline",size:"icon",onClick:()=>N(V),className:"text-red-500 hover:text-red-700",children:c.jsx(Am,{className:"w-4 h-4"})})]},V)),c.jsxs(de,{type:"button",variant:"outline",onClick:j,className:"text-[hsl(var(--terracotta))] hover:text-[hsl(var(--saddle))]",disabled:t.length>=3,children:[c.jsx(Ss,{className:"w-4 h-4 mr-2"}),"Aggiungi Altro URL"]}),c.jsx("p",{className:"text-sm text-[hsl(var(--dark-slate))]/60 mt-2",children:"Copia e incolla l'URL di TripAdvisor del ristorante che vuoi aggiungere"})]}),c.jsx("div",{className:"flex justify-center",children:c.jsxs(de,{type:"button",onClick:T,disabled:o||!t[0],className:"bg-[hsl(var(--terracotta))] text-white hover:bg-[hsl(var(--saddle))]",children:[c.jsx(sP,{className:"w-4 h-4 mr-2"}),o?"Estraendo...":"Estrai Dati"]})}),o&&c.jsxs("div",{className:"flex items-center justify-center p-4 bg-blue-50 rounded-lg",children:[c.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-[hsl(var(--terracotta))] mr-3"}),c.jsx("span",{className:"text-[hsl(var(--dark-slate))]",children:"Estrazione dati in corso da TripAdvisor..."})]}),s&&c.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:[c.jsx("h3",{className:"font-semibold text-green-800 mb-3",children:"Informazioni Estratte:"}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3 text-sm",children:[c.jsxs("div",{children:[c.jsx("strong",{children:"Nome:"})," ",s.name]}),c.jsxs("div",{children:[c.jsx("strong",{children:"Cucine:"})," ",(Q=s.cuisines)==null?void 0:Q.join(", ")]}),c.jsxs("div",{children:[c.jsx("strong",{children:"Prezzo:"})," ",s.priceRange]}),c.jsxs("div",{children:[c.jsx("strong",{children:"Rating:"})," ",s.rating]}),c.jsxs("div",{children:[c.jsx("strong",{children:"Localit:"})," ",s.location]}),c.jsxs("div",{children:[c.jsx("strong",{children:"Telefono:"})," ",s.phone||"Non disponibile"]})]}),s.description&&c.jsxs("div",{className:"mt-3",children:[c.jsx("strong",{children:"Descrizione:"})," ",s.description]})]}),c.jsxs("div",{className:"border-t pt-6",children:[c.jsxs("h3",{className:"text-lg font-display font-semibold text-[hsl(var(--dark-slate))] mb-4",children:["Dettagli Ristorante",s&&c.jsx("span",{className:"text-sm font-normal text-green-600 ml-2",children:"(Modifica i dati estratti se necessario)"})]}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[c.jsxs("div",{children:[c.jsx(Qe,{htmlFor:"restaurant-name",children:"Nome Ristorante *"}),c.jsx(It,{id:"restaurant-name",placeholder:"Nome del ristorante",value:s?s.name:n.name,onChange:z=>{s?i({...s,name:z.target.value}):r(V=>({...V,name:z.target.value}))},required:!0})]}),c.jsxs("div",{children:[c.jsx(Qe,{htmlFor:"rating",children:"Rating *"}),c.jsx(It,{id:"rating",type:"number",min:"1",max:"5",step:"0.1",placeholder:"4.5",value:s?s.rating:n.rating,onChange:z=>{s?i({...s,rating:z.target.value}):r(V=>({...V,rating:z.target.value}))},required:!0})]}),c.jsxs("div",{className:"md:col-span-2",children:[c.jsx(Qe,{htmlFor:"cuisine-types",children:"Tipi di Cucina *"}),c.jsx(mb,{selectedCuisines:s?s.cuisines||[]:n.cuisines,onCuisinesChange:z=>{s?i({...s,cuisines:z}):r(V=>({...V,cuisines:z}))},placeholder:"Aggiungi tipo di cucina...",className:"mt-2"})]}),c.jsxs("div",{children:[c.jsx(Qe,{htmlFor:"price-range",children:"Fascia di Prezzo *"}),c.jsxs(qi,{value:s?s.priceRange:n.priceRange,onValueChange:z=>{s?i({...s,priceRange:z}):r(V=>({...V,priceRange:z}))},required:!0,children:[c.jsx(Vs,{children:c.jsx(Ki,{placeholder:"Seleziona fascia di prezzo"})}),c.jsx(Ms,{children:G.map(z=>c.jsx(Xn,{value:z.value,children:z.label},z.value))})]})]}),c.jsxs("div",{children:[c.jsx(Qe,{htmlFor:"location",children:"Localit *"}),c.jsx(It,{id:"location",placeholder:"es. Lecce Centro, Gallipoli",value:s?s.location:n.location,onChange:z=>{s?i({...s,location:z.target.value}):r(V=>({...V,location:z.target.value}))},required:!0})]}),c.jsxs("div",{children:[c.jsx(Qe,{htmlFor:"phone",children:"Telefono"}),c.jsx(It,{id:"phone",placeholder:"+39 0832 123456",value:s?s.phone||"":n.phone,onChange:z=>{s?i({...s,phone:z.target.value}):r(V=>({...V,phone:z.target.value}))}})]}),c.jsxs("div",{className:"md:col-span-2",children:[c.jsx(Qe,{htmlFor:"address",children:"Indirizzo"}),c.jsx(It,{id:"address",placeholder:"Via Roma 123, Lecce",value:s?s.address||"":n.address,onChange:z=>{s?i({...s,address:z.target.value}):r(V=>({...V,address:z.target.value}))}})]}),c.jsxs("div",{className:"md:col-span-2",children:[c.jsx(Qe,{htmlFor:"description",children:"Descrizione"}),c.jsx(Td,{id:"description",placeholder:"Breve descrizione del ristorante",value:s?s.description||"":n.description,onChange:z=>{s?i({...s,description:z.target.value}):r(V=>({...V,description:z.target.value}))},rows:3})]})]})]}),c.jsx("div",{className:"border-t pt-6",children:c.jsxs(I3,{open:g,onOpenChange:w,children:[c.jsx(A3,{asChild:!0,children:c.jsxs(de,{type:"button",variant:"outline",className:"w-full justify-between text-[hsl(var(--dark-slate))] hover:bg-[hsl(var(--terracotta))]/5",children:[c.jsxs("div",{className:"flex items-center",children:[c.jsx(an,{className:"w-4 h-4 mr-2 text-[hsl(var(--terracotta))]"}),c.jsx("span",{className:"text-lg font-display font-semibold",children:"Valutazioni Utente (Opzionale)"})]}),c.jsx(Im,{className:`w-5 h-5 transition-transform ${g?"rotate-180":""}`})]})}),c.jsxs(N3,{className:"mt-4 space-y-4 p-4 bg-gray-50 rounded-lg",children:[c.jsx("p",{className:"text-sm text-[hsl(var(--dark-slate))]/70 mb-4",children:"Aggiungi le tue valutazioni personali per aiutare altri utenti nella scelta"}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[c.jsxs("div",{children:[c.jsxs(Qe,{htmlFor:"location-rating",className:"flex items-center",children:[c.jsx(Bi,{className:"w-4 h-4 mr-2 text-[hsl(var(--terracotta))]"}),"Rating Location (0-5)"]}),c.jsx(It,{id:"location-rating",type:"number",min:"0",max:"5",step:"0.1",placeholder:"4.2",value:n.locationUser,onChange:z=>r(V=>({...V,locationUser:z.target.value}))}),c.jsx("p",{className:"text-xs text-gray-600 mt-1",children:"Valuta posizione, accessibilit, parcheggio"})]}),c.jsxs("div",{children:[c.jsxs(Qe,{htmlFor:"quality-price-rating",className:"flex items-center",children:[c.jsx(an,{className:"w-4 h-4 mr-2 text-[hsl(var(--terracotta))]"}),"Qualit/Prezzo (0-5)"]}),c.jsx(It,{id:"quality-price-rating",type:"number",min:"0",max:"5",step:"0.1",placeholder:"4.0",value:n.qualitPrezzoUser,onChange:z=>r(V=>({...V,qualitPrezzoUser:z.target.value}))}),c.jsx("p",{className:"text-xs text-gray-600 mt-1",children:"Rapporto qualit vs prezzo pagato"})]}),c.jsxs("div",{children:[c.jsxs(Qe,{htmlFor:"average-price",className:"flex items-center",children:[c.jsx(Hf,{className:"w-4 h-4 mr-2 text-[hsl(var(--terracotta))]"}),"Prezzo Medio ()"]}),c.jsx(It,{id:"average-price",type:"number",min:"0",max:"1000",step:"0.50",placeholder:"25.00",value:n.mediaPrezzo,onChange:z=>r(V=>({...V,mediaPrezzo:z.target.value}))}),c.jsx("p",{className:"text-xs text-gray-600 mt-1",children:"Prezzo medio per persona"})]})]}),c.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3 mt-4",children:c.jsxs("div",{className:"flex items-start",children:[c.jsx(an,{className:"w-5 h-5 text-blue-500 mr-2 mt-0.5 flex-shrink-0"}),c.jsxs("div",{className:"text-sm text-blue-800",children:[c.jsx("strong",{children:"Suggerimento:"})," Le tue valutazioni aiuteranno altri utenti a scegliere il ristorante pi adatto alle loro esigenze. Sii onesto e considera la tua esperienza complessiva."]})]})})]})]})}),c.jsxs("div",{className:"flex justify-end space-x-4 pt-6 border-t",children:[c.jsx(de,{type:"button",variant:"outline",onClick:P,className:"border-gray-300 text-gray-700 hover:bg-gray-50",children:"Resetta Form"}),c.jsxs(de,{type:"submit",disabled:h||!t[0],className:"bg-[hsl(var(--terracotta))] text-white hover:bg-[hsl(var(--saddle))]",children:[c.jsx(Ss,{className:"w-4 h-4 mr-2"}),h?"Aggiungendo...":"Aggiungi Ristorante"]})]})]})})]}),c.jsxs(rt,{children:[c.jsx(Va,{children:c.jsx(Ma,{className:"text-2xl font-display font-semibold text-[hsl(var(--dark-slate))]",children:"Aggiunte Recenti"})}),c.jsx(st,{children:E?c.jsxs("div",{className:"flex items-center justify-center py-8",children:[c.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-[hsl(var(--terracotta))] mr-3"}),c.jsx("span",{className:"text-[hsl(var(--dark-slate))]/70",children:"Caricamento..."})]}):y?c.jsxs("p",{className:"text-red-500 text-center py-8",children:["Errore nel caricamento: ",y]}):b.length===0?c.jsx("p",{className:"text-[hsl(var(--dark-slate))]/70 text-center py-8",children:"Nessuna aggiunta recente. Sii il primo ad aggiungere un ristorante!"}):c.jsx("div",{className:"space-y-4",children:b.map(z=>{const V=Array.isArray(z.cuisines)?z.cuisines:[z.cuisines];return c.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg hover:bg-gray-50 transition-colors",children:[c.jsxs("div",{className:"flex items-center",children:[c.jsx("div",{className:"bg-[hsl(var(--terracotta))]/10 text-[hsl(var(--terracotta))] rounded-lg p-3 mr-4",children:c.jsx(Ss,{className:"w-5 h-5"})}),c.jsxs("div",{children:[c.jsx("h4",{className:"font-semibold text-[hsl(var(--dark-slate))]",children:z.name}),c.jsxs("p",{className:"text-[hsl(var(--dark-slate))]/70",children:["Aggiunto di recente  ",V.join(", "),"  ",z.priceRange]}),c.jsxs("p",{className:"text-[hsl(var(--dark-slate))]/60 text-sm",children:[z.location,(z.locationUser||z.qualitPrezzoUser||z.mediaPrezzo)&&c.jsx("span",{className:"ml-2 text-[hsl(var(--terracotta))]",children:" Valutazioni utente aggiunte"})]})]})]}),c.jsxs("div",{className:"text-right",children:[c.jsx("span",{className:`text-sm font-medium inline-flex items-center ${z.isApproved?"text-[hsl(var(--forest-green))]":"text-[hsl(var(--goldenrod))]"}`,children:z.isApproved?c.jsxs(c.Fragment,{children:[c.jsx(ja,{className:"w-4 h-4 mr-1"}),"Approvato"]}):c.jsxs(c.Fragment,{children:[c.jsx(rl,{className:"w-4 h-4 mr-1"}),"In Revisione"]})}),c.jsxs("div",{className:"text-xs text-[hsl(var(--dark-slate))]/50 mt-1",children:["Rating: ",z.rating,z.locationUser&&c.jsxs("span",{className:"ml-2",children:[" Pos: ",z.locationUser.toFixed(1)]}),z.mediaPrezzo&&c.jsxs("span",{className:"ml-2",children:[" ",z.mediaPrezzo.toFixed(2)]})]})]})]},z.id)})})})]}),c.jsx(rt,{className:"mt-8 bg-[hsl(var(--terracotta))]/5 border-[hsl(var(--terracotta))]/20",children:c.jsx(st,{className:"p-6",children:c.jsxs("div",{className:"flex items-start",children:[c.jsx(lx,{className:"w-6 h-6 text-[hsl(var(--terracotta))] mr-3 mt-1 flex-shrink-0"}),c.jsxs("div",{children:[c.jsx("h3",{className:"font-semibold text-[hsl(var(--dark-slate))] mb-2",children:"Come Aggiungere un Ristorante"}),c.jsxs("ul",{className:"text-[hsl(var(--dark-slate))]/70 space-y-1 text-sm",children:[c.jsx("li",{children:" Trova il ristorante su TripAdvisor"}),c.jsx("li",{children:" Copia l'URL della pagina del ristorante"}),c.jsx("li",{children:` Incolla l'URL nel campo sopra e clicca "Estrai Dati"`}),c.jsx("li",{children:" Controlla e modifica le informazioni se necessario"}),c.jsx("li",{children:" Seleziona i tipi di cucina appropriati"}),c.jsxs("li",{children:[" ",c.jsx("strong",{children:"Opzionale:"})," Aggiungi le tue valutazioni personali"]}),c.jsx("li",{children:' Clicca "Aggiungi Ristorante" per salvare'})]}),c.jsx("p",{className:"text-[hsl(var(--dark-slate))]/60 text-xs mt-3",children:"Tutti i ristoranti aggiunti vengono revisionati prima di apparire nel database pubblico. Le valutazioni utente aiutano la community a fare scelte pi informate."})]})]})})})]})})};function k3(){return c.jsx("div",{className:"min-h-screen w-full flex items-center justify-center bg-gray-50",children:c.jsx(rt,{className:"w-full max-w-md mx-4",children:c.jsxs(st,{className:"pt-6",children:[c.jsxs("div",{className:"flex mb-4 gap-2",children:[c.jsx(tP,{className:"h-8 w-8 text-red-500"}),c.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"404 Page Not Found"})]}),c.jsx("p",{className:"mt-4 text-sm text-gray-600",children:"Did you forget to add the page to the router?"})]})})})}function j3(){return c.jsxs(T2,{children:[c.jsxs("div",{className:"min-h-screen bg-[hsl(var(--warm-beige))]",children:[c.jsx(jj,{}),c.jsxs(JA,{children:[c.jsx(Js,{path:"/",component:g3}),c.jsx(Js,{path:"/recommended",component:y3}),c.jsx(Js,{path:"/calendar",component:w3}),c.jsx(Js,{path:"/favorites",component:_3}),c.jsx(Js,{path:"/add-restaurant",component:P3}),c.jsx(Js,{component:k3})]})]}),c.jsx(QP,{})]})}const D3=()=>{const t=()=>window.location.hash.replace("#","")||"/",[e,n]=m.useState(t());return m.useEffect(()=>{const s=()=>n(t());return window.addEventListener("hashchange",s),()=>window.removeEventListener("hashchange",s)},[]),[e,s=>{window.location.hash=s}]};uE(document.getElementById("root")).render(c.jsx(_E,{hook:D3,children:c.jsx(j3,{})}));
